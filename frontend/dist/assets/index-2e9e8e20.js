(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ha={exports:{}},Ds={},Va={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Er=Symbol.for("react.element"),xd=Symbol.for("react.portal"),wd=Symbol.for("react.fragment"),kd=Symbol.for("react.strict_mode"),jd=Symbol.for("react.profiler"),Sd=Symbol.for("react.provider"),Cd=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),Ed=Symbol.for("react.suspense"),_d=Symbol.for("react.memo"),Td=Symbol.for("react.lazy"),Ei=Symbol.iterator;function Ld(e){return e===null||typeof e!="object"?null:(e=Ei&&e[Ei]||e["@@iterator"],typeof e=="function"?e:null)}var Wa={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qa=Object.assign,Ja={};function zn(e,t,n){this.props=e,this.context=t,this.refs=Ja,this.updater=n||Wa}zn.prototype.isReactComponent={};zn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ka(){}Ka.prototype=zn.prototype;function kl(e,t,n){this.props=e,this.context=t,this.refs=Ja,this.updater=n||Wa}var jl=kl.prototype=new Ka;jl.constructor=kl;Qa(jl,zn.prototype);jl.isPureReactComponent=!0;var _i=Array.isArray,Ga=Object.prototype.hasOwnProperty,Sl={current:null},Ya={key:!0,ref:!0,__self:!0,__source:!0};function Xa(e,t,n){var r,s={},l=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Ga.call(t,r)&&!Ya.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Er,type:e,key:l,ref:i,props:s,_owner:Sl.current}}function Pd(e,t){return{$$typeof:Er,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Er}function bd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ti=/\/+/g;function Ys(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bd(""+e.key):t.toString(36)}function Xr(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Er:case xd:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Ys(i,0):r,_i(s)?(n="",e!=null&&(n=e.replace(Ti,"$&/")+"/"),Xr(s,t,n,"",function(u){return u})):s!=null&&(Cl(s)&&(s=Pd(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ti,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",_i(e))for(var a=0;a<e.length;a++){l=e[a];var c=r+Ys(l,a);i+=Xr(l,t,n,c,s)}else if(c=Ld(e),typeof c=="function")for(e=c.call(e),a=0;!(l=e.next()).done;)l=l.value,c=r+Ys(l,a++),i+=Xr(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Dr(e,t,n){if(e==null)return e;var r=[],s=0;return Xr(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Od(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ne={current:null},Zr={transition:null},Dd={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Zr,ReactCurrentOwner:Sl};function Za(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:Dr,forEach:function(e,t,n){Dr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Dr(e,function(){t++}),t},toArray:function(e){return Dr(e,function(t){return t})||[]},only:function(e){if(!Cl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=zn;F.Fragment=wd;F.Profiler=jd;F.PureComponent=kl;F.StrictMode=kd;F.Suspense=Ed;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dd;F.act=Za;F.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qa({},e.props),s=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Sl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Ga.call(t,c)&&!Ya.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Er,type:e.type,key:s,ref:l,props:r,_owner:i}};F.createContext=function(e){return e={$$typeof:Cd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sd,_context:e},e.Consumer=e};F.createElement=Xa;F.createFactory=function(e){var t=Xa.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:Nd,render:e}};F.isValidElement=Cl;F.lazy=function(e){return{$$typeof:Td,_payload:{_status:-1,_result:e},_init:Od}};F.memo=function(e,t){return{$$typeof:_d,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=Zr.transition;Zr.transition={};try{e()}finally{Zr.transition=t}};F.unstable_act=Za;F.useCallback=function(e,t){return Ne.current.useCallback(e,t)};F.useContext=function(e){return Ne.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return Ne.current.useDeferredValue(e)};F.useEffect=function(e,t){return Ne.current.useEffect(e,t)};F.useId=function(){return Ne.current.useId()};F.useImperativeHandle=function(e,t,n){return Ne.current.useImperativeHandle(e,t,n)};F.useInsertionEffect=function(e,t){return Ne.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return Ne.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return Ne.current.useMemo(e,t)};F.useReducer=function(e,t,n){return Ne.current.useReducer(e,t,n)};F.useRef=function(e){return Ne.current.useRef(e)};F.useState=function(e){return Ne.current.useState(e)};F.useSyncExternalStore=function(e,t,n){return Ne.current.useSyncExternalStore(e,t,n)};F.useTransition=function(){return Ne.current.useTransition()};F.version="18.3.1";Va.exports=F;var N=Va.exports;const cn=vd(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=N,zd=Symbol.for("react.element"),Id=Symbol.for("react.fragment"),Md=Object.prototype.hasOwnProperty,Fd=Ad.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rd={key:!0,ref:!0,__self:!0,__source:!0};function qa(e,t,n){var r,s={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Md.call(t,r)&&!Rd.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:zd,type:e,key:l,ref:i,props:s,_owner:Fd.current}}Ds.Fragment=Id;Ds.jsx=qa;Ds.jsxs=qa;Ha.exports=Ds;var o=Ha.exports,Eo={},ec={exports:{}},Fe={},tc={exports:{}},nc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,D){var M=O.length;O.push(D);e:for(;0<M;){var Z=M-1>>>1,oe=O[Z];if(0<s(oe,D))O[Z]=D,O[M]=oe,M=Z;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var D=O[0],M=O.pop();if(M!==D){O[0]=M;e:for(var Z=0,oe=O.length,sn=oe>>>1;Z<sn;){var $e=2*(Z+1)-1,$n=O[$e],Ke=$e+1,on=O[Ke];if(0>s($n,M))Ke<oe&&0>s(on,$n)?(O[Z]=on,O[Ke]=M,Z=Ke):(O[Z]=$n,O[$e]=M,Z=$e);else if(Ke<oe&&0>s(on,M))O[Z]=on,O[Ke]=M,Z=Ke;else break e}}return D}function s(O,D){var M=O.sortIndex-D.sortIndex;return M!==0?M:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var c=[],u=[],h=1,w=null,v=3,y=!1,g=!1,S=!1,L=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(O){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=O)r(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function x(O){if(S=!1,m(O),!g)if(n(c)!==null)g=!0,Ht(k);else{var D=n(u);D!==null&&jt(x,D.startTime-O)}}function k(O,D){g=!1,S&&(S=!1,f(b),b=-1),y=!0;var M=v;try{for(m(D),w=n(c);w!==null&&(!(w.expirationTime>D)||O&&!K());){var Z=w.callback;if(typeof Z=="function"){w.callback=null,v=w.priorityLevel;var oe=Z(w.expirationTime<=D);D=e.unstable_now(),typeof oe=="function"?w.callback=oe:w===n(c)&&r(c),m(D)}else r(c);w=n(c)}if(w!==null)var sn=!0;else{var $e=n(u);$e!==null&&jt(x,$e.startTime-D),sn=!1}return sn}finally{w=null,v=M,y=!1}}var C=!1,E=null,b=-1,$=5,P=-1;function K(){return!(e.unstable_now()-P<$)}function re(){if(E!==null){var O=e.unstable_now();P=O;var D=!0;try{D=E(!0,O)}finally{D?De():(C=!1,E=null)}}else C=!1}var De;if(typeof d=="function")De=function(){d(re)};else if(typeof MessageChannel<"u"){var kt=new MessageChannel,Rn=kt.port2;kt.port1.onmessage=re,De=function(){Rn.postMessage(null)}}else De=function(){L(re,0)};function Ht(O){E=O,C||(C=!0,De())}function jt(O,D){b=L(function(){O(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,Ht(k))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var M=v;v=D;try{return O()}finally{v=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var M=v;v=O;try{return D()}finally{v=M}},e.unstable_scheduleCallback=function(O,D,M){var Z=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Z+M:Z):M=Z,O){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=M+oe,O={id:h++,callback:D,priorityLevel:O,startTime:M,expirationTime:oe,sortIndex:-1},M>Z?(O.sortIndex=M,t(u,O),n(c)===null&&O===n(u)&&(S?(f(b),b=-1):S=!0,jt(x,M-Z))):(O.sortIndex=oe,t(c,O),g||y||(g=!0,Ht(k))),O},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(O){var D=v;return function(){var M=v;v=D;try{return O.apply(this,arguments)}finally{v=M}}}})(nc);tc.exports=nc;var $d=tc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=N,Me=$d;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rc=new Set,ar={};function nn(e,t){Tn(e,t),Tn(e+"Capture",t)}function Tn(e,t){for(ar[e]=t,e=0;e<t.length;e++)rc.add(t[e])}var gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=Object.prototype.hasOwnProperty,Bd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Li={},Pi={};function Hd(e){return _o.call(Pi,e)?!0:_o.call(Li,e)?!1:Bd.test(e)?Pi[e]=!0:(Li[e]=!0,!1)}function Vd(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wd(e,t,n,r){if(t===null||typeof t>"u"||Vd(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ee(e,t,n,r,s,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ye[e]=new Ee(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ye[t]=new Ee(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ye[e]=new Ee(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ye[e]=new Ee(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ye[e]=new Ee(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ye[e]=new Ee(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ye[e]=new Ee(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ye[e]=new Ee(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ye[e]=new Ee(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nl=/[\-:]([a-z])/g;function El(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nl,El);ye[t]=new Ee(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nl,El);ye[t]=new Ee(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nl,El);ye[t]=new Ee(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ye[e]=new Ee(e,1,!1,e.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ye[e]=new Ee(e,1,!1,e.toLowerCase(),null,!0,!0)});function _l(e,t,n,r){var s=ye.hasOwnProperty(t)?ye[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wd(t,n,s,r)&&(n=null),r||s===null?Hd(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wt=Ud.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ar=Symbol.for("react.element"),un=Symbol.for("react.portal"),dn=Symbol.for("react.fragment"),Tl=Symbol.for("react.strict_mode"),To=Symbol.for("react.profiler"),sc=Symbol.for("react.provider"),oc=Symbol.for("react.context"),Ll=Symbol.for("react.forward_ref"),Lo=Symbol.for("react.suspense"),Po=Symbol.for("react.suspense_list"),Pl=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),lc=Symbol.for("react.offscreen"),bi=Symbol.iterator;function Un(e){return e===null||typeof e!="object"?null:(e=bi&&e[bi]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,Xs;function Gn(e){if(Xs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xs=t&&t[1]||""}return`
`+Xs+e}var Zs=!1;function qs(e,t){if(!e||Zs)return"";Zs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),i=s.length-1,a=l.length-1;1<=i&&0<=a&&s[i]!==l[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==l[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==l[a]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a);break}}}finally{Zs=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gn(e):""}function Qd(e){switch(e.tag){case 5:return Gn(e.type);case 16:return Gn("Lazy");case 13:return Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 2:case 15:return e=qs(e.type,!1),e;case 11:return e=qs(e.type.render,!1),e;case 1:return e=qs(e.type,!0),e;default:return""}}function bo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dn:return"Fragment";case un:return"Portal";case To:return"Profiler";case Tl:return"StrictMode";case Lo:return"Suspense";case Po:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oc:return(e.displayName||"Context")+".Consumer";case sc:return(e._context.displayName||"Context")+".Provider";case Ll:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pl:return t=e.displayName||null,t!==null?t:bo(e.type)||"Memo";case Ct:t=e._payload,e=e._init;try{return bo(e(t))}catch{}}return null}function Jd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bo(t);case 8:return t===Tl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ft(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ic(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Kd(e){var t=ic(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zr(e){e._valueTracker||(e._valueTracker=Kd(e))}function ac(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ic(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oo(e,t){var n=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Oi(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ft(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cc(e,t){t=t.checked,t!=null&&_l(e,"checked",t,!1)}function Do(e,t){cc(e,t);var n=Ft(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ao(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ao(e,t.type,Ft(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Di(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ao(e,t,n){(t!=="number"||cs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yn=Array.isArray;function jn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ft(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ai(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(Yn(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ft(n)}}function uc(e,t){var n=Ft(t.value),r=Ft(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zi(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Io(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ir,fc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ir.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gd=["Webkit","ms","Moz","O"];Object.keys(qn).forEach(function(e){Gd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qn[t]=qn[e]})});function pc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qn.hasOwnProperty(e)&&qn[e]?(""+t).trim():t+"px"}function hc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Yd=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mo(e,t){if(t){if(Yd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Fo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=null;function bl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $o=null,Sn=null,Cn=null;function Ii(e){if(e=Lr(e)){if(typeof $o!="function")throw Error(_(280));var t=e.stateNode;t&&(t=Fs(t),$o(e.stateNode,e.type,t))}}function mc(e){Sn?Cn?Cn.push(e):Cn=[e]:Sn=e}function gc(){if(Sn){var e=Sn,t=Cn;if(Cn=Sn=null,Ii(e),t)for(e=0;e<t.length;e++)Ii(t[e])}}function yc(e,t){return e(t)}function vc(){}var eo=!1;function xc(e,t,n){if(eo)return e(t,n);eo=!0;try{return yc(e,t,n)}finally{eo=!1,(Sn!==null||Cn!==null)&&(vc(),gc())}}function ur(e,t){var n=e.stateNode;if(n===null)return null;var r=Fs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var Uo=!1;if(gt)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{Uo=!1}function Xd(e,t,n,r,s,l,i,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var er=!1,us=null,ds=!1,Bo=null,Zd={onError:function(e){er=!0,us=e}};function qd(e,t,n,r,s,l,i,a,c){er=!1,us=null,Xd.apply(Zd,arguments)}function ef(e,t,n,r,s,l,i,a,c){if(qd.apply(this,arguments),er){if(er){var u=us;er=!1,us=null}else throw Error(_(198));ds||(ds=!0,Bo=u)}}function rn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mi(e){if(rn(e)!==e)throw Error(_(188))}function tf(e){var t=e.alternate;if(!t){if(t=rn(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Mi(s),e;if(l===r)return Mi(s),t;l=l.sibling}throw Error(_(188))}if(n.return!==r.return)n=s,r=l;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=l;break}if(a===r){i=!0,r=s,n=l;break}a=a.sibling}if(!i){for(a=l.child;a;){if(a===n){i=!0,n=l,r=s;break}if(a===r){i=!0,r=l,n=s;break}a=a.sibling}if(!i)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function kc(e){return e=tf(e),e!==null?jc(e):null}function jc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jc(e);if(t!==null)return t;e=e.sibling}return null}var Sc=Me.unstable_scheduleCallback,Fi=Me.unstable_cancelCallback,nf=Me.unstable_shouldYield,rf=Me.unstable_requestPaint,le=Me.unstable_now,sf=Me.unstable_getCurrentPriorityLevel,Ol=Me.unstable_ImmediatePriority,Cc=Me.unstable_UserBlockingPriority,fs=Me.unstable_NormalPriority,of=Me.unstable_LowPriority,Nc=Me.unstable_IdlePriority,As=null,it=null;function lf(e){if(it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(As,e,void 0,(e.current.flags&128)===128)}catch{}}var qe=Math.clz32?Math.clz32:uf,af=Math.log,cf=Math.LN2;function uf(e){return e>>>=0,e===0?32:31-(af(e)/cf|0)|0}var Mr=64,Fr=4194304;function Xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ps(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Xn(a):(l&=i,l!==0&&(r=Xn(l)))}else i=n&~s,i!==0?r=Xn(i):l!==0&&(r=Xn(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qe(t),s=1<<n,r|=e[n],t&=~s;return r}function df(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ff(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-qe(l),a=1<<i,c=s[i];c===-1?(!(a&n)||a&r)&&(s[i]=df(a,t)):c<=t&&(e.expiredLanes|=a),l&=~a}}function Ho(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ec(){var e=Mr;return Mr<<=1,!(Mr&4194240)&&(Mr=64),e}function to(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _r(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qe(t),e[t]=n}function pf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-qe(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function Dl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Q=0;function _c(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tc,Al,Lc,Pc,bc,Vo=!1,Rr=[],Pt=null,bt=null,Ot=null,dr=new Map,fr=new Map,Et=[],hf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ri(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":dr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(t.pointerId)}}function Hn(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Lr(t),t!==null&&Al(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function mf(e,t,n,r,s){switch(t){case"focusin":return Pt=Hn(Pt,e,t,n,r,s),!0;case"dragenter":return bt=Hn(bt,e,t,n,r,s),!0;case"mouseover":return Ot=Hn(Ot,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return dr.set(l,Hn(dr.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,fr.set(l,Hn(fr.get(l)||null,e,t,n,r,s)),!0}return!1}function Oc(e){var t=Qt(e.target);if(t!==null){var n=rn(t);if(n!==null){if(t=n.tag,t===13){if(t=wc(n),t!==null){e.blockedOn=t,bc(e.priority,function(){Lc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ro=r,n.target.dispatchEvent(r),Ro=null}else return t=Lr(n),t!==null&&Al(t),e.blockedOn=n,!1;t.shift()}return!0}function $i(e,t,n){qr(e)&&n.delete(t)}function gf(){Vo=!1,Pt!==null&&qr(Pt)&&(Pt=null),bt!==null&&qr(bt)&&(bt=null),Ot!==null&&qr(Ot)&&(Ot=null),dr.forEach($i),fr.forEach($i)}function Vn(e,t){e.blockedOn===t&&(e.blockedOn=null,Vo||(Vo=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,gf)))}function pr(e){function t(s){return Vn(s,e)}if(0<Rr.length){Vn(Rr[0],e);for(var n=1;n<Rr.length;n++){var r=Rr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pt!==null&&Vn(Pt,e),bt!==null&&Vn(bt,e),Ot!==null&&Vn(Ot,e),dr.forEach(t),fr.forEach(t),n=0;n<Et.length;n++)r=Et[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Et.length&&(n=Et[0],n.blockedOn===null);)Oc(n),n.blockedOn===null&&Et.shift()}var Nn=wt.ReactCurrentBatchConfig,hs=!0;function yf(e,t,n,r){var s=Q,l=Nn.transition;Nn.transition=null;try{Q=1,zl(e,t,n,r)}finally{Q=s,Nn.transition=l}}function vf(e,t,n,r){var s=Q,l=Nn.transition;Nn.transition=null;try{Q=4,zl(e,t,n,r)}finally{Q=s,Nn.transition=l}}function zl(e,t,n,r){if(hs){var s=Wo(e,t,n,r);if(s===null)fo(e,t,r,ms,n),Ri(e,r);else if(mf(s,e,t,n,r))r.stopPropagation();else if(Ri(e,r),t&4&&-1<hf.indexOf(e)){for(;s!==null;){var l=Lr(s);if(l!==null&&Tc(l),l=Wo(e,t,n,r),l===null&&fo(e,t,r,ms,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else fo(e,t,r,null,n)}}var ms=null;function Wo(e,t,n,r){if(ms=null,e=bl(r),e=Qt(e),e!==null)if(t=rn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ms=e,null}function Dc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sf()){case Ol:return 1;case Cc:return 4;case fs:case of:return 16;case Nc:return 536870912;default:return 16}default:return 16}}var Tt=null,Il=null,es=null;function Ac(){if(es)return es;var e,t=Il,n=t.length,r,s="value"in Tt?Tt.value:Tt.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[l-r];r++);return es=s.slice(e,1<r?1-r:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $r(){return!0}function Ui(){return!1}function Re(e){function t(n,r,s,l,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$r:Ui,this.isPropagationStopped=Ui,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=Re(In),Tr=ne({},In,{view:0,detail:0}),xf=Re(Tr),no,ro,Wn,zs=ne({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(no=e.screenX-Wn.screenX,ro=e.screenY-Wn.screenY):ro=no=0,Wn=e),no)},movementY:function(e){return"movementY"in e?e.movementY:ro}}),Bi=Re(zs),wf=ne({},zs,{dataTransfer:0}),kf=Re(wf),jf=ne({},Tr,{relatedTarget:0}),so=Re(jf),Sf=ne({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Cf=Re(Sf),Nf=ne({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ef=Re(Nf),_f=ne({},In,{data:0}),Hi=Re(_f),Tf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pf[e])?!!t[e]:!1}function Fl(){return bf}var Of=ne({},Tr,{key:function(e){if(e.key){var t=Tf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ts(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(e){return e.type==="keypress"?ts(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ts(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Df=Re(Of),Af=ne({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=Re(Af),zf=ne({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),If=Re(zf),Mf=ne({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ff=Re(Mf),Rf=ne({},zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$f=Re(Rf),Uf=[9,13,27,32],Rl=gt&&"CompositionEvent"in window,tr=null;gt&&"documentMode"in document&&(tr=document.documentMode);var Bf=gt&&"TextEvent"in window&&!tr,zc=gt&&(!Rl||tr&&8<tr&&11>=tr),Wi=String.fromCharCode(32),Qi=!1;function Ic(e,t){switch(e){case"keyup":return Uf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fn=!1;function Hf(e,t){switch(e){case"compositionend":return Mc(t);case"keypress":return t.which!==32?null:(Qi=!0,Wi);case"textInput":return e=t.data,e===Wi&&Qi?null:e;default:return null}}function Vf(e,t){if(fn)return e==="compositionend"||!Rl&&Ic(e,t)?(e=Ac(),es=Il=Tt=null,fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zc&&t.locale!=="ko"?null:t.data;default:return null}}var Wf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wf[e.type]:t==="textarea"}function Fc(e,t,n,r){mc(r),t=gs(t,"onChange"),0<t.length&&(n=new Ml("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nr=null,hr=null;function Qf(e){Gc(e,0)}function Is(e){var t=mn(e);if(ac(t))return e}function Jf(e,t){if(e==="change")return t}var Rc=!1;if(gt){var oo;if(gt){var lo="oninput"in document;if(!lo){var Ki=document.createElement("div");Ki.setAttribute("oninput","return;"),lo=typeof Ki.oninput=="function"}oo=lo}else oo=!1;Rc=oo&&(!document.documentMode||9<document.documentMode)}function Gi(){nr&&(nr.detachEvent("onpropertychange",$c),hr=nr=null)}function $c(e){if(e.propertyName==="value"&&Is(hr)){var t=[];Fc(t,hr,e,bl(e)),xc(Qf,t)}}function Kf(e,t,n){e==="focusin"?(Gi(),nr=t,hr=n,nr.attachEvent("onpropertychange",$c)):e==="focusout"&&Gi()}function Gf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Is(hr)}function Yf(e,t){if(e==="click")return Is(t)}function Xf(e,t){if(e==="input"||e==="change")return Is(t)}function Zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tt=typeof Object.is=="function"?Object.is:Zf;function mr(e,t){if(tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_o.call(t,s)||!tt(e[s],t[s]))return!1}return!0}function Yi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xi(e,t){var n=Yi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yi(n)}}function Uc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bc(){for(var e=window,t=cs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=cs(e.document)}return t}function $l(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qf(e){var t=Bc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Uc(n.ownerDocument.documentElement,n)){if(r!==null&&$l(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Xi(n,l);var i=Xi(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ep=gt&&"documentMode"in document&&11>=document.documentMode,pn=null,Qo=null,rr=null,Jo=!1;function Zi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jo||pn==null||pn!==cs(r)||(r=pn,"selectionStart"in r&&$l(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rr&&mr(rr,r)||(rr=r,r=gs(Qo,"onSelect"),0<r.length&&(t=new Ml("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pn)))}function Ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hn={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionend:Ur("Transition","TransitionEnd")},io={},Hc={};gt&&(Hc=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function Ms(e){if(io[e])return io[e];if(!hn[e])return e;var t=hn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Hc)return io[e]=t[n];return e}var Vc=Ms("animationend"),Wc=Ms("animationiteration"),Qc=Ms("animationstart"),Jc=Ms("transitionend"),Kc=new Map,qi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $t(e,t){Kc.set(e,t),nn(t,[e])}for(var ao=0;ao<qi.length;ao++){var co=qi[ao],tp=co.toLowerCase(),np=co[0].toUpperCase()+co.slice(1);$t(tp,"on"+np)}$t(Vc,"onAnimationEnd");$t(Wc,"onAnimationIteration");$t(Qc,"onAnimationStart");$t("dblclick","onDoubleClick");$t("focusin","onFocus");$t("focusout","onBlur");$t(Jc,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zn));function ea(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ef(r,t,void 0,e),e.currentTarget=null}function Gc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==l&&s.isPropagationStopped())break e;ea(s,a,u),l=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,u=a.currentTarget,a=a.listener,c!==l&&s.isPropagationStopped())break e;ea(s,a,u),l=c}}}if(ds)throw e=Bo,ds=!1,Bo=null,e}function G(e,t){var n=t[Zo];n===void 0&&(n=t[Zo]=new Set);var r=e+"__bubble";n.has(r)||(Yc(t,e,2,!1),n.add(r))}function uo(e,t,n){var r=0;t&&(r|=4),Yc(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function gr(e){if(!e[Br]){e[Br]=!0,rc.forEach(function(n){n!=="selectionchange"&&(rp.has(n)||uo(n,!1,e),uo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Br]||(t[Br]=!0,uo("selectionchange",!1,t))}}function Yc(e,t,n,r){switch(Dc(t)){case 1:var s=yf;break;case 4:s=vf;break;default:s=zl}n=s.bind(null,t,n,e),s=void 0,!Uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function fo(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Qt(a),i===null)return;if(c=i.tag,c===5||c===6){r=l=i;continue e}a=a.parentNode}}r=r.return}xc(function(){var u=l,h=bl(n),w=[];e:{var v=Kc.get(e);if(v!==void 0){var y=Ml,g=e;switch(e){case"keypress":if(ts(n)===0)break e;case"keydown":case"keyup":y=Df;break;case"focusin":g="focus",y=so;break;case"focusout":g="blur",y=so;break;case"beforeblur":case"afterblur":y=so;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=If;break;case Vc:case Wc:case Qc:y=Cf;break;case Jc:y=Ff;break;case"scroll":y=xf;break;case"wheel":y=$f;break;case"copy":case"cut":case"paste":y=Ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Vi}var S=(t&4)!==0,L=!S&&e==="scroll",f=S?v!==null?v+"Capture":null:v;S=[];for(var d=u,m;d!==null;){m=d;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,f!==null&&(x=ur(d,f),x!=null&&S.push(yr(d,x,m)))),L)break;d=d.return}0<S.length&&(v=new y(v,g,null,n,h),w.push({event:v,listeners:S}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&n!==Ro&&(g=n.relatedTarget||n.fromElement)&&(Qt(g)||g[yt]))break e;if((y||v)&&(v=h.window===h?h:(v=h.ownerDocument)?v.defaultView||v.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=u,g=g?Qt(g):null,g!==null&&(L=rn(g),g!==L||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(S=Bi,x="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(S=Vi,x="onPointerLeave",f="onPointerEnter",d="pointer"),L=y==null?v:mn(y),m=g==null?v:mn(g),v=new S(x,d+"leave",y,n,h),v.target=L,v.relatedTarget=m,x=null,Qt(h)===u&&(S=new S(f,d+"enter",g,n,h),S.target=m,S.relatedTarget=L,x=S),L=x,y&&g)t:{for(S=y,f=g,d=0,m=S;m;m=ln(m))d++;for(m=0,x=f;x;x=ln(x))m++;for(;0<d-m;)S=ln(S),d--;for(;0<m-d;)f=ln(f),m--;for(;d--;){if(S===f||f!==null&&S===f.alternate)break t;S=ln(S),f=ln(f)}S=null}else S=null;y!==null&&ta(w,v,y,S,!1),g!==null&&L!==null&&ta(w,L,g,S,!0)}}e:{if(v=u?mn(u):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var k=Jf;else if(Ji(v))if(Rc)k=Xf;else{k=Gf;var C=Kf}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(k=Yf);if(k&&(k=k(e,u))){Fc(w,k,n,h);break e}C&&C(e,v,u),e==="focusout"&&(C=v._wrapperState)&&C.controlled&&v.type==="number"&&Ao(v,"number",v.value)}switch(C=u?mn(u):window,e){case"focusin":(Ji(C)||C.contentEditable==="true")&&(pn=C,Qo=u,rr=null);break;case"focusout":rr=Qo=pn=null;break;case"mousedown":Jo=!0;break;case"contextmenu":case"mouseup":case"dragend":Jo=!1,Zi(w,n,h);break;case"selectionchange":if(ep)break;case"keydown":case"keyup":Zi(w,n,h)}var E;if(Rl)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else fn?Ic(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(zc&&n.locale!=="ko"&&(fn||b!=="onCompositionStart"?b==="onCompositionEnd"&&fn&&(E=Ac()):(Tt=h,Il="value"in Tt?Tt.value:Tt.textContent,fn=!0)),C=gs(u,b),0<C.length&&(b=new Hi(b,e,null,n,h),w.push({event:b,listeners:C}),E?b.data=E:(E=Mc(n),E!==null&&(b.data=E)))),(E=Bf?Hf(e,n):Vf(e,n))&&(u=gs(u,"onBeforeInput"),0<u.length&&(h=new Hi("onBeforeInput","beforeinput",null,n,h),w.push({event:h,listeners:u}),h.data=E))}Gc(w,t)})}function yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ur(e,n),l!=null&&r.unshift(yr(e,l,s)),l=ur(e,t),l!=null&&r.push(yr(e,l,s))),e=e.return}return r}function ln(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ta(e,t,n,r,s){for(var l=t._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=ur(n,l),c!=null&&i.unshift(yr(n,c,a))):s||(c=ur(n,l),c!=null&&i.push(yr(n,c,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var sp=/\r\n?/g,op=/\u0000|\uFFFD/g;function na(e){return(typeof e=="string"?e:""+e).replace(sp,`
`).replace(op,"")}function Hr(e,t,n){if(t=na(t),na(e)!==t&&n)throw Error(_(425))}function ys(){}var Ko=null,Go=null;function Yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xo=typeof setTimeout=="function"?setTimeout:void 0,lp=typeof clearTimeout=="function"?clearTimeout:void 0,ra=typeof Promise=="function"?Promise:void 0,ip=typeof queueMicrotask=="function"?queueMicrotask:typeof ra<"u"?function(e){return ra.resolve(null).then(e).catch(ap)}:Xo;function ap(e){setTimeout(function(){throw e})}function po(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),pr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pr(t)}function Dt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mn=Math.random().toString(36).slice(2),lt="__reactFiber$"+Mn,vr="__reactProps$"+Mn,yt="__reactContainer$"+Mn,Zo="__reactEvents$"+Mn,cp="__reactListeners$"+Mn,up="__reactHandles$"+Mn;function Qt(e){var t=e[lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yt]||n[lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sa(e);e!==null;){if(n=e[lt])return n;e=sa(e)}return t}e=n,n=e.parentNode}return null}function Lr(e){return e=e[lt]||e[yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function Fs(e){return e[vr]||null}var qo=[],gn=-1;function Ut(e){return{current:e}}function Y(e){0>gn||(e.current=qo[gn],qo[gn]=null,gn--)}function J(e,t){gn++,qo[gn]=e.current,e.current=t}var Rt={},je=Ut(Rt),Pe=Ut(!1),Xt=Rt;function Ln(e,t){var n=e.type.contextTypes;if(!n)return Rt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function be(e){return e=e.childContextTypes,e!=null}function vs(){Y(Pe),Y(je)}function oa(e,t,n){if(je.current!==Rt)throw Error(_(168));J(je,t),J(Pe,n)}function Xc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(_(108,Jd(e)||"Unknown",s));return ne({},n,r)}function xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rt,Xt=je.current,J(je,e),J(Pe,Pe.current),!0}function la(e,t,n){var r=e.stateNode;if(!r)throw Error(_(169));n?(e=Xc(e,t,Xt),r.__reactInternalMemoizedMergedChildContext=e,Y(Pe),Y(je),J(je,e)):Y(Pe),J(Pe,n)}var ft=null,Rs=!1,ho=!1;function Zc(e){ft===null?ft=[e]:ft.push(e)}function dp(e){Rs=!0,Zc(e)}function Bt(){if(!ho&&ft!==null){ho=!0;var e=0,t=Q;try{var n=ft;for(Q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ft=null,Rs=!1}catch(s){throw ft!==null&&(ft=ft.slice(e+1)),Sc(Ol,Bt),s}finally{Q=t,ho=!1}}return null}var yn=[],vn=0,ws=null,ks=0,Ue=[],Be=0,Zt=null,pt=1,ht="";function Vt(e,t){yn[vn++]=ks,yn[vn++]=ws,ws=e,ks=t}function qc(e,t,n){Ue[Be++]=pt,Ue[Be++]=ht,Ue[Be++]=Zt,Zt=e;var r=pt;e=ht;var s=32-qe(r)-1;r&=~(1<<s),n+=1;var l=32-qe(t)+s;if(30<l){var i=s-s%5;l=(r&(1<<i)-1).toString(32),r>>=i,s-=i,pt=1<<32-qe(t)+s|n<<s|r,ht=l+e}else pt=1<<l|n<<s|r,ht=e}function Ul(e){e.return!==null&&(Vt(e,1),qc(e,1,0))}function Bl(e){for(;e===ws;)ws=yn[--vn],yn[vn]=null,ks=yn[--vn],yn[vn]=null;for(;e===Zt;)Zt=Ue[--Be],Ue[Be]=null,ht=Ue[--Be],Ue[Be]=null,pt=Ue[--Be],Ue[Be]=null}var Ie=null,ze=null,X=!1,Ze=null;function eu(e,t){var n=Ve(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ia(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ie=e,ze=Dt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ie=e,ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zt!==null?{id:pt,overflow:ht}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ve(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ie=e,ze=null,!0):!1;default:return!1}}function el(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tl(e){if(X){var t=ze;if(t){var n=t;if(!ia(e,t)){if(el(e))throw Error(_(418));t=Dt(n.nextSibling);var r=Ie;t&&ia(e,t)?eu(r,n):(e.flags=e.flags&-4097|2,X=!1,Ie=e)}}else{if(el(e))throw Error(_(418));e.flags=e.flags&-4097|2,X=!1,Ie=e}}}function aa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ie=e}function Vr(e){if(e!==Ie)return!1;if(!X)return aa(e),X=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yo(e.type,e.memoizedProps)),t&&(t=ze)){if(el(e))throw tu(),Error(_(418));for(;t;)eu(e,t),t=Dt(t.nextSibling)}if(aa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ze=Dt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ze=null}}else ze=Ie?Dt(e.stateNode.nextSibling):null;return!0}function tu(){for(var e=ze;e;)e=Dt(e.nextSibling)}function Pn(){ze=Ie=null,X=!1}function Hl(e){Ze===null?Ze=[e]:Ze.push(e)}var fp=wt.ReactCurrentBatchConfig;function Qn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var a=s.refs;i===null?delete a[l]:a[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function Wr(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ca(e){var t=e._init;return t(e._payload)}function nu(e){function t(f,d){if(e){var m=f.deletions;m===null?(f.deletions=[d],f.flags|=16):m.push(d)}}function n(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function r(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function s(f,d){return f=Mt(f,d),f.index=0,f.sibling=null,f}function l(f,d,m){return f.index=m,e?(m=f.alternate,m!==null?(m=m.index,m<d?(f.flags|=2,d):m):(f.flags|=2,d)):(f.flags|=1048576,d)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,d,m,x){return d===null||d.tag!==6?(d=ko(m,f.mode,x),d.return=f,d):(d=s(d,m),d.return=f,d)}function c(f,d,m,x){var k=m.type;return k===dn?h(f,d,m.props.children,x,m.key):d!==null&&(d.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ct&&ca(k)===d.type)?(x=s(d,m.props),x.ref=Qn(f,d,m),x.return=f,x):(x=as(m.type,m.key,m.props,null,f.mode,x),x.ref=Qn(f,d,m),x.return=f,x)}function u(f,d,m,x){return d===null||d.tag!==4||d.stateNode.containerInfo!==m.containerInfo||d.stateNode.implementation!==m.implementation?(d=jo(m,f.mode,x),d.return=f,d):(d=s(d,m.children||[]),d.return=f,d)}function h(f,d,m,x,k){return d===null||d.tag!==7?(d=Yt(m,f.mode,x,k),d.return=f,d):(d=s(d,m),d.return=f,d)}function w(f,d,m){if(typeof d=="string"&&d!==""||typeof d=="number")return d=ko(""+d,f.mode,m),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Ar:return m=as(d.type,d.key,d.props,null,f.mode,m),m.ref=Qn(f,null,d),m.return=f,m;case un:return d=jo(d,f.mode,m),d.return=f,d;case Ct:var x=d._init;return w(f,x(d._payload),m)}if(Yn(d)||Un(d))return d=Yt(d,f.mode,m,null),d.return=f,d;Wr(f,d)}return null}function v(f,d,m,x){var k=d!==null?d.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return k!==null?null:a(f,d,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ar:return m.key===k?c(f,d,m,x):null;case un:return m.key===k?u(f,d,m,x):null;case Ct:return k=m._init,v(f,d,k(m._payload),x)}if(Yn(m)||Un(m))return k!==null?null:h(f,d,m,x,null);Wr(f,m)}return null}function y(f,d,m,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return f=f.get(m)||null,a(d,f,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ar:return f=f.get(x.key===null?m:x.key)||null,c(d,f,x,k);case un:return f=f.get(x.key===null?m:x.key)||null,u(d,f,x,k);case Ct:var C=x._init;return y(f,d,m,C(x._payload),k)}if(Yn(x)||Un(x))return f=f.get(m)||null,h(d,f,x,k,null);Wr(d,x)}return null}function g(f,d,m,x){for(var k=null,C=null,E=d,b=d=0,$=null;E!==null&&b<m.length;b++){E.index>b?($=E,E=null):$=E.sibling;var P=v(f,E,m[b],x);if(P===null){E===null&&(E=$);break}e&&E&&P.alternate===null&&t(f,E),d=l(P,d,b),C===null?k=P:C.sibling=P,C=P,E=$}if(b===m.length)return n(f,E),X&&Vt(f,b),k;if(E===null){for(;b<m.length;b++)E=w(f,m[b],x),E!==null&&(d=l(E,d,b),C===null?k=E:C.sibling=E,C=E);return X&&Vt(f,b),k}for(E=r(f,E);b<m.length;b++)$=y(E,f,b,m[b],x),$!==null&&(e&&$.alternate!==null&&E.delete($.key===null?b:$.key),d=l($,d,b),C===null?k=$:C.sibling=$,C=$);return e&&E.forEach(function(K){return t(f,K)}),X&&Vt(f,b),k}function S(f,d,m,x){var k=Un(m);if(typeof k!="function")throw Error(_(150));if(m=k.call(m),m==null)throw Error(_(151));for(var C=k=null,E=d,b=d=0,$=null,P=m.next();E!==null&&!P.done;b++,P=m.next()){E.index>b?($=E,E=null):$=E.sibling;var K=v(f,E,P.value,x);if(K===null){E===null&&(E=$);break}e&&E&&K.alternate===null&&t(f,E),d=l(K,d,b),C===null?k=K:C.sibling=K,C=K,E=$}if(P.done)return n(f,E),X&&Vt(f,b),k;if(E===null){for(;!P.done;b++,P=m.next())P=w(f,P.value,x),P!==null&&(d=l(P,d,b),C===null?k=P:C.sibling=P,C=P);return X&&Vt(f,b),k}for(E=r(f,E);!P.done;b++,P=m.next())P=y(E,f,b,P.value,x),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?b:P.key),d=l(P,d,b),C===null?k=P:C.sibling=P,C=P);return e&&E.forEach(function(re){return t(f,re)}),X&&Vt(f,b),k}function L(f,d,m,x){if(typeof m=="object"&&m!==null&&m.type===dn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ar:e:{for(var k=m.key,C=d;C!==null;){if(C.key===k){if(k=m.type,k===dn){if(C.tag===7){n(f,C.sibling),d=s(C,m.props.children),d.return=f,f=d;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ct&&ca(k)===C.type){n(f,C.sibling),d=s(C,m.props),d.ref=Qn(f,C,m),d.return=f,f=d;break e}n(f,C);break}else t(f,C);C=C.sibling}m.type===dn?(d=Yt(m.props.children,f.mode,x,m.key),d.return=f,f=d):(x=as(m.type,m.key,m.props,null,f.mode,x),x.ref=Qn(f,d,m),x.return=f,f=x)}return i(f);case un:e:{for(C=m.key;d!==null;){if(d.key===C)if(d.tag===4&&d.stateNode.containerInfo===m.containerInfo&&d.stateNode.implementation===m.implementation){n(f,d.sibling),d=s(d,m.children||[]),d.return=f,f=d;break e}else{n(f,d);break}else t(f,d);d=d.sibling}d=jo(m,f.mode,x),d.return=f,f=d}return i(f);case Ct:return C=m._init,L(f,d,C(m._payload),x)}if(Yn(m))return g(f,d,m,x);if(Un(m))return S(f,d,m,x);Wr(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,d!==null&&d.tag===6?(n(f,d.sibling),d=s(d,m),d.return=f,f=d):(n(f,d),d=ko(m,f.mode,x),d.return=f,f=d),i(f)):n(f,d)}return L}var bn=nu(!0),ru=nu(!1),js=Ut(null),Ss=null,xn=null,Vl=null;function Wl(){Vl=xn=Ss=null}function Ql(e){var t=js.current;Y(js),e._currentValue=t}function nl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function En(e,t){Ss=e,Vl=xn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function Qe(e){var t=e._currentValue;if(Vl!==e)if(e={context:e,memoizedValue:t,next:null},xn===null){if(Ss===null)throw Error(_(308));xn=e,Ss.dependencies={lanes:0,firstContext:e}}else xn=xn.next=e;return t}var Jt=null;function Jl(e){Jt===null?Jt=[e]:Jt.push(e)}function su(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Jl(t)):(n.next=s.next,s.next=n),t.interleaved=n,vt(e,r)}function vt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Nt=!1;function Kl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ou(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function At(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,U&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,vt(e,n)}return s=r.interleaved,s===null?(t.next=t,Jl(r)):(t.next=s.next,s.next=t),r.interleaved=t,vt(e,n)}function ns(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dl(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cs(e,t,n,r){var s=e.updateQueue;Nt=!1;var l=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,i===null?l=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==i&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(l!==null){var w=s.baseState;i=0,h=u=c=null,a=l;do{var v=a.lane,y=a.eventTime;if((r&v)===v){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,S=a;switch(v=t,y=n,S.tag){case 1:if(g=S.payload,typeof g=="function"){w=g.call(y,w,v);break e}w=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,v=typeof g=="function"?g.call(y,w,v):g,v==null)break e;w=ne({},w,v);break e;case 2:Nt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[a]:v.push(a))}else y={eventTime:y,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=w):h=h.next=y,i|=v;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;v=a,a=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(1);if(h===null&&(c=w),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);en|=i,e.lanes=i,e.memoizedState=w}}function da(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_(191,s));s.call(r)}}}var Pr={},at=Ut(Pr),xr=Ut(Pr),wr=Ut(Pr);function Kt(e){if(e===Pr)throw Error(_(174));return e}function Gl(e,t){switch(J(wr,t),J(xr,e),J(at,Pr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Io(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Io(t,e)}Y(at),J(at,t)}function On(){Y(at),Y(xr),Y(wr)}function lu(e){Kt(wr.current);var t=Kt(at.current),n=Io(t,e.type);t!==n&&(J(xr,e),J(at,n))}function Yl(e){xr.current===e&&(Y(at),Y(xr))}var ee=Ut(0);function Ns(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mo=[];function Xl(){for(var e=0;e<mo.length;e++)mo[e]._workInProgressVersionPrimary=null;mo.length=0}var rs=wt.ReactCurrentDispatcher,go=wt.ReactCurrentBatchConfig,qt=0,te=null,ae=null,de=null,Es=!1,sr=!1,kr=0,pp=0;function xe(){throw Error(_(321))}function Zl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tt(e[n],t[n]))return!1;return!0}function ql(e,t,n,r,s,l){if(qt=l,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=e===null||e.memoizedState===null?yp:vp,e=n(r,s),sr){l=0;do{if(sr=!1,kr=0,25<=l)throw Error(_(301));l+=1,de=ae=null,t.updateQueue=null,rs.current=xp,e=n(r,s)}while(sr)}if(rs.current=_s,t=ae!==null&&ae.next!==null,qt=0,de=ae=te=null,Es=!1,t)throw Error(_(300));return e}function ei(){var e=kr!==0;return kr=0,e}function ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?te.memoizedState=de=e:de=de.next=e,de}function Je(){if(ae===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var t=de===null?te.memoizedState:de.next;if(t!==null)de=t,ae=e;else{if(e===null)throw Error(_(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},de===null?te.memoizedState=de=e:de=de.next=e}return de}function jr(e,t){return typeof t=="function"?t(e):t}function yo(e){var t=Je(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=ae,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var i=s.next;s.next=l.next,l.next=i}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=i=null,c=null,u=l;do{var h=u.lane;if((qt&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var w={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=w,i=r):c=c.next=w,te.lanes|=h,en|=h}u=u.next}while(u!==null&&u!==l);c===null?i=r:c.next=a,tt(r,t.memoizedState)||(Le=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,te.lanes|=l,en|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vo(e){var t=Je(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do l=e(l,i.action),i=i.next;while(i!==s);tt(l,t.memoizedState)||(Le=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function iu(){}function au(e,t){var n=te,r=Je(),s=t(),l=!tt(r.memoizedState,s);if(l&&(r.memoizedState=s,Le=!0),r=r.queue,ti(du.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,Sr(9,uu.bind(null,n,r,s,t),void 0,null),fe===null)throw Error(_(349));qt&30||cu(n,t,s)}return s}function cu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uu(e,t,n,r){t.value=n,t.getSnapshot=r,fu(t)&&pu(e)}function du(e,t,n){return n(function(){fu(t)&&pu(e)})}function fu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tt(e,n)}catch{return!0}}function pu(e){var t=vt(e,1);t!==null&&et(t,e,1,-1)}function fa(e){var t=ot();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:e},t.queue=e,e=e.dispatch=gp.bind(null,te,e),[t.memoizedState,e]}function Sr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hu(){return Je().memoizedState}function ss(e,t,n,r){var s=ot();te.flags|=e,s.memoizedState=Sr(1|t,n,void 0,r===void 0?null:r)}function $s(e,t,n,r){var s=Je();r=r===void 0?null:r;var l=void 0;if(ae!==null){var i=ae.memoizedState;if(l=i.destroy,r!==null&&Zl(r,i.deps)){s.memoizedState=Sr(t,n,l,r);return}}te.flags|=e,s.memoizedState=Sr(1|t,n,l,r)}function pa(e,t){return ss(8390656,8,e,t)}function ti(e,t){return $s(2048,8,e,t)}function mu(e,t){return $s(4,2,e,t)}function gu(e,t){return $s(4,4,e,t)}function yu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vu(e,t,n){return n=n!=null?n.concat([e]):null,$s(4,4,yu.bind(null,t,e),n)}function ni(){}function xu(e,t){var n=Je();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wu(e,t){var n=Je();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ku(e,t,n){return qt&21?(tt(n,t)||(n=Ec(),te.lanes|=n,en|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=n)}function hp(e,t){var n=Q;Q=n!==0&&4>n?n:4,e(!0);var r=go.transition;go.transition={};try{e(!1),t()}finally{Q=n,go.transition=r}}function ju(){return Je().memoizedState}function mp(e,t,n){var r=It(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Su(e))Cu(t,n);else if(n=su(e,t,n,r),n!==null){var s=Ce();et(n,e,r,s),Nu(n,t,r)}}function gp(e,t,n){var r=It(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Su(e))Cu(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,a=l(i,n);if(s.hasEagerState=!0,s.eagerState=a,tt(a,i)){var c=t.interleaved;c===null?(s.next=s,Jl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=su(e,t,s,r),n!==null&&(s=Ce(),et(n,e,r,s),Nu(n,t,r))}}function Su(e){var t=e.alternate;return e===te||t!==null&&t===te}function Cu(e,t){sr=Es=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nu(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dl(e,n)}}var _s={readContext:Qe,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},yp={readContext:Qe,useCallback:function(e,t){return ot().memoizedState=[e,t===void 0?null:t],e},useContext:Qe,useEffect:pa,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ss(4194308,4,yu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ss(4194308,4,e,t)},useInsertionEffect:function(e,t){return ss(4,2,e,t)},useMemo:function(e,t){var n=ot();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ot();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mp.bind(null,te,e),[r.memoizedState,e]},useRef:function(e){var t=ot();return e={current:e},t.memoizedState=e},useState:fa,useDebugValue:ni,useDeferredValue:function(e){return ot().memoizedState=e},useTransition:function(){var e=fa(!1),t=e[0];return e=hp.bind(null,e[1]),ot().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=te,s=ot();if(X){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),fe===null)throw Error(_(349));qt&30||cu(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,pa(du.bind(null,r,l,e),[e]),r.flags|=2048,Sr(9,uu.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=ot(),t=fe.identifierPrefix;if(X){var n=ht,r=pt;n=(r&~(1<<32-qe(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=kr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vp={readContext:Qe,useCallback:xu,useContext:Qe,useEffect:ti,useImperativeHandle:vu,useInsertionEffect:mu,useLayoutEffect:gu,useMemo:wu,useReducer:yo,useRef:hu,useState:function(){return yo(jr)},useDebugValue:ni,useDeferredValue:function(e){var t=Je();return ku(t,ae.memoizedState,e)},useTransition:function(){var e=yo(jr)[0],t=Je().memoizedState;return[e,t]},useMutableSource:iu,useSyncExternalStore:au,useId:ju,unstable_isNewReconciler:!1},xp={readContext:Qe,useCallback:xu,useContext:Qe,useEffect:ti,useImperativeHandle:vu,useInsertionEffect:mu,useLayoutEffect:gu,useMemo:wu,useReducer:vo,useRef:hu,useState:function(){return vo(jr)},useDebugValue:ni,useDeferredValue:function(e){var t=Je();return ae===null?t.memoizedState=e:ku(t,ae.memoizedState,e)},useTransition:function(){var e=vo(jr)[0],t=Je().memoizedState;return[e,t]},useMutableSource:iu,useSyncExternalStore:au,useId:ju,unstable_isNewReconciler:!1};function Ye(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Us={isMounted:function(e){return(e=e._reactInternals)?rn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ce(),s=It(e),l=mt(r,s);l.payload=t,n!=null&&(l.callback=n),t=At(e,l,s),t!==null&&(et(t,e,s,r),ns(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ce(),s=It(e),l=mt(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=At(e,l,s),t!==null&&(et(t,e,s,r),ns(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ce(),r=It(e),s=mt(n,r);s.tag=2,t!=null&&(s.callback=t),t=At(e,s,r),t!==null&&(et(t,e,r,n),ns(t,e,r))}};function ha(e,t,n,r,s,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):t.prototype&&t.prototype.isPureReactComponent?!mr(n,r)||!mr(s,l):!0}function Eu(e,t,n){var r=!1,s=Rt,l=t.contextType;return typeof l=="object"&&l!==null?l=Qe(l):(s=be(t)?Xt:je.current,r=t.contextTypes,l=(r=r!=null)?Ln(e,s):Rt),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Us,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function ma(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Us.enqueueReplaceState(t,t.state,null)}function sl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Kl(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Qe(l):(l=be(t)?Xt:je.current,s.context=Ln(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(rl(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Us.enqueueReplaceState(s,s.state,null),Cs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Dn(e,t){try{var n="",r=t;do n+=Qd(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function xo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ol(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wp=typeof WeakMap=="function"?WeakMap:Map;function _u(e,t,n){n=mt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ls||(Ls=!0,ml=r),ol(e,t)},n}function Tu(e,t,n){n=mt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ol(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ol(e,t),typeof r!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function ga(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ap.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function va(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mt(-1,1),t.tag=2,At(n,t,1))),n.lanes|=1),e)}var kp=wt.ReactCurrentOwner,Le=!1;function Se(e,t,n,r){t.child=e===null?ru(t,null,n,r):bn(t,e.child,n,r)}function xa(e,t,n,r,s){n=n.render;var l=t.ref;return En(t,s),r=ql(e,t,n,r,l,s),n=ei(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xt(e,t,s)):(X&&n&&Ul(t),t.flags|=1,Se(e,t,r,s),t.child)}function wa(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!ui(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Lu(e,t,l,r,s)):(e=as(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:mr,n(i,r)&&e.ref===t.ref)return xt(e,t,s)}return t.flags|=1,e=Mt(l,r),e.ref=t.ref,e.return=t,t.child=e}function Lu(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(mr(l,r)&&e.ref===t.ref)if(Le=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,xt(e,t,s)}return ll(e,t,n,r,s)}function Pu(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(kn,Ae),Ae|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(kn,Ae),Ae|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,J(kn,Ae),Ae|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,J(kn,Ae),Ae|=r;return Se(e,t,s,n),t.child}function bu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ll(e,t,n,r,s){var l=be(n)?Xt:je.current;return l=Ln(t,l),En(t,s),n=ql(e,t,n,r,l,s),r=ei(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xt(e,t,s)):(X&&r&&Ul(t),t.flags|=1,Se(e,t,n,s),t.child)}function ka(e,t,n,r,s){if(be(n)){var l=!0;xs(t)}else l=!1;if(En(t,s),t.stateNode===null)os(e,t),Eu(t,n,r),sl(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qe(u):(u=be(n)?Xt:je.current,u=Ln(t,u));var h=n.getDerivedStateFromProps,w=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";w||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==u)&&ma(t,i,r,u),Nt=!1;var v=t.memoizedState;i.state=v,Cs(t,r,i,s),c=t.memoizedState,a!==r||v!==c||Pe.current||Nt?(typeof h=="function"&&(rl(t,n,h,r),c=t.memoizedState),(a=Nt||ha(t,n,a,r,v,c,u))?(w||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ou(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ye(t.type,a),i.props=u,w=t.pendingProps,v=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qe(c):(c=be(n)?Xt:je.current,c=Ln(t,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==w||v!==c)&&ma(t,i,r,c),Nt=!1,v=t.memoizedState,i.state=v,Cs(t,r,i,s);var g=t.memoizedState;a!==w||v!==g||Pe.current||Nt?(typeof y=="function"&&(rl(t,n,y,r),g=t.memoizedState),(u=Nt||ha(t,n,u,r,v,g,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return il(e,t,n,r,l,s)}function il(e,t,n,r,s,l){bu(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&la(t,n,!1),xt(e,t,l);r=t.stateNode,kp.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=bn(t,e.child,null,l),t.child=bn(t,null,a,l)):Se(e,t,a,l),t.memoizedState=r.state,s&&la(t,n,!0),t.child}function Ou(e){var t=e.stateNode;t.pendingContext?oa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&oa(e,t.context,!1),Gl(e,t.containerInfo)}function ja(e,t,n,r,s){return Pn(),Hl(s),t.flags|=256,Se(e,t,n,r),t.child}var al={dehydrated:null,treeContext:null,retryLane:0};function cl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Du(e,t,n){var r=t.pendingProps,s=ee.current,l=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),J(ee,s&1),e===null)return tl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,l?(r=t.mode,l=t.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Vs(i,r,0,null),e=Yt(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=cl(n),t.memoizedState=al,e):ri(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return jp(e,t,i,r,a,s,n);if(l){l=r.fallback,i=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mt(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Mt(a,l):(l=Yt(l,i,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,i=e.child.memoizedState,i=i===null?cl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=al,r}return l=e.child,e=l.sibling,r=Mt(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ri(e,t){return t=Vs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qr(e,t,n,r){return r!==null&&Hl(r),bn(t,e.child,null,n),e=ri(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jp(e,t,n,r,s,l,i){if(n)return t.flags&256?(t.flags&=-257,r=xo(Error(_(422))),Qr(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Vs({mode:"visible",children:r.children},s,0,null),l=Yt(l,s,i,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&bn(t,e.child,null,i),t.child.memoizedState=cl(i),t.memoizedState=al,l);if(!(t.mode&1))return Qr(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(_(419)),r=xo(l,r,void 0),Qr(e,t,i,r)}if(a=(i&e.childLanes)!==0,Le||a){if(r=fe,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,vt(e,s),et(r,e,s,-1))}return ci(),r=xo(Error(_(421))),Qr(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=zp.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,ze=Dt(s.nextSibling),Ie=t,X=!0,Ze=null,e!==null&&(Ue[Be++]=pt,Ue[Be++]=ht,Ue[Be++]=Zt,pt=e.id,ht=e.overflow,Zt=t),t=ri(t,r.children),t.flags|=4096,t)}function Sa(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nl(e.return,t,n)}function wo(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Au(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(Se(e,t,r.children,n),r=ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sa(e,n,t);else if(e.tag===19)Sa(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(J(ee,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ns(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),wo(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ns(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}wo(t,!0,n,null,l);break;case"together":wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function os(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),en|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=Mt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sp(e,t,n){switch(t.tag){case 3:Ou(t),Pn();break;case 5:lu(t);break;case 1:be(t.type)&&xs(t);break;case 4:Gl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;J(js,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(J(ee,ee.current&1),t.flags|=128,null):n&t.child.childLanes?Du(e,t,n):(J(ee,ee.current&1),e=xt(e,t,n),e!==null?e.sibling:null);J(ee,ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Au(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(ee,ee.current),r)break;return null;case 22:case 23:return t.lanes=0,Pu(e,t,n)}return xt(e,t,n)}var zu,ul,Iu,Mu;zu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ul=function(){};Iu=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Kt(at.current);var l=null;switch(n){case"input":s=Oo(e,s),r=Oo(e,r),l=[];break;case"select":s=ne({},s,{value:void 0}),r=ne({},r,{value:void 0}),l=[];break;case"textarea":s=zo(e,s),r=zo(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ys)}Mo(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ar.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ar.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&G("scroll",e),l||a===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Mu=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jn(e,t){if(!X)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function we(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cp(e,t,n){var r=t.pendingProps;switch(Bl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(t),null;case 1:return be(t.type)&&vs(),we(t),null;case 3:return r=t.stateNode,On(),Y(Pe),Y(je),Xl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ze!==null&&(vl(Ze),Ze=null))),ul(e,t),we(t),null;case 5:Yl(t);var s=Kt(wr.current);if(n=t.type,e!==null&&t.stateNode!=null)Iu(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_(166));return we(t),null}if(e=Kt(at.current),Vr(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[lt]=t,r[vr]=l,e=(t.mode&1)!==0,n){case"dialog":G("cancel",r),G("close",r);break;case"iframe":case"object":case"embed":G("load",r);break;case"video":case"audio":for(s=0;s<Zn.length;s++)G(Zn[s],r);break;case"source":G("error",r);break;case"img":case"image":case"link":G("error",r),G("load",r);break;case"details":G("toggle",r);break;case"input":Oi(r,l),G("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},G("invalid",r);break;case"textarea":Ai(r,l),G("invalid",r)}Mo(n,l),s=null;for(var i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Hr(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Hr(r.textContent,a,e),s=["children",""+a]):ar.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&G("scroll",r)}switch(n){case"input":zr(r),Di(r,l,!0);break;case"textarea":zr(r),zi(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ys)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[lt]=t,e[vr]=r,zu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Fo(n,r),n){case"dialog":G("cancel",e),G("close",e),s=r;break;case"iframe":case"object":case"embed":G("load",e),s=r;break;case"video":case"audio":for(s=0;s<Zn.length;s++)G(Zn[s],e);s=r;break;case"source":G("error",e),s=r;break;case"img":case"image":case"link":G("error",e),G("load",e),s=r;break;case"details":G("toggle",e),s=r;break;case"input":Oi(e,r),s=Oo(e,r),G("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ne({},r,{value:void 0}),G("invalid",e);break;case"textarea":Ai(e,r),s=zo(e,r),G("invalid",e);break;default:s=r}Mo(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="style"?hc(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fc(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&cr(e,c):typeof c=="number"&&cr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ar.hasOwnProperty(l)?c!=null&&l==="onScroll"&&G("scroll",e):c!=null&&_l(e,l,c,i))}switch(n){case"input":zr(e),Di(e,r,!1);break;case"textarea":zr(e),zi(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ft(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?jn(e,!!r.multiple,l,!1):r.defaultValue!=null&&jn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ys)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return we(t),null;case 6:if(e&&t.stateNode!=null)Mu(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_(166));if(n=Kt(wr.current),Kt(at.current),Vr(t)){if(r=t.stateNode,n=t.memoizedProps,r[lt]=t,(l=r.nodeValue!==n)&&(e=Ie,e!==null))switch(e.tag){case 3:Hr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hr(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lt]=t,t.stateNode=r}return we(t),null;case 13:if(Y(ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(X&&ze!==null&&t.mode&1&&!(t.flags&128))tu(),Pn(),t.flags|=98560,l=!1;else if(l=Vr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(_(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(_(317));l[lt]=t}else Pn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;we(t),l=!1}else Ze!==null&&(vl(Ze),Ze=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?ce===0&&(ce=3):ci())),t.updateQueue!==null&&(t.flags|=4),we(t),null);case 4:return On(),ul(e,t),e===null&&gr(t.stateNode.containerInfo),we(t),null;case 10:return Ql(t.type._context),we(t),null;case 17:return be(t.type)&&vs(),we(t),null;case 19:if(Y(ee),l=t.memoizedState,l===null)return we(t),null;if(r=(t.flags&128)!==0,i=l.rendering,i===null)if(r)Jn(l,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ns(e),i!==null){for(t.flags|=128,Jn(l,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return J(ee,ee.current&1|2),t.child}e=e.sibling}l.tail!==null&&le()>An&&(t.flags|=128,r=!0,Jn(l,!1),t.lanes=4194304)}else{if(!r)if(e=Ns(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!X)return we(t),null}else 2*le()-l.renderingStartTime>An&&n!==1073741824&&(t.flags|=128,r=!0,Jn(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=le(),t.sibling=null,n=ee.current,J(ee,r?n&1|2:n&1),t):(we(t),null);case 22:case 23:return ai(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ae&1073741824&&(we(t),t.subtreeFlags&6&&(t.flags|=8192)):we(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function Np(e,t){switch(Bl(t),t.tag){case 1:return be(t.type)&&vs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return On(),Y(Pe),Y(je),Xl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yl(t),null;case 13:if(Y(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));Pn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Y(ee),null;case 4:return On(),null;case 10:return Ql(t.type._context),null;case 22:case 23:return ai(),null;case 24:return null;default:return null}}var Jr=!1,ke=!1,Ep=typeof WeakSet=="function"?WeakSet:Set,A=null;function wn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function dl(e,t,n){try{n()}catch(r){se(e,t,r)}}var Ca=!1;function _p(e,t){if(Ko=hs,e=Bc(),$l(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,u=0,h=0,w=e,v=null;t:for(;;){for(var y;w!==n||s!==0&&w.nodeType!==3||(a=i+s),w!==l||r!==0&&w.nodeType!==3||(c=i+r),w.nodeType===3&&(i+=w.nodeValue.length),(y=w.firstChild)!==null;)v=w,w=y;for(;;){if(w===e)break t;if(v===n&&++u===s&&(a=i),v===l&&++h===r&&(c=i),(y=w.nextSibling)!==null)break;w=v,v=w.parentNode}w=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Go={focusedElem:e,selectionRange:n},hs=!1,A=t;A!==null;)if(t=A,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,A=e;else for(;A!==null;){t=A;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,L=g.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?S:Ye(t.type,S),L);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(x){se(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,A=e;break}A=t.return}return g=Ca,Ca=!1,g}function or(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&dl(t,n,l)}s=s.next}while(s!==r)}}function Bs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fu(e){var t=e.alternate;t!==null&&(e.alternate=null,Fu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lt],delete t[vr],delete t[Zo],delete t[cp],delete t[up])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ru(e){return e.tag===5||e.tag===3||e.tag===4}function Na(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ys));else if(r!==4&&(e=e.child,e!==null))for(pl(e,t,n),e=e.sibling;e!==null;)pl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hl(e,t,n),e=e.sibling;e!==null;)hl(e,t,n),e=e.sibling}var me=null,Xe=!1;function St(e,t,n){for(n=n.child;n!==null;)$u(e,t,n),n=n.sibling}function $u(e,t,n){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(As,n)}catch{}switch(n.tag){case 5:ke||wn(n,t);case 6:var r=me,s=Xe;me=null,St(e,t,n),me=r,Xe=s,me!==null&&(Xe?(e=me,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(Xe?(e=me,n=n.stateNode,e.nodeType===8?po(e.parentNode,n):e.nodeType===1&&po(e,n),pr(e)):po(me,n.stateNode));break;case 4:r=me,s=Xe,me=n.stateNode.containerInfo,Xe=!0,St(e,t,n),me=r,Xe=s;break;case 0:case 11:case 14:case 15:if(!ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&dl(n,t,i),s=s.next}while(s!==r)}St(e,t,n);break;case 1:if(!ke&&(wn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){se(n,t,a)}St(e,t,n);break;case 21:St(e,t,n);break;case 22:n.mode&1?(ke=(r=ke)||n.memoizedState!==null,St(e,t,n),ke=r):St(e,t,n);break;default:St(e,t,n)}}function Ea(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ep),t.forEach(function(r){var s=Ip.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ge(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:me=a.stateNode,Xe=!1;break e;case 3:me=a.stateNode.containerInfo,Xe=!0;break e;case 4:me=a.stateNode.containerInfo,Xe=!0;break e}a=a.return}if(me===null)throw Error(_(160));$u(l,i,s),me=null,Xe=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uu(t,e),t=t.sibling}function Uu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ge(t,e),rt(e),r&4){try{or(3,e,e.return),Bs(3,e)}catch(S){se(e,e.return,S)}try{or(5,e,e.return)}catch(S){se(e,e.return,S)}}break;case 1:Ge(t,e),rt(e),r&512&&n!==null&&wn(n,n.return);break;case 5:if(Ge(t,e),rt(e),r&512&&n!==null&&wn(n,n.return),e.flags&32){var s=e.stateNode;try{cr(s,"")}catch(S){se(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&cc(s,l),Fo(a,i);var u=Fo(a,l);for(i=0;i<c.length;i+=2){var h=c[i],w=c[i+1];h==="style"?hc(s,w):h==="dangerouslySetInnerHTML"?fc(s,w):h==="children"?cr(s,w):_l(s,h,w,u)}switch(a){case"input":Do(s,l);break;case"textarea":uc(s,l);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?jn(s,!!l.multiple,y,!1):v!==!!l.multiple&&(l.defaultValue!=null?jn(s,!!l.multiple,l.defaultValue,!0):jn(s,!!l.multiple,l.multiple?[]:"",!1))}s[vr]=l}catch(S){se(e,e.return,S)}}break;case 6:if(Ge(t,e),rt(e),r&4){if(e.stateNode===null)throw Error(_(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(S){se(e,e.return,S)}}break;case 3:if(Ge(t,e),rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pr(t.containerInfo)}catch(S){se(e,e.return,S)}break;case 4:Ge(t,e),rt(e);break;case 13:Ge(t,e),rt(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(li=le())),r&4&&Ea(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ke=(u=ke)||h,Ge(t,e),ke=u):Ge(t,e),rt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(A=e,h=e.child;h!==null;){for(w=A=h;A!==null;){switch(v=A,y=v.child,v.tag){case 0:case 11:case 14:case 15:or(4,v,v.return);break;case 1:wn(v,v.return);var g=v.stateNode;if(typeof g.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(S){se(r,n,S)}}break;case 5:wn(v,v.return);break;case 22:if(v.memoizedState!==null){Ta(w);continue}}y!==null?(y.return=v,A=y):Ta(w)}h=h.sibling}e:for(h=null,w=e;;){if(w.tag===5){if(h===null){h=w;try{s=w.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=w.stateNode,c=w.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=pc("display",i))}catch(S){se(e,e.return,S)}}}else if(w.tag===6){if(h===null)try{w.stateNode.nodeValue=u?"":w.memoizedProps}catch(S){se(e,e.return,S)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;h===w&&(h=null),w=w.return}h===w&&(h=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Ge(t,e),rt(e),r&4&&Ea(e);break;case 21:break;default:Ge(t,e),rt(e)}}function rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ru(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cr(s,""),r.flags&=-33);var l=Na(e);hl(e,l,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Na(e);pl(e,a,i);break;default:throw Error(_(161))}}catch(c){se(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tp(e,t,n){A=e,Bu(e)}function Bu(e,t,n){for(var r=(e.mode&1)!==0;A!==null;){var s=A,l=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Jr;if(!i){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ke;a=Jr;var u=ke;if(Jr=i,(ke=c)&&!u)for(A=s;A!==null;)i=A,c=i.child,i.tag===22&&i.memoizedState!==null?La(s):c!==null?(c.return=i,A=c):La(s);for(;l!==null;)A=l,Bu(l),l=l.sibling;A=s,Jr=a,ke=u}_a(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,A=l):_a(e)}}function _a(e){for(;A!==null;){var t=A;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||Bs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ke)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ye(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&da(t,l,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}da(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var w=h.dehydrated;w!==null&&pr(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}ke||t.flags&512&&fl(t)}catch(v){se(t,t.return,v)}}if(t===e){A=null;break}if(n=t.sibling,n!==null){n.return=t.return,A=n;break}A=t.return}}function Ta(e){for(;A!==null;){var t=A;if(t===e){A=null;break}var n=t.sibling;if(n!==null){n.return=t.return,A=n;break}A=t.return}}function La(e){for(;A!==null;){var t=A;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Bs(4,t)}catch(c){se(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){se(t,s,c)}}var l=t.return;try{fl(t)}catch(c){se(t,l,c)}break;case 5:var i=t.return;try{fl(t)}catch(c){se(t,i,c)}}}catch(c){se(t,t.return,c)}if(t===e){A=null;break}var a=t.sibling;if(a!==null){a.return=t.return,A=a;break}A=t.return}}var Lp=Math.ceil,Ts=wt.ReactCurrentDispatcher,si=wt.ReactCurrentOwner,We=wt.ReactCurrentBatchConfig,U=0,fe=null,ie=null,ge=0,Ae=0,kn=Ut(0),ce=0,Cr=null,en=0,Hs=0,oi=0,lr=null,Te=null,li=0,An=1/0,dt=null,Ls=!1,ml=null,zt=null,Kr=!1,Lt=null,Ps=0,ir=0,gl=null,ls=-1,is=0;function Ce(){return U&6?le():ls!==-1?ls:ls=le()}function It(e){return e.mode&1?U&2&&ge!==0?ge&-ge:fp.transition!==null?(is===0&&(is=Ec()),is):(e=Q,e!==0||(e=window.event,e=e===void 0?16:Dc(e.type)),e):1}function et(e,t,n,r){if(50<ir)throw ir=0,gl=null,Error(_(185));_r(e,n,r),(!(U&2)||e!==fe)&&(e===fe&&(!(U&2)&&(Hs|=n),ce===4&&_t(e,ge)),Oe(e,r),n===1&&U===0&&!(t.mode&1)&&(An=le()+500,Rs&&Bt()))}function Oe(e,t){var n=e.callbackNode;ff(e,t);var r=ps(e,e===fe?ge:0);if(r===0)n!==null&&Fi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Fi(n),t===1)e.tag===0?dp(Pa.bind(null,e)):Zc(Pa.bind(null,e)),ip(function(){!(U&6)&&Bt()}),n=null;else{switch(_c(r)){case 1:n=Ol;break;case 4:n=Cc;break;case 16:n=fs;break;case 536870912:n=Nc;break;default:n=fs}n=Yu(n,Hu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hu(e,t){if(ls=-1,is=0,U&6)throw Error(_(327));var n=e.callbackNode;if(_n()&&e.callbackNode!==n)return null;var r=ps(e,e===fe?ge:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=bs(e,r);else{t=r;var s=U;U|=2;var l=Wu();(fe!==e||ge!==t)&&(dt=null,An=le()+500,Gt(e,t));do try{Op();break}catch(a){Vu(e,a)}while(1);Wl(),Ts.current=l,U=s,ie!==null?t=0:(fe=null,ge=0,t=ce)}if(t!==0){if(t===2&&(s=Ho(e),s!==0&&(r=s,t=yl(e,s))),t===1)throw n=Cr,Gt(e,0),_t(e,r),Oe(e,le()),n;if(t===6)_t(e,r);else{if(s=e.current.alternate,!(r&30)&&!Pp(s)&&(t=bs(e,r),t===2&&(l=Ho(e),l!==0&&(r=l,t=yl(e,l))),t===1))throw n=Cr,Gt(e,0),_t(e,r),Oe(e,le()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(_(345));case 2:Wt(e,Te,dt);break;case 3:if(_t(e,r),(r&130023424)===r&&(t=li+500-le(),10<t)){if(ps(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ce(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Xo(Wt.bind(null,e,Te,dt),t);break}Wt(e,Te,dt);break;case 4:if(_t(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-qe(r);l=1<<i,i=t[i],i>s&&(s=i),r&=~l}if(r=s,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lp(r/1960))-r,10<r){e.timeoutHandle=Xo(Wt.bind(null,e,Te,dt),r);break}Wt(e,Te,dt);break;case 5:Wt(e,Te,dt);break;default:throw Error(_(329))}}}return Oe(e,le()),e.callbackNode===n?Hu.bind(null,e):null}function yl(e,t){var n=lr;return e.current.memoizedState.isDehydrated&&(Gt(e,t).flags|=256),e=bs(e,t),e!==2&&(t=Te,Te=n,t!==null&&vl(t)),e}function vl(e){Te===null?Te=e:Te.push.apply(Te,e)}function Pp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!tt(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _t(e,t){for(t&=~oi,t&=~Hs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qe(t),r=1<<n;e[n]=-1,t&=~r}}function Pa(e){if(U&6)throw Error(_(327));_n();var t=ps(e,0);if(!(t&1))return Oe(e,le()),null;var n=bs(e,t);if(e.tag!==0&&n===2){var r=Ho(e);r!==0&&(t=r,n=yl(e,r))}if(n===1)throw n=Cr,Gt(e,0),_t(e,t),Oe(e,le()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wt(e,Te,dt),Oe(e,le()),null}function ii(e,t){var n=U;U|=1;try{return e(t)}finally{U=n,U===0&&(An=le()+500,Rs&&Bt())}}function tn(e){Lt!==null&&Lt.tag===0&&!(U&6)&&_n();var t=U;U|=1;var n=We.transition,r=Q;try{if(We.transition=null,Q=1,e)return e()}finally{Q=r,We.transition=n,U=t,!(U&6)&&Bt()}}function ai(){Ae=kn.current,Y(kn)}function Gt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lp(n)),ie!==null)for(n=ie.return;n!==null;){var r=n;switch(Bl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vs();break;case 3:On(),Y(Pe),Y(je),Xl();break;case 5:Yl(r);break;case 4:On();break;case 13:Y(ee);break;case 19:Y(ee);break;case 10:Ql(r.type._context);break;case 22:case 23:ai()}n=n.return}if(fe=e,ie=e=Mt(e.current,null),ge=Ae=t,ce=0,Cr=null,oi=Hs=en=0,Te=lr=null,Jt!==null){for(t=0;t<Jt.length;t++)if(n=Jt[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=s,r.next=i}n.pending=r}Jt=null}return e}function Vu(e,t){do{var n=ie;try{if(Wl(),rs.current=_s,Es){for(var r=te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Es=!1}if(qt=0,de=ae=te=null,sr=!1,kr=0,si.current=null,n===null||n.return===null){ce=1,Cr=t,ie=null;break}e:{var l=e,i=n.return,a=n,c=t;if(t=ge,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,w=h.tag;if(!(h.mode&1)&&(w===0||w===11||w===15)){var v=h.alternate;v?(h.updateQueue=v.updateQueue,h.memoizedState=v.memoizedState,h.lanes=v.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=ya(i);if(y!==null){y.flags&=-257,va(y,i,a,l,t),y.mode&1&&ga(l,u,t),t=y,c=u;var g=t.updateQueue;if(g===null){var S=new Set;S.add(c),t.updateQueue=S}else g.add(c);break e}else{if(!(t&1)){ga(l,u,t),ci();break e}c=Error(_(426))}}else if(X&&a.mode&1){var L=ya(i);if(L!==null){!(L.flags&65536)&&(L.flags|=256),va(L,i,a,l,t),Hl(Dn(c,a));break e}}l=c=Dn(c,a),ce!==4&&(ce=2),lr===null?lr=[l]:lr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=_u(l,c,t);ua(l,f);break e;case 1:a=c;var d=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof d.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(zt===null||!zt.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var x=Tu(l,a,t);ua(l,x);break e}}l=l.return}while(l!==null)}Ju(n)}catch(k){t=k,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(1)}function Wu(){var e=Ts.current;return Ts.current=_s,e===null?_s:e}function ci(){(ce===0||ce===3||ce===2)&&(ce=4),fe===null||!(en&268435455)&&!(Hs&268435455)||_t(fe,ge)}function bs(e,t){var n=U;U|=2;var r=Wu();(fe!==e||ge!==t)&&(dt=null,Gt(e,t));do try{bp();break}catch(s){Vu(e,s)}while(1);if(Wl(),U=n,Ts.current=r,ie!==null)throw Error(_(261));return fe=null,ge=0,ce}function bp(){for(;ie!==null;)Qu(ie)}function Op(){for(;ie!==null&&!nf();)Qu(ie)}function Qu(e){var t=Gu(e.alternate,e,Ae);e.memoizedProps=e.pendingProps,t===null?Ju(e):ie=t,si.current=null}function Ju(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Np(n,t),n!==null){n.flags&=32767,ie=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,ie=null;return}}else if(n=Cp(n,t,Ae),n!==null){ie=n;return}if(t=t.sibling,t!==null){ie=t;return}ie=t=e}while(t!==null);ce===0&&(ce=5)}function Wt(e,t,n){var r=Q,s=We.transition;try{We.transition=null,Q=1,Dp(e,t,n,r)}finally{We.transition=s,Q=r}return null}function Dp(e,t,n,r){do _n();while(Lt!==null);if(U&6)throw Error(_(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(pf(e,l),e===fe&&(ie=fe=null,ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kr||(Kr=!0,Yu(fs,function(){return _n(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=We.transition,We.transition=null;var i=Q;Q=1;var a=U;U|=4,si.current=null,_p(e,n),Uu(n,e),qf(Go),hs=!!Ko,Go=Ko=null,e.current=n,Tp(n),rf(),U=a,Q=i,We.transition=l}else e.current=n;if(Kr&&(Kr=!1,Lt=e,Ps=s),l=e.pendingLanes,l===0&&(zt=null),lf(n.stateNode),Oe(e,le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ls)throw Ls=!1,e=ml,ml=null,e;return Ps&1&&e.tag!==0&&_n(),l=e.pendingLanes,l&1?e===gl?ir++:(ir=0,gl=e):ir=0,Bt(),null}function _n(){if(Lt!==null){var e=_c(Ps),t=We.transition,n=Q;try{if(We.transition=null,Q=16>e?16:e,Lt===null)var r=!1;else{if(e=Lt,Lt=null,Ps=0,U&6)throw Error(_(331));var s=U;for(U|=4,A=e.current;A!==null;){var l=A,i=l.child;if(A.flags&16){var a=l.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(A=u;A!==null;){var h=A;switch(h.tag){case 0:case 11:case 15:or(8,h,l)}var w=h.child;if(w!==null)w.return=h,A=w;else for(;A!==null;){h=A;var v=h.sibling,y=h.return;if(Fu(h),h===u){A=null;break}if(v!==null){v.return=y,A=v;break}A=y}}}var g=l.alternate;if(g!==null){var S=g.child;if(S!==null){g.child=null;do{var L=S.sibling;S.sibling=null,S=L}while(S!==null)}}A=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,A=i;else e:for(;A!==null;){if(l=A,l.flags&2048)switch(l.tag){case 0:case 11:case 15:or(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,A=f;break e}A=l.return}}var d=e.current;for(A=d;A!==null;){i=A;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,A=m;else e:for(i=d;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bs(9,a)}}catch(k){se(a,a.return,k)}if(a===i){A=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,A=x;break e}A=a.return}}if(U=s,Bt(),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(As,e)}catch{}r=!0}return r}finally{Q=n,We.transition=t}}return!1}function ba(e,t,n){t=Dn(n,t),t=_u(e,t,1),e=At(e,t,1),t=Ce(),e!==null&&(_r(e,1,t),Oe(e,t))}function se(e,t,n){if(e.tag===3)ba(e,e,n);else for(;t!==null;){if(t.tag===3){ba(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zt===null||!zt.has(r))){e=Dn(n,e),e=Tu(t,e,1),t=At(t,e,1),e=Ce(),t!==null&&(_r(t,1,e),Oe(t,e));break}}t=t.return}}function Ap(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ce(),e.pingedLanes|=e.suspendedLanes&n,fe===e&&(ge&n)===n&&(ce===4||ce===3&&(ge&130023424)===ge&&500>le()-li?Gt(e,0):oi|=n),Oe(e,t)}function Ku(e,t){t===0&&(e.mode&1?(t=Fr,Fr<<=1,!(Fr&130023424)&&(Fr=4194304)):t=1);var n=Ce();e=vt(e,t),e!==null&&(_r(e,t,n),Oe(e,n))}function zp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ku(e,n)}function Ip(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(t),Ku(e,n)}var Gu;Gu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pe.current)Le=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Le=!1,Sp(e,t,n);Le=!!(e.flags&131072)}else Le=!1,X&&t.flags&1048576&&qc(t,ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;os(e,t),e=t.pendingProps;var s=Ln(t,je.current);En(t,n),s=ql(null,t,r,e,s,n);var l=ei();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,be(r)?(l=!0,xs(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kl(t),s.updater=Us,t.stateNode=s,s._reactInternals=t,sl(t,r,e,n),t=il(null,t,r,!0,l,n)):(t.tag=0,X&&l&&Ul(t),Se(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(os(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Fp(r),e=Ye(r,e),s){case 0:t=ll(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=wa(null,t,r,Ye(r.type,e),n);break e}throw Error(_(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ye(r,s),ll(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ye(r,s),ka(e,t,r,s,n);case 3:e:{if(Ou(t),e===null)throw Error(_(387));r=t.pendingProps,l=t.memoizedState,s=l.element,ou(e,t),Cs(t,r,null,n);var i=t.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Dn(Error(_(423)),t),t=ja(e,t,r,n,s);break e}else if(r!==s){s=Dn(Error(_(424)),t),t=ja(e,t,r,n,s);break e}else for(ze=Dt(t.stateNode.containerInfo.firstChild),Ie=t,X=!0,Ze=null,n=ru(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pn(),r===s){t=xt(e,t,n);break e}Se(e,t,r,n)}t=t.child}return t;case 5:return lu(t),e===null&&tl(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,i=s.children,Yo(r,s)?i=null:l!==null&&Yo(r,l)&&(t.flags|=32),bu(e,t),Se(e,t,i,n),t.child;case 6:return e===null&&tl(t),null;case 13:return Du(e,t,n);case 4:return Gl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bn(t,null,r,n):Se(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ye(r,s),xa(e,t,r,s,n);case 7:return Se(e,t,t.pendingProps,n),t.child;case 8:return Se(e,t,t.pendingProps.children,n),t.child;case 12:return Se(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,i=s.value,J(js,r._currentValue),r._currentValue=i,l!==null)if(tt(l.value,i)){if(l.children===s.children&&!Pe.current){t=xt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){i=l.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=mt(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),nl(l.return,n,t),a.lanes|=n;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(_(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),nl(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Se(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,En(t,n),s=Qe(s),r=r(s),t.flags|=1,Se(e,t,r,n),t.child;case 14:return r=t.type,s=Ye(r,t.pendingProps),s=Ye(r.type,s),wa(e,t,r,s,n);case 15:return Lu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ye(r,s),os(e,t),t.tag=1,be(r)?(e=!0,xs(t)):e=!1,En(t,n),Eu(t,r,s),sl(t,r,s,n),il(null,t,r,!0,e,n);case 19:return Au(e,t,n);case 22:return Pu(e,t,n)}throw Error(_(156,t.tag))};function Yu(e,t){return Sc(e,t)}function Mp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,t,n,r){return new Mp(e,t,n,r)}function ui(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fp(e){if(typeof e=="function")return ui(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ll)return 11;if(e===Pl)return 14}return 2}function Mt(e,t){var n=e.alternate;return n===null?(n=Ve(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function as(e,t,n,r,s,l){var i=2;if(r=e,typeof e=="function")ui(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case dn:return Yt(n.children,s,l,t);case Tl:i=8,s|=8;break;case To:return e=Ve(12,n,t,s|2),e.elementType=To,e.lanes=l,e;case Lo:return e=Ve(13,n,t,s),e.elementType=Lo,e.lanes=l,e;case Po:return e=Ve(19,n,t,s),e.elementType=Po,e.lanes=l,e;case lc:return Vs(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sc:i=10;break e;case oc:i=9;break e;case Ll:i=11;break e;case Pl:i=14;break e;case Ct:i=16,r=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=Ve(i,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Yt(e,t,n,r){return e=Ve(7,e,r,t),e.lanes=n,e}function Vs(e,t,n,r){return e=Ve(22,e,r,t),e.elementType=lc,e.lanes=n,e.stateNode={isHidden:!1},e}function ko(e,t,n){return e=Ve(6,e,null,t),e.lanes=n,e}function jo(e,t,n){return t=Ve(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function di(e,t,n,r,s,l,i,a,c){return e=new Rp(e,t,n,a,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ve(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kl(l),e}function $p(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:un,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xu(e){if(!e)return Rt;e=e._reactInternals;e:{if(rn(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(be(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if(be(n))return Xc(e,n,t)}return t}function Zu(e,t,n,r,s,l,i,a,c){return e=di(n,r,!0,e,s,l,i,a,c),e.context=Xu(null),n=e.current,r=Ce(),s=It(n),l=mt(r,s),l.callback=t??null,At(n,l,s),e.current.lanes=s,_r(e,s,r),Oe(e,r),e}function Ws(e,t,n,r){var s=t.current,l=Ce(),i=It(s);return n=Xu(n),t.context===null?t.context=n:t.pendingContext=n,t=mt(l,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=At(s,t,i),e!==null&&(et(e,s,i,l),ns(e,s,i)),i}function Os(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Oa(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fi(e,t){Oa(e,t),(e=e.alternate)&&Oa(e,t)}function Up(){return null}var qu=typeof reportError=="function"?reportError:function(e){console.error(e)};function pi(e){this._internalRoot=e}Qs.prototype.render=pi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));Ws(e,t,null,null)};Qs.prototype.unmount=pi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tn(function(){Ws(null,e,null,null)}),t[yt]=null}};function Qs(e){this._internalRoot=e}Qs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Et.length&&t!==0&&t<Et[n].priority;n++);Et.splice(n,0,e),n===0&&Oc(e)}};function hi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Js(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Da(){}function Bp(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=Os(i);l.call(u)}}var i=Zu(t,r,e,0,null,!1,!1,"",Da);return e._reactRootContainer=i,e[yt]=i.current,gr(e.nodeType===8?e.parentNode:e),tn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Os(c);a.call(u)}}var c=di(e,0,!1,null,null,!1,!1,"",Da);return e._reactRootContainer=c,e[yt]=c.current,gr(e.nodeType===8?e.parentNode:e),tn(function(){Ws(t,c,n,r)}),c}function Ks(e,t,n,r,s){var l=n._reactRootContainer;if(l){var i=l;if(typeof s=="function"){var a=s;s=function(){var c=Os(i);a.call(c)}}Ws(t,i,e,s)}else i=Bp(n,t,e,s,r);return Os(i)}Tc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xn(t.pendingLanes);n!==0&&(Dl(t,n|1),Oe(t,le()),!(U&6)&&(An=le()+500,Bt()))}break;case 13:tn(function(){var r=vt(e,1);if(r!==null){var s=Ce();et(r,e,1,s)}}),fi(e,1)}};Al=function(e){if(e.tag===13){var t=vt(e,134217728);if(t!==null){var n=Ce();et(t,e,134217728,n)}fi(e,134217728)}};Lc=function(e){if(e.tag===13){var t=It(e),n=vt(e,t);if(n!==null){var r=Ce();et(n,e,t,r)}fi(e,t)}};Pc=function(){return Q};bc=function(e,t){var n=Q;try{return Q=e,t()}finally{Q=n}};$o=function(e,t,n){switch(t){case"input":if(Do(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Fs(r);if(!s)throw Error(_(90));ac(r),Do(r,s)}}}break;case"textarea":uc(e,n);break;case"select":t=n.value,t!=null&&jn(e,!!n.multiple,t,!1)}};yc=ii;vc=tn;var Hp={usingClientEntryPoint:!1,Events:[Lr,mn,Fs,mc,gc,ii]},Kn={findFiberByHostInstance:Qt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vp={bundleType:Kn.bundleType,version:Kn.version,rendererPackageName:Kn.rendererPackageName,rendererConfig:Kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kc(e),e===null?null:e.stateNode},findFiberByHostInstance:Kn.findFiberByHostInstance||Up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gr.isDisabled&&Gr.supportsFiber)try{As=Gr.inject(Vp),it=Gr}catch{}}Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hp;Fe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hi(t))throw Error(_(200));return $p(e,t,null,n)};Fe.createRoot=function(e,t){if(!hi(e))throw Error(_(299));var n=!1,r="",s=qu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=di(e,1,!1,null,null,n,!1,r,s),e[yt]=t.current,gr(e.nodeType===8?e.parentNode:e),new pi(t)};Fe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=kc(t),e=e===null?null:e.stateNode,e};Fe.flushSync=function(e){return tn(e)};Fe.hydrate=function(e,t,n){if(!Js(t))throw Error(_(200));return Ks(null,e,t,!0,n)};Fe.hydrateRoot=function(e,t,n){if(!hi(e))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",i=qu;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Zu(t,null,e,1,n??null,s,!1,l,i),e[yt]=t.current,gr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qs(t)};Fe.render=function(e,t,n){if(!Js(t))throw Error(_(200));return Ks(null,e,t,!1,n)};Fe.unmountComponentAtNode=function(e){if(!Js(e))throw Error(_(40));return e._reactRootContainer?(tn(function(){Ks(null,null,e,!1,function(){e._reactRootContainer=null,e[yt]=null})}),!0):!1};Fe.unstable_batchedUpdates=ii;Fe.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Js(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Ks(e,t,n,!1,r)};Fe.version="18.3.1-next-f1338f8080-20240426";function ed(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ed)}catch(e){console.error(e)}}ed(),ec.exports=Fe;var an=ec.exports,Aa=an;Eo.createRoot=Aa.createRoot,Eo.hydrateRoot=Aa.hydrateRoot;const Wp="modulepreload",Qp=function(e){return"/"+e},za={},Jp=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=Qp(l),l in za)return;za[l]=!0;const i=l.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const w=s[h];if(w.href===l&&(!i||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":Wp,i||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),i)return new Promise((h,w)=>{u.addEventListener("load",h),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l})},B={backgroundAnimations:[],extensions:[],enabledExtensions:{},pluginDisposers:{},registeredStyles:{}};function br(){if(console.log("Plugin state updated"),Array.isArray(B._listeners))for(const e of B._listeners.slice())try{e()}catch(t){console.warn("pluginHost listener error",t)}}function Kp(){window.coolChat||(window.coolChat={})}function Ia(e,t){const n=document.createElement("style");n.textContent=t,document.head.appendChild(n),B.registeredStyles[e]=B.registeredStyles[e]||[],B.registeredStyles[e].push(n)}function Ma(e,t){const n=(t||[]).map(r=>({...r,__pluginId:e}));B.backgroundAnimations=[...B.backgroundAnimations,...n],br()}function Gp(){return B.backgroundAnimations.map(({__pluginId:e,...t})=>t)}function Yp(){return B.extensions.map(e=>({...e,enabled:!!B.enabledExtensions[e.id]}))}function xl(e){B.enabledExtensions=e,br()}function Xp(e){B.extensions=Array.isArray(e)?e:[],br()}async function Fa(e){var t;Kp(),window.coolChat.registerStyles=n=>{console.warn("window.coolChat.registerStyles is deprecated; use the init API argument instead"),Ia("__global__",n)},window.coolChat.registerBackgroundAnimations=n=>{console.warn("window.coolChat.registerBackgroundAnimations is deprecated; use the init API argument instead"),Ma("__global__",n)},window.coolChat.getExtensions=Yp,window.coolChat.setEnabledExtensions=xl;try{let n=[],r={};if(e&&typeof e=="object")n=Array.isArray(e.plugins)?e.plugins:[],r=e.enabled||{};else{const l=await fetch("/plugins");if(!l.ok){console.warn("Failed to fetch /plugins");return}const i=await l.json();n=Array.isArray(i.plugins)?i.plugins:[],r=i.enabled||{}}const s=new Set(Object.keys(r).filter(l=>r[l]));for(const l of Object.keys(B.pluginDisposers||{}))if(!s.has(l))try{await Zp(l)}catch(i){console.warn("Unload failed",l,i)}B.extensions=n,B.enabledExtensions={...B.enabledExtensions,...r||{}};for(const l of n){if(!B.enabledExtensions[l.id]){console.log(`Skipping disabled plugin: ${l.id}`);continue}try{const i=((t=l==null?void 0:l.client)==null?void 0:t.entry)||"plugin.js",a=`/plugins/static/${l.id}/${i}`;console.log("Loading plugin:",l.id,"from",a);const c=await Jp(()=>import(a),[]),u=(c==null?void 0:c.default)||(c==null?void 0:c.init);if(typeof u=="function"){const h=await u({registerStyles:w=>Ia(l.id,w),registerBackgroundAnimations:w=>Ma(l.id,w)});typeof h=="function"&&(B.pluginDisposers[l.id]=h)}}catch(i){console.warn("Plugin load failed:",l==null?void 0:l.id,i)}}br()}catch(n){console.warn("Plugin manifest load failed",n)}}async function Zp(e){try{const t=B.pluginDisposers&&B.pluginDisposers[e];if(typeof t=="function"){try{await t()}catch(r){console.warn("Plugin disposer threw",e,r)}delete B.pluginDisposers[e]}const n=B.registeredStyles[e]||[];for(const r of n)try{r.remove()}catch{}delete B.registeredStyles[e],B.backgroundAnimations=B.backgroundAnimations.filter(r=>r.__pluginId!==e),br()}catch(t){console.warn("Failed to unload plugin",e,t)}}function qp(e){B._listeners=B._listeners||[],B._listeners.push(e)}function eh(e){B._listeners=B._listeners||[];const t=B._listeners.indexOf(e);t>=0&&B._listeners.splice(t,1)}const Ra=e=>{let t;const n=new Set,r=(u,h)=>{const w=typeof u=="function"?u(t):u;if(!Object.is(w,t)){const v=t;t=h??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(y=>y(t,v))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(r,s,a);return a},th=e=>e?Ra(e):Ra,nh=e=>e;function rh(e,t=nh){const n=cn.useSyncExternalStore(e.subscribe,cn.useCallback(()=>t(e.getState()),[e,t]),cn.useCallback(()=>t(e.getInitialState()),[e,t]));return cn.useDebugValue(n),n}const $a=e=>{const t=th(e),n=r=>rh(t,r);return Object.assign(n,t),n},Fn=e=>e?$a(e):$a;async function td(e,t="default"){const n=await fetch("/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:t})});if(!n.ok){const s=await n.text();throw new Error(`Chat request failed: ${n.status} ${s}`)}return(await n.json()).reply}async function sh(){const e=await fetch("/characters");if(!e.ok)throw new Error(`List characters failed: ${e.status}`);return e.json()}async function Ua({name:e,description:t="",avatar_url:n=null}){const r=await fetch("/characters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,avatar_url:n})});if(!r.ok)throw new Error(`Create character failed: ${r.status}`);return r.json()}async function nd(e){const t=await fetch(`/characters/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete character failed: ${t.status}`)}async function ct(){const e=await fetch("/config");if(!e.ok){const t=await e.text();throw new Error(`Get config failed: ${e.status} ${t}`)}return e.json()}async function He(e){const t=await fetch("/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();try{const r=JSON.parse(n),s=typeof(r==null?void 0:r.detail)=="string"?r.detail:JSON.stringify((r==null?void 0:r.detail)??r);throw new Error(`Update config failed: ${t.status} ${s}`)}catch{throw new Error(`Update config failed: ${t.status} ${n}`)}}return t.json()}async function oh(e){const t=e?`?provider=${encodeURIComponent(e)}`:"",n=await fetch(`/models${t}`);if(!n.ok){const r=await n.text();try{const s=JSON.parse(r),l=typeof(s==null?void 0:s.detail)=="string"?s.detail:JSON.stringify((s==null?void 0:s.detail)??s);throw new Error(`Get models failed: ${n.status} ${l}`)}catch{throw new Error(`Get models failed: ${n.status} ${r}`)}}return n.json()}async function mi(){const e=await fetch("/lorebooks/");if(!e.ok)throw new Error(`List lorebooks failed: ${e.status}`);return e.json()}async function lh({name:e,description:t="",entries:n=[]}){const r=await fetch("/lorebooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,entries:n})});if(!r.ok)throw new Error(`Create lorebook failed: ${r.status}`);return r.json()}async function ih(e){const t=new FormData;t.append("file",e);const n=await fetch("/lorebooks/import",{method:"POST",body:t});if(!n.ok)throw new Error(`Import lorebook failed: ${n.status}`);return n.json()}async function ah(e,t){const n=await fetch(`/characters/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update character failed: ${n.status}`);return n.json()}async function ch(e){const t=await fetch(`/image/models?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Get image models failed: ${t.status}`);return t.json()}async function uh(e="default"){const t=await fetch("/images/generate_from_chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(!t.ok)throw new Error(`Generate image failed: ${t.status}`);return t.json()}async function dh(e,t="default"){const n=await fetch("/images/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,session_id:t})});if(!n.ok)throw new Error(`Generate image failed: ${n.status}`);return n.json()}async function rd(e,t){const n=await fetch(`/lorebooks/entries/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update lore failed: ${n.status}`);return n.json()}async function sd(e,t){const n=await fetch(`/lorebooks/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update lorebook failed: ${n.status}`);return n.json()}async function wl(e){const t=await fetch(`/lorebooks/${e}`);if(!t.ok)throw new Error(`Get lorebook failed: ${t.status}`);return t.json()}async function fh(e){const t=await fetch("/lorebooks/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Create lore entry failed: ${t.status}`);return t.json()}async function ph(e){const t=await fetch(`/lorebooks/entries/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete lore entry failed: ${t.status}`);return t.json()}async function hh(e){const t=await fetch(`/lorebooks/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete lorebook failed: ${t.status}`);return t.json()}async function mh(e,t=10){const n=new URLSearchParams({q:e||"",limit:t.toString()}),r=await fetch(`/lorebooks/search?${n}`);if(!r.ok)throw new Error(`Search lorebooks failed: ${r.status}`);return r.json()}async function gh(e,t){const n=await fetch(`/lorebooks/characters/${e}/lorebooks/${t}`,{method:"POST"});if(!n.ok)throw new Error(`Link character to lorebook failed: ${n.status}`);return n.json()}async function yh(e,t){const n=await fetch(`/lorebooks/characters/${e}/lorebooks/${t}`,{method:"DELETE"});if(!n.ok)throw new Error(`Unlink character from lorebook failed: ${n.status}`);return n.json()}async function vh(e){const t=await fetch(`/lorebooks/characters/${e}/lorebooks`);if(!t.ok)throw new Error(`Get character lorebooks failed: ${t.status}`);return t.json()}async function xh(e){const t=await fetch("/lorebooks/inject_context",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Inject context failed: ${t.status}`);return t.json()}async function od(){const e=await fetch("/chats");if(!e.ok)throw new Error(`List chats failed: ${e.status}`);return e.json()}async function wh(e){const t=await fetch(`/chats/${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Get chat failed: ${t.status}`);return t.json()}async function ld(e){const t=await fetch(`/chats/${encodeURIComponent(e)}/reset`,{method:"POST"});if(!t.ok)throw new Error(`Reset chat failed: ${t.status}`);return t.json()}async function kh(){const e=await fetch("/prompts");if(!e.ok)throw new Error(`Get prompts failed: ${e.status}`);return e.json()}async function jh(e){const t=await fetch("/prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Save prompts failed: ${t.status}`);return t.json()}async function Sh(e="default"){const t=await fetch("/lore/suggest_from_chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(!t.ok)throw new Error(`Suggest lore failed: ${t.status}`);return t.json()}async function Ch(){const e=await fetch("/tools/mcp");if(!e.ok)throw new Error(`Get MCP servers failed: ${e.status}`);return e.json()}async function Nh(e){const t=await fetch("/tools/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Save MCP servers failed: ${t.status}`);return t.json()}async function Eh(){const e=await fetch("/tools/mcp/awesome");if(!e.ok)throw new Error(`Fetch MCP awesome failed: ${e.status}`);return e.json()}const _e=Fn((e,t)=>({messages:[],input:"",sending:!1,error:null,sessionId:"default",availableSessions:["default"],setMessages:n=>e(r=>({messages:typeof n=="function"?n(r.messages):n})),setInput:n=>e({input:n}),setSending:n=>e({sending:n}),setError:n=>e({error:n}),setSessionId:n=>e({sessionId:n}),setAvailableSessions:n=>e({availableSessions:n}),sendMessage:async n=>{if(!n.trim()||t().sending)return"";const{sessionId:r,messages:s}=t();n.trim(),e({sending:!0,error:null});try{const l=await td(n,r);return console.log("sendMessage: got reply:",l.slice(0,50)),e({sending:!1}),l}catch(l){throw e({error:l.message,sending:!1,messages:s}),l}},loadChat:async n=>{try{const{messages:r}=await wh(n);e({messages:r||[],sessionId:n,error:null})}catch(r){e({error:r.message})}},loadSessions:async()=>{try{const{sessions:n}=await od();e({availableSessions:n||["default"]})}catch(n){console.warn("Failed to load sessions:",n)}},resetChatSession:async n=>{try{await ld(n),await t().loadChat(n)}catch(r){e({error:r.message})}},createNewSession:n=>{const r=n.trim()||`session-${Date.now()}`;e({sessionId:r,messages:[],input:"",error:null})}})),_h=Fn((e,t)=>({showConfig:!1,showCharacters:!1,showChats:!1,showTools:!1,showLorebooks:!1,phoneOpen:!1,settingsTab:"connection",phoneUrl:"https://example.org",phoneStyle:"classic",suggestOpen:!1,suggests:[],showSOHint:!1,suppressSOHint:!1,expandedEntries:{},editorOpen:!1,editingChar:null,appTheme:{background_animations:[]},setShowConfig:n=>e({showConfig:n}),setShowCharacters:n=>e({showCharacters:n}),setShowChats:n=>e({showChats:n}),setShowTools:n=>e({showTools:n}),setShowLorebooks:n=>e({showLorebooks:n}),setPhoneOpen:n=>e({phoneOpen:n}),setSettingsTab:n=>e({settingsTab:n}),setPhoneUrl:n=>e({phoneUrl:n}),setPhoneStyle:n=>e({phoneStyle:n}),setSuggestOpen:n=>e({suggestOpen:n}),setSuggests:n=>e({suggests:n}),setShowSOHint:n=>e({showSOHint:n}),setSuppressSOHint:n=>e({suppressSOHint:n}),setExpandedEntries:n=>e({expandedEntries:n}),toggleExpandedEntry:n=>e(r=>({expandedEntries:{...r.expandedEntries,[n]:!r.expandedEntries[n]}})),setEditorOpen:n=>e({editorOpen:n}),setEditingChar:n=>e({editingChar:n}),closeAllPanels:()=>e({showConfig:!1,showCharacters:!1,showChats:!1,showTools:!1,showLorebooks:!1}),togglePanel:(n,r)=>{const s=t()[n],l=r!==void 0?r:!s;l&&n!=="phoneOpen"&&t().closeAllPanels(),e({[n]:l})},applyPluginAnimations:n=>{!n||!Array.isArray(n)||e(r=>({...r,appTheme:{...r.appTheme,background_animations:n.map(s=>typeof s=="string"?s:s.id).filter(Boolean)}}))},setAppTheme:n=>{e(r=>({...r,appTheme:{...r.appTheme,...n}}))},updateAppTheme:n=>{e(r=>({...r,appTheme:{...r.appTheme,...n}}))}})),Th=Fn((e,t)=>({characters:[],selectedCharacterId:null,lorebooks:[],selectedLorebook:null,loreEntries:[],selectedLorebookId:null,userPersona:{name:"User",description:""},extensions:[],extensionsEnabled:{},extensionsInitialized:!1,setCharacters:n=>e({characters:n}),setSelectedCharacterId:n=>e({selectedCharacterId:n}),setLorebooks:n=>e({lorebooks:n}),setSelectedLorebook:n=>e({selectedLorebook:n}),setLoreEntries:n=>e({loreEntries:n}),setSelectedLorebookId:n=>e({selectedLorebookId:n}),setUserPersona:n=>e({userPersona:n}),setExtensions:n=>e({extensions:n}),setExtensionsEnabled:n=>e({extensionsEnabled:n}),setExtensionsInitialized:n=>e({extensionsInitialized:n}),loadCharacters:async()=>{try{const n=await sh();e({characters:n||[]})}catch(n){console.warn("Failed to load characters:",n)}},loadLorebooks:async()=>{try{const n=await mi(),r=(n==null?void 0:n.lorebooks)||[];e({lorebooks:r}),(r==null?void 0:r.length)>0&&!t().selectedLorebook&&e({selectedLorebook:r[0]})}catch(n){console.warn("Failed to load lorebooks:",n)}},loadLoreEntries:async n=>{try{const r=await wl(n);e({loreEntries:r.entries||[]})}catch(r){console.warn("Failed to load lore entries:",r),e({loreEntries:[]})}},deleteCharacterAction:async n=>{try{await nd(n);const r=t().characters.filter(s=>s.id!==n);e({characters:r}),t().selectedCharacterId===n&&e({selectedCharacterId:null})}catch(r){throw console.error("Failed to delete character:",r),r}},updateLoreEntry:async(n,r)=>{try{await rd(n,r);const l=t().loreEntries.map(i=>i.id===n?{...i,...r}:i);e({loreEntries:l})}catch(s){throw console.error("Failed to update lore entry:",s),s}},updateExtensionsEnabled:async(n,r={})=>{const{persist:s=!0}=r;try{if(e({extensionsEnabled:n}),s&&!(await fetch("/plugins/enabled",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:n})})).ok)throw new Error("Failed to persist extensions")}catch(l){throw console.error("Failed to update extensions:",l),l}},findCharacterById:n=>t().characters.find(r=>r.id===n)||null,findLorebookById:n=>t().lorebooks.find(r=>r.id===n)||null})),Lh=Fn((e,t)=>({activeProvider:"echo",providers:{},configDraft:{api_key:"",api_base:"",model:"",temperature:.7},modelList:[],loadingModels:!1,debugFlags:{log_prompts:!1,log_responses:!1},userPersona:{name:"",description:""},maxTokens:2048,structuredOutput:!1,setActiveProvider:n=>e({activeProvider:n}),setProviders:n=>e({providers:n}),setConfigDraft:n=>e({configDraft:n}),setModelList:n=>e({modelList:n}),setLoadingModels:n=>e({loadingModels:n}),setUserPersona:n=>e({userPersona:n}),setDebugFlags:n=>e({debugFlags:n}),setMaxTokens:n=>e({maxTokens:n}),setStructuredOutput:n=>e({structuredOutput:n}),loadConfig:async()=>{var n;try{const r=await ct();e({activeProvider:r.active_provider||"echo",providers:r.providers||{},debugFlags:r.debug||{log_prompts:!1,log_responses:!1},userPersona:r.user_persona||{name:"",description:""},maxTokens:r.max_context_tokens||2048,structuredOutput:r.structured_output||!1});const s=((n=r.providers)==null?void 0:n[r.active_provider])||{};e({configDraft:{api_key:"",api_base:s.api_base||"",model:s.model||"",temperature:s.temperature??.7}}),await t().loadModelsForProvider(r.active_provider)}catch(r){console.warn("Failed to load config:",r)}},updateMaxTokens:async n=>{try{await He({max_context_tokens:n}),e({maxTokens:n})}catch(r){throw console.error("Failed to update max tokens:",r),r}},updateDebugFlags:async n=>{try{await He({debug:n}),e({debugFlags:n})}catch(r){throw console.error("Failed to update debug flags:",r),r}},updateUserPersona:async n=>{try{await He({user_persona:n}),e({userPersona:n})}catch(r){throw console.error("Failed to update user persona:",r),r}},updateStructuredOutput:async n=>{try{await He({structured_output:n}),e({structuredOutput:n})}catch(r){throw console.error("Failed to update structured output:",r),r}},updateProviderConfig:async(n,r)=>{try{await He({active_provider:n,providers:{[n]:r}}),e(s=>({providers:{...s.providers,[n]:r},configDraft:r}))}catch(s){throw console.error("Failed to update provider config:",s),s}},loadModels:async()=>{const n=t().activeProvider;await t().loadModelsForProvider(n)},loadModelsForProvider:async n=>{try{e({loadingModels:!0});const{models:r}=await oh(n);e({modelList:r||[],loadingModels:!1})}catch(r){console.error("Failed to load models:",r),e({modelList:[],loadingModels:!1})}}})),So={primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827",phone_style:"classic",background_animations:[]};Fn((e,t)=>({appTheme:So,availableThemes:[So],currentThemeName:null,customThemes:{},setAppTheme:n=>{e({appTheme:n}),t().applyTheme(n)},updateThemeColors:n=>{e(r=>({appTheme:{...r.appTheme,...n}})),t().applyTheme(t().appTheme)},setPhoneStyle:n=>{e(r=>({appTheme:{...r.appTheme,phone_style:n}}))},addBackgroundAnimation:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:[...r.appTheme.background_animations||[],n].filter((s,l,i)=>i.indexOf(s)===l)}}))},removeBackgroundAnimation:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:(r.appTheme.background_animations||[]).filter(s=>s!==n)}}))},setBackgroundAnimations:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:n}}))},saveCustomTheme:(n,r)=>{e(s=>({customThemes:{...s.customThemes,[n]:{...r}}}));try{const s=localStorage.getItem("coolchat-themes")||"{}",l=JSON.parse(s);l[n]=r,localStorage.setItem("coolchat-themes",JSON.stringify(l))}catch(s){console.warn("Failed to save theme to localStorage:",s)}},deleteCustomTheme:n=>{e(r=>{const s={...r.customThemes};delete s[n];try{const l=localStorage.getItem("coolchat-themes")||"{}",i=JSON.parse(l);delete i[n],localStorage.setItem("coolchat-themes",JSON.stringify(i))}catch(l){console.warn("Failed to delete theme from localStorage:",l)}return{customThemes:s}})},loadCustomTheme:n=>{const r=t().customThemes[n];r?(t().setAppTheme(r),e({currentThemeName:n})):console.warn("Theme not found:",n)},exportTheme:()=>{const n=t().appTheme,r=t().currentThemeName||"Exported Theme";return JSON.stringify({name:r,theme:n,exportedAt:new Date().toISOString(),version:"1.0"},null,2)},importTheme:n=>{try{const{name:r,theme:s}=JSON.parse(n);s&&typeof s=="object"&&t().saveCustomTheme(r,s)}catch(r){throw console.error("Failed to import theme:",r),new Error("Invalid theme format")}},applyTheme:n=>{const r=document.documentElement.style;n.primary&&r.setProperty("--primary",n.primary),n.secondary&&r.setProperty("--panel",n.secondary),n.text1&&r.setProperty("--text",n.text1),n.text2&&r.setProperty("--muted",n.text2),n.highlight&&r.setProperty("--assistant",n.highlight),n.lowlight&&r.setProperty("--bg",n.lowlight);const s=n.background_animations||[],l=new CustomEvent("coolchat:themeUpdate",{detail:{...n,background_animations:s}});window.dispatchEvent(l)},resetTheme:()=>{t().setAppTheme(So),e({currentThemeName:null})}}));const Ph=()=>{const e=_e(),t=N.useCallback(async u=>await e.sendMessage(u),[e]),n=N.useCallback(async u=>{e.setSessionId(u),await e.loadChat(u)},[e]),r=_e(u=>u.messages),s=_e(u=>u.input),l=_e(u=>u.sending),i=_e(u=>u.error),a=_e(u=>u.sessionId),c=_e(u=>u.availableSessions);return{messages:r,input:s,sending:l,error:i,sessionId:a,availableSessions:c,sendMessage:t,setInput:e.setInput,setError:e.setError,setMessages:e.setMessages,setSending:e.setSending,switchSession:n,resetChat:e.resetChatSession,loadSessions:e.loadSessions,createSession:e.createNewSession}},bh=()=>{const e=_e(),t=N.useCallback(async()=>{try{const r=await uh(e.sessionId);e.setMessages(s=>[...s,{role:"assistant",image_url:r.image_url,content:""}])}catch(r){throw new Error(r.message)}},[e]),n=N.useCallback(async r=>{try{const s=await dh(r,e.sessionId);e.setMessages(l=>[...l,{role:"assistant",image_url:s.image_url,content:r}])}catch(s){throw new Error(s.message)}},[e]);return{generateImageFromLastMessage:t,generateImage:n}},Oh=()=>{const e=_e();return{suggestLore:N.useCallback(async()=>{try{return await Sh(e.sessionId)}catch(n){throw new Error(n.message)}},[e])}};class Dh{constructor(){this.config=null,this.lastConfigCheck=0,this.configCacheTime=5e3,this.loadConfig()}async loadConfig(){const t=Date.now();if(this.config&&t-this.lastConfigCheck<this.configCacheTime)return await this.config;try{const n=await fetch("/debug.json");if(!n.ok)throw new Error(`HTTP ${n.status}`);this.config=await n.json(),this.lastConfigCheck=t}catch{this.config||console.warn("Failed to load debug.json - using defaults"),this.config={frontend:{tool_parsing:!0,llm_responses:!0,api_calls:!1,store_actions:!1,component_render:!1,performance:!1},enabled:!0}}return this.config}async isEnabled(t){const n=await this.loadConfig();return!n||!n.enabled?!1:(n.frontend||{})[t]===!0}async log(t,n,...r){await this.isEnabled(t)&&console.log(`[DEBUG ${t.toUpperCase()}] ${n}`,...r)}async debugToolParsing(t,...n){await this.log("tool_parsing",t,...n)}async debugLLMResponses(t,...n){await this.log("llm_responses",t,...n)}async debugAPICalls(t,...n){await this.log("api_calls",t,...n)}async debugStoreActions(t,...n){await this.log("store_actions",t,...n)}async debugComponentRender(t,...n){await this.log("component_render",t,...n)}async debugPerformance(t,...n){await this.log("performance",t,...n)}}let Co=null;function id(){return Co||(Co=new Dh),Co}const st=(e,...t)=>id().debugToolParsing(e,...t),Ba=(e,...t)=>id().debugLLMResponses(e,...t),Nr=new Map,Yr=e=>{const t=Nr.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Ah=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=Nr.get(n.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(n),stores:{}};return Nr.set(n.name,s),{type:"tracked",store:e,...s}},zh=(e,t)=>{if(t===void 0)return;const n=Nr.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&Nr.delete(e))},Ih=e=>{var t,n;if(!e)return;const r=e.split(`
`),s=r.findIndex(i=>i.includes("api.setState"));if(s<0)return;const l=((t=r[s+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(l))==null?void 0:n[1]},Mh=(e,t={})=>(n,r,s)=>{const{enabled:l,anonymousActionType:i,store:a,...c}=t;let u;try{u=(l??!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return e(n,r,s);const{connection:h,...w}=Ah(a,u,c);let v=!0;s.setState=(S,L,f)=>{const d=n(S,L);if(!v)return d;const m=f===void 0?{type:i||Ih(new Error().stack)||"anonymous"}:typeof f=="string"?{type:f}:f;return a===void 0?(h==null||h.send(m,r()),d):(h==null||h.send({...m,type:`${a}/${m.type}`},{...Yr(c.name),[a]:s.getState()}),d)},s.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),zh(c.name,a)}};const y=(...S)=>{const L=v;v=!1,n(...S),v=L},g=e(s.setState,r,s);if(w.type==="untracked"?h==null||h.init(g):(w.stores[w.store]=s,h==null||h.init(Object.fromEntries(Object.entries(w.stores).map(([S,L])=>[S,S===w.store?g:L.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let S=!1;const L=s.dispatch;s.dispatch=(...f)=>{L(...f)}}return h.subscribe(S=>{var L;switch(S.type){case"ACTION":if(typeof S.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return No(S.payload,f=>{if(f.type==="__setState"){if(a===void 0){y(f.state);return}Object.keys(f.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const d=f.state[a];if(d==null)return;JSON.stringify(s.getState())!==JSON.stringify(d)&&y(d);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(f)});case"DISPATCH":switch(S.payload.type){case"RESET":return y(g),a===void 0?h==null?void 0:h.init(s.getState()):h==null?void 0:h.init(Yr(c.name));case"COMMIT":if(a===void 0){h==null||h.init(s.getState());return}return h==null?void 0:h.init(Yr(c.name));case"ROLLBACK":return No(S.state,f=>{if(a===void 0){y(f),h==null||h.init(s.getState());return}y(f[a]),h==null||h.init(Yr(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return No(S.state,f=>{if(a===void 0){y(f);return}JSON.stringify(s.getState())!==JSON.stringify(f[a])&&y(f[a])});case"IMPORT_STATE":{const{nextLiftedState:f}=S.payload,d=(L=f.computedStates.slice(-1)[0])==null?void 0:L.state;if(!d)return;y(a===void 0?d:d[a]),h==null||h.send(null,f);return}case"PAUSE_RECORDING":return v=!v}return}}),g},Fh=Mh,No=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)},ad=Fn()(Fh((e,t)=>({lorebooks:[],selectedLorebook:null,lorebookLoading:!1,loreEntries:[],selectedEntries:new Set,entryLoading:!1,currentPage:0,pageSize:50,totalEntries:0,hasMoreEntries:!1,searchQuery:"",searchResults:[],searchFilters:{keywords:[],secondary_keywords:[]},isSearching:!1,showEditor:!1,editingEntry:null,showBulkOps:!1,showImport:!1,linkedCharacters:[],availableCharacters:[],cache:new Map,fetchLorebooks:async()=>{console.log("[DEBUG] fetchLorebooks called");try{e({lorebookLoading:!0});const n=await mi(),r=n&&n.lorebooks?n.lorebooks:[];console.log("[DEBUG] Fetch completed, found",r.length,"lorebooks"),e({lorebooks:r,lorebookLoading:!1}),r.length>0&&!t().selectedLorebook&&t().selectLorebook(r[0])}catch(n){console.error("Failed to fetch lorebooks:",n),e({lorebookLoading:!1})}},selectLorebook:n=>{e({selectedLorebook:n}),n?t().refreshLoreEntries():e({loreEntries:[],totalEntries:0,currentPage:0,hasMoreEntries:!1})},createLorebookAction:async n=>{try{const r=await lh({name:n.name,description:n.description||"",entries:n.entries||[]});return t().fetchLorebooks(),r}catch(r){throw console.error("Failed to create lorebook:",r),r}},updateLorebookAction:async(n,r)=>{try{await sd(n,r);const s=t().lorebooks.map(i=>i.id===n?{...i,...r}:i);e({lorebooks:s});const l=t().selectedLorebook;l&&l.id===n&&e({selectedLorebook:{...l,...r}})}catch(s){throw console.error("Failed to update lorebook:",s),s}},deleteLorebookAction:async n=>{try{await hh(n);const r=t().lorebooks.filter(l=>l.id!==n);e({lorebooks:r});const s=t().selectedLorebook;s&&s.id===n&&e({selectedLorebook:null,loreEntries:[]})}catch(r){throw console.error("Failed to delete lorebook:",r),r}},refreshLoreEntries:async()=>{const n=t().selectedLorebook;if(n)try{e({entryLoading:!0});const s=(await wl(n.id)).entries||[];e({loreEntries:s,totalEntries:s.length,currentPage:0,hasMoreEntries:!1,entryLoading:!1})}catch(r){console.error("Failed to refresh lore entries:",r),e({entryLoading:!1})}},loadLoreEntriesPaginated:async(n=0,r=50)=>{const s=t().selectedLorebook;if(s)try{e({entryLoading:!0});const i=(await wl(s.id)).entries||[],a=n*r,c=a+r;e({loreEntries:i.slice(a,c),currentPage:n,pageSize:r,totalEntries:i.length,hasMoreEntries:c<i.length,entryLoading:!1})}catch(l){console.error("Failed to load lore entries:",l),e({entryLoading:!1})}},createLoreEntryAction:async n=>{try{const r=t().selectedLorebook;if(!r)throw new Error("No lorebook selected");const s={...n,lorebook_id:r.id},l=await fh(s),i=t().loreEntries;return e({loreEntries:[...i,l],totalEntries:t().totalEntries+1}),l}catch(r){throw console.error("Failed to create lore entry:",r),r}},updateLoreEntryAction:async(n,r)=>{try{await rd(n,r);const l=t().loreEntries.map(i=>i.id===n?{...i,...r}:i);e({loreEntries:l})}catch(s){throw console.error("Failed to update lore entry:",s),s}},deleteLoreEntryAction:async(n,r=!0)=>{try{if(await ph(n),r){const l=t().loreEntries.filter(i=>i.id!==n);e({loreEntries:l,totalEntries:t().totalEntries-1,selectedEntries:new Set([...t().selectedEntries].filter(i=>i!==n))})}}catch(s){throw console.error("Failed to delete lore entry:",s),s}},searchLoreAction:async(n,r={})=>{try{e({isSearching:!0,searchQuery:n});const s=await mh(n,100);e({searchResults:s.results||[],isSearching:!1})}catch(s){console.error("Search failed:",s),e({isSearching:!1})}},clearSearch:()=>{e({searchQuery:"",searchResults:[],searchFilters:{keywords:[],secondary_keywords:[]}})},toggleEntrySelection:n=>{const r=new Set(t().selectedEntries);r.has(n)?r.delete(n):r.add(n),e({selectedEntries:r})},selectAllEntries:()=>{const n=t().loreEntries.map(s=>s.id);if(new Set([...n].filter(s=>!t().selectedEntries.has(s))).size>0){const s=new Set([...t().selectedEntries,...n]);e({selectedEntries:s})}else e({selectedEntries:new Set})},clearSelection:()=>{e({selectedEntries:new Set})},bulkUpdateEntries:async n=>{const r=Array.from(t().selectedEntries);try{for(const s of r)n.type==="update"&&await t().updateLoreEntryAction(s,n.data);t().clearSelection()}catch(s){throw console.error("Bulk update failed:",s),s}},bulkDeleteEntries:async()=>{const n=Array.from(t().selectedEntries);try{for(const l of n)await t().deleteLoreEntryAction(l,!1);const s=t().loreEntries.filter(l=>!n.includes(l.id));e({loreEntries:s,selectedEntries:new Set,totalEntries:t().totalEntries-n.length})}catch(r){throw console.error("Bulk delete failed:",r),r}},loadLinkedCharacters:async n=>{try{const r=await vh(n);e({linkedCharacters:r.lorebooks||[]})}catch(r){throw console.error("Failed to load linked characters:",r),r}},linkCharacterAction:async n=>{const r=t().selectedLorebook;if(r)try{await gh(n,r.id),t().loadLinkedCharacters(n)}catch(s){throw console.error("Failed to link character:",s),s}},unlinkCharacterAction:async n=>{const r=t().selectedLorebook;if(r)try{await yh(n,r.id),t().loadLinkedCharacters(n)}catch(s){throw console.error("Failed to unlink character:",s),s}},importLorebookAction:async n=>{try{await ih(n),t().fetchLorebooks()}catch(r){throw console.error("Import failed:",r),r}},injectContextForChat:async(n,r={})=>{const s=t().selectedLorebook;if(!s)throw new Error("No lorebook selected");const l=n.slice(-3).join(" "),i={session_id:r.sessionId||"default",max_tokens:r.maxTokens||1e3,lorebook_ids:s?[s.id]:[],recent_text:l};try{return await xh(i)}catch(a){throw console.error("Context injection failed:",a),a}},setShowEditor:(n,r=null)=>{e({showEditor:n,editingEntry:r})},setShowBulkOps:n=>{e({showBulkOps:n})},setShowImport:n=>{e({showImport:n})},getCached:n=>t().cache.get(n),setCached:(n,r)=>{const s=new Map(t().cache);s.set(n,r),e({cache:s})},reset:()=>{e({selectedLorebook:null,loreEntries:[],selectedEntries:new Set,currentPage:0,searchQuery:"",searchResults:[],showEditor:!1,editingEntry:null,showBulkOps:!1,showImport:!1,linkedCharacters:[],availableCharacters:[]})}}),{name:"lorebook-store"})),Rh=({lorebooks:e,viewMode:t,selectedLorebookId:n,onSelectLorebook:r,onEditLorebook:s,onDeleteLorebook:l,onCreateLorebook:i})=>{const[a,c]=N.useState(""),[u,h]=N.useState(""),w=async v=>{v.preventDefault(),a.trim()&&(await i({name:a,description:u,entries:[]}),c(""),h(""))};return e.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("h3",{children:"No Lorebooks Yet"}),o.jsx("p",{children:"Create your first lorebook to get started with organizing your game world."}),o.jsxs("form",{onSubmit:w,className:"quick-create-form",children:[o.jsx("input",{type:"text",placeholder:"Lorebook name",value:a,onChange:v=>c(v.target.value),required:!0}),o.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:v=>h(v.target.value)}),o.jsx("button",{type:"submit",className:"primary",children:"Create Lorebook"})]})]}):t==="table"?o.jsx("div",{className:"lorebook-table-container",children:o.jsxs("table",{className:"lorebook-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Description"}),o.jsx("th",{children:"Entries"}),o.jsx("th",{children:"Last Updated"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:e.map(v=>o.jsxs("tr",{className:n===v.id?"selected":"",onClick:()=>r(v),children:[o.jsx("td",{className:"lorebook-name",children:v.name}),o.jsx("td",{className:"lorebook-description",children:v.description||""}),o.jsx("td",{className:"entry-count",children:v.entry_count}),o.jsx("td",{className:"updated-at",children:new Date(v.updated_at).toLocaleDateString()}),o.jsxs("td",{className:"actions",children:[o.jsx("button",{onClick:y=>{y.stopPropagation(),s(v)},title:"Edit lorebook",children:""}),o.jsx("button",{onClick:y=>{y.stopPropagation(),l(v.id)},title:"Delete lorebook",className:"delete-btn",children:""})]})]},v.id))})]})}):o.jsxs("div",{className:"lorebook-grid",children:[e.map(v=>o.jsx($h,{lorebook:v,isSelected:n===v.id,onSelect:()=>r(v),onEdit:()=>s(v),onDelete:()=>l(v.id)},v.id)),o.jsxs("div",{className:"lorebook-card quick-create-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"card-icon add-icon",children:""}),o.jsx("h3",{children:"Create New"})]}),o.jsx("div",{className:"card-content",children:o.jsxs("form",{onSubmit:w,children:[o.jsx("input",{type:"text",placeholder:"Lorebook title",value:a,onChange:v=>c(v.target.value),required:!0}),o.jsx("textarea",{placeholder:"Brief description...",value:u,onChange:v=>h(v.target.value),rows:2}),o.jsx("button",{type:"submit",className:"primary create-btn",children:"Create Lorebook"})]})})]})]})},$h=({lorebook:e,isSelected:t,onSelect:n,onEdit:r,onDelete:s})=>{const[l,i]=N.useState(!1),a=c=>{const u=new Date(c),w=Math.abs(new Date().getTime()-u.getTime()),v=Math.ceil(w/(1e3*60*60*24));return v===1?"Today":v===2?"Yesterday":v<=7?`${v-1} days ago`:u.toLocaleDateString()};return o.jsxs("div",{className:`lorebook-card ${t?"selected":""} ${l?"show-actions":""}`,onClick:n,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"card-icon",children:""}),o.jsx("h3",{className:"card-title",children:e.name}),o.jsxs("div",{className:"card-actions",children:[o.jsx("button",{onClick:c=>{c.stopPropagation(),r()},title:"Edit lorebook",children:""}),o.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm(`Delete "${e.name}"?`)&&s()},title:"Delete lorebook",className:"delete-btn",children:""})]})]}),o.jsxs("div",{className:"card-content",children:[o.jsx("p",{className:"card-description",children:e.description||"No description"}),o.jsxs("div",{className:"card-stats",children:[o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-label",children:"Entries:"}),o.jsx("span",{className:"stat-value",children:e.entry_count})]}),o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-label",children:"Updated:"}),o.jsx("span",{className:"stat-value",children:a(e.updated_at)})]})]})]}),t&&o.jsx("div",{className:"selection-indicator",children:" Selected"})]})},Uh=({onSearch:e,onClear:t,isSearching:n,searchResults:r})=>{const[s,l]=N.useState(""),[i,a]=N.useState(null),[c,u]=N.useState(!1),[h,w]=N.useState({keywords:[],secondaryKeywords:[],logic:"AND ANY",minTrigger:"",maxTrigger:"",limit:50}),v=N.useCallback(d=>{i&&clearTimeout(i);const m=setTimeout(async()=>{d.trim()?await e(d):t()},300);a(m)},[e,t,i]),y=d=>{const m=d.target.value;l(m),v(m)},g=async()=>{(s||h.keywords.length>0)&&await e(s)},S=()=>{l(""),w({keywords:[],secondaryKeywords:[],logic:"AND ANY",minTrigger:"",maxTrigger:"",limit:50}),t()},L=(d,m)=>{m.trim()&&w(x=>({...x,[d]:[...x[d],m.trim()].filter((k,C,E)=>E.indexOf(k)===C)}))},f=(d,m)=>{w(x=>({...x,[d]:x[d].filter(k=>k!==m)}))};return o.jsxs("div",{className:"lorebook-search",children:[o.jsxs("div",{className:"search-input-container",children:[o.jsxs("div",{className:"search-input-wrapper",children:[o.jsx("input",{type:"text",placeholder:"Search lore entries...",value:s,onChange:y,className:"search-input"}),s&&o.jsx("button",{onClick:S,className:"clear-search-btn",title:"Clear search",children:""}),o.jsx("button",{onClick:()=>u(!c),className:`advanced-search-btn ${c?"active":""}`,title:"Advanced search",children:""})]}),r.length>0&&s&&o.jsxs("div",{className:"search-stats",children:["Found ",r.length,' entries matching "',s,'"']})]}),c&&o.jsx("div",{className:"advanced-search-panel",children:o.jsxs("div",{className:"advanced-search-content",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Primary Keywords"}),o.jsxs("div",{className:"keyword-input-group",children:[h.keywords.map((d,m)=>o.jsxs("span",{className:"keyword-tag",children:[d,o.jsx("button",{onClick:()=>f("keywords",d),className:"remove-keyword",children:""})]},m)),o.jsx("input",{type:"text",placeholder:"Add keyword...",onKeyPress:d=>{d.key==="Enter"&&(L("keywords",d.target.value),d.target.value="")},className:"keyword-input"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Secondary Keywords"}),o.jsxs("div",{className:"keyword-input-group",children:[h.secondaryKeywords.map((d,m)=>o.jsxs("span",{className:"keyword-tag",children:[d,o.jsx("button",{onClick:()=>f("secondaryKeywords",d),className:"remove-keyword",children:""})]},m)),o.jsx("input",{type:"text",placeholder:"Add secondary keyword...",onKeyPress:d=>{d.key==="Enter"&&(L("secondaryKeywords",d.target.value),d.target.value="")},className:"keyword-input"})]})]}),o.jsxs("div",{className:"filter-row",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Logic"}),o.jsxs("select",{value:h.logic,onChange:d=>w(m=>({...m,logic:d.target.value})),className:"logic-select",children:[o.jsx("option",{value:"AND ANY",children:"AND ANY"}),o.jsx("option",{value:"AND ALL",children:"AND ALL"}),o.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),o.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Trigger Range"}),o.jsxs("div",{className:"trigger-range",children:[o.jsx("input",{type:"number",placeholder:"Min%",value:h.minTrigger,onChange:d=>w(m=>({...m,minTrigger:d.target.value})),min:"0",max:"100"}),o.jsx("span",{children:"to"}),o.jsx("input",{type:"number",placeholder:"Max%",value:h.maxTrigger,onChange:d=>w(m=>({...m,maxTrigger:d.target.value})),min:"0",max:"100"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Limit Results"}),o.jsx("input",{type:"number",value:h.limit,onChange:d=>w(m=>({...m,limit:parseInt(d.target.value,10)||50})),min:"1",max:"1000",className:"limit-input"})]})]}),o.jsxs("div",{className:"advanced-search-actions",children:[o.jsx("button",{onClick:g,disabled:n,className:"primary",children:n?"Searching...":"Search"}),o.jsx("button",{onClick:S,className:"secondary",children:"Clear All"}),o.jsx("button",{onClick:()=>u(!1),className:"secondary",children:"Close"})]})]})}),s&&o.jsx("div",{className:"search-results-summary",children:n?o.jsxs("div",{className:"searching-indicator",children:[o.jsx("div",{className:"spinner"}),"Searching..."]}):r.length>0?o.jsx(Bh,{results:r.slice(0,3)}):s&&o.jsxs("div",{className:"no-results",children:['No entries found matching "',s,'"']})})]})},Bh=({results:e})=>o.jsxs("div",{className:"search-results-preview",children:[e.map((t,n)=>{var r;return o.jsxs("div",{className:"search-result-item",children:[o.jsxs("div",{className:"result-header",children:[o.jsx("h4",{children:t.title||"Untitled Entry"}),o.jsxs("span",{className:"result-score",children:["Score: ",Math.round(t.score)]})]}),o.jsxs("div",{className:"result-content",children:[t.content.substring(0,100),"..."]}),o.jsxs("div",{className:"result-meta",children:[t.lorebook_name,"  Keywords: ",((r=t.keywords)==null?void 0:r.join(", "))||"none"]})]},n)}),e.length>=3&&o.jsxs("div",{className:"view-all-results",children:["+ ",e.length," more results..."]})]}),Hh=({selectedCount:e,onBulkDelete:t,onBulkEdit:n,onClearSelection:r,onBulkTag:s,onBulkMove:l})=>{const[i,a]=N.useState("idle"),[c,u]=N.useState("");if(e===0)return null;const h=async()=>{if(i!=="deleting"){a("deleting");return}if(window.confirm(`Delete ${e} entry${e===1?"":"ies"}? This action cannot be undone.`))try{await t(),a("idle")}catch(y){console.error("Bulk delete failed:",y),a("idle")}else a("idle")},w=async()=>{if(c.trim()&&s)try{await s(c.trim()),u("")}catch(y){console.error("Bulk tagging failed:",y)}},v=y=>i===y?"active":"";return o.jsxs("div",{className:"bulk-actions-panel",children:[o.jsxs("div",{className:"bulk-selection-info",children:[o.jsxs("span",{className:"selection-count",children:[e," entr",e===1?"y":"ies"," selected"]}),o.jsx("button",{onClick:r,className:"clear-selection-btn",title:"Clear selection",children:""})]}),o.jsxs("div",{className:"bulk-action-buttons",children:[o.jsx("button",{onClick:()=>a("editing"),className:`bulk-action-btn edit-btn ${v("editing")}`,title:"Bulk edit selected entries",children:" Edit"}),s&&o.jsx("button",{onClick:()=>{},className:"bulk-action-btn tag-btn",title:"Add tag to selected entries",children:" Tag"}),l&&o.jsx("button",{onClick:()=>{},className:"bulk-action-btn move-btn",title:"Move selected entries",children:" Move"}),o.jsxs("button",{onClick:h,className:`bulk-action-btn delete-btn ${v("deleting")}`,title:"Delete selected entries",children:[" ",i==="deleting"?"Confirm Delete":"Delete"]})]}),i==="editing"&&o.jsx(Vh,{selectedCount:e,onSave:()=>{n(),a("idle")},onCancel:()=>a("idle")}),i==="tagging"&&s&&o.jsx("div",{className:"bulk-tagging-panel",children:o.jsxs("div",{className:"tag-input-group",children:[o.jsx("input",{type:"text",placeholder:"Add tag to selected entries...",value:c,onChange:y=>u(y.target.value),onKeyPress:y=>{y.key==="Enter"&&w()},autoFocus:!0}),o.jsx("button",{onClick:w,disabled:!c.trim(),className:"add-tag-btn",children:"Add Tag"}),o.jsx("button",{onClick:()=>{a("idle"),u("")},className:"cancel-tag-btn",children:"Cancel"})]})}),i==="deleting"&&o.jsxs("div",{className:"bulk-delete-confirm",children:[o.jsxs("div",{className:"confirm-message",children:["This will permanently delete ",e," selected entr",e===1?"y":"ies",". This action cannot be undone."]}),o.jsxs("div",{className:"confirm-actions",children:[o.jsx("button",{onClick:h,className:"confirm-delete-btn danger",children:"Yes, Delete All"}),o.jsx("button",{onClick:()=>a("idle"),className:"cancel-delete-btn",children:"Cancel"})]})]})]})},Vh=({selectedCount:e,onSave:t,onCancel:n})=>{const[r,s]=N.useState("logic"),[l,i]=N.useState(""),a=()=>{t()};return o.jsxs("div",{className:"bulk-edit-panel",children:[o.jsxs("div",{className:"panel-header",children:[o.jsxs("h3",{children:["Bulk Edit ",e," Entr",e===1?"y":"ies"]}),o.jsx("button",{onClick:n,className:"close-btn",title:"Close bulk edit",children:""})]}),o.jsxs("div",{className:"bulk-edit-content",children:[o.jsxs("div",{className:"field-selector",children:[o.jsx("label",{children:"Field to edit:"}),o.jsxs("select",{value:r,onChange:c=>s(c.target.value),children:[o.jsx("option",{value:"logic",children:"Logic"}),o.jsx("option",{value:"trigger",children:"Trigger"}),o.jsx("option",{value:"order",children:"Order"}),o.jsx("option",{value:"addKeyword",children:"Add Keyword"}),o.jsx("option",{value:"removeKeyword",children:"Remove Keyword"})]})]}),o.jsxs("div",{className:"value-input",children:[r==="logic"&&o.jsxs("select",{value:l||"AND ANY",onChange:c=>i(c.target.value),children:[o.jsx("option",{value:"AND ANY",children:"AND ANY"}),o.jsx("option",{value:"AND ALL",children:"AND ALL"}),o.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),o.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]}),r==="trigger"&&o.jsxs("div",{className:"range-input",children:[o.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:l||50,onChange:c=>i(parseInt(c.target.value,10))}),o.jsxs("span",{children:[l||50,"%"]})]}),r==="order"&&o.jsx("input",{type:"number",value:l||0,onChange:c=>i(parseFloat(c.target.value)),step:"0.1",placeholder:"0.0"}),(r==="addKeyword"||r==="removeKeyword")&&o.jsx("input",{type:"text",value:l||"",onChange:c=>i(c.target.value),placeholder:"Enter keyword..."})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Preview:"}),o.jsxs("div",{className:"preview-text",children:["Set ",o.jsx("strong",{children:r})," to ",o.jsx("strong",{children:l||"value"})," for selected entries"]})]})]}),o.jsxs("div",{className:"panel-actions",children:[o.jsx("button",{onClick:a,className:"primary",children:"Apply Changes"}),o.jsx("button",{onClick:n,className:"secondary",children:"Cancel"})]})]})},Wh=({onImport:e,onCancel:t})=>{const[n,r]=N.useState(!1),[s,l]=N.useState(null),[i,a]=N.useState(!1),[c,u]=N.useState(null),[h,w]=N.useState(null),v=k=>{k.preventDefault(),r(!0)},y=k=>{k.preventDefault(),r(!1)},g=k=>{k.preventDefault(),r(!1),u(null);const C=Array.from(k.dataTransfer.files);C.length>0&&L(C[0])},S=k=>{const C=k.target.files;C&&C.length>0&&L(C[0])},L=async k=>{if(!k.name.toLowerCase().endsWith(".json")){u("Only JSON files are supported");return}const C=10*1024*1024;if(k.size>C){u("File size must be less than 10MB");return}l(k),u(null);try{const E=await k.text(),b=JSON.parse(E),$=f(b);w($)}catch{u("Invalid JSON format"),w(null)}},f=k=>{var C;try{let E=[];if(k&&typeof k=="object"){k.entries?E=Array.isArray(k.entries)?k.entries:Object.values(k.entries||{}):Array.isArray(k)&&(E=k);const b={name:k.name||((C=s==null?void 0:s.name)==null?void 0:C.replace(".json","")),description:k.description||"",totalEntries:E.length,keywords:[],logicTypes:{},averageTrigger:0,previewEntries:E.slice(0,3),format:d(k)};let $=0;const P=new Set,K=new Set;return E.forEach(re=>{re.keywords&&Array.isArray(re.keywords)&&re.keywords.forEach(De=>P.add(De)),re.logic&&(b.logicTypes[re.logic]=(b.logicTypes[re.logic]||0)+1),typeof re.trigger=="number"&&($+=re.trigger)}),b.keywords=Array.from(P),b.averageTrigger=E.length>0?Math.round($/E.length):0,b}}catch(E){console.error("Preview generation error:",E)}return null},d=k=>k.entries&&k.name?"SillyTavern":Array.isArray(k)?"Compact Array":k.lastUpdate?"AidanAI":"Unknown",m=async()=>{if(s){a(!0),u(null);try{await e(s)}catch(k){u(k.message||"Import failed")}finally{a(!1)}}},x=()=>{l(null),w(null),u(null)};return o.jsxs("div",{className:"lorebook-import-panel",children:[o.jsxs("div",{className:"panel-header",children:[o.jsx("h3",{children:"Import Lorebook"}),o.jsx("button",{onClick:t,className:"close-btn",title:"Close import panel",children:""})]}),o.jsxs("div",{className:"import-content",children:[s?o.jsxs("div",{className:"file-preview",children:[o.jsxs("div",{className:"file-header",children:[o.jsxs("div",{className:"file-info",children:[o.jsxs("h4",{children:[" ",s.name]}),o.jsxs("span",{className:"file-size",children:[(s.size/1024).toFixed(1)," KB"]})]}),o.jsx("div",{className:"file-actions",children:o.jsx("button",{onClick:x,className:"secondary",children:"Choose Different File"})})]}),c&&o.jsxs("div",{className:"error-message",children:[o.jsx("span",{className:"error-icon",children:""}),c]}),h&&o.jsxs("div",{className:"import-preview",children:[o.jsx("h4",{children:"Import Preview"}),o.jsxs("div",{className:"preview-grid",children:[o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Lorebook Name:"}),o.jsx("span",{children:h.name||"Untitled"})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Format:"}),o.jsx("span",{children:h.format})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Entries:"}),o.jsx("span",{children:h.totalEntries})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Keywords:"}),o.jsxs("span",{children:[h.keywords.length," unique"]})]}),Object.keys(h.logicTypes).length>0&&o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Logic Types:"}),o.jsx("span",{children:Object.entries(h.logicTypes).map(([k,C])=>`${k}: ${C}`).join(", ")})]}),h.averageTrigger>0&&o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Avg. Trigger:"}),o.jsxs("span",{children:[h.averageTrigger,"%"]})]})]}),h.previewEntries&&h.previewEntries.length>0&&o.jsxs("div",{className:"sample-entries",children:[o.jsx("h5",{children:"Sample Entries:"}),o.jsx("div",{className:"entry-preview",children:h.previewEntries.slice(0,3).map((k,C)=>{var E;return o.jsxs("div",{className:"entry-summary",children:[o.jsx("div",{className:"entry-title",children:k.title||k.comment||"Untitled"}),o.jsxs("div",{className:"entry-content",children:[(E=k.content)==null?void 0:E.substring(0,100),"..."]}),k.keywords&&k.keywords.length>0&&o.jsxs("div",{className:"entry-keywords",children:["Keywords: ",k.keywords.slice(0,3).join(", "),k.keywords.length>3&&` +${k.keywords.length-3} more`]})]},C)})})]})]}),o.jsxs("div",{className:"import-actions",children:[o.jsx("button",{onClick:m,disabled:i||!!c,className:"primary import-btn",children:i?"Importing...":"Import Lorebook"}),o.jsx("button",{onClick:t,className:"secondary",disabled:i,children:"Cancel"})]})]}):o.jsx("div",{className:`file-dropzone ${n?"dragging":""}`,onDragOver:v,onDragLeave:y,onDrop:g,children:o.jsxs("div",{className:"dropzone-content",children:[o.jsx("div",{className:"upload-icon",children:""}),o.jsx("p",{children:"Drop JSON file here"}),o.jsx("p",{children:"or"}),o.jsxs("label",{className:"file-input-label",children:["Browse Files",o.jsx("input",{type:"file",accept:"application/json,.json",onChange:S,hidden:!0})]}),o.jsx("small",{className:"file-info",children:"Supports SillyTavern, AidanAI, and compact JSON formats (max 10MB)"})]})}),o.jsxs("div",{className:"import-help",children:[o.jsx("h5",{children:"Supported Formats:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"SillyTavern:"})," Standard lorebook JSON with name, description, and entries"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"AidanAI:"})," Lore export with specific field mappings"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compact Array:"})," Simple array of entry objects"]})]}),o.jsx("p",{children:"All formats are automatically converted to the internal structure."})]})]})]})},Qh=({lorebooks:e})=>{const[t,n]=N.useState([]);N.useEffect(()=>{(async()=>{try{const i=await fetch("/config");if(i.ok){const a=await i.json();n(a.active_lorebook_ids||[])}}catch(i){console.error("Failed to load active lorebook IDs:",i)}})()},[]);const r=async l=>{if(t.includes(l))return;const i=[...t,l];n(i);try{await fetch("/config/active_lorebook_ids",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:i})})}catch(a){console.error("Failed to add active lorebook:",a)}},s=async l=>{const i=t.filter(a=>a!==l);n(i);try{await fetch("/config/active_lorebook_ids",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:i})})}catch(a){console.error("Failed to remove active lorebook:",a)}};return o.jsxs("div",{style:{padding:"16px",background:"var(--panel)",borderRadius:"8px",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--text)"},children:"Active Lorebooks for Chat Context"}),o.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap",marginBottom:"8px"},children:o.jsxs("select",{onChange:l=>{l.target.value&&(r(parseInt(l.target.value)),l.target.value="")},value:"",style:{padding:"4px 8px",borderRadius:"4px",background:"var(--bg)",color:"var(--text)",border:"1px solid var(--muted)"},children:[o.jsx("option",{value:"",children:"+ Add to Active"}),e.filter(l=>!t.includes(l.id)).map(l=>o.jsx("option",{value:l.id,children:l.name},l.id))]})}),o.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:t.map(l=>{const i=e.find(a=>a.id===l);return o.jsxs("span",{style:{padding:"4px 8px",borderRadius:"12px",background:"var(--primary)",color:"var(--text)",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},title:`Active in chat: ${(i==null?void 0:i.name)||`#${l}`}`,children:[i?i.name:`#${l}`,o.jsx("button",{onClick:()=>s(l),style:{border:"none",background:"transparent",color:"var(--text)",cursor:"pointer",fontSize:"14px",lineHeight:1,padding:"0",marginLeft:"4px"},children:""})]},l)})}),t.length===0&&o.jsx("p",{style:{margin:"8px 0 0 0",color:"var(--muted)",fontSize:"14px"},children:"No active lorebooks. Select one above to add it to your current chat context."})]})},Jh=()=>{var L;const e=ad(),[t,n]=N.useState("cards"),[r,s]=N.useState("single"),[l,i]=N.useState(null),[a,c]=N.useState([]);N.useEffect(()=>{console.log("[DEBUG] LorebookDashboard useEffect triggered, calling fetchLorebooks"),e.fetchLorebooks()},[]);const u=cn.useMemo(()=>e.lorebooks,[e.lorebooks]),h=async f=>{try{await e.createLorebookAction(f),s("single")}catch(d){console.error("Failed to create lorebook:",d)}},w=async f=>{for(const d of f)await h(d);s("single")},v=async f=>{try{await e.importLorebookAction(f),s("single")}catch(d){console.error("Import failed:",d)}},y=async f=>{i(f);try{const d=await fetch(`/lorebooks/${f.id}`);if(d.ok){const m=await d.json();c(m.entries||[])}else c([])}catch(d){console.error("Failed to load lorebook entries:",d),c([])}},g=async()=>{if(l)try{await e.updateLorebookAction(l.id,{name:l.name,description:l.description});const f=a,d=await fetch(`/lorebooks/${l.id}`);if(!d.ok)throw new Error("Failed to load current entries");const x=(await d.json()).entries||[],k=new Map(x.map(P=>[P.id,P])),C=new Map(f.map(P=>[P.id,P])),E=[],b=[],$=[];for(const P of a)!P.id||P.id.toString().includes(".")?E.push(P):b.push(P);for(const P of x)a.some(re=>re.id===P.id)||$.push(P.id);console.log("Entry operations:",{toCreate:E.length,toUpdate:b.length,toDelete:$.length});for(const P of E)try{const K={lorebook_id:l.id,title:P.title,content:P.content,keywords:P.keywords,secondary_keywords:P.secondary_keywords,logic:P.logic,trigger:P.trigger,order:P.order};await fetch("/lorebooks/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})}catch(K){console.error("Failed to create entry:",K)}for(const P of b)try{const K={title:P.title,content:P.content,keywords:P.keywords,secondary_keywords:P.secondary_keywords,logic:P.logic,trigger:P.trigger,order:P.order};await fetch(`/lorebooks/entries/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})}catch(K){console.error("Failed to update entry:",K)}for(const P of $)try{await fetch(`/lorebooks/entries/${P}`,{method:"DELETE"})}catch(K){console.error("Failed to delete entry:",K)}await e.fetchLorebooks(),i(null),c([]),console.log("Lorebook updated successfully")}catch(f){console.error("Failed to update lorebook:",f)}},S=()=>{i(null)};return e.lorebookLoading&&e.lorebooks.length===0?o.jsxs("div",{className:"lorebook-dashboard loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading lorebooks..."})]}):o.jsxs("div",{className:"lorebook-dashboard",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsx("h1",{children:"Lorebook Management"}),o.jsxs("div",{className:"dashboard-actions",children:[o.jsx("button",{className:`action-btn ${t==="cards"?"active":""}`,onClick:()=>n("cards"),children:" Cards"}),o.jsx("button",{className:`action-btn ${t==="table"?"active":""}`,onClick:()=>n("table"),children:" Table"}),o.jsxs("div",{className:"dropdown-menu",children:[o.jsx("button",{className:"primary",children:"+ Create"}),o.jsxs("div",{className:"dropdown-content",children:[o.jsx("button",{onClick:()=>s("single"),children:"New Lorebook"}),o.jsx("button",{onClick:()=>s("bulk"),children:"Bulk Create"}),o.jsx("button",{onClick:()=>s("import"),children:"Import JSON"})]})]})]})]}),o.jsx(Uh,{onSearch:f=>e.searchLoreAction(f),onClear:()=>e.clearSearch(),isSearching:e.isSearching,searchResults:e.searchResults}),o.jsx(Hh,{selectedCount:e.selectedEntries.size,onBulkDelete:()=>e.bulkDeleteEntries(),onBulkEdit:()=>{},onClearSelection:()=>e.clearSelection()}),o.jsx("div",{className:"lorebook-stats",children:o.jsxs("span",{className:"stats",children:[e.lorebooks.length," lorebooks, ",e.lorebooks.reduce((f,d)=>f+d.entry_count,0)," total entries"]})}),o.jsx(Qh,{lorebooks:e.lorebooks}),o.jsxs("div",{className:"dashboard-content",children:[r==="import"?o.jsx(Wh,{onImport:v,onCancel:()=>s("single")}):r==="bulk"?o.jsx(Kh,{onCreate:w,onCancel:()=>s("single")}):o.jsx(Rh,{lorebooks:u,viewMode:t,onSelectLorebook:e.selectLorebook,selectedLorebookId:(L=e.selectedLorebook)==null?void 0:L.id,onEditLorebook:y,onDeleteLorebook:f=>{window.confirm("Delete this lorebook? This action cannot be undone.")&&e.deleteLorebookAction(f)},onCreateLorebook:h}),l&&o.jsx("div",{className:"modal-overlay",children:o.jsxs("div",{className:"modal-content large-modal",children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("h2",{children:["Edit Lorebook: ",l.name]}),o.jsx("button",{className:"close-btn",onClick:S,children:""})]}),o.jsx("div",{className:"modal-body",children:o.jsxs("div",{className:"lorebook-editor",children:[o.jsxs("div",{className:"editor-section",children:[o.jsx("h3",{children:"Lorebook Details"}),o.jsx("div",{className:"metadata-form",children:o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"edit-name",children:"Name:"}),o.jsx("input",{id:"edit-name",name:"name",type:"text",defaultValue:l.name,required:!0,maxLength:255,onChange:f=>{i(d=>d?{...d,name:f.target.value}:null)}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"edit-description",children:"Description:"}),o.jsx("textarea",{id:"edit-description",name:"description",rows:3,defaultValue:l.description||"",placeholder:"Describe this lorebook...",onChange:f=>{i(d=>d?{...d,description:f.target.value}:null)}})]})]})})]}),o.jsxs("div",{className:"editor-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h3",{children:"Lorebook Entries"}),o.jsx("button",{type:"button",className:"primary",onClick:()=>{const f={id:Date.now()+Math.random(),title:"",content:"",keywords:[],secondary_keywords:[],logic:"AND ANY",trigger:100,order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([...a,f])},children:"+ Add Entry"})]}),o.jsxs("div",{className:"entries-editor",children:[a.map((f,d)=>o.jsxs("div",{className:"entry-editor",children:[o.jsxs("div",{className:"entry-header",children:[o.jsx("input",{type:"text",placeholder:"Entry title...",value:f.title,onChange:m=>{const x=[...a];x[d]={...f,title:m.target.value},c(x)}}),o.jsx("button",{type:"button",className:"delete-btn",onClick:()=>{const m=a.filter((x,k)=>k!==d);c(m)},children:""})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Keywords:"}),o.jsx("input",{type:"text",placeholder:"keyword1, keyword2",value:f.keywords.join(", "),onChange:m=>{const x=[...a];x[d]={...f,keywords:m.target.value.split(",").map(k=>k.trim()).filter(k=>k)},c(x)}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Logic:"}),o.jsxs("select",{value:f.logic,onChange:m=>{const x=[...a];x[d]={...f,logic:m.target.value},c(x)},children:[o.jsx("option",{value:"AND ANY",children:"AND ANY"}),o.jsx("option",{value:"AND ALL",children:"AND ALL"}),o.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),o.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Secondary Keywords:"}),o.jsx("input",{type:"text",placeholder:"secondary1, secondary2",value:f.secondary_keywords.join(", "),onChange:m=>{const x=[...a];x[d]={...f,secondary_keywords:m.target.value.split(",").map(k=>k.trim()).filter(k=>k)},c(x)}})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Trigger (%):"}),o.jsx("input",{type:"number",min:"0",max:"100",value:f.trigger,onChange:m=>{const x=[...a];x[d]={...f,trigger:parseInt(m.target.value)||0},c(x)}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Order:"}),o.jsx("input",{type:"number",value:f.order,onChange:m=>{const x=[...a];x[d]={...f,order:parseFloat(m.target.value)||0},c(x)}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Content:"}),o.jsx("textarea",{rows:4,placeholder:"Entry content...",value:f.content,onChange:m=>{const x=[...a];x[d]={...f,content:m.target.value},c(x)},required:!0})]})]},f.id||d)),a.length===0&&o.jsxs("div",{className:"no-entries",children:[o.jsx("p",{children:"No entries in this lorebook yet."}),o.jsx("button",{type:"button",className:"primary",onClick:()=>{const f={id:Date.now()+Math.random(),title:"",content:"",keywords:[],secondary_keywords:[],logic:"AND ANY",trigger:100,order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([f])},children:"Add First Entry"})]})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"primary",onClick:g,children:"Save All Changes"}),o.jsx("button",{type:"button",className:"secondary",onClick:S,children:"Cancel"})]})]})})]})})]})]})},Kh=({onCreate:e,onCancel:t})=>{const[n,r]=N.useState(""),s=async()=>{const i=n.split(`
`).filter(a=>a.trim()).map(a=>({name:a.trim(),description:"",entries:[]}));await e(i),r("")};return o.jsxs("div",{className:"bulk-creation-panel",children:[o.jsx("h3",{children:"Create Multiple Lorebooks"}),o.jsx("p",{children:"Enter one lorebook name per line:"}),o.jsx("textarea",{value:n,onChange:l=>r(l.target.value),placeholder:`Fantasy World
Sci-Fi Universe
Historical Era`,rows:6}),o.jsxs("div",{className:"panel-actions",children:[o.jsx("button",{onClick:s,children:"Create"}),o.jsx("button",{className:"secondary",onClick:t,children:"Cancel"})]})]})};function Gh({messageId:e,role:t,onSwipe:n,onEdit:r,onDelete:s,isVisible:l}){if(!l)return null;const i=u=>{u.preventDefault(),u.stopPropagation(),console.log("Swipe clicked for message:",e),n(e)},a=u=>{u.preventDefault(),u.stopPropagation(),console.log("Edit clicked for message:",e),r(e)},c=u=>{u.preventDefault(),u.stopPropagation(),console.log("Delete clicked for message:",e),s(e)};return o.jsxs("div",{className:"message-controls",children:[t==="assistant"&&o.jsx("button",{className:"message-btn swipe-btn",title:"Regenerate message",onClick:i,children:""}),o.jsx("button",{className:"message-btn edit-btn",title:"Edit message",onClick:a,children:""}),o.jsx("button",{className:"message-btn delete-btn",title:"Delete message",onClick:c,children:""})]})}function Yh(){var Ci,Ni;const e=Ph(),t=_h(),n=Lh(),r=_e(),s=Th();ad();const{generateImage:l,generateImageFromLastMessage:i}=bh(),{suggestLore:a}=Oh(),c=N.useRef(null),[u,h]=N.useState(!1),[w,v]=N.useState(null);N.useState({});const[y,g]=N.useState(!1),[S,L]=N.useState(!1),[f,d]=N.useState([]),[m,x]=N.useState("https://example.org"),[k,C]=N.useState([]),[E,b]=N.useState(!1),[$,P]=N.useState(null),[K,re]=N.useState(!1),De=N.useRef(null),kt=N.useRef(null),[Rn,Ht]=N.useState(null),[jt,O]=N.useState(""),[D,M]=N.useState({}),[Z,oe]=N.useState({}),[sn,$e]=N.useState(null),[$n,Ke]=N.useState(null),[on,Or]=N.useState(null);N.useEffect(()=>{n.loadConfig(),s.loadCharacters(),s.loadLorebooks()},[]),N.useEffect(()=>{const p=j=>{try{j&&j.detail&&t.setPhoneStyle(j.detail)}catch{}};return window.addEventListener("coolchat:phoneStyle",p),()=>window.removeEventListener("coolchat:phoneStyle",p)},[]),N.useEffect(()=>{const p=j=>{try{j&&j.detail&&t.updateAppTheme(j.detail)}catch{}};return window.addEventListener("coolchat:themeUpdate",p),()=>window.removeEventListener("coolchat:themeUpdate",p)},[]),N.useEffect(()=>{const p=()=>{try{const j=Gp();t.applyPluginAnimations(j)}catch(j){console.error(j)}};try{qp(p)}catch{}return p(),()=>{try{eh(p)}catch{}}},[]);const nt=(p,j="info")=>{const T=Date.now();C(z=>[...z,{id:T,message:p,type:j}]),setTimeout(()=>C(z=>z.filter(I=>I.id!==T)),4e3)};N.useEffect(()=>{const p=j=>{window.innerWidth<=768&&!j.target.closest(".header")&&b(!1)};if(E)return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[E]),N.useEffect(()=>{c.current&&setTimeout(()=>{try{c.current.scrollTop=c.current.scrollHeight}catch{}},0)},[e.messages]),N.useEffect(()=>{t.showConfig&&(async()=>{try{n.loadModels()}catch(p){console.error("Failed to load models:",p)}})()},[n.activeProvider,t.showConfig]),N.useEffect(()=>{s.selectedLorebook?s.loadLoreEntries(s.selectedLorebook.id):s.setLoreEntries([])},[s.selectedLorebook]);const cd=p=>{if(!p||typeof p!="string")return{obj:null,captionText:""};let j="",T=null;const z=p.replace(/\*+/g,"").trim();try{return T=JSON.parse(z),{obj:T,captionText:""}}catch{}const I=Math.max(z.lastIndexOf("}"),z.lastIndexOf("]"));if(I>0){const H=z.charAt(I),ve=H==="}"?"{":"[";let pe=0,W=-1;for(let ut=I;ut>=0;ut--){const R=z.charAt(ut);if(R===H&&pe++,R===ve&&(pe--,pe===0)){W=ut;break}}if(W>=0)try{const ut=z.slice(W,I+1);return T=JSON.parse(ut),j=z.slice(0,W).trim(),{obj:T,captionText:j}}catch{}}const q=z.match(/toolCalls\s*:?\s*(\[[\s\S]*\])$/);if(q)try{const H=q[1];return T={toolCalls:JSON.parse(H)},j=z.slice(0,q.index).trim(),{obj:T,captionText:j}}catch{}const V=z.match(/\{[\s\S]*\}/);if(V)try{return T=JSON.parse(V[0]),j=z.slice(0,V.index).trim(),{obj:T,captionText:j}}catch{}return{obj:null,captionText:""}},gi=async p=>{var T,z,I,q;p.preventDefault(),e.setError(null);const j=e.input.trim();if(j)try{console.log(`[${new Date().toISOString()}] onSubmit: Starting submit, current messages:`,e.messages.length,"messages"),e.setInput(""),console.log(`[${new Date().toISOString()}] onSubmit: Before appending user message, messages:`,e.messages.map(R=>({role:R.role,content:R.content.slice(0,50)}))),an.flushSync(()=>r.setMessages(R=>[...R,{role:"user",content:j}]));const V=_e.getState().messages;console.log(`[${new Date().toISOString()}] onSubmit: After appending user message, messages:`,V.map(R=>({role:R.role,content:R.content.slice(0,50)})));const H=await e.sendMessage(j);await Ba("Raw LLM response: "+H);const ve=_e.getState().messages;console.log(`[${new Date().toISOString()}] onSubmit: after sendMessage, current messages:`,ve.map(R=>({role:R.role,content:R.content.slice(0,50)})));let pe=!1,W="";try{const{obj:R,captionText:yd}=cd(H);if(W=yd,st("Extraction result: "+JSON.stringify({obj:R,captionText:W})),R||st("No JSON extracted from response"),R&&Array.isArray(R.toolCalls)){for(const ue of R.toolCalls)if(!(!ue||!ue.type))if(ue.type==="image_request"&&((T=ue.payload)!=null&&T.prompt))await l(ue.payload.prompt),W&&an.flushSync(()=>r.setMessages(he=>[...he,{role:"assistant",content:W}])),pe=!0;else if(ue.type==="phone_url"&&((z=ue.payload)!=null&&z.url)){let he=ue.payload.url;/^https?:/i.test(he)||(he="https://"+he),x(he),t.setPhoneOpen(!0),W&&an.flushSync(()=>r.setMessages(Gs=>[...Gs,{role:"assistant",content:W}])),pe=!0}else ue.type==="lore_suggestions"&&Array.isArray((I=ue.payload)==null?void 0:I.items)?(console.log("[DEBUG] Lore suggestions tool call parsed (items):",ue.payload.items),d(ue.payload.items.map(he=>({keyword:he.keyword,content:he.content}))),t.setSuggestOpen(!0),pe=!0):ue.type==="lore_suggestions"&&Array.isArray((q=ue.payload)==null?void 0:q.suggestions)&&(console.log("[DEBUG] Lore suggestions tool call parsed (suggestions):",ue.payload.suggestions),d(ue.payload.suggestions.map(he=>({keyword:he.keyword,content:he.content}))),t.setSuggestOpen(!0),pe=!0)}else{if(st("No toolCalls array found, trying flat keys"),R&&R.image_request&&(st("Found flat key: image_request"),await l(R.image_request),pe=!0),R&&R.phone_url){st("Found flat key: phone_url");let he=R.phone_url;/^https?:/i.test(he)||(he="https://"+he),x(he),t.setPhoneOpen(!0),W&&(st("Adding caption message for phone_url: "+W),an.flushSync(()=>r.setMessages(Gs=>[...Gs,{role:"assistant",content:W}]))),pe=!0}R&&Array.isArray(R.lore_suggestions)&&(st("Found flat key: lore_suggestions"),console.log("[DEBUG] Lore suggestions flat key parsed:",R.lore_suggestions),d(R.lore_suggestions),t.setSuggestOpen(!0),pe=!0);const ue=/toolCalls\s*:|image_request|phone_url|lore_suggestions/i.test(H);!n.structuredOutput&&!S&&ue&&!pe&&g(!0)}}catch(R){console.warn("Tool parse failed",R)}st("Parsing complete. Handled: "+pe+", Caption text: "+W);const ut=_e.getState().messages;console.log(`[${new Date().toISOString()}] onSubmit: after tool processing, handled:`,pe,"messages:",ut.map(R=>({role:R.role,content:R.content.slice(0,50)}))),pe||(st("No tool calls handled, adding response text to chat"),an.flushSync(()=>r.setMessages(R=>[...R,{role:"assistant",content:H}])))}catch(V){console.error("Error sending message:",V),nt(V.message,"error")}},yi=(p,j)=>{j?(De.current&&clearTimeout(De.current),De.current=setTimeout(()=>{P(p),re(!0)},300)):(De.current&&clearTimeout(De.current),re(!1),P(null))},vi=(p,j)=>{j?(kt.current&&clearTimeout(kt.current),kt.current=setTimeout(()=>{oe(T=>({...T,[p]:!0}))},300)):(kt.current&&clearTimeout(kt.current),oe(T=>({...T,[p]:!1})))},ud=async p=>{re(!1);try{let j=e.messages;if(p>=j.length||p<0){nt("Message not found","error");return}const T=j[p];if(T.role!=="assistant"){nt("Only assistant messages can be regenerated","error");return}let z=null;for(let I=p-1;I>=0;I--)if(j[I].role==="user"){z=j[I].content;break}if(!z){nt("No user message found to regenerate from","error");return}$e(p),setTimeout(async()=>{e.setSending(!0),e.setError(null),D[p]||(D[p]={currentIndex:0,generations:[T.content]});try{const I=await td(z,e.sessionId);await Ba("Raw LLM response after swipe: "+I);const q=D[p];q.generations.push(I),q.currentIndex=q.generations.length-1;const V=[...j];V[p]={...T,content:I},e.setMessages(V),M({...D}),$e(null),Ke(p),setTimeout(()=>{Ke(null)},800),e.setSending(!1),nt("Message regenerated successfully","success")}catch(I){console.error("Error during swipe:",I),e.setSending(!1),$e(null),Ke(null),nt("Failed to regenerate message: "+I.message,"error")}},300)}catch(j){console.error("Error during swipe:",j),nt("Failed to regenerate message: "+j.message,"error"),$e(null)}},dd=p=>{re(!1);const j=e.messages[p];j&&(Ht(p),O(j.content))},fd=async()=>{if(!(!Rn||!jt.trim()))try{const p=Rn,j=[...e.messages];j[p]={...j[p],content:jt.trim()},e.setMessages(j),Ht(null),O(""),nt("Message edited successfully","success")}catch(p){console.error("Error editing message:",p),nt("Failed to edit message: "+p.message,"error")}},pd=()=>{Ht(null),O("")},hd=p=>{if(re(!1),p>=e.messages.length||p<0)return;const j={...D};delete j[p];const T={};Object.entries(j).forEach(([I,q])=>{const V=parseInt(I);V>p?T[V-1]=q:T[V]=q});const z=e.messages.filter((I,q)=>q!==p);e.setMessages(z),M(T),nt("Message deleted","success")},xi=p=>{const j=D[p];if(!j||j.currentIndex>0){const T=Math.max(0,((j==null?void 0:j.currentIndex)??0)-1),z=[...e.messages];z[p]={...z[p],content:j.generations[T]};const I={...D};I[p]={...j,currentIndex:T},e.setMessages(z),M(I),Or(p),setTimeout(()=>{Or(null)},1e3)}},wi=p=>{const j=D[p];if(!j||j.currentIndex<j.generations.length-1){const T=Math.min(((j==null?void 0:j.generations.length)??1)-1,((j==null?void 0:j.currentIndex)??0)+1),z=[...e.messages];z[p]={...z[p],content:j.generations[T]};const I={...D};I[p]={...j,currentIndex:T},e.setMessages(z),M(I),Or(p),setTimeout(()=>{Or(null)},1e3)}},[ki,md]=N.useState([]),[ji,Si]=N.useState({});N.useEffect(()=>{(async()=>{try{const p=await fetch("/plugins");if(p.ok){const j=await p.json();md(j.plugins||[]),Si(j.enabled||{});try{xl(j.enabled||{})}catch{}try{await Fa()}catch(T){console.error(T)}}}catch(p){console.error("Failed to load plugins",p)}})()},[]);const gd=async p=>{try{if(!(await fetch("/plugins/enabled",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw new Error("Save failed");Si(p);try{xl(p);const T=await fetch("/plugins"),z=T.ok?await T.json():null;z&&Xp(z.plugins||[]),await Fa(z)}catch(T){console.error(T)}try{await He({extensions:p})}catch(T){console.error("Failed to persist extensions to config",T)}}catch(j){console.error(j),alert(j.message)}};return o.jsxs("div",{className:`app ${t.phoneOpen?"phone-open":""}`,children:[o.jsx("div",{className:"bg-animations",children:(((Ci=t.appTheme)==null?void 0:Ci.background_animations)||[]).map((p,j)=>o.jsx("div",{className:`anim-${p}`},j))}),o.jsxs("header",{className:`header ${E?"menu-open":""}`,role:"banner",children:[o.jsx("h1",{children:"CoolChat"}),o.jsx("div",{className:"spacer"}),o.jsxs("div",{className:"header-buttons",children:[o.jsx("button",{className:"secondary","aria-label":t.showCharacters?"Hide characters panel":"Show characters panel","aria-expanded":t.showCharacters,onClick:()=>t.setShowCharacters(!t.showCharacters),children:t.showCharacters?"Hide Characters":"Characters"}),o.jsx("button",{className:"secondary","aria-label":t.showChats?"Hide chats panel":"Show chats panel","aria-expanded":t.showChats,onClick:()=>t.setShowChats(!t.showChats),children:t.showChats?"Hide Chats":"Chats"}),o.jsx("button",{className:"secondary","aria-label":t.showTools?"Hide tools panel":"Show tools panel","aria-expanded":t.showTools,onClick:()=>t.setShowTools(!t.showTools),children:t.showTools?"Hide Tools":"Tools"}),o.jsx("button",{className:"secondary","aria-label":t.showLorebooks?"Hide lorebooks panel":"Show lorebooks panel","aria-expanded":t.showLorebooks,onClick:()=>t.setShowLorebooks(!t.showLorebooks),children:t.showLorebooks?"Hide Lorebooks":"Lorebooks"}),o.jsx("button",{className:"secondary","aria-label":t.phoneOpen?"Close phone simulator":"Open phone simulator","aria-expanded":t.phoneOpen,onClick:()=>t.setPhoneOpen(!t.phoneOpen),children:t.phoneOpen?"Close Phone":"Phone"}),o.jsx("button",{className:"secondary","aria-label":t.showConfig?"Close settings":"Open settings","aria-expanded":t.showConfig,onClick:()=>t.setShowConfig(!t.showConfig),children:t.showConfig?"Close Settings":"Settings"})]}),o.jsx("button",{className:"menu-toggle","aria-label":"Toggle menu","aria-expanded":E,onClick:()=>b(!E),children:""})]}),t.phoneOpen&&o.jsxs("div",{className:`phone-panel ${t.phoneStyle}`,children:[o.jsx("div",{className:"outer-overlay",onClick:p=>{p.target===p.currentTarget&&t.setPhoneOpen(!1)}}),o.jsx("div",{className:"skin"}),o.jsxs("div",{className:"screen",children:[o.jsx("div",{className:"statusbar",children:t.phoneStyle==="iphone"?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"left",children:""}),o.jsx("span",{className:"time",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.jsx("span",{className:"right",children:" "})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.jsx("span",{children:"  "})]})}),o.jsxs("div",{className:"bar",children:[o.jsx("input",{style:{flex:1},placeholder:"https://",value:m,onChange:p=>x(p.target.value)}),o.jsx("button",{className:"secondary",onClick:()=>{let p=m;/^https?:/i.test(p)||(p="https://"+p),x(p)},children:"Go"}),o.jsx("button",{className:"secondary",title:"Open in new tab",onClick:()=>{try{let p=m;/^https?:/i.test(p)||(p="https://"+p),window.open(p,"_blank")}catch(p){console.error(p)}},children:""})]}),o.jsx("iframe",{src:/^https?:/i.test(m)?m:"https://"+m,title:"Phone",onLoad:()=>{try{fetch("/phone/debug",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"load",url:m})})}catch(p){console.error(p)}},onError:()=>{try{fetch("/phone/debug",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"error",url:m})})}catch(p){console.error(p)}}})]})]}),o.jsxs("main",{className:"chat",children:[t.showCharacters&&o.jsxs("section",{className:"characters overlay",children:[o.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[o.jsx("h2",{style:{margin:0},children:"Characters"}),o.jsx("button",{className:"secondary",onClick:()=>t.setShowCharacters(!1),children:"Close"})]}),o.jsxs("div",{className:"row",children:[o.jsxs("label",{className:"secondary",style:{padding:"8px 10px",borderRadius:6,cursor:"pointer"},children:["Import JSON/PNG",o.jsx("input",{type:"file",accept:"application/json,.json,image/png",style:{display:"none"},onChange:async p=>{var T;const j=(T=p.target.files)==null?void 0:T[0];if(j){try{if(j.type==="image/png"){const z=new FormData;if(z.append("file",j),!(await fetch("/characters/import",{method:"POST",body:z})).ok)throw new Error("Import failed")}else{const z=await j.text(),I=JSON.parse(z);if(!I.name)throw new Error("JSON must include name");await Ua({name:I.name,description:I.description||"",avatar_url:I.avatar_url||null})}s.loadCharacters()}catch(z){alert(z.message)}p.target.value=""}}})]}),o.jsx("button",{className:"secondary",onClick:()=>s.loadCharacters(),children:"Refresh"})]}),o.jsxs("div",{className:"char-grid",children:[o.jsxs("div",{className:"char-card",onClick:()=>{v(null),h(!0)},children:[o.jsx("img",{src:"https://placehold.co/400x600?text=New+Character",alt:"New Character"}),o.jsx("div",{className:"name",children:"+ New"})]}),s.characters.map(p=>o.jsxs("div",{className:"char-card",children:[o.jsx("img",{src:p.avatar_url||"https://placehold.co/400x600?text=Character",alt:p.name}),o.jsx("div",{className:"name",children:p.name}),o.jsx("div",{className:"cog",onClick:j=>{j.stopPropagation(),v(p),h(!0)},children:o.jsx("span",{children:""})}),o.jsx("div",{style:{padding:"8px"},children:o.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[o.jsx("button",{onClick:async()=>{try{await He({active_character_id:p.id}),t.setShowCharacters(!1)}catch(j){console.error(j),alert(j.message)}},children:"Use"}),o.jsx("button",{className:"secondary",onClick:async()=>{try{await nd(p.id),s.loadCharacters()}catch(j){alert(j.message)}},children:"Delete"})]})})]},p.id))]})]}),t.showChats&&o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Chats"}),o.jsx(sm,{sessionId:e.sessionId,setSessionId:e.switchSession,onClose:()=>t.setShowChats(!1)})]}),t.showTools&&o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Tools"}),o.jsx(qh,{onClose:()=>t.setShowTools(!1)})]}),t.showConfig&&o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Configuration"}),o.jsxs("div",{className:"row",style:{gap:6,marginBottom:8},children:[o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("connection")},children:"Connection"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("persona")},children:"Persona"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("appearance")},children:"Appearance"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("images")},children:"Images"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("prompts")},children:"Prompts"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("advanced")},children:"Advanced"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("extensions")},children:"Extensions"})]}),t.settingsTab==="connection"&&o.jsxs("form",{className:"config-form",onSubmit:async p=>{var j;p.preventDefault();try{const T=await ct(),z=((j=n.providers)==null?void 0:j[n.activeProvider])||{},I={};for(const V of["api_key","api_base","model","temperature"]){const H=n.configDraft[V],ve=z[V]??"";V==="temperature"?typeof H=="number"&&H!==ve&&(I[V]=H):H&&H!==ve&&(I[V]=H)}if(Object.keys(I).length){const V=Object.entries(I).map(([H,ve])=>`- ${H}: old=${z[H]??"(none)"} -> new=${ve}`).join(`
`);if(!window.confirm(`Config.json already has this information, would you like to update it or discard?
${V}`)){n.setConfigDraft({api_key:"",api_base:z.api_base||"",model:z.model||"",temperature:z.temperature??.7});return}}const q=await He({active_provider:n.activeProvider,providers:{[n.activeProvider]:I},max_context_tokens:n.maxTokens});n.setProviders(q.providers||{})}catch(T){console.error(T),alert(T.message)}},children:[o.jsxs("label",{children:[o.jsx("span",{children:"Provider"}),o.jsxs("select",{value:n.activeProvider,onChange:async p=>{const j=p.target.value;n.setActiveProvider(j);const T=n.providers[j]||{};n.setConfigDraft({api_key:"",api_base:T.api_base||"",model:T.model||"",temperature:T.temperature??.7});try{await n.updateProvider(j)}catch{}},children:[o.jsx("option",{value:"echo",children:"Echo (no API key)"}),o.jsx("option",{value:"openai",children:"OpenAI-compatible"}),o.jsx("option",{value:"openrouter",children:"OpenRouter"}),o.jsx("option",{value:"gemini",children:"Google Gemini"})]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"API Key"}),o.jsx("input",{type:"password",placeholder:(Ni=n.providers[n.activeProvider])!=null&&Ni.api_key_masked?`Saved: ${n.providers[n.activeProvider].api_key_masked}`:"sk-...",value:n.configDraft.api_key,onChange:p=>n.setConfigDraft({...n.configDraft,api_key:p.target.value})})]}),o.jsxs("label",{children:[o.jsx("span",{children:"API Base"}),o.jsx("input",{type:"text",placeholder:n.activeProvider==="openrouter"?"https://openrouter.ai/api/v1":n.activeProvider==="openai"?"https://api.openai.com/v1":"https://generativelanguage.googleapis.com/v1beta/openai",value:n.configDraft.api_base,onChange:p=>n.setConfigDraft({...n.configDraft,api_base:p.target.value})})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Model"}),n.modelList.length>0?o.jsxs("select",{value:n.configDraft.model||"",onChange:p=>n.setConfigDraft({...n.configDraft,model:p.target.value}),children:[o.jsx("option",{value:"",children:n.loadingModels?"Loading":"Select a model"}),n.modelList.map(p=>o.jsx("option",{value:p,children:p},p))]}):o.jsx("input",{type:"text",placeholder:n.activeProvider==="gemini"?"gemini-1.5-flash":"gpt-4o-mini",value:n.configDraft.model,onChange:p=>n.setConfigDraft({...n.configDraft,model:p.target.value})})]}),o.jsx("div",{className:"row",children:o.jsx("button",{type:"button",className:"secondary",onClick:async()=>{try{await n.updateProviderConfig(n.activeProvider,n.configDraft)}catch{console.warn("Failed to update provider config")}try{await n.loadModelsForProvider(n.activeProvider)}catch{n.setModelList([])}},disabled:n.loadingModels,children:n.loadingModels?"Refreshing":"Refresh models"})}),o.jsxs("label",{children:[o.jsx("span",{children:"Temperature"}),o.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:n.configDraft.temperature,onChange:p=>n.setConfigDraft({...n.configDraft,temperature:parseFloat(p.target.value)})})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Structured Output (Gemini)"}),o.jsx("input",{type:"checkbox",checked:n.structuredOutput,onChange:async p=>{try{await n.updateStructuredOutput(p.target.checked)}catch(j){alert(j.message)}}})]}),o.jsxs("div",{className:"row",children:[o.jsx("button",{type:"submit",children:"Save"}),o.jsx("button",{type:"button",className:"secondary",onClick:()=>{var p,j,T;return n.setConfigDraft({api_key:"",api_base:((p=n.providers[n.activeProvider])==null?void 0:p.api_base)||"",model:((j=n.providers[n.activeProvider])==null?void 0:j.model)||"",temperature:((T=n.providers[n.activeProvider])==null?void 0:T.temperature)??.7})},children:"Reset"})]}),o.jsxs("label",{children:[o.jsxs("span",{children:["Max Context Tokens (",n.maxTokens,")"]}),o.jsx("input",{type:"range",min:"512",max:"8192",step:"128",value:n.maxTokens,onChange:p=>n.updateMaxTokens(parseInt(p.target.value,10))})]})]}),t.settingsTab==="persona"&&o.jsxs("div",{className:"config-form",children:[o.jsxs("label",{children:[o.jsx("span",{children:"User Name"}),o.jsx("input",{value:n.userPersona.name,onChange:p=>n.setUserPersona({...n.userPersona,name:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch(p){console.error(p),alert(p.message)}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"User Description"}),o.jsx("textarea",{rows:3,value:n.userPersona.description,onChange:p=>n.setUserPersona({...n.userPersona,description:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch(p){console.error(p),alert(p.message)}}})]})]}),t.settingsTab==="debug"&&o.jsxs("div",{className:"config-form",children:[o.jsxs("label",{children:[o.jsx("span",{children:"Log Prompts"}),o.jsx("input",{type:"checkbox",checked:n.debugFlags.log_prompts,onChange:async p=>{const j=p.target.checked,T={...n.debugFlags,log_prompts:j};n.setDebugFlags(T);try{await n.updateDebugFlags(T)}catch{}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Log Responses"}),o.jsx("input",{type:"checkbox",checked:n.debugFlags.log_responses,onChange:async p=>{const j=p.target.checked,T={...n.debugFlags,log_responses:j};n.setDebugFlags(T);try{await n.updateDebugFlags(T)}catch{}}})]}),o.jsxs("label",{children:[o.jsxs("span",{children:["Max Context Tokens (",n.maxTokens,")"]}),o.jsx("input",{type:"range",min:"512",max:"8192",step:"128",value:n.maxTokens,onChange:async p=>{const j=parseInt(p.target.value,10);n.updateMaxTokens(j);try{await He({max_context_tokens:j})}catch{}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"User Name"}),o.jsx("input",{value:n.userPersona.name,onChange:p=>n.setUserPersona({...n.userPersona,name:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch{}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"User Description"}),o.jsx("textarea",{rows:3,value:n.userPersona.description,onChange:p=>n.setUserPersona({...n.userPersona,description:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch{}}})]})]}),t.settingsTab==="appearance"&&o.jsx(nm,{}),t.settingsTab==="images"&&o.jsx(Xh,{providers:n.providers}),t.settingsTab==="prompts"&&o.jsx(Zh,{}),t.settingsTab==="advanced"&&o.jsx(em,{}),t.settingsTab==="extensions"&&o.jsxs("div",{className:"config-form",children:[o.jsx("h3",{children:"Extensions"}),o.jsx("p",{className:"muted",children:"Detected extensions found under /extensions. Enable ones you trust."}),o.jsxs("div",{style:{marginTop:8},children:[ki.length===0?o.jsxs("div",{className:"muted",children:["No extensions detected. If you expect extensions, verify the backend is running and that ",o.jsx("code",{children:"/plugins"})," returns manifests."]}):null,ki.map(p=>o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("strong",{children:p.name||p.id}),o.jsx("div",{className:"muted",children:p.description||""})]}),o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:!!ji[p.id],onChange:j=>{const T={...ji,[p.id]:j.target.checked};gd(T)}})," Enabled"]})]},p.id))]})]}),t.settingsTab==="connection"&&o.jsx("div",{className:"hint",children:o.jsx("p",{className:"muted",children:"OpenRouter uses OpenAI-compatible endpoints. You can set API Base to https://openrouter.ai/api/v1. Gemini uses the OpenAI-compatible base at https://generativelanguage.googleapis.com/v1beta/openai."})})]}),t.showLorebooks&&o.jsx("section",{className:"panel overlay",children:o.jsx(Jh,{onClose:()=>t.setShowLorebooks(!1)})}),o.jsxs("div",{className:"messages","aria-live":"polite",ref:c,children:[(()=>{const p=_e.getState().messages;return console.log(`[${new Date().toISOString()}] Messages render: ${p.length} messages`,p.map(j=>({role:j.role,content:j.content.slice(0,50)}))),null})(),r.messages.map((p,j)=>{const T=p.id||`msg-${j}`,z=$===j&&K,I=Rn===j,q=sn===j,V=$n===j,H=on===j,ve=D[j]&&D[j].generations.length>1,pe=Z[j]||!1;return o.jsx("div",{className:`message ${p.role}${z?" message-hovered":""}${I?" message-editing":""}${q?" message-animating-swipe":""}${V?" message-swipe-new":""}${H?" message-flip":""}`,onMouseEnter:()=>{yi(j,!0),ve&&vi(j,!0)},onMouseLeave:()=>{yi(j,!1),ve&&vi(j,!1)},children:o.jsxs("div",{className:`bubble ${ve?"has-swipes":""}`,children:[o.jsx("div",{className:"bubble-content",children:p.image_url?o.jsxs("div",{children:[o.jsx("img",{src:p.image_url,alt:"generated",style:{maxWidth:"100%",borderRadius:8}}),p.content?o.jsx("div",{className:"img-caption",children:p.content}):null]}):o.jsx(o.Fragment,{children:I?o.jsxs("div",{className:"message-edit-container",children:[o.jsx("textarea",{value:jt,onChange:W=>O(W.target.value),className:"message-edit-input",autoFocus:!0,rows:Math.ceil(jt.length/60)}),o.jsxs("div",{className:"message-edit-buttons",children:[o.jsx("button",{className:"message-edit-save",onClick:fd,children:" Save"}),o.jsx("button",{className:"message-edit-cancel",onClick:pd,children:" Cancel"})]})]}):p.content})}),p.role==="assistant"&&ve&&pe&&o.jsxs("div",{className:"swipe-navigation",children:[o.jsx("button",{className:"swipe-nav-btn swipe-nav-prev",onClick:W=>{W.preventDefault(),W.stopPropagation(),xi(j)},disabled:D[j].currentIndex===0,title:"Previous generation",children:""}),o.jsx("span",{className:"swipe-count",children:`${D[j].currentIndex+1}/${D[j].generations.length}`}),o.jsx("button",{className:"swipe-nav-btn swipe-nav-next",onClick:W=>{W.preventDefault(),W.stopPropagation(),wi(j)},disabled:D[j].currentIndex===D[j].generations.length-1,title:"Next generation",children:""})]}),p.role==="assistant"&&o.jsx("div",{className:"swipe-navigation",children:D[j]&&D[j].generations.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"swipe-nav-btn swipe-nav-prev",onClick:W=>{W.preventDefault(),W.stopPropagation(),xi(j)},disabled:D[j].currentIndex===0,title:"Previous generation",children:""}),o.jsx("span",{className:"swipe-count",children:D[j].generations.length>1&&`${D[j].currentIndex+1}/${D[j].generations.length}`}),o.jsx("button",{className:"swipe-nav-btn swipe-nav-next",onClick:W=>{W.preventDefault(),W.stopPropagation(),wi(j)},disabled:D[j].currentIndex===D[j].generations.length-1,title:"Next generation",children:""})]})}),o.jsx(Gh,{messageId:j,role:p.role,onSwipe:ud,onEdit:dd,onDelete:hd,isVisible:z})]})},T)}),e.error&&o.jsx("div",{className:"message error",children:o.jsx("div",{className:"bubble",children:e.error})})]}),o.jsxs("div",{className:"input-tools",children:[o.jsx("button",{className:"secondary","aria-label":"Suggest lore entries from chat",title:"Suggest lore entries from chat",onClick:async()=>{try{const p=await a(e.sessionId);if(!p.suggestions||p.suggestions.length===0){alert("No suggestions");return}d(p.suggestions),t.setSuggestOpen(!0)}catch(p){console.error(p),alert(p.message)}},children:""}),o.jsx("button",{className:"secondary","aria-label":"Generate image from chat",title:"Generate image from chat",onClick:i,children:""}),o.jsx("button",{className:"secondary","aria-label":"Send URL to phone simulator",title:"Send URL to phone",onClick:()=>{let p=prompt("Open URL on phone:");p&&(/^https?:/i.test(p)||(p="https://"+p),x(p),t.setPhoneOpen(!0))},children:""}),o.jsx("button",{className:"secondary","aria-label":"Scroll to bottom of messages",title:"Scroll to bottom",style:{marginLeft:"auto"},onClick:()=>{try{const p=document.querySelectorAll(".message.assistant");p.length>0?p[p.length-1].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}):c.current&&c.current.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}catch(p){console.error("Error scrolling to last message:",p)}},children:""})]}),o.jsxs("form",{className:"input-row",onSubmit:gi,children:[o.jsx("input",{type:"text",placeholder:"Type your message",value:e.input,onChange:p=>e.setInput(p.target.value),onKeyDown:p=>{p.ctrlKey&&p.key==="Enter"&&gi(p)},disabled:e.sending,"aria-label":"Message input (Ctrl+Enter to send)","aria-describedby":"send-button"}),o.jsx("button",{type:"submit",id:"send-button",disabled:e.sending||!e.input.trim(),children:e.sending?o.jsxs("span",{className:"loading-text",children:[o.jsx("div",{className:"spinner"}),"Sending"]}):"Send"})]}),u&&o.jsx(om,{character:w,lorebooks:s.lorebooks,onClose:()=>h(!1),onSave:async p=>{try{w?await ah(w.id,p):(st("No toolCalls array found, trying flat keys"),await Ua(p)),s.loadCharacters(),h(!1)}catch(j){alert(j.message)}},onThink:async(p,j)=>{try{const T={...j};return typeof T.alternate_greetings=="string"&&(T.alternate_greetings=T.alternate_greetings.split(",").map(I=>I.trim()).filter(Boolean)),typeof T.tags=="string"&&(T.tags=T.tags.split(",").map(I=>I.trim()).filter(Boolean)),(await suggestCharacterField(p,T)).value}catch(T){return alert(T.message),""}}}),t.suggestOpen&&o.jsx(rm,{suggestions:f,onClose:()=>t.setSuggestOpen(!1),onApply:async(p,j)=>{try{const z=(await ct()).active_lorebook_ids||[],I=j||z[0];if(!I){alert("No active lorebooks set");return}const q=[];for(const V of p.filter(H=>H.include)){const H=await fetch("/lore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:V.keyword,content:V.content})});if(H.ok){const ve=await H.json();q.push(ve.id)}}if(q.length){const H=[...(await(await fetch(`/lorebooks/${I}`)).json()).entry_ids||[],...q];await sd(I,{entry_ids:H})}t.setSuggestOpen(!1)}catch(T){console.error(T),alert(T.message)}}}),y&&o.jsx("section",{className:"panel overlay",onClick:()=>g(!1),children:o.jsxs("div",{className:"dialog",onClick:p=>p.stopPropagation(),children:[o.jsx("h3",{children:"Enable Structured Output?"}),o.jsx("p",{className:"muted",children:"The assistant attempted to call a tool. Structured Output improves tool reliability on Gemini models."}),o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",onChange:p=>L(p.target.checked)})," Don't show again (this session)"]}),o.jsx("span",{style:{flex:1}}),o.jsx("button",{className:"secondary",onClick:()=>g(!1),children:"Cancel"}),o.jsx("button",{onClick:async()=>{try{await He({structured_output:!0}),g(!1)}catch(p){alert(String(p))}},children:"Enable"})]})]})})]}),o.jsx("div",{className:"toast-container","aria-live":"assertive","aria-atomic":"true",children:k.map(p=>o.jsxs("div",{className:`toast toast-${p.type}`,children:[p.message,o.jsx("button",{className:"toast-close",onClick:()=>C(j=>j.filter(T=>T.id!==p.id)),"aria-label":"Dismiss notification",children:""})]},p.id))})]})}function Xh(){var v;const[e,t]=N.useState({active:"pollinations",pollinations:{api_key:"",model:""},dezgo:{api_key:"",model:"",lora_flux_1:"",lora_flux_2:"",lora_sd1_1:"",lora_sd1_2:"",transparent:!1,width:"",height:"",steps:"",upscale:!1}}),[n,r]=N.useState([]),[s,l]=N.useState("");N.useEffect(()=>{(async()=>{var y,g;try{const S=await ct();t(S.images);const L=await ch(S.images.active);r(L.models||[]);const f=a((g=(y=S.images)==null?void 0:y.dezgo)==null?void 0:g.model);l(f)}catch(S){console.error(S)}})()},[]);const i=async y=>{try{await He({images:y})}catch(g){console.error(g),alert(g.message)}},a=y=>{const g=(y||"").toLowerCase();return g.includes("flux")?"flux":g.includes("lightning")?"sdxl_lightning":g.includes("sdxl")?"sdxl":"sd1"},c=a((v=e.dezgo)==null?void 0:v.model),u=s||c,h=[{id:"flux",label:"Flux"},{id:"sdxl",label:"SDXL"},{id:"sdxl_lightning",label:"SDXL Lightning"},{id:"sd1",label:"SD1"}],w=(n||[]).filter(y=>a(y)===u);return o.jsxs("div",{className:"config-form",children:[o.jsxs("label",{children:[o.jsx("span",{children:"Active Provider"}),o.jsxs("select",{value:e.active,onChange:async y=>{const g=y.target.value,S={...e,active:g};t(S),await i(S)},children:[o.jsx("option",{value:"pollinations",children:"Pollinations"}),o.jsx("option",{value:"dezgo",children:"Dezgo"})]})]}),e.active==="pollinations"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"Model"}),o.jsxs("select",{value:e.pollinations.model||"",onChange:async y=>{const g=y.target.value,S={...e,pollinations:{...e.pollinations,model:g}};t(S),await i(S)},children:[o.jsx("option",{value:"",children:"(default)"}),n.map(y=>o.jsx("option",{value:y,children:y},y))]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"API Key"}),o.jsx("input",{placeholder:e.pollinations.api_key_masked?`Saved: ${e.pollinations.api_key_masked}`:"",value:e.pollinations.api_key||"",onChange:y=>t(g=>({...g,pollinations:{...g.pollinations,api_key:y.target.value}}))})]})]}),e.active==="dezgo"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"API Key"}),o.jsx("input",{placeholder:e.dezgo.api_key_masked?`Saved: ${e.dezgo.api_key_masked}`:"",value:e.dezgo.api_key||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,api_key:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Family"}),o.jsx("select",{value:u,onChange:y=>l(y.target.value),children:h.map(y=>o.jsx("option",{value:y.id,children:y.label},y.id))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Model"}),o.jsxs("select",{value:e.dezgo.model||"",onChange:y=>{const g=y.target.value,S=a(g),L={...e,dezgo:{...e.dezgo,model:g,steps:S==="flux"?4:S==="sdxl_lightning"?"":e.dezgo.steps||30}};t(L),i(L)},children:[o.jsx("option",{value:"",children:"(default)"}),w.map(y=>o.jsx("option",{value:y,children:y},y))]})]}),o.jsxs("div",{className:"muted",children:["Family: ",u.toUpperCase()]}),o.jsx("div",{className:"muted",children:u==="sd1"?"Transparent background disabled; Upscale available.":u==="sdxl_lightning"?"Steps disabled (Lightning is fixed).":"Transparent background available; consider steps ~30."}),u==="flux"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"Flux LORA #1 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_flux_1||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_flux_1:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Flux LORA #2 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_flux_2||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_flux_2:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 1 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_flux_1,value:e.dezgo.lora1_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora1_strength:parseFloat(y.target.value)}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 2 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_flux_2,value:e.dezgo.lora2_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora2_strength:parseFloat(y.target.value)}}))})]})]}),u==="sd1"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"SD1 LORA #1 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_sd1_1||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_sd1_1:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"SD1 LORA #2 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_sd1_2||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_sd1_2:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 1 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_sd1_1,value:e.dezgo.lora1_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora1_strength:parseFloat(y.target.value)}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 2 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_sd1_2,value:e.dezgo.lora2_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora2_strength:parseFloat(y.target.value)}}))})]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Width"}),o.jsx("input",{type:"number",value:e.dezgo.width||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,width:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Height"}),o.jsx("input",{type:"number",value:e.dezgo.height||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,height:y.target.value}}))})]}),u!=="sdxl_lightning"&&o.jsxs("label",{children:[o.jsx("span",{children:"Steps"}),o.jsx("input",{type:"number",value:e.dezgo.steps||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,steps:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Transparent Background"}),o.jsx("input",{type:"checkbox",disabled:u==="sd1",checked:!!e.dezgo.transparent,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,transparent:y.target.checked}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Upscale"}),o.jsx("input",{type:"checkbox",disabled:u!=="sd1",checked:!!e.dezgo.upscale,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,upscale:y.target.checked}}))})]})]}),o.jsx("div",{className:"row",style:{gridColumn:"1 / -1"},children:o.jsx("button",{onClick:async()=>{try{const y=(await ct()).images;if(JSON.stringify(e)!==JSON.stringify(y)&&!window.confirm("Images config.json will be updated. Proceed?"))return;await i(e),alert("Saved")}catch(y){console.error(y),alert(y.message)}},children:"Save Image Settings"})})]})}function Zh(){const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,l]=N.useState(""),[i,a]=N.useState({lore_suggest:"",image_summary:"",main:"",tool_call:""}),[c,u]=N.useState({}),[h,w]=N.useState(""),[v,y]=N.useState(""),[g,S]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const x=await kh();t(x.all||[]),r(x.active||[]),a(x.system||{lore_suggest:"",image_summary:""}),u(x.variables||{})}catch(x){console.error(x)}})()},[]);const L=async(x=e,k=n,C=i,E=c)=>{try{await jh({all:x,active:k,system:C,variables:E}),t(x),r(k),a(C),u(E)}catch(b){console.error(b),alert(b.message)}},f=x=>{const k=n.includes(x)?n.filter(C=>C!==x):[...n,x];L(e,k)},d=()=>{const x=s.trim();if(!x)return;const k=[...e,x];l(""),L(k,n)},m=x=>{const k=e.filter(E=>E!==x),C=n.filter(E=>E!==x);L(k,C)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"config-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsx("h3",{children:"System Prompts"}),o.jsxs("div",{className:"muted",children:["These prompts guide built-in tools. ",o.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),S(!0)},children:"Use placeholders"}),"."]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Main System Prompt"}),o.jsx("textarea",{rows:4,value:i.main||"",onChange:x=>a(k=>({...k,main:x.target.value})),onBlur:()=>L(e,n,{...i},c),placeholder:"{{tool_call_prompt}}, {{user_persona}}, {{character_description}}, {{tool_list}}, {{conversation}}"})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Tool Call Prompt"}),o.jsx("textarea",{rows:4,value:i.tool_call||"",onChange:x=>a(k=>({...k,tool_call:x.target.value})),onBlur:()=>L(e,n,{...i},c),placeholder:"Describe structured output JSON with toolCalls array."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Lorebook suggestion prompt"}),o.jsx("textarea",{rows:4,value:i.lore_suggest,onChange:x=>a(k=>({...k,lore_suggest:x.target.value})),onBlur:()=>L(e,n,{...i},c),placeholder:"Use {{conversation}} and {{existing_keywords}}"})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Image generation prompt"}),o.jsx("textarea",{rows:4,value:i.image_summary,onChange:x=>a(k=>({...k,image_summary:x.target.value})),onBlur:()=>L(e,n,{...i},c),placeholder:"Use {{conversation}}"})]}),o.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:8},children:[o.jsx("h3",{children:"Variables"}),o.jsxs("div",{className:"muted",children:["Define reusable snippets that replace tags like ",o.jsxs("code",{children:["{","{","company","}","}"]})," anywhere the LLM sees them."]})]}),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("input",{placeholder:"name (e.g., site)",value:h,onChange:x=>w(x.target.value)}),o.jsx("input",{placeholder:"value",value:v,onChange:x=>y(x.target.value)}),o.jsx("button",{className:"secondary",onClick:()=>{const x=h.trim();if(!x)return;const k={...c,[x]:v};w(""),y(""),L(e,n,i,k)},children:"Add"})]}),o.jsx("div",{className:"row",style:{display:"block",marginTop:8},children:Object.entries(c).map(([x,k])=>o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsx("code",{style:{width:160},children:`{{${x}}}`}),o.jsx("input",{style:{flex:1},value:k,onChange:C=>{const E={...c,[x]:C.target.value};u(E)},onBlur:()=>L(e,n,i,c)}),o.jsx("button",{className:"secondary",onClick:()=>{const C={...c};delete C[x],L(e,n,i,C)},children:"Delete"})]},x))}),o.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:8},children:[o.jsx("h3",{children:"General Prompts"}),o.jsx("div",{className:"muted",children:"Short, reusable prompts that can be toggled on to influence replies globally."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"New Prompt"}),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("input",{value:s,onChange:x=>l(x.target.value),placeholder:"Short prompt text to include in system context"}),o.jsx("button",{className:"secondary",onClick:d,children:"Add"})]})]}),o.jsx("div",{className:"row",style:{display:"block"},children:(e||[]).map((x,k)=>o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsx("input",{type:"checkbox",checked:n.includes(x),onChange:()=>f(x)}),o.jsx("span",{style:{flex:1},children:x}),o.jsx("button",{className:"secondary",onClick:()=>m(x),children:"Delete"})]},k))})]}),g&&o.jsx("section",{className:"panel overlay",onClick:()=>S(!1),children:o.jsxs("div",{className:"dialog",onClick:x=>x.stopPropagation(),children:[o.jsx("h3",{children:"Available placeholders"}),o.jsxs("ul",{className:"muted",children:[o.jsxs("li",{children:[o.jsx("code",{children:"{{conversation}}"}),": recent conversation window"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{existing_keywords}}"}),": active lore keywords"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{tool_call_prompt}}"}),": tool call guidance"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{user_persona}}"}),": user persona summary"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{character_description}}"}),": character description/personality"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{tool_list}}"}),": enabled tools list"]}),Object.keys(c).map(x=>o.jsxs("li",{children:[o.jsx("code",{children:`{{${x}}}`}),": variable"]},x))]}),o.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:o.jsx("button",{className:"secondary",onClick:()=>S(!1),children:"Close"})})]})})]})}function qh({onClose:e}){var m,x;const[t,n]=N.useState({phone:!1,image_gen:!1,lore_suggest:!1}),[r,s]=N.useState(!1),[l,i]=N.useState(!1),[a,c]=N.useState([]),[u,h]=N.useState([]),[w,v]=N.useState(""),[y,g]=N.useState(""),[S,L]=N.useState("");N.useEffect(()=>{(async()=>{try{const k=await ct();s(!!k.structured_output);const C=k.active_character_id,E=await(await fetch(`/tools/settings${C?`?character_id=${C}`:""}`)).json();n(E.enabled||{})}catch(k){console.error(k)}})()},[]);const f=async k=>{try{const E=(await ct()).active_character_id;await fetch(`/tools/settings${E?`?character_id=${E}`:""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:k})}),n(k),!l&&(k.phone||k.image_gen||k.lore_suggest)&&!r&&(alert("Enabling tools benefits from Structured Output. You can toggle it in Connection settings."),i(!0))}catch(C){console.error(C),alert("Save failed")}};N.useEffect(()=>{(async()=>{try{const k=await Ch();c(k.servers||[]);const C=await Eh();h(C.items||[])}catch(k){console.error(k)}})()},[]);const d=async k=>{try{await Nh({servers:k}),c(k)}catch(C){console.error(C),alert("Save failed")}};return o.jsxs("div",{className:"config-form",children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!t.phone,onChange:k=>f({...t,phone:k.target.checked})}),"Phone Panel ",o.jsx("em",{children:"(phone_url)"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!t.image_gen,onChange:k=>f({...t,image_gen:k.target.checked})}),"Image Generation ",o.jsx("em",{children:"(image_request)"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!t.lore_suggest,onChange:k=>f({...t,lore_suggest:k.target.checked})}),"Lore Suggest ",o.jsx("em",{children:"(lore_suggestions)"})]})]}),o.jsx("p",{className:"muted",style:{marginTop:12},children:'When tools are enabled, the assistant receives concise instructions about each tool. For Gemini models, enable "Structured Output" in Connection to get reliable tool-usage responses.'}),o.jsx("hr",{}),o.jsx("h3",{children:"MCP Servers"}),o.jsxs("label",{children:[o.jsx("span",{children:"Catalog"}),o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsxs("select",{value:w,onChange:k=>v(k.target.value),children:[o.jsx("option",{value:"",children:"(select server)"}),u.map((k,C)=>o.jsx("option",{value:C,children:k.name},C))]}),w!==""&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"secondary",onClick:()=>{const k=u[parseInt(w,10)];if(!k)return;const C=[...a,{name:k.name,url:k.url}];d(C)},children:"Add Server"}),o.jsx("a",{className:"secondary",href:(m=u[parseInt(w,10)])==null?void 0:m.url,target:"_blank",rel:"noreferrer",children:"Open"})]})]}),w!==""&&o.jsx("div",{className:"muted",style:{marginTop:6},children:(x=u[parseInt(w,10)])==null?void 0:x.description})]}),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("input",{placeholder:"Name",value:y,onChange:k=>g(k.target.value)}),o.jsx("input",{placeholder:"URL or command",value:S,onChange:k=>L(k.target.value)}),o.jsx("button",{onClick:()=>{const k=y.trim(),C=S.trim();if(!k||!C)return;const E=[...a,{name:k,url:C}];d(E),g(""),L("")},children:"Add"})]}),o.jsx("div",{style:{marginTop:8},children:a.map((k,C)=>o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginBottom:6,padding:8,background:"var(--panel)",borderRadius:8},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("strong",{style:{fontSize:14},children:k.name}),o.jsx("button",{className:"secondary",onClick:()=>{const E=a.filter((b,$)=>$!==C);d(E)},children:"Remove"})]}),o.jsx("div",{className:"muted",style:{fontSize:12,wordBreak:"break-all"},children:k.url})]},C))}),o.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:o.jsx("button",{className:"secondary",onClick:e,children:"Close"})})]})}function em(){const[e,t]=N.useState(""),[n,r]=N.useState(!0),[s,l]=N.useState(null);return N.useEffect(()=>{(async()=>{try{r(!0);const i=await fetch("/config/raw");if(!i.ok)throw new Error(`HTTP ${i.status}`);const a=await i.json();t(JSON.stringify(a,null,2))}catch(i){console.error(i),l(String(i)),t("")}finally{r(!1)}})()},[]),o.jsxs("div",{children:[o.jsx("p",{className:"muted",children:"Full settings.json (copy/share):"}),n?o.jsx("div",{className:"muted",children:"Loading settings"}):s?o.jsxs("div",{className:"muted",children:["Unable to load settings: ",s]}):o.jsx("textarea",{rows:16,style:{width:"100%"},value:e,onChange:i=>t(i.target.value)}),o.jsxs("div",{className:"row",style:{marginTop:8},children:[o.jsx("button",{className:"secondary",onClick:()=>{const i=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(i),c=document.createElement("a");c.href=a,c.download="settings.json",c.click(),URL.revokeObjectURL(a)},children:"Export settings.json"}),o.jsxs("label",{className:"secondary",style:{padding:"8px 10px",borderRadius:6,cursor:"pointer"},children:["Import settings.json",o.jsx("input",{type:"file",accept:"application/json,.json",style:{display:"none"},onChange:async i=>{var c;const a=(c=i.target.files)==null?void 0:c[0];if(a)try{const u=await a.text(),h=JSON.parse(u);if(!(await fetch("/config/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Import failed");alert("Imported. Reloading..."),location.reload()}catch(u){console.error(u),alert(u.message)}finally{i.target.value=""}}})]}),o.jsx("button",{onClick:async()=>{try{const i=JSON.parse(e);if(!(await fetch("/config/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw new Error("Save failed");alert("Saved. Reloading..."),location.reload()}catch(i){console.error(i),alert(i.message)}},children:"Save settings.json"})]}),o.jsx("hr",{}),o.jsx("p",{className:"muted",children:"Advanced settings"})]})}function tm(){const[e,t]=N.useState([]),[n,r]=N.useState("");N.useState(null);const s=async()=>{try{const l=await fetch("/themes");if(l.ok){const i=await l.json();t(i.names||[])}}catch(l){console.error(l)}};return N.useEffect(()=>{s()},[]),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsxs("select",{value:n,onChange:l=>r(l.target.value),children:[o.jsx("option",{value:"",children:"(select)"}),e.map(l=>o.jsx("option",{value:l,children:l},l))]}),o.jsx("button",{className:"secondary",onClick:async()=>{if(n)try{const l=await fetch(`/themes/${n}`);if(!l.ok)throw new Error("Load failed");const i=await l.json();await fetch("/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:i})});try{const a=document.documentElement;a.style.setProperty("--primary",i.primary),a.style.setProperty("--panel",i.secondary),a.style.setProperty("--text",i.text1),a.style.setProperty("--muted",i.text2),a.style.setProperty("--assistant",i.highlight),a.style.setProperty("--bg",i.lowlight)}catch(a){console.error(a)}alert("Theme loaded")}catch(l){console.error(l),alert(l.message)}},children:"Load Theme"}),o.jsx("button",{onClick:async()=>{const l=prompt("Save theme as:");if(l)try{const a=(await ct()).theme||{};if(!(await fetch("/themes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,theme:a})})).ok)throw new Error("Save theme failed");alert("Theme saved"),s()}catch(i){console.error(i),alert(i.message)}},children:"Save Current Theme"})]})}function nm(){const[e,t]=N.useState({primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827",phone_style:"classic"}),[n,r]=N.useState([{name:"Default",theme:{primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827"}},{name:"Dark",theme:{primary:"#8b5cf6",secondary:"#1f2937",text1:"#f9fafb",text2:"#d1d5db",highlight:"#f59e0b",lowlight:"#111827"}},{name:"Light",theme:{primary:"#3b82f6",secondary:"#f3f4f6",text1:"#111827",text2:"#6b7280",highlight:"#059669",lowlight:"#f9fafb"}},{name:"Forest",theme:{primary:"#059669",secondary:"#064e3b",text1:"#ecfdf5",text2:"#a7f3d0",highlight:"#f59e0b",lowlight:"#022c22"}},{name:"Ocean",theme:{primary:"#0891b2",secondary:"#164e63",text1:"#ecfeff",text2:"#a5f3fc",highlight:"#f97316",lowlight:"#0c4a6e"}},{name:"Rose",theme:{primary:"#db2777",secondary:"#5b21b6",text1:"#fef2f2",text2:"#fecaca",highlight:"#eab308",lowlight:"#581c87"}}]);N.useEffect(()=>{(async()=>{try{const u=await ct();u.theme&&t(u.theme)}catch(u){console.error(u)}})()},[]),N.useEffect(()=>{const u=document.documentElement;u.style.setProperty("--primary",e.primary),u.style.setProperty("--panel",e.secondary),u.style.setProperty("--text",e.text1),u.style.setProperty("--muted",e.text2),u.style.setProperty("--assistant",e.highlight),u.style.setProperty("--bg",e.lowlight)},[e]);const s=async u=>{t(u);try{await He({theme:u});try{window.dispatchEvent(new CustomEvent("coolchat:themeUpdate",{detail:u}))}catch{}}catch(h){console.error(h),alert(h.message)}},l=async()=>{try{const u=await fetch("/theme/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({primary:e.primary})});if(!u.ok)throw new Error("Suggest failed");const{colors:h}=await u.json();if(h.length>=5){const w={...e,secondary:h[0],text1:h[1],text2:h[2],highlight:h[3],lowlight:h[4]};await s(w)}}catch(u){console.error(u),alert(u.message)}},i=async u=>{await s({...e,...u.theme})},a=async()=>{const u={...e,secondary:e.lowlight,lowlight:e.secondary,text1:e.text1,text2:e.text2};await s(u)},c=({label:u,keyName:h,withThink:w})=>o.jsxs("label",{children:[o.jsx("span",{children:u}),o.jsxs("div",{className:"row color-row",style:{gap:8,alignItems:"center"},children:[o.jsx("input",{className:"color-swatch",type:"color",value:e[h],onChange:async v=>{await s({...e,[h]:v.target.value})}}),o.jsx("input",{style:{flex:1},value:e[h],onChange:async v=>{await s({...e,[h]:v.target.value})}}),w&&o.jsx("button",{className:"think",title:"AI suggests complementary colors for this primary",onClick:l,children:""})]})]});return o.jsxs("div",{className:"config-form",children:[o.jsxs("div",{className:"theme-preview",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16,padding:12,background:"var(--panel)",borderRadius:8,border:"1px solid var(--muted)"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--primary)",width:40,height:20,borderRadius:4,margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Primary"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--bg)",width:40,height:20,borderRadius:4,border:"1px solid var(--secondary)",margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Background"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--panel)",width:40,height:20,borderRadius:4,border:"1px solid var(--muted)",margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Panel"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--assistant)",width:40,height:20,borderRadius:4,margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Assistant"})]})]}),o.jsxs("label",{style:{gridColumn:"1 / -1"},children:[o.jsx("span",{children:"Preset Themes"}),o.jsxs("div",{className:"row",style:{gap:6,flexWrap:"wrap",marginTop:6},children:[n.map((u,h)=>o.jsx("button",{className:"secondary theme-btn",style:{background:`linear-gradient(45deg, ${u.theme.primary}, ${u.theme.secondary})`,color:u.theme.text1,border:"none",borderRadius:6,padding:"6px 12px",fontSize:12,cursor:"pointer"},onClick:()=>i(u),title:`Apply ${u.name} theme`,children:u.name},h)),o.jsx("button",{className:"secondary",onClick:a,title:"Swap background colors for high contrast",children:" Invert BG"})]})]}),o.jsx(c,{label:"Primary",keyName:"primary",withThink:!0}),o.jsx(c,{label:"Secondary",keyName:"secondary"}),o.jsx(c,{label:"Text 1",keyName:"text1"}),o.jsx(c,{label:"Text 2",keyName:"text2"}),o.jsx(c,{label:"Highlight",keyName:"highlight"}),o.jsx(c,{label:"Lowlight",keyName:"lowlight"}),o.jsxs("label",{children:[o.jsx("span",{children:"Phone Style"}),o.jsxs("select",{value:e.phone_style||"classic",onChange:async u=>{const h={...e,phone_style:u.target.value};await s(h);try{window.dispatchEvent(new CustomEvent("coolchat:phoneStyle",{detail:h.phone_style}))}catch{}},children:[o.jsx("option",{value:"classic",children:"Classic"}),o.jsx("option",{value:"modern",children:"Modern"}),o.jsx("option",{value:"iphone",children:"iPhone"}),o.jsx("option",{value:"cyberpunk",children:"Cyberpunk"})]})]}),o.jsxs("label",{style:{gridColumn:"1 / -1"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:["Background Animations",o.jsx("small",{style:{color:"var(--muted)",fontWeight:"normal"},children:"(Multiple allowed)"})]}),o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsxs("select",{id:"anim-select",style:{flex:1},children:[o.jsx("option",{value:"gradient_flow",children:"Gradient Flow"}),o.jsx("option",{value:"floating_squares",children:"Floating Squares"}),o.jsx("option",{value:"waves",children:"Ocean Waves"}),o.jsx("option",{value:"neon_rain",children:"Neon Rain"}),o.jsx("option",{value:"matrix",children:"Matrix Code"}),o.jsx("option",{value:"particles",children:"Floating Particles"}),o.jsx("option",{value:"geometric",children:"Geometric Shapes"})]}),o.jsx("button",{className:"secondary",onClick:()=>{try{const u=document.querySelector("#anim-select"),h=u==null?void 0:u.value;if(!h||h==="")return;const w=Array.isArray(e.background_animations)?[...e.background_animations]:[];!w.includes(h)&&w.length<3?s({...e,background_animations:[...w,h]}):w.length>=3&&alert("Maximum 3 background animations allowed")}catch(u){console.error(u)}},children:"+ Add"})]}),o.jsx("div",{className:"row",style:{gap:6,flexWrap:"wrap"},children:(e.background_animations||[]).map((u,h)=>o.jsxs("span",{className:"tag",style:{padding:"4px 8px",borderRadius:12,background:"var(--panel)",border:"1px solid var(--muted)",fontSize:12,display:"flex",alignItems:"center",gap:4},children:[u,o.jsx("button",{className:"remove-tag",onClick:()=>{const w=(e.background_animations||[]).filter(v=>v!==u);s({...e,background_animations:w})},style:{border:"none",background:"transparent",color:"var(--muted)",cursor:"pointer",fontSize:14,lineHeight:1},children:""})]},h))})]}),o.jsx("hr",{}),o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{children:o.jsx("strong",{children:"Saved Themes"})}),o.jsx("button",{className:"secondary",onClick:async()=>{const u=prompt("Export current theme as:");u&&u.trim()&&(await fetch("/themes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.trim(),theme:{...e}})}),alert("Theme exported: "+u.trim()))},title:"Export current theme to saved themes",children:" Export"})]}),o.jsx("div",{style:{marginTop:8},children:o.jsx(tm,{})})]})]})}function rm({suggestions:e,onClose:t,onApply:n}){console.log("[DEBUG] SuggestLoreModal received suggestions:",e);const[r,s]=N.useState(()=>(e||[]).map(u=>({include:!0,keyword:u.keyword||"",content:u.content||""})));console.log("[DEBUG] SuggestLoreModal rows initialized:",r);const[l,i]=N.useState([]),[a,c]=N.useState("");return N.useEffect(()=>{(async()=>{var u;try{const w=(await ct()).active_lorebook_ids||[];if(w.length){const y=(await mi()).filter(g=>w.includes(g.id)).map(g=>({id:g.id,name:g.name}));i(y),c(String(((u=y[0])==null?void 0:u.id)||""))}}catch(h){console.error(h)}})()},[]),o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Lore Suggestions"}),l.length>1&&o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsx("span",{className:"muted",children:"Target Lorebook"}),o.jsx("select",{value:a,onChange:u=>c(u.target.value),children:l.map(u=>o.jsx("option",{value:u.id,children:u.name},u.id))})]}),o.jsx("div",{className:"char-list",style:{maxHeight:360,overflow:"auto"},children:r.map((u,h)=>o.jsxs("div",{className:"char-item",style:{flexDirection:"column",alignItems:"stretch"},children:[o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsx("input",{type:"checkbox",checked:u.include,onChange:w=>s(v=>v.map((y,g)=>g===h?{...y,include:w.target.checked}:y))}),o.jsx("input",{placeholder:"Keyword",value:u.keyword,onChange:w=>s(v=>v.map((y,g)=>g===h?{...y,keyword:w.target.value}:y))})]}),o.jsx("textarea",{rows:3,placeholder:"Content",value:u.content,onChange:w=>s(v=>v.map((y,g)=>g===h?{...y,content:w.target.value}:y))})]},h))}),o.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:8},children:[o.jsx("button",{className:"secondary",onClick:t,children:"Cancel"}),o.jsx("button",{onClick:()=>n(r,a?parseInt(a,10):null),children:"Add Selected"})]})]})}function sm({sessionId:e,setSessionId:t,onClose:n}){const[r,s]=N.useState([]),[l,i]=N.useState(""),a=async()=>{try{const c=await od();s(c.sessions||[])}catch(c){console.error(c)}};return N.useEffect(()=>{a()},[]),o.jsxs("div",{className:"config-form",children:[o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsx("select",{value:e,onChange:async c=>{const u=c.target.value;t(u)},children:[...r].map(c=>o.jsx("option",{value:c,children:c},c))}),o.jsx("button",{className:"secondary",onClick:a,children:"Refresh"}),o.jsx("button",{className:"secondary",onClick:async()=>{try{await ld(e),await a(),t("default")}catch(c){alert(c.message)}},children:"Reset"}),o.jsx("button",{className:"secondary",onClick:n,children:"Close"})]}),o.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[o.jsx("input",{placeholder:"New session id (e.g., 2025-01-01T12:00)",value:l,onChange:c=>i(c.target.value),style:{flex:1}}),o.jsx("button",{onClick:async()=>{const c=(l||"").trim()||String(Date.now());r.includes(c)||s(u=>[...u,c]),t(c),i("")},children:"New"})]})]})}function om({character:e,onClose:t,onSave:n,onThink:r,lorebooks:s}){const[l,i]=N.useState(()=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",avatar_url:(e==null?void 0:e.avatar_url)||"",first_message:(e==null?void 0:e.first_message)||"",alternate_greetings:((e==null?void 0:e.alternate_greetings)||[]).join(", "),scenario:(e==null?void 0:e.scenario)||"",system_prompt:(e==null?void 0:e.system_prompt)||"",personality:(e==null?void 0:e.personality)||"",mes_example:(e==null?void 0:e.mes_example)||"",creator_notes:(e==null?void 0:e.creator_notes)||"",tags:((e==null?void 0:e.tags)||[]).join(", "),post_history_instructions:(e==null?void 0:e.post_history_instructions)||"",lorebook_ids:(e==null?void 0:e.lorebook_ids)||[],image_prompt_prefix:(e==null?void 0:e.image_prompt_prefix)||"",image_prompt_suffix:(e==null?void 0:e.image_prompt_suffix)||""})),[a,c]=N.useState(null),[u,h]=N.useState(!1),[w,v]=N.useState(!1),y=async g=>{try{c(g);const S=await r(g,l);i(L=>({...L,[g]:S}))}finally{c(null)}};return o.jsx("div",{className:"modal",onClick:t,children:o.jsxs("div",{className:"dialog",onClick:g=>g.stopPropagation(),children:[o.jsx("h2",{children:e?"Edit Character":"New Character"}),o.jsxs("div",{className:"editor-grid",children:[o.jsx("span",{className:"label",children:"Name"}),o.jsxs("div",{children:[o.jsx("input",{value:l.name,onChange:g=>i(S=>({...S,name:g.target.value}))})," ",o.jsx("button",{className:"think",onClick:()=>y("name"),children:""})]}),o.jsx("span",{className:"label",children:"Avatar"}),o.jsxs("div",{children:[l.avatar_url&&o.jsx("img",{src:l.avatar_url,alt:"Avatar preview",style:{width:80,height:80,objectFit:"cover",borderRadius:8,marginRight:8,border:"1px solid #1f2937"}}),o.jsx("input",{type:"file",accept:"image/*",onChange:async g=>{var L;const S=(L=g.target.files)==null?void 0:L[0];if(S)try{v(!0);const f=new FormData;f.append("file",S);const d=await fetch("/characters/upload_avatar",{method:"POST",body:f});if(!d.ok)throw new Error("Upload failed");const m=await d.json();i(x=>({...x,avatar_url:m.avatar_url}))}catch(f){alert(f.message)}finally{v(!1),g.target.value=""}}}),o.jsx("button",{className:`paint ${u?"thinking":""}`,onClick:async()=>{try{h(!0);const g=await fetch("/characters/generate_avatar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({character:l})});if(!g.ok)throw new Error("Generate failed");const S=await g.json();i(L=>({...L,avatar_url:S.avatar_url}))}catch(g){alert(g.message)}finally{h(!1)}},children:""})]}),o.jsx("span",{className:"label",children:"Description"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.description,onChange:g=>i(S=>({...S,description:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="description"?"thinking":""}`,onClick:()=>y("description"),children:""})]}),o.jsx("span",{className:"label",children:"First Message"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.first_message,onChange:g=>i(S=>({...S,first_message:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="first_message"?"thinking":""}`,onClick:()=>y("first_message"),children:""})]}),o.jsx("span",{className:"label",children:"Alternate Greetings (comma)"}),o.jsxs("div",{children:[o.jsx("input",{value:l.alternate_greetings,onChange:g=>i(S=>({...S,alternate_greetings:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="alternate_greetings"?"thinking":""}`,onClick:()=>y("alternate_greetings"),children:""})]}),o.jsx("span",{className:"label",children:"Scenario"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.scenario,onChange:g=>i(S=>({...S,scenario:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="scenario"?"thinking":""}`,onClick:()=>y("scenario"),children:""})]}),o.jsx("span",{className:"label",children:"System Prompt"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.system_prompt,onChange:g=>i(S=>({...S,system_prompt:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="system_prompt"?"thinking":""}`,onClick:()=>y("system_prompt"),children:""})]}),o.jsx("span",{className:"label",children:"Personality"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.personality,onChange:g=>i(S=>({...S,personality:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="personality"?"thinking":""}`,onClick:()=>y("personality"),children:""})]}),o.jsx("span",{className:"label",children:"Message Example"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.mes_example,onChange:g=>i(S=>({...S,mes_example:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="mes_example"?"thinking":""}`,onClick:()=>y("mes_example"),children:""})]}),o.jsx("span",{className:"label",children:"Creator Notes"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.creator_notes,onChange:g=>i(S=>({...S,creator_notes:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="creator_notes"?"thinking":""}`,onClick:()=>y("creator_notes"),children:""})]}),o.jsx("span",{className:"label",children:"Prepend to image prompts"}),o.jsxs("div",{children:[o.jsx("input",{value:l.image_prompt_prefix,onChange:g=>i(S=>({...S,image_prompt_prefix:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="image_prompt_prefix"?"thinking":""}`,onClick:()=>y("image_prompt_prefix"),children:""})]}),o.jsx("span",{className:"label",children:"Append to image prompts"}),o.jsxs("div",{children:[o.jsx("input",{value:l.image_prompt_suffix,onChange:g=>i(S=>({...S,image_prompt_suffix:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="image_prompt_suffix"?"thinking":""}`,onClick:()=>y("image_prompt_suffix"),children:""})]}),o.jsx("span",{className:"label",children:"Tags (comma)"}),o.jsx("div",{children:o.jsx("input",{value:l.tags,onChange:g=>i(S=>({...S,tags:g.target.value}))})}),o.jsx("span",{className:"label",children:"Post-History Instructions"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.post_history_instructions,onChange:g=>i(S=>({...S,post_history_instructions:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="post_history_instructions"?"thinking":""}`,onClick:()=>y("post_history_instructions"),children:""})]}),o.jsx("span",{className:"label",children:"Lorebook"}),o.jsx("div",{children:o.jsxs("select",{value:l.lorebook_ids[0]||"",onChange:g=>{const S=g.target.value?[parseInt(g.target.value,10)]:[];i(L=>({...L,lorebook_ids:S}))},children:[o.jsx("option",{value:"",children:"-- None --"}),s.map(g=>o.jsx("option",{value:g.id,children:g.name},g.id))]})})]}),o.jsxs("div",{className:"row",style:{justifyContent:"flex-end",marginTop:12},children:[o.jsx("button",{className:"secondary",onClick:t,children:"Cancel"}),o.jsx("button",{onClick:()=>{const g={...l,alternate_greetings:l.alternate_greetings.split(",").map(S=>S.trim()).filter(Boolean),tags:l.tags.split(",").map(S=>S.trim()).filter(Boolean)};n(g)},children:"Save"})]})]})})}Eo.createRoot(document.getElementById("root")).render(o.jsx(cn.StrictMode,{children:o.jsx(Yh,{})}));
