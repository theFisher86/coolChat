(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function fd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fa={exports:{}},_s={},Ra={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kr=Symbol.for("react.element"),pd=Symbol.for("react.portal"),hd=Symbol.for("react.fragment"),md=Symbol.for("react.strict_mode"),gd=Symbol.for("react.profiler"),yd=Symbol.for("react.provider"),vd=Symbol.for("react.context"),xd=Symbol.for("react.forward_ref"),wd=Symbol.for("react.suspense"),kd=Symbol.for("react.memo"),jd=Symbol.for("react.lazy"),ki=Symbol.iterator;function Sd(e){return e===null||typeof e!="object"?null:(e=ki&&e[ki]||e["@@iterator"],typeof e=="function"?e:null)}var $a={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ua=Object.assign,Ba={};function bn(e,t,n){this.props=e,this.context=t,this.refs=Ba,this.updater=n||$a}bn.prototype.isReactComponent={};bn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ha(){}Ha.prototype=bn.prototype;function hl(e,t,n){this.props=e,this.context=t,this.refs=Ba,this.updater=n||$a}var ml=hl.prototype=new Ha;ml.constructor=hl;Ua(ml,bn.prototype);ml.isPureReactComponent=!0;var ji=Array.isArray,Va=Object.prototype.hasOwnProperty,gl={current:null},Wa={key:!0,ref:!0,__self:!0,__source:!0};function Qa(e,t,n){var r,s={},l=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Va.call(t,r)&&!Wa.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:kr,type:e,key:l,ref:i,props:s,_owner:gl.current}}function Cd(e,t){return{$$typeof:kr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yl(e){return typeof e=="object"&&e!==null&&e.$$typeof===kr}function Nd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Si=/\/+/g;function Hs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nd(""+e.key):t.toString(36)}function Wr(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case kr:case pd:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Hs(i,0):r,ji(s)?(n="",e!=null&&(n=e.replace(Si,"$&/")+"/"),Wr(s,t,n,"",function(u){return u})):s!=null&&(yl(s)&&(s=Cd(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Si,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",ji(e))for(var a=0;a<e.length;a++){l=e[a];var c=r+Hs(l,a);i+=Wr(l,t,n,c,s)}else if(c=Sd(e),typeof c=="function")for(e=c.call(e),a=0;!(l=e.next()).done;)l=l.value,c=r+Hs(l,a++),i+=Wr(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function _r(e,t,n){if(e==null)return e;var r=[],s=0;return Wr(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Ed(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var je={current:null},Qr={transition:null},_d={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Qr,ReactCurrentOwner:gl};function Ja(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:_r,forEach:function(e,t,n){_r(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _r(e,function(){t++}),t},toArray:function(e){return _r(e,function(t){return t})||[]},only:function(e){if(!yl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=bn;F.Fragment=hd;F.Profiler=gd;F.PureComponent=hl;F.StrictMode=md;F.Suspense=wd;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_d;F.act=Ja;F.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ua({},e.props),s=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=gl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Va.call(t,c)&&!Wa.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:kr,type:e.type,key:s,ref:l,props:r,_owner:i}};F.createContext=function(e){return e={$$typeof:vd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yd,_context:e},e.Consumer=e};F.createElement=Qa;F.createFactory=function(e){var t=Qa.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:xd,render:e}};F.isValidElement=yl;F.lazy=function(e){return{$$typeof:jd,_payload:{_status:-1,_result:e},_init:Ed}};F.memo=function(e,t){return{$$typeof:kd,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=Qr.transition;Qr.transition={};try{e()}finally{Qr.transition=t}};F.unstable_act=Ja;F.useCallback=function(e,t){return je.current.useCallback(e,t)};F.useContext=function(e){return je.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return je.current.useDeferredValue(e)};F.useEffect=function(e,t){return je.current.useEffect(e,t)};F.useId=function(){return je.current.useId()};F.useImperativeHandle=function(e,t,n){return je.current.useImperativeHandle(e,t,n)};F.useInsertionEffect=function(e,t){return je.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return je.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return je.current.useMemo(e,t)};F.useReducer=function(e,t,n){return je.current.useReducer(e,t,n)};F.useRef=function(e){return je.current.useRef(e)};F.useState=function(e){return je.current.useState(e)};F.useSyncExternalStore=function(e,t,n){return je.current.useSyncExternalStore(e,t,n)};F.useTransition=function(){return je.current.useTransition()};F.version="18.3.1";Ra.exports=F;var N=Ra.exports;const sn=fd(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=N,Ld=Symbol.for("react.element"),Pd=Symbol.for("react.fragment"),bd=Object.prototype.hasOwnProperty,Od=Td.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dd={key:!0,ref:!0,__self:!0,__source:!0};function Ka(e,t,n){var r,s={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)bd.call(t,r)&&!Dd.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ld,type:e,key:l,ref:i,props:s,_owner:Od.current}}_s.Fragment=Pd;_s.jsx=Ka;_s.jsxs=Ka;Fa.exports=_s;var o=Fa.exports,xo={},Ga={exports:{}},Ae={},Ya={exports:{}},Xa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var M=T.length;T.push(I);e:for(;0<M;){var Z=M-1>>>1,le=T[Z];if(0<s(le,I))T[Z]=I,T[M]=le,M=Z;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var I=T[0],M=T.pop();if(M!==I){T[0]=M;e:for(var Z=0,le=T.length,rt=le>>>1;Z<rt;){var st=2*(Z+1)-1,$t=T[st],ot=st+1,lt=T[ot];if(0>s($t,M))ot<le&&0>s(lt,$t)?(T[Z]=lt,T[ot]=M,Z=ot):(T[Z]=$t,T[st]=M,Z=st);else if(ot<le&&0>s(lt,M))T[Z]=lt,T[ot]=M,Z=ot;else break e}}return I}function s(T,I){var M=T.sortIndex-I.sortIndex;return M!==0?M:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var c=[],u=[],h=1,w=null,v=3,y=!1,g=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(T){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=T)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function k(T){if(j=!1,m(T),!g)if(n(c)!==null)g=!0,vt(x);else{var I=n(u);I!==null&&xt(k,I.startTime-T)}}function x(T,I){g=!1,j&&(j=!1,f(O),O=-1),y=!0;var M=v;try{for(m(I),w=n(c);w!==null&&(!(w.expirationTime>I)||T&&!Q());){var Z=w.callback;if(typeof Z=="function"){w.callback=null,v=w.priorityLevel;var le=Z(w.expirationTime<=I);I=e.unstable_now(),typeof le=="function"?w.callback=le:w===n(c)&&r(c),m(I)}else r(c);w=n(c)}if(w!==null)var rt=!0;else{var st=n(u);st!==null&&xt(k,st.startTime-I),rt=!1}return rt}finally{w=null,v=M,y=!1}}var C=!1,E=null,O=-1,R=5,b=-1;function Q(){return!(e.unstable_now()-b<R)}function re(){if(E!==null){var T=e.unstable_now();b=T;var I=!0;try{I=E(!0,T)}finally{I?Le():(C=!1,E=null)}}else C=!1}var Le;if(typeof d=="function")Le=function(){d(re)};else if(typeof MessageChannel<"u"){var nn=new MessageChannel,zn=nn.port2;nn.port1.onmessage=re,Le=function(){zn.postMessage(null)}}else Le=function(){P(re,0)};function vt(T){E=T,C||(C=!0,Le())}function xt(T,I){O=P(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,vt(x))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(v){case 1:case 2:case 3:var I=3;break;default:I=v}var M=v;v=I;try{return T()}finally{v=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=v;v=T;try{return I()}finally{v=M}},e.unstable_scheduleCallback=function(T,I,M){var Z=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Z+M:Z):M=Z,T){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=M+le,T={id:h++,callback:I,priorityLevel:T,startTime:M,expirationTime:le,sortIndex:-1},M>Z?(T.sortIndex=M,t(u,T),n(c)===null&&T===n(u)&&(j?(f(O),O=-1):j=!0,xt(k,M-Z))):(T.sortIndex=le,t(c,T),g||y||(g=!0,vt(x))),T},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(T){var I=v;return function(){var M=v;v=I;try{return T.apply(this,arguments)}finally{v=M}}}})(Xa);Ya.exports=Xa;var Ad=Ya.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=N,De=Ad;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Za=new Set,rr={};function en(e,t){Cn(e,t),Cn(e+"Capture",t)}function Cn(e,t){for(rr[e]=t,e=0;e<t.length;e++)Za.add(t[e])}var pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wo=Object.prototype.hasOwnProperty,Id=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ci={},Ni={};function Md(e){return wo.call(Ni,e)?!0:wo.call(Ci,e)?!1:Id.test(e)?Ni[e]=!0:(Ci[e]=!0,!1)}function Fd(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rd(e,t,n,r){if(t===null||typeof t>"u"||Fd(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Se(e,t,n,r,s,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){me[e]=new Se(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];me[t]=new Se(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){me[e]=new Se(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){me[e]=new Se(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){me[e]=new Se(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){me[e]=new Se(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){me[e]=new Se(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){me[e]=new Se(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){me[e]=new Se(e,5,!1,e.toLowerCase(),null,!1,!1)});var vl=/[\-:]([a-z])/g;function xl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vl,xl);me[t]=new Se(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vl,xl);me[t]=new Se(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vl,xl);me[t]=new Se(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){me[e]=new Se(e,1,!1,e.toLowerCase(),null,!1,!1)});me.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){me[e]=new Se(e,1,!1,e.toLowerCase(),null,!0,!0)});function wl(e,t,n,r){var s=me.hasOwnProperty(t)?me[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rd(t,n,s,r)&&(n=null),r||s===null?Md(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yt=zd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tr=Symbol.for("react.element"),on=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),kl=Symbol.for("react.strict_mode"),ko=Symbol.for("react.profiler"),qa=Symbol.for("react.provider"),ec=Symbol.for("react.context"),jl=Symbol.for("react.forward_ref"),jo=Symbol.for("react.suspense"),So=Symbol.for("react.suspense_list"),Sl=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),tc=Symbol.for("react.offscreen"),Ei=Symbol.iterator;function In(e){return e===null||typeof e!="object"?null:(e=Ei&&e[Ei]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,Vs;function Vn(e){if(Vs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vs=t&&t[1]||""}return`
`+Vs+e}var Ws=!1;function Qs(e,t){if(!e||Ws)return"";Ws=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),l=r.stack.split(`
`),i=s.length-1,a=l.length-1;1<=i&&0<=a&&s[i]!==l[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==l[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==l[a]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a);break}}}finally{Ws=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vn(e):""}function $d(e){switch(e.tag){case 5:return Vn(e.type);case 16:return Vn("Lazy");case 13:return Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 2:case 15:return e=Qs(e.type,!1),e;case 11:return e=Qs(e.type.render,!1),e;case 1:return e=Qs(e.type,!0),e;default:return""}}function Co(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ln:return"Fragment";case on:return"Portal";case ko:return"Profiler";case kl:return"StrictMode";case jo:return"Suspense";case So:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ec:return(e.displayName||"Context")+".Consumer";case qa:return(e._context.displayName||"Context")+".Provider";case jl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sl:return t=e.displayName||null,t!==null?t:Co(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return Co(e(t))}catch{}}return null}function Ud(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Co(t);case 8:return t===kl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bd(e){var t=nc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lr(e){e._valueTracker||(e._valueTracker=Bd(e))}function rc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function No(e,t){var n=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _i(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sc(e,t){t=t.checked,t!=null&&wl(e,"checked",t,!1)}function Eo(e,t){sc(e,t);var n=zt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_o(e,t.type,n):t.hasOwnProperty("defaultValue")&&_o(e,t.type,zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ti(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _o(e,t,n){(t!=="number"||rs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wn=Array.isArray;function vn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function To(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Li(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(Wn(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zt(n)}}function oc(e,t){var n=zt(t.value),r=zt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Pi(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pr,ic=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hd=["Webkit","ms","Moz","O"];Object.keys(Kn).forEach(function(e){Hd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kn[t]=Kn[e]})});function ac(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kn.hasOwnProperty(e)&&Kn[e]?(""+t).trim():t+"px"}function cc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ac(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Vd=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(e,t){if(t){if(Vd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function bo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=null;function Cl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Do=null,xn=null,wn=null;function bi(e){if(e=Cr(e)){if(typeof Do!="function")throw Error(_(280));var t=e.stateNode;t&&(t=Os(t),Do(e.stateNode,e.type,t))}}function uc(e){xn?wn?wn.push(e):wn=[e]:xn=e}function dc(){if(xn){var e=xn,t=wn;if(wn=xn=null,bi(e),t)for(e=0;e<t.length;e++)bi(t[e])}}function fc(e,t){return e(t)}function pc(){}var Js=!1;function hc(e,t,n){if(Js)return e(t,n);Js=!0;try{return fc(e,t,n)}finally{Js=!1,(xn!==null||wn!==null)&&(pc(),dc())}}function or(e,t){var n=e.stateNode;if(n===null)return null;var r=Os(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var Ao=!1;if(pt)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Ao=!1}function Wd(e,t,n,r,s,l,i,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Gn=!1,ss=null,os=!1,zo=null,Qd={onError:function(e){Gn=!0,ss=e}};function Jd(e,t,n,r,s,l,i,a,c){Gn=!1,ss=null,Wd.apply(Qd,arguments)}function Kd(e,t,n,r,s,l,i,a,c){if(Jd.apply(this,arguments),Gn){if(Gn){var u=ss;Gn=!1,ss=null}else throw Error(_(198));os||(os=!0,zo=u)}}function tn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Oi(e){if(tn(e)!==e)throw Error(_(188))}function Gd(e){var t=e.alternate;if(!t){if(t=tn(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Oi(s),e;if(l===r)return Oi(s),t;l=l.sibling}throw Error(_(188))}if(n.return!==r.return)n=s,r=l;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=l;break}if(a===r){i=!0,r=s,n=l;break}a=a.sibling}if(!i){for(a=l.child;a;){if(a===n){i=!0,n=l,r=s;break}if(a===r){i=!0,r=l,n=s;break}a=a.sibling}if(!i)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function gc(e){return e=Gd(e),e!==null?yc(e):null}function yc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yc(e);if(t!==null)return t;e=e.sibling}return null}var vc=De.unstable_scheduleCallback,Di=De.unstable_cancelCallback,Yd=De.unstable_shouldYield,Xd=De.unstable_requestPaint,oe=De.unstable_now,Zd=De.unstable_getCurrentPriorityLevel,Nl=De.unstable_ImmediatePriority,xc=De.unstable_UserBlockingPriority,ls=De.unstable_NormalPriority,qd=De.unstable_LowPriority,wc=De.unstable_IdlePriority,Ts=null,et=null;function ef(e){if(et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Ts,e,void 0,(e.current.flags&128)===128)}catch{}}var Je=Math.clz32?Math.clz32:rf,tf=Math.log,nf=Math.LN2;function rf(e){return e>>>=0,e===0?32:31-(tf(e)/nf|0)|0}var br=64,Or=4194304;function Qn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function is(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Qn(a):(l&=i,l!==0&&(r=Qn(l)))}else i=n&~s,i!==0?r=Qn(i):l!==0&&(r=Qn(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Je(t),s=1<<n,r|=e[n],t&=~s;return r}function sf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function of(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Je(l),a=1<<i,c=s[i];c===-1?(!(a&n)||a&r)&&(s[i]=sf(a,t)):c<=t&&(e.expiredLanes|=a),l&=~a}}function Io(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kc(){var e=br;return br<<=1,!(br&4194240)&&(br=64),e}function Ks(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Je(t),e[t]=n}function lf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Je(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function El(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Je(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var J=0;function jc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sc,_l,Cc,Nc,Ec,Mo=!1,Dr=[],_t=null,Tt=null,Lt=null,lr=new Map,ir=new Map,St=[],af="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ir.delete(t.pointerId)}}function Fn(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Cr(t),t!==null&&_l(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cf(e,t,n,r,s){switch(t){case"focusin":return _t=Fn(_t,e,t,n,r,s),!0;case"dragenter":return Tt=Fn(Tt,e,t,n,r,s),!0;case"mouseover":return Lt=Fn(Lt,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return lr.set(l,Fn(lr.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,ir.set(l,Fn(ir.get(l)||null,e,t,n,r,s)),!0}return!1}function _c(e){var t=Vt(e.target);if(t!==null){var n=tn(t);if(n!==null){if(t=n.tag,t===13){if(t=mc(n),t!==null){e.blockedOn=t,Ec(e.priority,function(){Cc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Oo=r,n.target.dispatchEvent(r),Oo=null}else return t=Cr(n),t!==null&&_l(t),e.blockedOn=n,!1;t.shift()}return!0}function zi(e,t,n){Jr(e)&&n.delete(t)}function uf(){Mo=!1,_t!==null&&Jr(_t)&&(_t=null),Tt!==null&&Jr(Tt)&&(Tt=null),Lt!==null&&Jr(Lt)&&(Lt=null),lr.forEach(zi),ir.forEach(zi)}function Rn(e,t){e.blockedOn===t&&(e.blockedOn=null,Mo||(Mo=!0,De.unstable_scheduleCallback(De.unstable_NormalPriority,uf)))}function ar(e){function t(s){return Rn(s,e)}if(0<Dr.length){Rn(Dr[0],e);for(var n=1;n<Dr.length;n++){var r=Dr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_t!==null&&Rn(_t,e),Tt!==null&&Rn(Tt,e),Lt!==null&&Rn(Lt,e),lr.forEach(t),ir.forEach(t),n=0;n<St.length;n++)r=St[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&(n=St[0],n.blockedOn===null);)_c(n),n.blockedOn===null&&St.shift()}var kn=yt.ReactCurrentBatchConfig,as=!0;function df(e,t,n,r){var s=J,l=kn.transition;kn.transition=null;try{J=1,Tl(e,t,n,r)}finally{J=s,kn.transition=l}}function ff(e,t,n,r){var s=J,l=kn.transition;kn.transition=null;try{J=4,Tl(e,t,n,r)}finally{J=s,kn.transition=l}}function Tl(e,t,n,r){if(as){var s=Fo(e,t,n,r);if(s===null)so(e,t,r,cs,n),Ai(e,r);else if(cf(s,e,t,n,r))r.stopPropagation();else if(Ai(e,r),t&4&&-1<af.indexOf(e)){for(;s!==null;){var l=Cr(s);if(l!==null&&Sc(l),l=Fo(e,t,n,r),l===null&&so(e,t,r,cs,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else so(e,t,r,null,n)}}var cs=null;function Fo(e,t,n,r){if(cs=null,e=Cl(r),e=Vt(e),e!==null)if(t=tn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cs=e,null}function Tc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zd()){case Nl:return 1;case xc:return 4;case ls:case qd:return 16;case wc:return 536870912;default:return 16}default:return 16}}var Nt=null,Ll=null,Kr=null;function Lc(){if(Kr)return Kr;var e,t=Ll,n=t.length,r,s="value"in Nt?Nt.value:Nt.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[l-r];r++);return Kr=s.slice(e,1<r?1-r:void 0)}function Gr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ar(){return!0}function Ii(){return!1}function ze(e){function t(n,r,s,l,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ar:Ii,this.isPropagationStopped=Ii,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),t}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=ze(On),Sr=ne({},On,{view:0,detail:0}),pf=ze(Sr),Gs,Ys,$n,Ls=ne({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$n&&($n&&e.type==="mousemove"?(Gs=e.screenX-$n.screenX,Ys=e.screenY-$n.screenY):Ys=Gs=0,$n=e),Gs)},movementY:function(e){return"movementY"in e?e.movementY:Ys}}),Mi=ze(Ls),hf=ne({},Ls,{dataTransfer:0}),mf=ze(hf),gf=ne({},Sr,{relatedTarget:0}),Xs=ze(gf),yf=ne({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),vf=ze(yf),xf=ne({},On,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wf=ze(xf),kf=ne({},On,{data:0}),Fi=ze(kf),jf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cf[e])?!!t[e]:!1}function bl(){return Nf}var Ef=ne({},Sr,{key:function(e){if(e.key){var t=jf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bl,charCode:function(e){return e.type==="keypress"?Gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_f=ze(Ef),Tf=ne({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ri=ze(Tf),Lf=ne({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bl}),Pf=ze(Lf),bf=ne({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Of=ze(bf),Df=ne({},Ls,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Af=ze(Df),zf=[9,13,27,32],Ol=pt&&"CompositionEvent"in window,Yn=null;pt&&"documentMode"in document&&(Yn=document.documentMode);var If=pt&&"TextEvent"in window&&!Yn,Pc=pt&&(!Ol||Yn&&8<Yn&&11>=Yn),$i=String.fromCharCode(32),Ui=!1;function bc(e,t){switch(e){case"keyup":return zf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var an=!1;function Mf(e,t){switch(e){case"compositionend":return Oc(t);case"keypress":return t.which!==32?null:(Ui=!0,$i);case"textInput":return e=t.data,e===$i&&Ui?null:e;default:return null}}function Ff(e,t){if(an)return e==="compositionend"||!Ol&&bc(e,t)?(e=Lc(),Kr=Ll=Nt=null,an=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pc&&t.locale!=="ko"?null:t.data;default:return null}}var Rf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rf[e.type]:t==="textarea"}function Dc(e,t,n,r){uc(r),t=us(t,"onChange"),0<t.length&&(n=new Pl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,cr=null;function $f(e){Vc(e,0)}function Ps(e){var t=dn(e);if(rc(t))return e}function Uf(e,t){if(e==="change")return t}var Ac=!1;if(pt){var Zs;if(pt){var qs="oninput"in document;if(!qs){var Hi=document.createElement("div");Hi.setAttribute("oninput","return;"),qs=typeof Hi.oninput=="function"}Zs=qs}else Zs=!1;Ac=Zs&&(!document.documentMode||9<document.documentMode)}function Vi(){Xn&&(Xn.detachEvent("onpropertychange",zc),cr=Xn=null)}function zc(e){if(e.propertyName==="value"&&Ps(cr)){var t=[];Dc(t,cr,e,Cl(e)),hc($f,t)}}function Bf(e,t,n){e==="focusin"?(Vi(),Xn=t,cr=n,Xn.attachEvent("onpropertychange",zc)):e==="focusout"&&Vi()}function Hf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ps(cr)}function Vf(e,t){if(e==="click")return Ps(t)}function Wf(e,t){if(e==="input"||e==="change")return Ps(t)}function Qf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ge=typeof Object.is=="function"?Object.is:Qf;function ur(e,t){if(Ge(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wo.call(t,s)||!Ge(e[s],t[s]))return!1}return!0}function Wi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qi(e,t){var n=Wi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wi(n)}}function Ic(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ic(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mc(){for(var e=window,t=rs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=rs(e.document)}return t}function Dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jf(e){var t=Mc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ic(n.ownerDocument.documentElement,n)){if(r!==null&&Dl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=Qi(n,l);var i=Qi(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kf=pt&&"documentMode"in document&&11>=document.documentMode,cn=null,Ro=null,Zn=null,$o=!1;function Ji(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$o||cn==null||cn!==rs(r)||(r=cn,"selectionStart"in r&&Dl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zn&&ur(Zn,r)||(Zn=r,r=us(Ro,"onSelect"),0<r.length&&(t=new Pl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cn)))}function zr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var un={animationend:zr("Animation","AnimationEnd"),animationiteration:zr("Animation","AnimationIteration"),animationstart:zr("Animation","AnimationStart"),transitionend:zr("Transition","TransitionEnd")},eo={},Fc={};pt&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);function bs(e){if(eo[e])return eo[e];if(!un[e])return e;var t=un[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fc)return eo[e]=t[n];return e}var Rc=bs("animationend"),$c=bs("animationiteration"),Uc=bs("animationstart"),Bc=bs("transitionend"),Hc=new Map,Ki="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mt(e,t){Hc.set(e,t),en(t,[e])}for(var to=0;to<Ki.length;to++){var no=Ki[to],Gf=no.toLowerCase(),Yf=no[0].toUpperCase()+no.slice(1);Mt(Gf,"on"+Yf)}Mt(Rc,"onAnimationEnd");Mt($c,"onAnimationIteration");Mt(Uc,"onAnimationStart");Mt("dblclick","onDoubleClick");Mt("focusin","onFocus");Mt("focusout","onBlur");Mt(Bc,"onTransitionEnd");Cn("onMouseEnter",["mouseout","mouseover"]);Cn("onMouseLeave",["mouseout","mouseover"]);Cn("onPointerEnter",["pointerout","pointerover"]);Cn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jn));function Gi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Kd(r,t,void 0,e),e.currentTarget=null}function Vc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==l&&s.isPropagationStopped())break e;Gi(s,a,u),l=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,u=a.currentTarget,a=a.listener,c!==l&&s.isPropagationStopped())break e;Gi(s,a,u),l=c}}}if(os)throw e=zo,os=!1,zo=null,e}function Y(e,t){var n=t[Wo];n===void 0&&(n=t[Wo]=new Set);var r=e+"__bubble";n.has(r)||(Wc(t,e,2,!1),n.add(r))}function ro(e,t,n){var r=0;t&&(r|=4),Wc(n,e,r,t)}var Ir="_reactListening"+Math.random().toString(36).slice(2);function dr(e){if(!e[Ir]){e[Ir]=!0,Za.forEach(function(n){n!=="selectionchange"&&(Xf.has(n)||ro(n,!1,e),ro(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ir]||(t[Ir]=!0,ro("selectionchange",!1,t))}}function Wc(e,t,n,r){switch(Tc(t)){case 1:var s=df;break;case 4:s=ff;break;default:s=Tl}n=s.bind(null,t,n,e),s=void 0,!Ao||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function so(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Vt(a),i===null)return;if(c=i.tag,c===5||c===6){r=l=i;continue e}a=a.parentNode}}r=r.return}hc(function(){var u=l,h=Cl(n),w=[];e:{var v=Hc.get(e);if(v!==void 0){var y=Pl,g=e;switch(e){case"keypress":if(Gr(n)===0)break e;case"keydown":case"keyup":y=_f;break;case"focusin":g="focus",y=Xs;break;case"focusout":g="blur",y=Xs;break;case"beforeblur":case"afterblur":y=Xs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Pf;break;case Rc:case $c:case Uc:y=vf;break;case Bc:y=Of;break;case"scroll":y=pf;break;case"wheel":y=Af;break;case"copy":case"cut":case"paste":y=wf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ri}var j=(t&4)!==0,P=!j&&e==="scroll",f=j?v!==null?v+"Capture":null:v;j=[];for(var d=u,m;d!==null;){m=d;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,f!==null&&(k=or(d,f),k!=null&&j.push(fr(d,k,m)))),P)break;d=d.return}0<j.length&&(v=new y(v,g,null,n,h),w.push({event:v,listeners:j}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&n!==Oo&&(g=n.relatedTarget||n.fromElement)&&(Vt(g)||g[ht]))break e;if((y||v)&&(v=h.window===h?h:(v=h.ownerDocument)?v.defaultView||v.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=u,g=g?Vt(g):null,g!==null&&(P=tn(g),g!==P||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(j=Mi,k="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(j=Ri,k="onPointerLeave",f="onPointerEnter",d="pointer"),P=y==null?v:dn(y),m=g==null?v:dn(g),v=new j(k,d+"leave",y,n,h),v.target=P,v.relatedTarget=m,k=null,Vt(h)===u&&(j=new j(f,d+"enter",g,n,h),j.target=m,j.relatedTarget=P,k=j),P=k,y&&g)t:{for(j=y,f=g,d=0,m=j;m;m=rn(m))d++;for(m=0,k=f;k;k=rn(k))m++;for(;0<d-m;)j=rn(j),d--;for(;0<m-d;)f=rn(f),m--;for(;d--;){if(j===f||f!==null&&j===f.alternate)break t;j=rn(j),f=rn(f)}j=null}else j=null;y!==null&&Yi(w,v,y,j,!1),g!==null&&P!==null&&Yi(w,P,g,j,!0)}}e:{if(v=u?dn(u):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var x=Uf;else if(Bi(v))if(Ac)x=Wf;else{x=Hf;var C=Bf}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(x=Vf);if(x&&(x=x(e,u))){Dc(w,x,n,h);break e}C&&C(e,v,u),e==="focusout"&&(C=v._wrapperState)&&C.controlled&&v.type==="number"&&_o(v,"number",v.value)}switch(C=u?dn(u):window,e){case"focusin":(Bi(C)||C.contentEditable==="true")&&(cn=C,Ro=u,Zn=null);break;case"focusout":Zn=Ro=cn=null;break;case"mousedown":$o=!0;break;case"contextmenu":case"mouseup":case"dragend":$o=!1,Ji(w,n,h);break;case"selectionchange":if(Kf)break;case"keydown":case"keyup":Ji(w,n,h)}var E;if(Ol)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else an?bc(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Pc&&n.locale!=="ko"&&(an||O!=="onCompositionStart"?O==="onCompositionEnd"&&an&&(E=Lc()):(Nt=h,Ll="value"in Nt?Nt.value:Nt.textContent,an=!0)),C=us(u,O),0<C.length&&(O=new Fi(O,e,null,n,h),w.push({event:O,listeners:C}),E?O.data=E:(E=Oc(n),E!==null&&(O.data=E)))),(E=If?Mf(e,n):Ff(e,n))&&(u=us(u,"onBeforeInput"),0<u.length&&(h=new Fi("onBeforeInput","beforeinput",null,n,h),w.push({event:h,listeners:u}),h.data=E))}Vc(w,t)})}function fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function us(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=or(e,n),l!=null&&r.unshift(fr(e,l,s)),l=or(e,t),l!=null&&r.push(fr(e,l,s))),e=e.return}return r}function rn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yi(e,t,n,r,s){for(var l=t._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=or(n,l),c!=null&&i.unshift(fr(n,c,a))):s||(c=or(n,l),c!=null&&i.push(fr(n,c,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Zf=/\r\n?/g,qf=/\u0000|\uFFFD/g;function Xi(e){return(typeof e=="string"?e:""+e).replace(Zf,`
`).replace(qf,"")}function Mr(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(_(425))}function ds(){}var Uo=null,Bo=null;function Ho(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vo=typeof setTimeout=="function"?setTimeout:void 0,ep=typeof clearTimeout=="function"?clearTimeout:void 0,Zi=typeof Promise=="function"?Promise:void 0,tp=typeof queueMicrotask=="function"?queueMicrotask:typeof Zi<"u"?function(e){return Zi.resolve(null).then(e).catch(np)}:Vo;function np(e){setTimeout(function(){throw e})}function oo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ar(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ar(t)}function Pt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),qe="__reactFiber$"+Dn,pr="__reactProps$"+Dn,ht="__reactContainer$"+Dn,Wo="__reactEvents$"+Dn,rp="__reactListeners$"+Dn,sp="__reactHandles$"+Dn;function Vt(e){var t=e[qe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ht]||n[qe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qi(e);e!==null;){if(n=e[qe])return n;e=qi(e)}return t}e=n,n=e.parentNode}return null}function Cr(e){return e=e[qe]||e[ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function Os(e){return e[pr]||null}var Qo=[],fn=-1;function Ft(e){return{current:e}}function X(e){0>fn||(e.current=Qo[fn],Qo[fn]=null,fn--)}function G(e,t){fn++,Qo[fn]=e.current,e.current=t}var It={},xe=Ft(It),Ee=Ft(!1),Gt=It;function Nn(e,t){var n=e.type.contextTypes;if(!n)return It;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _e(e){return e=e.childContextTypes,e!=null}function fs(){X(Ee),X(xe)}function ea(e,t,n){if(xe.current!==It)throw Error(_(168));G(xe,t),G(Ee,n)}function Qc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(_(108,Ud(e)||"Unknown",s));return ne({},n,r)}function ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||It,Gt=xe.current,G(xe,e),G(Ee,Ee.current),!0}function ta(e,t,n){var r=e.stateNode;if(!r)throw Error(_(169));n?(e=Qc(e,t,Gt),r.__reactInternalMemoizedMergedChildContext=e,X(Ee),X(xe),G(xe,e)):X(Ee),G(Ee,n)}var ct=null,Ds=!1,lo=!1;function Jc(e){ct===null?ct=[e]:ct.push(e)}function op(e){Ds=!0,Jc(e)}function Rt(){if(!lo&&ct!==null){lo=!0;var e=0,t=J;try{var n=ct;for(J=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ct=null,Ds=!1}catch(s){throw ct!==null&&(ct=ct.slice(e+1)),vc(Nl,Rt),s}finally{J=t,lo=!1}}return null}var pn=[],hn=0,hs=null,ms=0,Ie=[],Me=0,Yt=null,ut=1,dt="";function Bt(e,t){pn[hn++]=ms,pn[hn++]=hs,hs=e,ms=t}function Kc(e,t,n){Ie[Me++]=ut,Ie[Me++]=dt,Ie[Me++]=Yt,Yt=e;var r=ut;e=dt;var s=32-Je(r)-1;r&=~(1<<s),n+=1;var l=32-Je(t)+s;if(30<l){var i=s-s%5;l=(r&(1<<i)-1).toString(32),r>>=i,s-=i,ut=1<<32-Je(t)+s|n<<s|r,dt=l+e}else ut=1<<l|n<<s|r,dt=e}function Al(e){e.return!==null&&(Bt(e,1),Kc(e,1,0))}function zl(e){for(;e===hs;)hs=pn[--hn],pn[hn]=null,ms=pn[--hn],pn[hn]=null;for(;e===Yt;)Yt=Ie[--Me],Ie[Me]=null,dt=Ie[--Me],Ie[Me]=null,ut=Ie[--Me],Ie[Me]=null}var Oe=null,be=null,q=!1,Qe=null;function Gc(e,t){var n=Re(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function na(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Oe=e,be=Pt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Oe=e,be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yt!==null?{id:ut,overflow:dt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Re(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Oe=e,be=null,!0):!1;default:return!1}}function Jo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ko(e){if(q){var t=be;if(t){var n=t;if(!na(e,t)){if(Jo(e))throw Error(_(418));t=Pt(n.nextSibling);var r=Oe;t&&na(e,t)?Gc(r,n):(e.flags=e.flags&-4097|2,q=!1,Oe=e)}}else{if(Jo(e))throw Error(_(418));e.flags=e.flags&-4097|2,q=!1,Oe=e}}}function ra(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Oe=e}function Fr(e){if(e!==Oe)return!1;if(!q)return ra(e),q=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ho(e.type,e.memoizedProps)),t&&(t=be)){if(Jo(e))throw Yc(),Error(_(418));for(;t;)Gc(e,t),t=Pt(t.nextSibling)}if(ra(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){be=Pt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}be=null}}else be=Oe?Pt(e.stateNode.nextSibling):null;return!0}function Yc(){for(var e=be;e;)e=Pt(e.nextSibling)}function En(){be=Oe=null,q=!1}function Il(e){Qe===null?Qe=[e]:Qe.push(e)}var lp=yt.ReactCurrentBatchConfig;function Un(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var a=s.refs;i===null?delete a[l]:a[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function Rr(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sa(e){var t=e._init;return t(e._payload)}function Xc(e){function t(f,d){if(e){var m=f.deletions;m===null?(f.deletions=[d],f.flags|=16):m.push(d)}}function n(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function r(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function s(f,d){return f=At(f,d),f.index=0,f.sibling=null,f}function l(f,d,m){return f.index=m,e?(m=f.alternate,m!==null?(m=m.index,m<d?(f.flags|=2,d):m):(f.flags|=2,d)):(f.flags|=1048576,d)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,d,m,k){return d===null||d.tag!==6?(d=ho(m,f.mode,k),d.return=f,d):(d=s(d,m),d.return=f,d)}function c(f,d,m,k){var x=m.type;return x===ln?h(f,d,m.props.children,k,m.key):d!==null&&(d.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===kt&&sa(x)===d.type)?(k=s(d,m.props),k.ref=Un(f,d,m),k.return=f,k):(k=ns(m.type,m.key,m.props,null,f.mode,k),k.ref=Un(f,d,m),k.return=f,k)}function u(f,d,m,k){return d===null||d.tag!==4||d.stateNode.containerInfo!==m.containerInfo||d.stateNode.implementation!==m.implementation?(d=mo(m,f.mode,k),d.return=f,d):(d=s(d,m.children||[]),d.return=f,d)}function h(f,d,m,k,x){return d===null||d.tag!==7?(d=Kt(m,f.mode,k,x),d.return=f,d):(d=s(d,m),d.return=f,d)}function w(f,d,m){if(typeof d=="string"&&d!==""||typeof d=="number")return d=ho(""+d,f.mode,m),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Tr:return m=ns(d.type,d.key,d.props,null,f.mode,m),m.ref=Un(f,null,d),m.return=f,m;case on:return d=mo(d,f.mode,m),d.return=f,d;case kt:var k=d._init;return w(f,k(d._payload),m)}if(Wn(d)||In(d))return d=Kt(d,f.mode,m,null),d.return=f,d;Rr(f,d)}return null}function v(f,d,m,k){var x=d!==null?d.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return x!==null?null:a(f,d,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Tr:return m.key===x?c(f,d,m,k):null;case on:return m.key===x?u(f,d,m,k):null;case kt:return x=m._init,v(f,d,x(m._payload),k)}if(Wn(m)||In(m))return x!==null?null:h(f,d,m,k,null);Rr(f,m)}return null}function y(f,d,m,k,x){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(m)||null,a(d,f,""+k,x);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Tr:return f=f.get(k.key===null?m:k.key)||null,c(d,f,k,x);case on:return f=f.get(k.key===null?m:k.key)||null,u(d,f,k,x);case kt:var C=k._init;return y(f,d,m,C(k._payload),x)}if(Wn(k)||In(k))return f=f.get(m)||null,h(d,f,k,x,null);Rr(d,k)}return null}function g(f,d,m,k){for(var x=null,C=null,E=d,O=d=0,R=null;E!==null&&O<m.length;O++){E.index>O?(R=E,E=null):R=E.sibling;var b=v(f,E,m[O],k);if(b===null){E===null&&(E=R);break}e&&E&&b.alternate===null&&t(f,E),d=l(b,d,O),C===null?x=b:C.sibling=b,C=b,E=R}if(O===m.length)return n(f,E),q&&Bt(f,O),x;if(E===null){for(;O<m.length;O++)E=w(f,m[O],k),E!==null&&(d=l(E,d,O),C===null?x=E:C.sibling=E,C=E);return q&&Bt(f,O),x}for(E=r(f,E);O<m.length;O++)R=y(E,f,O,m[O],k),R!==null&&(e&&R.alternate!==null&&E.delete(R.key===null?O:R.key),d=l(R,d,O),C===null?x=R:C.sibling=R,C=R);return e&&E.forEach(function(Q){return t(f,Q)}),q&&Bt(f,O),x}function j(f,d,m,k){var x=In(m);if(typeof x!="function")throw Error(_(150));if(m=x.call(m),m==null)throw Error(_(151));for(var C=x=null,E=d,O=d=0,R=null,b=m.next();E!==null&&!b.done;O++,b=m.next()){E.index>O?(R=E,E=null):R=E.sibling;var Q=v(f,E,b.value,k);if(Q===null){E===null&&(E=R);break}e&&E&&Q.alternate===null&&t(f,E),d=l(Q,d,O),C===null?x=Q:C.sibling=Q,C=Q,E=R}if(b.done)return n(f,E),q&&Bt(f,O),x;if(E===null){for(;!b.done;O++,b=m.next())b=w(f,b.value,k),b!==null&&(d=l(b,d,O),C===null?x=b:C.sibling=b,C=b);return q&&Bt(f,O),x}for(E=r(f,E);!b.done;O++,b=m.next())b=y(E,f,O,b.value,k),b!==null&&(e&&b.alternate!==null&&E.delete(b.key===null?O:b.key),d=l(b,d,O),C===null?x=b:C.sibling=b,C=b);return e&&E.forEach(function(re){return t(f,re)}),q&&Bt(f,O),x}function P(f,d,m,k){if(typeof m=="object"&&m!==null&&m.type===ln&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Tr:e:{for(var x=m.key,C=d;C!==null;){if(C.key===x){if(x=m.type,x===ln){if(C.tag===7){n(f,C.sibling),d=s(C,m.props.children),d.return=f,f=d;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===kt&&sa(x)===C.type){n(f,C.sibling),d=s(C,m.props),d.ref=Un(f,C,m),d.return=f,f=d;break e}n(f,C);break}else t(f,C);C=C.sibling}m.type===ln?(d=Kt(m.props.children,f.mode,k,m.key),d.return=f,f=d):(k=ns(m.type,m.key,m.props,null,f.mode,k),k.ref=Un(f,d,m),k.return=f,f=k)}return i(f);case on:e:{for(C=m.key;d!==null;){if(d.key===C)if(d.tag===4&&d.stateNode.containerInfo===m.containerInfo&&d.stateNode.implementation===m.implementation){n(f,d.sibling),d=s(d,m.children||[]),d.return=f,f=d;break e}else{n(f,d);break}else t(f,d);d=d.sibling}d=mo(m,f.mode,k),d.return=f,f=d}return i(f);case kt:return C=m._init,P(f,d,C(m._payload),k)}if(Wn(m))return g(f,d,m,k);if(In(m))return j(f,d,m,k);Rr(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,d!==null&&d.tag===6?(n(f,d.sibling),d=s(d,m),d.return=f,f=d):(n(f,d),d=ho(m,f.mode,k),d.return=f,f=d),i(f)):n(f,d)}return P}var _n=Xc(!0),Zc=Xc(!1),gs=Ft(null),ys=null,mn=null,Ml=null;function Fl(){Ml=mn=ys=null}function Rl(e){var t=gs.current;X(gs),e._currentValue=t}function Go(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function jn(e,t){ys=e,Ml=mn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ne=!0),e.firstContext=null)}function Ue(e){var t=e._currentValue;if(Ml!==e)if(e={context:e,memoizedValue:t,next:null},mn===null){if(ys===null)throw Error(_(308));mn=e,ys.dependencies={lanes:0,firstContext:e}}else mn=mn.next=e;return t}var Wt=null;function $l(e){Wt===null?Wt=[e]:Wt.push(e)}function qc(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,$l(t)):(n.next=s.next,s.next=n),t.interleaved=n,mt(e,r)}function mt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jt=!1;function Ul(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ft(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,mt(e,n)}return s=r.interleaved,s===null?(t.next=t,$l(r)):(t.next=s.next,s.next=t),r.interleaved=t,mt(e,n)}function Yr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,El(e,n)}}function oa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vs(e,t,n,r){var s=e.updateQueue;jt=!1;var l=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,i===null?l=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==i&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(l!==null){var w=s.baseState;i=0,h=u=c=null,a=l;do{var v=a.lane,y=a.eventTime;if((r&v)===v){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,j=a;switch(v=t,y=n,j.tag){case 1:if(g=j.payload,typeof g=="function"){w=g.call(y,w,v);break e}w=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=j.payload,v=typeof g=="function"?g.call(y,w,v):g,v==null)break e;w=ne({},w,v);break e;case 2:jt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[a]:v.push(a))}else y={eventTime:y,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=w):h=h.next=y,i|=v;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;v=a,a=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(1);if(h===null&&(c=w),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Zt|=i,e.lanes=i,e.memoizedState=w}}function la(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_(191,s));s.call(r)}}}var Nr={},tt=Ft(Nr),hr=Ft(Nr),mr=Ft(Nr);function Qt(e){if(e===Nr)throw Error(_(174));return e}function Bl(e,t){switch(G(mr,t),G(hr,e),G(tt,Nr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lo(t,e)}X(tt),G(tt,t)}function Tn(){X(tt),X(hr),X(mr)}function tu(e){Qt(mr.current);var t=Qt(tt.current),n=Lo(t,e.type);t!==n&&(G(hr,e),G(tt,n))}function Hl(e){hr.current===e&&(X(tt),X(hr))}var ee=Ft(0);function xs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function Vl(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var Xr=yt.ReactCurrentDispatcher,ao=yt.ReactCurrentBatchConfig,Xt=0,te=null,ce=null,de=null,ws=!1,qn=!1,gr=0,ip=0;function ge(){throw Error(_(321))}function Wl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ge(e[n],t[n]))return!1;return!0}function Ql(e,t,n,r,s,l){if(Xt=l,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xr.current=e===null||e.memoizedState===null?dp:fp,e=n(r,s),qn){l=0;do{if(qn=!1,gr=0,25<=l)throw Error(_(301));l+=1,de=ce=null,t.updateQueue=null,Xr.current=pp,e=n(r,s)}while(qn)}if(Xr.current=ks,t=ce!==null&&ce.next!==null,Xt=0,de=ce=te=null,ws=!1,t)throw Error(_(300));return e}function Jl(){var e=gr!==0;return gr=0,e}function Ze(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?te.memoizedState=de=e:de=de.next=e,de}function Be(){if(ce===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=ce.next;var t=de===null?te.memoizedState:de.next;if(t!==null)de=t,ce=e;else{if(e===null)throw Error(_(310));ce=e,e={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},de===null?te.memoizedState=de=e:de=de.next=e}return de}function yr(e,t){return typeof t=="function"?t(e):t}function co(e){var t=Be(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=ce,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var i=s.next;s.next=l.next,l.next=i}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=i=null,c=null,u=l;do{var h=u.lane;if((Xt&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var w={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=w,i=r):c=c.next=w,te.lanes|=h,Zt|=h}u=u.next}while(u!==null&&u!==l);c===null?i=r:c.next=a,Ge(r,t.memoizedState)||(Ne=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,te.lanes|=l,Zt|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function uo(e){var t=Be(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do l=e(l,i.action),i=i.next;while(i!==s);Ge(l,t.memoizedState)||(Ne=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function nu(){}function ru(e,t){var n=te,r=Be(),s=t(),l=!Ge(r.memoizedState,s);if(l&&(r.memoizedState=s,Ne=!0),r=r.queue,Kl(lu.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,vr(9,ou.bind(null,n,r,s,t),void 0,null),fe===null)throw Error(_(349));Xt&30||su(n,t,s)}return s}function su(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ou(e,t,n,r){t.value=n,t.getSnapshot=r,iu(t)&&au(e)}function lu(e,t,n){return n(function(){iu(t)&&au(e)})}function iu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ge(e,n)}catch{return!0}}function au(e){var t=mt(e,1);t!==null&&Ke(t,e,1,-1)}function ia(e){var t=Ze();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:e},t.queue=e,e=e.dispatch=up.bind(null,te,e),[t.memoizedState,e]}function vr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function cu(){return Be().memoizedState}function Zr(e,t,n,r){var s=Ze();te.flags|=e,s.memoizedState=vr(1|t,n,void 0,r===void 0?null:r)}function As(e,t,n,r){var s=Be();r=r===void 0?null:r;var l=void 0;if(ce!==null){var i=ce.memoizedState;if(l=i.destroy,r!==null&&Wl(r,i.deps)){s.memoizedState=vr(t,n,l,r);return}}te.flags|=e,s.memoizedState=vr(1|t,n,l,r)}function aa(e,t){return Zr(8390656,8,e,t)}function Kl(e,t){return As(2048,8,e,t)}function uu(e,t){return As(4,2,e,t)}function du(e,t){return As(4,4,e,t)}function fu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pu(e,t,n){return n=n!=null?n.concat([e]):null,As(4,4,fu.bind(null,t,e),n)}function Gl(){}function hu(e,t){var n=Be();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mu(e,t){var n=Be();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gu(e,t,n){return Xt&21?(Ge(n,t)||(n=kc(),te.lanes|=n,Zt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ne=!0),e.memoizedState=n)}function ap(e,t){var n=J;J=n!==0&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{J=n,ao.transition=r}}function yu(){return Be().memoizedState}function cp(e,t,n){var r=Dt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vu(e))xu(t,n);else if(n=qc(e,t,n,r),n!==null){var s=ke();Ke(n,e,r,s),wu(n,t,r)}}function up(e,t,n){var r=Dt(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vu(e))xu(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,a=l(i,n);if(s.hasEagerState=!0,s.eagerState=a,Ge(a,i)){var c=t.interleaved;c===null?(s.next=s,$l(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=qc(e,t,s,r),n!==null&&(s=ke(),Ke(n,e,r,s),wu(n,t,r))}}function vu(e){var t=e.alternate;return e===te||t!==null&&t===te}function xu(e,t){qn=ws=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wu(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,El(e,n)}}var ks={readContext:Ue,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useInsertionEffect:ge,useLayoutEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useMutableSource:ge,useSyncExternalStore:ge,useId:ge,unstable_isNewReconciler:!1},dp={readContext:Ue,useCallback:function(e,t){return Ze().memoizedState=[e,t===void 0?null:t],e},useContext:Ue,useEffect:aa,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zr(4194308,4,fu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zr(4,2,e,t)},useMemo:function(e,t){var n=Ze();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ze();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cp.bind(null,te,e),[r.memoizedState,e]},useRef:function(e){var t=Ze();return e={current:e},t.memoizedState=e},useState:ia,useDebugValue:Gl,useDeferredValue:function(e){return Ze().memoizedState=e},useTransition:function(){var e=ia(!1),t=e[0];return e=ap.bind(null,e[1]),Ze().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=te,s=Ze();if(q){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),fe===null)throw Error(_(349));Xt&30||su(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,aa(lu.bind(null,r,l,e),[e]),r.flags|=2048,vr(9,ou.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Ze(),t=fe.identifierPrefix;if(q){var n=dt,r=ut;n=(r&~(1<<32-Je(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ip++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fp={readContext:Ue,useCallback:hu,useContext:Ue,useEffect:Kl,useImperativeHandle:pu,useInsertionEffect:uu,useLayoutEffect:du,useMemo:mu,useReducer:co,useRef:cu,useState:function(){return co(yr)},useDebugValue:Gl,useDeferredValue:function(e){var t=Be();return gu(t,ce.memoizedState,e)},useTransition:function(){var e=co(yr)[0],t=Be().memoizedState;return[e,t]},useMutableSource:nu,useSyncExternalStore:ru,useId:yu,unstable_isNewReconciler:!1},pp={readContext:Ue,useCallback:hu,useContext:Ue,useEffect:Kl,useImperativeHandle:pu,useInsertionEffect:uu,useLayoutEffect:du,useMemo:mu,useReducer:uo,useRef:cu,useState:function(){return uo(yr)},useDebugValue:Gl,useDeferredValue:function(e){var t=Be();return ce===null?t.memoizedState=e:gu(t,ce.memoizedState,e)},useTransition:function(){var e=uo(yr)[0],t=Be().memoizedState;return[e,t]},useMutableSource:nu,useSyncExternalStore:ru,useId:yu,unstable_isNewReconciler:!1};function Ve(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Yo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return(e=e._reactInternals)?tn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ke(),s=Dt(e),l=ft(r,s);l.payload=t,n!=null&&(l.callback=n),t=bt(e,l,s),t!==null&&(Ke(t,e,s,r),Yr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ke(),s=Dt(e),l=ft(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=bt(e,l,s),t!==null&&(Ke(t,e,s,r),Yr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ke(),r=Dt(e),s=ft(n,r);s.tag=2,t!=null&&(s.callback=t),t=bt(e,s,r),t!==null&&(Ke(t,e,r,n),Yr(t,e,r))}};function ca(e,t,n,r,s,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):t.prototype&&t.prototype.isPureReactComponent?!ur(n,r)||!ur(s,l):!0}function ku(e,t,n){var r=!1,s=It,l=t.contextType;return typeof l=="object"&&l!==null?l=Ue(l):(s=_e(t)?Gt:xe.current,r=t.contextTypes,l=(r=r!=null)?Nn(e,s):It),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function ua(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Xo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ul(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Ue(l):(l=_e(t)?Gt:xe.current,s.context=Nn(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Yo(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&zs.enqueueReplaceState(s,s.state,null),vs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ln(e,t){try{var n="",r=t;do n+=$d(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function fo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Zo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hp=typeof WeakMap=="function"?WeakMap:Map;function ju(e,t,n){n=ft(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ss||(Ss=!0,al=r),Zo(e,t)},n}function Su(e,t,n){n=ft(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Zo(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Zo(e,t),typeof r!="function"&&(Ot===null?Ot=new Set([this]):Ot.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function da(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Tp.bind(null,e,t,n),t.then(e,e))}function fa(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pa(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ft(-1,1),t.tag=2,bt(n,t,1))),n.lanes|=1),e)}var mp=yt.ReactCurrentOwner,Ne=!1;function we(e,t,n,r){t.child=e===null?Zc(t,null,n,r):_n(t,e.child,n,r)}function ha(e,t,n,r,s){n=n.render;var l=t.ref;return jn(t,s),r=Ql(e,t,n,r,l,s),n=Jl(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gt(e,t,s)):(q&&n&&Al(t),t.flags|=1,we(e,t,r,s),t.child)}function ma(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!ri(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Cu(e,t,l,r,s)):(e=ns(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:ur,n(i,r)&&e.ref===t.ref)return gt(e,t,s)}return t.flags|=1,e=At(l,r),e.ref=t.ref,e.return=t,t.child=e}function Cu(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(ur(l,r)&&e.ref===t.ref)if(Ne=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(Ne=!0);else return t.lanes=e.lanes,gt(e,t,s)}return qo(e,t,n,r,s)}function Nu(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(yn,Pe),Pe|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,G(yn,Pe),Pe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,G(yn,Pe),Pe|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,G(yn,Pe),Pe|=r;return we(e,t,s,n),t.child}function Eu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qo(e,t,n,r,s){var l=_e(n)?Gt:xe.current;return l=Nn(t,l),jn(t,s),n=Ql(e,t,n,r,l,s),r=Jl(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gt(e,t,s)):(q&&r&&Al(t),t.flags|=1,we(e,t,n,s),t.child)}function ga(e,t,n,r,s){if(_e(n)){var l=!0;ps(t)}else l=!1;if(jn(t,s),t.stateNode===null)qr(e,t),ku(t,n,r),Xo(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ue(u):(u=_e(n)?Gt:xe.current,u=Nn(t,u));var h=n.getDerivedStateFromProps,w=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";w||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==u)&&ua(t,i,r,u),jt=!1;var v=t.memoizedState;i.state=v,vs(t,r,i,s),c=t.memoizedState,a!==r||v!==c||Ee.current||jt?(typeof h=="function"&&(Yo(t,n,h,r),c=t.memoizedState),(a=jt||ca(t,n,a,r,v,c,u))?(w||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,eu(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ve(t.type,a),i.props=u,w=t.pendingProps,v=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ue(c):(c=_e(n)?Gt:xe.current,c=Nn(t,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==w||v!==c)&&ua(t,i,r,c),jt=!1,v=t.memoizedState,i.state=v,vs(t,r,i,s);var g=t.memoizedState;a!==w||v!==g||Ee.current||jt?(typeof y=="function"&&(Yo(t,n,y,r),g=t.memoizedState),(u=jt||ca(t,n,u,r,v,g,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return el(e,t,n,r,l,s)}function el(e,t,n,r,s,l){Eu(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&ta(t,n,!1),gt(e,t,l);r=t.stateNode,mp.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=_n(t,e.child,null,l),t.child=_n(t,null,a,l)):we(e,t,a,l),t.memoizedState=r.state,s&&ta(t,n,!0),t.child}function _u(e){var t=e.stateNode;t.pendingContext?ea(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ea(e,t.context,!1),Bl(e,t.containerInfo)}function ya(e,t,n,r,s){return En(),Il(s),t.flags|=256,we(e,t,n,r),t.child}var tl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tu(e,t,n){var r=t.pendingProps,s=ee.current,l=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),G(ee,s&1),e===null)return Ko(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,l?(r=t.mode,l=t.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Fs(i,r,0,null),e=Kt(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=nl(n),t.memoizedState=tl,e):Yl(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return gp(e,t,i,r,a,s,n);if(l){l=r.fallback,i=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=At(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=At(a,l):(l=Kt(l,i,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,i=e.child.memoizedState,i=i===null?nl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=tl,r}return l=e.child,e=l.sibling,r=At(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yl(e,t){return t=Fs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $r(e,t,n,r){return r!==null&&Il(r),_n(t,e.child,null,n),e=Yl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gp(e,t,n,r,s,l,i){if(n)return t.flags&256?(t.flags&=-257,r=fo(Error(_(422))),$r(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Fs({mode:"visible",children:r.children},s,0,null),l=Kt(l,s,i,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&_n(t,e.child,null,i),t.child.memoizedState=nl(i),t.memoizedState=tl,l);if(!(t.mode&1))return $r(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(_(419)),r=fo(l,r,void 0),$r(e,t,i,r)}if(a=(i&e.childLanes)!==0,Ne||a){if(r=fe,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,mt(e,s),Ke(r,e,s,-1))}return ni(),r=fo(Error(_(421))),$r(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Lp.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,be=Pt(s.nextSibling),Oe=t,q=!0,Qe=null,e!==null&&(Ie[Me++]=ut,Ie[Me++]=dt,Ie[Me++]=Yt,ut=e.id,dt=e.overflow,Yt=t),t=Yl(t,r.children),t.flags|=4096,t)}function va(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Go(e.return,t,n)}function po(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Lu(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(we(e,t,r.children,n),r=ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&va(e,n,t);else if(e.tag===19)va(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(G(ee,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&xs(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),po(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&xs(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}po(t,!0,n,null,l);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=At(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=At(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yp(e,t,n){switch(t.tag){case 3:_u(t),En();break;case 5:tu(t);break;case 1:_e(t.type)&&ps(t);break;case 4:Bl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;G(gs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(G(ee,ee.current&1),t.flags|=128,null):n&t.child.childLanes?Tu(e,t,n):(G(ee,ee.current&1),e=gt(e,t,n),e!==null?e.sibling:null);G(ee,ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Lu(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),G(ee,ee.current),r)break;return null;case 22:case 23:return t.lanes=0,Nu(e,t,n)}return gt(e,t,n)}var Pu,rl,bu,Ou;Pu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rl=function(){};bu=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qt(tt.current);var l=null;switch(n){case"input":s=No(e,s),r=No(e,r),l=[];break;case"select":s=ne({},s,{value:void 0}),r=ne({},r,{value:void 0}),l=[];break;case"textarea":s=To(e,s),r=To(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ds)}Po(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rr.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rr.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Y("scroll",e),l||a===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bn(e,t){if(!q)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vp(e,t,n){var r=t.pendingProps;switch(zl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(t),null;case 1:return _e(t.type)&&fs(),ye(t),null;case 3:return r=t.stateNode,Tn(),X(Ee),X(xe),Vl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qe!==null&&(dl(Qe),Qe=null))),rl(e,t),ye(t),null;case 5:Hl(t);var s=Qt(mr.current);if(n=t.type,e!==null&&t.stateNode!=null)bu(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_(166));return ye(t),null}if(e=Qt(tt.current),Fr(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[qe]=t,r[pr]=l,e=(t.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(s=0;s<Jn.length;s++)Y(Jn[s],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":_i(r,l),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Y("invalid",r);break;case"textarea":Li(r,l),Y("invalid",r)}Po(n,l),s=null;for(var i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Mr(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Mr(r.textContent,a,e),s=["children",""+a]):rr.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Y("scroll",r)}switch(n){case"input":Lr(r),Ti(r,l,!0);break;case"textarea":Lr(r),Pi(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ds)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[qe]=t,e[pr]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(i=bo(n,r),n){case"dialog":Y("cancel",e),Y("close",e),s=r;break;case"iframe":case"object":case"embed":Y("load",e),s=r;break;case"video":case"audio":for(s=0;s<Jn.length;s++)Y(Jn[s],e);s=r;break;case"source":Y("error",e),s=r;break;case"img":case"image":case"link":Y("error",e),Y("load",e),s=r;break;case"details":Y("toggle",e),s=r;break;case"input":_i(e,r),s=No(e,r),Y("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ne({},r,{value:void 0}),Y("invalid",e);break;case"textarea":Li(e,r),s=To(e,r),Y("invalid",e);break;default:s=r}Po(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="style"?cc(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ic(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&sr(e,c):typeof c=="number"&&sr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(rr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Y("scroll",e):c!=null&&wl(e,l,c,i))}switch(n){case"input":Lr(e),Ti(e,r,!1);break;case"textarea":Lr(e),Pi(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zt(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?vn(e,!!r.multiple,l,!1):r.defaultValue!=null&&vn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ds)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ye(t),null;case 6:if(e&&t.stateNode!=null)Ou(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_(166));if(n=Qt(mr.current),Qt(tt.current),Fr(t)){if(r=t.stateNode,n=t.memoizedProps,r[qe]=t,(l=r.nodeValue!==n)&&(e=Oe,e!==null))switch(e.tag){case 3:Mr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mr(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qe]=t,t.stateNode=r}return ye(t),null;case 13:if(X(ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(q&&be!==null&&t.mode&1&&!(t.flags&128))Yc(),En(),t.flags|=98560,l=!1;else if(l=Fr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(_(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(_(317));l[qe]=t}else En(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ye(t),l=!1}else Qe!==null&&(dl(Qe),Qe=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?ue===0&&(ue=3):ni())),t.updateQueue!==null&&(t.flags|=4),ye(t),null);case 4:return Tn(),rl(e,t),e===null&&dr(t.stateNode.containerInfo),ye(t),null;case 10:return Rl(t.type._context),ye(t),null;case 17:return _e(t.type)&&fs(),ye(t),null;case 19:if(X(ee),l=t.memoizedState,l===null)return ye(t),null;if(r=(t.flags&128)!==0,i=l.rendering,i===null)if(r)Bn(l,!1);else{if(ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=xs(e),i!==null){for(t.flags|=128,Bn(l,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return G(ee,ee.current&1|2),t.child}e=e.sibling}l.tail!==null&&oe()>Pn&&(t.flags|=128,r=!0,Bn(l,!1),t.lanes=4194304)}else{if(!r)if(e=xs(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!q)return ye(t),null}else 2*oe()-l.renderingStartTime>Pn&&n!==1073741824&&(t.flags|=128,r=!0,Bn(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=oe(),t.sibling=null,n=ee.current,G(ee,r?n&1|2:n&1),t):(ye(t),null);case 22:case 23:return ti(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pe&1073741824&&(ye(t),t.subtreeFlags&6&&(t.flags|=8192)):ye(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function xp(e,t){switch(zl(t),t.tag){case 1:return _e(t.type)&&fs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tn(),X(Ee),X(xe),Vl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hl(t),null;case 13:if(X(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));En()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(ee),null;case 4:return Tn(),null;case 10:return Rl(t.type._context),null;case 22:case 23:return ti(),null;case 24:return null;default:return null}}var Ur=!1,ve=!1,wp=typeof WeakSet=="function"?WeakSet:Set,D=null;function gn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){se(e,t,r)}}var xa=!1;function kp(e,t){if(Uo=as,e=Mc(),Dl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,u=0,h=0,w=e,v=null;t:for(;;){for(var y;w!==n||s!==0&&w.nodeType!==3||(a=i+s),w!==l||r!==0&&w.nodeType!==3||(c=i+r),w.nodeType===3&&(i+=w.nodeValue.length),(y=w.firstChild)!==null;)v=w,w=y;for(;;){if(w===e)break t;if(v===n&&++u===s&&(a=i),v===l&&++h===r&&(c=i),(y=w.nextSibling)!==null)break;w=v,v=w.parentNode}w=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bo={focusedElem:e,selectionRange:n},as=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var j=g.memoizedProps,P=g.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ve(t.type,j),P);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(k){se(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return g=xa,xa=!1,g}function er(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&sl(t,n,l)}s=s.next}while(s!==r)}}function Is(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Du(e){var t=e.alternate;t!==null&&(e.alternate=null,Du(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qe],delete t[pr],delete t[Wo],delete t[rp],delete t[sp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Au(e){return e.tag===5||e.tag===3||e.tag===4}function wa(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ds));else if(r!==4&&(e=e.child,e!==null))for(ll(e,t,n),e=e.sibling;e!==null;)ll(e,t,n),e=e.sibling}function il(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(il(e,t,n),e=e.sibling;e!==null;)il(e,t,n),e=e.sibling}var pe=null,We=!1;function wt(e,t,n){for(n=n.child;n!==null;)zu(e,t,n),n=n.sibling}function zu(e,t,n){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Ts,n)}catch{}switch(n.tag){case 5:ve||gn(n,t);case 6:var r=pe,s=We;pe=null,wt(e,t,n),pe=r,We=s,pe!==null&&(We?(e=pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(We?(e=pe,n=n.stateNode,e.nodeType===8?oo(e.parentNode,n):e.nodeType===1&&oo(e,n),ar(e)):oo(pe,n.stateNode));break;case 4:r=pe,s=We,pe=n.stateNode.containerInfo,We=!0,wt(e,t,n),pe=r,We=s;break;case 0:case 11:case 14:case 15:if(!ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&sl(n,t,i),s=s.next}while(s!==r)}wt(e,t,n);break;case 1:if(!ve&&(gn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){se(n,t,a)}wt(e,t,n);break;case 21:wt(e,t,n);break;case 22:n.mode&1?(ve=(r=ve)||n.memoizedState!==null,wt(e,t,n),ve=r):wt(e,t,n);break;default:wt(e,t,n)}}function ka(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wp),t.forEach(function(r){var s=Pp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function He(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:pe=a.stateNode,We=!1;break e;case 3:pe=a.stateNode.containerInfo,We=!0;break e;case 4:pe=a.stateNode.containerInfo,We=!0;break e}a=a.return}if(pe===null)throw Error(_(160));zu(l,i,s),pe=null,We=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Iu(t,e),t=t.sibling}function Iu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(He(t,e),Xe(e),r&4){try{er(3,e,e.return),Is(3,e)}catch(j){se(e,e.return,j)}try{er(5,e,e.return)}catch(j){se(e,e.return,j)}}break;case 1:He(t,e),Xe(e),r&512&&n!==null&&gn(n,n.return);break;case 5:if(He(t,e),Xe(e),r&512&&n!==null&&gn(n,n.return),e.flags&32){var s=e.stateNode;try{sr(s,"")}catch(j){se(e,e.return,j)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&sc(s,l),bo(a,i);var u=bo(a,l);for(i=0;i<c.length;i+=2){var h=c[i],w=c[i+1];h==="style"?cc(s,w):h==="dangerouslySetInnerHTML"?ic(s,w):h==="children"?sr(s,w):wl(s,h,w,u)}switch(a){case"input":Eo(s,l);break;case"textarea":oc(s,l);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?vn(s,!!l.multiple,y,!1):v!==!!l.multiple&&(l.defaultValue!=null?vn(s,!!l.multiple,l.defaultValue,!0):vn(s,!!l.multiple,l.multiple?[]:"",!1))}s[pr]=l}catch(j){se(e,e.return,j)}}break;case 6:if(He(t,e),Xe(e),r&4){if(e.stateNode===null)throw Error(_(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(j){se(e,e.return,j)}}break;case 3:if(He(t,e),Xe(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ar(t.containerInfo)}catch(j){se(e,e.return,j)}break;case 4:He(t,e),Xe(e);break;case 13:He(t,e),Xe(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(ql=oe())),r&4&&ka(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ve=(u=ve)||h,He(t,e),ve=u):He(t,e),Xe(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(D=e,h=e.child;h!==null;){for(w=D=h;D!==null;){switch(v=D,y=v.child,v.tag){case 0:case 11:case 14:case 15:er(4,v,v.return);break;case 1:gn(v,v.return);var g=v.stateNode;if(typeof g.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(j){se(r,n,j)}}break;case 5:gn(v,v.return);break;case 22:if(v.memoizedState!==null){Sa(w);continue}}y!==null?(y.return=v,D=y):Sa(w)}h=h.sibling}e:for(h=null,w=e;;){if(w.tag===5){if(h===null){h=w;try{s=w.stateNode,u?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=w.stateNode,c=w.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=ac("display",i))}catch(j){se(e,e.return,j)}}}else if(w.tag===6){if(h===null)try{w.stateNode.nodeValue=u?"":w.memoizedProps}catch(j){se(e,e.return,j)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;h===w&&(h=null),w=w.return}h===w&&(h=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:He(t,e),Xe(e),r&4&&ka(e);break;case 21:break;default:He(t,e),Xe(e)}}function Xe(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Au(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sr(s,""),r.flags&=-33);var l=wa(e);il(e,l,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=wa(e);ll(e,a,i);break;default:throw Error(_(161))}}catch(c){se(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jp(e,t,n){D=e,Mu(e)}function Mu(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var s=D,l=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Ur;if(!i){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ve;a=Ur;var u=ve;if(Ur=i,(ve=c)&&!u)for(D=s;D!==null;)i=D,c=i.child,i.tag===22&&i.memoizedState!==null?Ca(s):c!==null?(c.return=i,D=c):Ca(s);for(;l!==null;)D=l,Mu(l),l=l.sibling;D=s,Ur=a,ve=u}ja(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,D=l):ja(e)}}function ja(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ve||Is(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ve)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ve(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&la(t,l,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}la(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var w=h.dehydrated;w!==null&&ar(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}ve||t.flags&512&&ol(t)}catch(v){se(t,t.return,v)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function Sa(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function Ca(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Is(4,t)}catch(c){se(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){se(t,s,c)}}var l=t.return;try{ol(t)}catch(c){se(t,l,c)}break;case 5:var i=t.return;try{ol(t)}catch(c){se(t,i,c)}}}catch(c){se(t,t.return,c)}if(t===e){D=null;break}var a=t.sibling;if(a!==null){a.return=t.return,D=a;break}D=t.return}}var Sp=Math.ceil,js=yt.ReactCurrentDispatcher,Xl=yt.ReactCurrentOwner,$e=yt.ReactCurrentBatchConfig,B=0,fe=null,ae=null,he=0,Pe=0,yn=Ft(0),ue=0,xr=null,Zt=0,Ms=0,Zl=0,tr=null,Ce=null,ql=0,Pn=1/0,at=null,Ss=!1,al=null,Ot=null,Br=!1,Et=null,Cs=0,nr=0,cl=null,es=-1,ts=0;function ke(){return B&6?oe():es!==-1?es:es=oe()}function Dt(e){return e.mode&1?B&2&&he!==0?he&-he:lp.transition!==null?(ts===0&&(ts=kc()),ts):(e=J,e!==0||(e=window.event,e=e===void 0?16:Tc(e.type)),e):1}function Ke(e,t,n,r){if(50<nr)throw nr=0,cl=null,Error(_(185));jr(e,n,r),(!(B&2)||e!==fe)&&(e===fe&&(!(B&2)&&(Ms|=n),ue===4&&Ct(e,he)),Te(e,r),n===1&&B===0&&!(t.mode&1)&&(Pn=oe()+500,Ds&&Rt()))}function Te(e,t){var n=e.callbackNode;of(e,t);var r=is(e,e===fe?he:0);if(r===0)n!==null&&Di(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Di(n),t===1)e.tag===0?op(Na.bind(null,e)):Jc(Na.bind(null,e)),tp(function(){!(B&6)&&Rt()}),n=null;else{switch(jc(r)){case 1:n=Nl;break;case 4:n=xc;break;case 16:n=ls;break;case 536870912:n=wc;break;default:n=ls}n=Wu(n,Fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fu(e,t){if(es=-1,ts=0,B&6)throw Error(_(327));var n=e.callbackNode;if(Sn()&&e.callbackNode!==n)return null;var r=is(e,e===fe?he:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ns(e,r);else{t=r;var s=B;B|=2;var l=$u();(fe!==e||he!==t)&&(at=null,Pn=oe()+500,Jt(e,t));do try{Ep();break}catch(a){Ru(e,a)}while(1);Fl(),js.current=l,B=s,ae!==null?t=0:(fe=null,he=0,t=ue)}if(t!==0){if(t===2&&(s=Io(e),s!==0&&(r=s,t=ul(e,s))),t===1)throw n=xr,Jt(e,0),Ct(e,r),Te(e,oe()),n;if(t===6)Ct(e,r);else{if(s=e.current.alternate,!(r&30)&&!Cp(s)&&(t=Ns(e,r),t===2&&(l=Io(e),l!==0&&(r=l,t=ul(e,l))),t===1))throw n=xr,Jt(e,0),Ct(e,r),Te(e,oe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(_(345));case 2:Ht(e,Ce,at);break;case 3:if(Ct(e,r),(r&130023424)===r&&(t=ql+500-oe(),10<t)){if(is(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ke(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Vo(Ht.bind(null,e,Ce,at),t);break}Ht(e,Ce,at);break;case 4:if(Ct(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Je(r);l=1<<i,i=t[i],i>s&&(s=i),r&=~l}if(r=s,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sp(r/1960))-r,10<r){e.timeoutHandle=Vo(Ht.bind(null,e,Ce,at),r);break}Ht(e,Ce,at);break;case 5:Ht(e,Ce,at);break;default:throw Error(_(329))}}}return Te(e,oe()),e.callbackNode===n?Fu.bind(null,e):null}function ul(e,t){var n=tr;return e.current.memoizedState.isDehydrated&&(Jt(e,t).flags|=256),e=Ns(e,t),e!==2&&(t=Ce,Ce=n,t!==null&&dl(t)),e}function dl(e){Ce===null?Ce=e:Ce.push.apply(Ce,e)}function Cp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Ge(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ct(e,t){for(t&=~Zl,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Je(t),r=1<<n;e[n]=-1,t&=~r}}function Na(e){if(B&6)throw Error(_(327));Sn();var t=is(e,0);if(!(t&1))return Te(e,oe()),null;var n=Ns(e,t);if(e.tag!==0&&n===2){var r=Io(e);r!==0&&(t=r,n=ul(e,r))}if(n===1)throw n=xr,Jt(e,0),Ct(e,t),Te(e,oe()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ht(e,Ce,at),Te(e,oe()),null}function ei(e,t){var n=B;B|=1;try{return e(t)}finally{B=n,B===0&&(Pn=oe()+500,Ds&&Rt())}}function qt(e){Et!==null&&Et.tag===0&&!(B&6)&&Sn();var t=B;B|=1;var n=$e.transition,r=J;try{if($e.transition=null,J=1,e)return e()}finally{J=r,$e.transition=n,B=t,!(B&6)&&Rt()}}function ti(){Pe=yn.current,X(yn)}function Jt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ep(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(zl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fs();break;case 3:Tn(),X(Ee),X(xe),Vl();break;case 5:Hl(r);break;case 4:Tn();break;case 13:X(ee);break;case 19:X(ee);break;case 10:Rl(r.type._context);break;case 22:case 23:ti()}n=n.return}if(fe=e,ae=e=At(e.current,null),he=Pe=t,ue=0,xr=null,Zl=Ms=Zt=0,Ce=tr=null,Wt!==null){for(t=0;t<Wt.length;t++)if(n=Wt[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=s,r.next=i}n.pending=r}Wt=null}return e}function Ru(e,t){do{var n=ae;try{if(Fl(),Xr.current=ks,ws){for(var r=te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ws=!1}if(Xt=0,de=ce=te=null,qn=!1,gr=0,Xl.current=null,n===null||n.return===null){ue=1,xr=t,ae=null;break}e:{var l=e,i=n.return,a=n,c=t;if(t=he,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,w=h.tag;if(!(h.mode&1)&&(w===0||w===11||w===15)){var v=h.alternate;v?(h.updateQueue=v.updateQueue,h.memoizedState=v.memoizedState,h.lanes=v.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=fa(i);if(y!==null){y.flags&=-257,pa(y,i,a,l,t),y.mode&1&&da(l,u,t),t=y,c=u;var g=t.updateQueue;if(g===null){var j=new Set;j.add(c),t.updateQueue=j}else g.add(c);break e}else{if(!(t&1)){da(l,u,t),ni();break e}c=Error(_(426))}}else if(q&&a.mode&1){var P=fa(i);if(P!==null){!(P.flags&65536)&&(P.flags|=256),pa(P,i,a,l,t),Il(Ln(c,a));break e}}l=c=Ln(c,a),ue!==4&&(ue=2),tr===null?tr=[l]:tr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=ju(l,c,t);oa(l,f);break e;case 1:a=c;var d=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof d.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ot===null||!Ot.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var k=Su(l,a,t);oa(l,k);break e}}l=l.return}while(l!==null)}Bu(n)}catch(x){t=x,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(1)}function $u(){var e=js.current;return js.current=ks,e===null?ks:e}function ni(){(ue===0||ue===3||ue===2)&&(ue=4),fe===null||!(Zt&268435455)&&!(Ms&268435455)||Ct(fe,he)}function Ns(e,t){var n=B;B|=2;var r=$u();(fe!==e||he!==t)&&(at=null,Jt(e,t));do try{Np();break}catch(s){Ru(e,s)}while(1);if(Fl(),B=n,js.current=r,ae!==null)throw Error(_(261));return fe=null,he=0,ue}function Np(){for(;ae!==null;)Uu(ae)}function Ep(){for(;ae!==null&&!Yd();)Uu(ae)}function Uu(e){var t=Vu(e.alternate,e,Pe);e.memoizedProps=e.pendingProps,t===null?Bu(e):ae=t,Xl.current=null}function Bu(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xp(n,t),n!==null){n.flags&=32767,ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ue=6,ae=null;return}}else if(n=vp(n,t,Pe),n!==null){ae=n;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);ue===0&&(ue=5)}function Ht(e,t,n){var r=J,s=$e.transition;try{$e.transition=null,J=1,_p(e,t,n,r)}finally{$e.transition=s,J=r}return null}function _p(e,t,n,r){do Sn();while(Et!==null);if(B&6)throw Error(_(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(lf(e,l),e===fe&&(ae=fe=null,he=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Br||(Br=!0,Wu(ls,function(){return Sn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=$e.transition,$e.transition=null;var i=J;J=1;var a=B;B|=4,Xl.current=null,kp(e,n),Iu(n,e),Jf(Bo),as=!!Uo,Bo=Uo=null,e.current=n,jp(n),Xd(),B=a,J=i,$e.transition=l}else e.current=n;if(Br&&(Br=!1,Et=e,Cs=s),l=e.pendingLanes,l===0&&(Ot=null),ef(n.stateNode),Te(e,oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ss)throw Ss=!1,e=al,al=null,e;return Cs&1&&e.tag!==0&&Sn(),l=e.pendingLanes,l&1?e===cl?nr++:(nr=0,cl=e):nr=0,Rt(),null}function Sn(){if(Et!==null){var e=jc(Cs),t=$e.transition,n=J;try{if($e.transition=null,J=16>e?16:e,Et===null)var r=!1;else{if(e=Et,Et=null,Cs=0,B&6)throw Error(_(331));var s=B;for(B|=4,D=e.current;D!==null;){var l=D,i=l.child;if(D.flags&16){var a=l.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:er(8,h,l)}var w=h.child;if(w!==null)w.return=h,D=w;else for(;D!==null;){h=D;var v=h.sibling,y=h.return;if(Du(h),h===u){D=null;break}if(v!==null){v.return=y,D=v;break}D=y}}}var g=l.alternate;if(g!==null){var j=g.child;if(j!==null){g.child=null;do{var P=j.sibling;j.sibling=null,j=P}while(j!==null)}}D=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,D=i;else e:for(;D!==null;){if(l=D,l.flags&2048)switch(l.tag){case 0:case 11:case 15:er(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,D=f;break e}D=l.return}}var d=e.current;for(D=d;D!==null;){i=D;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,D=m;else e:for(i=d;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Is(9,a)}}catch(x){se(a,a.return,x)}if(a===i){D=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,D=k;break e}D=a.return}}if(B=s,Rt(),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Ts,e)}catch{}r=!0}return r}finally{J=n,$e.transition=t}}return!1}function Ea(e,t,n){t=Ln(n,t),t=ju(e,t,1),e=bt(e,t,1),t=ke(),e!==null&&(jr(e,1,t),Te(e,t))}function se(e,t,n){if(e.tag===3)Ea(e,e,n);else for(;t!==null;){if(t.tag===3){Ea(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ot===null||!Ot.has(r))){e=Ln(n,e),e=Su(t,e,1),t=bt(t,e,1),e=ke(),t!==null&&(jr(t,1,e),Te(t,e));break}}t=t.return}}function Tp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ke(),e.pingedLanes|=e.suspendedLanes&n,fe===e&&(he&n)===n&&(ue===4||ue===3&&(he&130023424)===he&&500>oe()-ql?Jt(e,0):Zl|=n),Te(e,t)}function Hu(e,t){t===0&&(e.mode&1?(t=Or,Or<<=1,!(Or&130023424)&&(Or=4194304)):t=1);var n=ke();e=mt(e,t),e!==null&&(jr(e,t,n),Te(e,n))}function Lp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hu(e,n)}function Pp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(t),Hu(e,n)}var Vu;Vu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ee.current)Ne=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ne=!1,yp(e,t,n);Ne=!!(e.flags&131072)}else Ne=!1,q&&t.flags&1048576&&Kc(t,ms,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qr(e,t),e=t.pendingProps;var s=Nn(t,xe.current);jn(t,n),s=Ql(null,t,r,e,s,n);var l=Jl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_e(r)?(l=!0,ps(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ul(t),s.updater=zs,t.stateNode=s,s._reactInternals=t,Xo(t,r,e,n),t=el(null,t,r,!0,l,n)):(t.tag=0,q&&l&&Al(t),we(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qr(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Op(r),e=Ve(r,e),s){case 0:t=qo(null,t,r,e,n);break e;case 1:t=ga(null,t,r,e,n);break e;case 11:t=ha(null,t,r,e,n);break e;case 14:t=ma(null,t,r,Ve(r.type,e),n);break e}throw Error(_(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ve(r,s),qo(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ve(r,s),ga(e,t,r,s,n);case 3:e:{if(_u(t),e===null)throw Error(_(387));r=t.pendingProps,l=t.memoizedState,s=l.element,eu(e,t),vs(t,r,null,n);var i=t.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Ln(Error(_(423)),t),t=ya(e,t,r,n,s);break e}else if(r!==s){s=Ln(Error(_(424)),t),t=ya(e,t,r,n,s);break e}else for(be=Pt(t.stateNode.containerInfo.firstChild),Oe=t,q=!0,Qe=null,n=Zc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(En(),r===s){t=gt(e,t,n);break e}we(e,t,r,n)}t=t.child}return t;case 5:return tu(t),e===null&&Ko(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,i=s.children,Ho(r,s)?i=null:l!==null&&Ho(r,l)&&(t.flags|=32),Eu(e,t),we(e,t,i,n),t.child;case 6:return e===null&&Ko(t),null;case 13:return Tu(e,t,n);case 4:return Bl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_n(t,null,r,n):we(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ve(r,s),ha(e,t,r,s,n);case 7:return we(e,t,t.pendingProps,n),t.child;case 8:return we(e,t,t.pendingProps.children,n),t.child;case 12:return we(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,i=s.value,G(gs,r._currentValue),r._currentValue=i,l!==null)if(Ge(l.value,i)){if(l.children===s.children&&!Ee.current){t=gt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){i=l.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=ft(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Go(l.return,n,t),a.lanes|=n;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(_(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Go(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}we(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,jn(t,n),s=Ue(s),r=r(s),t.flags|=1,we(e,t,r,n),t.child;case 14:return r=t.type,s=Ve(r,t.pendingProps),s=Ve(r.type,s),ma(e,t,r,s,n);case 15:return Cu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ve(r,s),qr(e,t),t.tag=1,_e(r)?(e=!0,ps(t)):e=!1,jn(t,n),ku(t,r,s),Xo(t,r,s,n),el(null,t,r,!0,e,n);case 19:return Lu(e,t,n);case 22:return Nu(e,t,n)}throw Error(_(156,t.tag))};function Wu(e,t){return vc(e,t)}function bp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Re(e,t,n,r){return new bp(e,t,n,r)}function ri(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Op(e){if(typeof e=="function")return ri(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jl)return 11;if(e===Sl)return 14}return 2}function At(e,t){var n=e.alternate;return n===null?(n=Re(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ns(e,t,n,r,s,l){var i=2;if(r=e,typeof e=="function")ri(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ln:return Kt(n.children,s,l,t);case kl:i=8,s|=8;break;case ko:return e=Re(12,n,t,s|2),e.elementType=ko,e.lanes=l,e;case jo:return e=Re(13,n,t,s),e.elementType=jo,e.lanes=l,e;case So:return e=Re(19,n,t,s),e.elementType=So,e.lanes=l,e;case tc:return Fs(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qa:i=10;break e;case ec:i=9;break e;case jl:i=11;break e;case Sl:i=14;break e;case kt:i=16,r=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=Re(i,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function Kt(e,t,n,r){return e=Re(7,e,r,t),e.lanes=n,e}function Fs(e,t,n,r){return e=Re(22,e,r,t),e.elementType=tc,e.lanes=n,e.stateNode={isHidden:!1},e}function ho(e,t,n){return e=Re(6,e,null,t),e.lanes=n,e}function mo(e,t,n){return t=Re(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ks(0),this.expirationTimes=Ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function si(e,t,n,r,s,l,i,a,c){return e=new Dp(e,t,n,a,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Re(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ul(l),e}function Ap(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:on,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Qu(e){if(!e)return It;e=e._reactInternals;e:{if(tn(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if(_e(n))return Qc(e,n,t)}return t}function Ju(e,t,n,r,s,l,i,a,c){return e=si(n,r,!0,e,s,l,i,a,c),e.context=Qu(null),n=e.current,r=ke(),s=Dt(n),l=ft(r,s),l.callback=t??null,bt(n,l,s),e.current.lanes=s,jr(e,s,r),Te(e,r),e}function Rs(e,t,n,r){var s=t.current,l=ke(),i=Dt(s);return n=Qu(n),t.context===null?t.context=n:t.pendingContext=n,t=ft(l,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bt(s,t,i),e!==null&&(Ke(e,s,i,l),Yr(e,s,i)),i}function Es(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _a(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oi(e,t){_a(e,t),(e=e.alternate)&&_a(e,t)}function zp(){return null}var Ku=typeof reportError=="function"?reportError:function(e){console.error(e)};function li(e){this._internalRoot=e}$s.prototype.render=li.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));Rs(e,t,null,null)};$s.prototype.unmount=li.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qt(function(){Rs(null,e,null,null)}),t[ht]=null}};function $s(e){this._internalRoot=e}$s.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<St.length&&t!==0&&t<St[n].priority;n++);St.splice(n,0,e),n===0&&_c(e)}};function ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Us(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ta(){}function Ip(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var u=Es(i);l.call(u)}}var i=Ju(t,r,e,0,null,!1,!1,"",Ta);return e._reactRootContainer=i,e[ht]=i.current,dr(e.nodeType===8?e.parentNode:e),qt(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Es(c);a.call(u)}}var c=si(e,0,!1,null,null,!1,!1,"",Ta);return e._reactRootContainer=c,e[ht]=c.current,dr(e.nodeType===8?e.parentNode:e),qt(function(){Rs(t,c,n,r)}),c}function Bs(e,t,n,r,s){var l=n._reactRootContainer;if(l){var i=l;if(typeof s=="function"){var a=s;s=function(){var c=Es(i);a.call(c)}}Rs(t,i,e,s)}else i=Ip(n,t,e,s,r);return Es(i)}Sc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qn(t.pendingLanes);n!==0&&(El(t,n|1),Te(t,oe()),!(B&6)&&(Pn=oe()+500,Rt()))}break;case 13:qt(function(){var r=mt(e,1);if(r!==null){var s=ke();Ke(r,e,1,s)}}),oi(e,1)}};_l=function(e){if(e.tag===13){var t=mt(e,134217728);if(t!==null){var n=ke();Ke(t,e,134217728,n)}oi(e,134217728)}};Cc=function(e){if(e.tag===13){var t=Dt(e),n=mt(e,t);if(n!==null){var r=ke();Ke(n,e,t,r)}oi(e,t)}};Nc=function(){return J};Ec=function(e,t){var n=J;try{return J=e,t()}finally{J=n}};Do=function(e,t,n){switch(t){case"input":if(Eo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Os(r);if(!s)throw Error(_(90));rc(r),Eo(r,s)}}}break;case"textarea":oc(e,n);break;case"select":t=n.value,t!=null&&vn(e,!!n.multiple,t,!1)}};fc=ei;pc=qt;var Mp={usingClientEntryPoint:!1,Events:[Cr,dn,Os,uc,dc,ei]},Hn={findFiberByHostInstance:Vt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fp={bundleType:Hn.bundleType,version:Hn.version,rendererPackageName:Hn.rendererPackageName,rendererConfig:Hn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gc(e),e===null?null:e.stateNode},findFiberByHostInstance:Hn.findFiberByHostInstance||zp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hr.isDisabled&&Hr.supportsFiber)try{Ts=Hr.inject(Fp),et=Hr}catch{}}Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mp;Ae.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ii(t))throw Error(_(200));return Ap(e,t,null,n)};Ae.createRoot=function(e,t){if(!ii(e))throw Error(_(299));var n=!1,r="",s=Ku;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=si(e,1,!1,null,null,n,!1,r,s),e[ht]=t.current,dr(e.nodeType===8?e.parentNode:e),new li(t)};Ae.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=gc(t),e=e===null?null:e.stateNode,e};Ae.flushSync=function(e){return qt(e)};Ae.hydrate=function(e,t,n){if(!Us(t))throw Error(_(200));return Bs(null,e,t,!0,n)};Ae.hydrateRoot=function(e,t,n){if(!ii(e))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",i=Ku;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Ju(t,null,e,1,n??null,s,!1,l,i),e[ht]=t.current,dr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new $s(t)};Ae.render=function(e,t,n){if(!Us(t))throw Error(_(200));return Bs(null,e,t,!1,n)};Ae.unmountComponentAtNode=function(e){if(!Us(e))throw Error(_(40));return e._reactRootContainer?(qt(function(){Bs(null,null,e,!1,function(){e._reactRootContainer=null,e[ht]=null})}),!0):!1};Ae.unstable_batchedUpdates=ei;Ae.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Us(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Bs(e,t,n,!1,r)};Ae.version="18.3.1-next-f1338f8080-20240426";function Gu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gu)}catch(e){console.error(e)}}Gu(),Ga.exports=Ae;var Rp=Ga.exports,La=Rp;xo.createRoot=La.createRoot,xo.hydrateRoot=La.hydrateRoot;const $p="modulepreload",Up=function(e){return"/"+e},Pa={},Bp=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=Up(l),l in Pa)return;Pa[l]=!0;const i=l.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const w=s[h];if(w.href===l&&(!i||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":$p,i||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),i)return new Promise((h,w)=>{u.addEventListener("load",h),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t()).catch(l=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l})},V={backgroundAnimations:[],extensions:[],enabledExtensions:{},pluginDisposers:{},registeredStyles:{}};function Er(){if(console.log("Plugin state updated"),Array.isArray(V._listeners))for(const e of V._listeners.slice())try{e()}catch(t){console.warn("pluginHost listener error",t)}}function Hp(){window.coolChat||(window.coolChat={})}function ba(e,t){const n=document.createElement("style");n.textContent=t,document.head.appendChild(n),V.registeredStyles[e]=V.registeredStyles[e]||[],V.registeredStyles[e].push(n)}function Oa(e,t){const n=(t||[]).map(r=>({...r,__pluginId:e}));V.backgroundAnimations=[...V.backgroundAnimations,...n],Er()}function Vp(){return V.backgroundAnimations.map(({__pluginId:e,...t})=>t)}function Wp(){return V.extensions.map(e=>({...e,enabled:!!V.enabledExtensions[e.id]}))}function fl(e){V.enabledExtensions=e,Er()}function Qp(e){V.extensions=Array.isArray(e)?e:[],Er()}async function Da(e){var t;Hp(),window.coolChat.registerStyles=n=>{console.warn("window.coolChat.registerStyles is deprecated; use the init API argument instead"),ba("__global__",n)},window.coolChat.registerBackgroundAnimations=n=>{console.warn("window.coolChat.registerBackgroundAnimations is deprecated; use the init API argument instead"),Oa("__global__",n)},window.coolChat.getExtensions=Wp,window.coolChat.setEnabledExtensions=fl;try{let n=[],r={};if(e&&typeof e=="object")n=Array.isArray(e.plugins)?e.plugins:[],r=e.enabled||{};else{const l=await fetch("/plugins");if(!l.ok){console.warn("Failed to fetch /plugins");return}const i=await l.json();n=Array.isArray(i.plugins)?i.plugins:[],r=i.enabled||{}}const s=new Set(Object.keys(r).filter(l=>r[l]));for(const l of Object.keys(V.pluginDisposers||{}))if(!s.has(l))try{await Jp(l)}catch(i){console.warn("Unload failed",l,i)}V.extensions=n,V.enabledExtensions={...V.enabledExtensions,...r||{}};for(const l of n){if(!V.enabledExtensions[l.id]){console.log(`Skipping disabled plugin: ${l.id}`);continue}try{const i=((t=l==null?void 0:l.client)==null?void 0:t.entry)||"plugin.js",a=`/plugins/static/${l.id}/${i}`;console.log("Loading plugin:",l.id,"from",a);const c=await Bp(()=>import(a),[]),u=(c==null?void 0:c.default)||(c==null?void 0:c.init);if(typeof u=="function"){const h=await u({registerStyles:w=>ba(l.id,w),registerBackgroundAnimations:w=>Oa(l.id,w)});typeof h=="function"&&(V.pluginDisposers[l.id]=h)}}catch(i){console.warn("Plugin load failed:",l==null?void 0:l.id,i)}}Er()}catch(n){console.warn("Plugin manifest load failed",n)}}async function Jp(e){try{const t=V.pluginDisposers&&V.pluginDisposers[e];if(typeof t=="function"){try{await t()}catch(r){console.warn("Plugin disposer threw",e,r)}delete V.pluginDisposers[e]}const n=V.registeredStyles[e]||[];for(const r of n)try{r.remove()}catch{}delete V.registeredStyles[e],V.backgroundAnimations=V.backgroundAnimations.filter(r=>r.__pluginId!==e),Er()}catch(t){console.warn("Failed to unload plugin",e,t)}}function Kp(e){V._listeners=V._listeners||[],V._listeners.push(e)}function Gp(e){V._listeners=V._listeners||[];const t=V._listeners.indexOf(e);t>=0&&V._listeners.splice(t,1)}const Aa=e=>{let t;const n=new Set,r=(u,h)=>{const w=typeof u=="function"?u(t):u;if(!Object.is(w,t)){const v=t;t=h??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(y=>y(t,v))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(r,s,a);return a},Yp=e=>e?Aa(e):Aa,Xp=e=>e;function Zp(e,t=Xp){const n=sn.useSyncExternalStore(e.subscribe,sn.useCallback(()=>t(e.getState()),[e,t]),sn.useCallback(()=>t(e.getInitialState()),[e,t]));return sn.useDebugValue(n),n}const za=e=>{const t=Yp(e),n=r=>Zp(t,r);return Object.assign(n,t),n},An=e=>e?za(e):za;async function Yu(e,t="default"){const n=await fetch("/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:t})});if(!n.ok){const s=await n.text();throw new Error(`Chat request failed: ${n.status} ${s}`)}return(await n.json()).reply}async function qp(){const e=await fetch("/characters");if(!e.ok)throw new Error(`List characters failed: ${e.status}`);return e.json()}async function Ia({name:e,description:t="",avatar_url:n=null}){const r=await fetch("/characters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,avatar_url:n})});if(!r.ok)throw new Error(`Create character failed: ${r.status}`);return r.json()}async function Xu(e){const t=await fetch(`/characters/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete character failed: ${t.status}`)}async function nt(){const e=await fetch("/config");if(!e.ok){const t=await e.text();throw new Error(`Get config failed: ${e.status} ${t}`)}return e.json()}async function Fe(e){const t=await fetch("/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();try{const r=JSON.parse(n),s=typeof(r==null?void 0:r.detail)=="string"?r.detail:JSON.stringify((r==null?void 0:r.detail)??r);throw new Error(`Update config failed: ${t.status} ${s}`)}catch{throw new Error(`Update config failed: ${t.status} ${n}`)}}return t.json()}async function eh(e){const t=e?`?provider=${encodeURIComponent(e)}`:"",n=await fetch(`/models${t}`);if(!n.ok){const r=await n.text();try{const s=JSON.parse(r),l=typeof(s==null?void 0:s.detail)=="string"?s.detail:JSON.stringify((s==null?void 0:s.detail)??s);throw new Error(`Get models failed: ${n.status} ${l}`)}catch{throw new Error(`Get models failed: ${n.status} ${r}`)}}return n.json()}async function ai(){const e=await fetch("/lorebooks/");if(!e.ok)throw new Error(`List lorebooks failed: ${e.status}`);return e.json()}async function th({name:e,description:t="",entries:n=[]}){const r=await fetch("/lorebooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,entries:n})});if(!r.ok)throw new Error(`Create lorebook failed: ${r.status}`);return r.json()}async function nh(e){const t=new FormData;t.append("file",e);const n=await fetch("/lorebooks/import",{method:"POST",body:t});if(!n.ok)throw new Error(`Import lorebook failed: ${n.status}`);return n.json()}async function rh(e,t){const n=await fetch(`/characters/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update character failed: ${n.status}`);return n.json()}async function sh(e){const t=await fetch(`/image/models?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Get image models failed: ${t.status}`);return t.json()}async function oh(e="default"){const t=await fetch("/images/generate_from_chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(!t.ok)throw new Error(`Generate image failed: ${t.status}`);return t.json()}async function lh(e,t="default"){const n=await fetch("/images/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,session_id:t})});if(!n.ok)throw new Error(`Generate image failed: ${n.status}`);return n.json()}async function Zu(e,t){const n=await fetch(`/lorebooks/entries/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update lore failed: ${n.status}`);return n.json()}async function qu(e,t){const n=await fetch(`/lorebooks/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update lorebook failed: ${n.status}`);return n.json()}async function pl(e){const t=await fetch(`/lorebooks/${e}`);if(!t.ok)throw new Error(`Get lorebook failed: ${t.status}`);return t.json()}async function ih(e){const t=await fetch("/lorebooks/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Create lore entry failed: ${t.status}`);return t.json()}async function ah(e){const t=await fetch(`/lorebooks/entries/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete lore entry failed: ${t.status}`);return t.json()}async function ch(e){const t=await fetch(`/lorebooks/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete lorebook failed: ${t.status}`);return t.json()}async function uh(e,t=10){const n=new URLSearchParams({q:e||"",limit:t.toString()}),r=await fetch(`/lorebooks/search?${n}`);if(!r.ok)throw new Error(`Search lorebooks failed: ${r.status}`);return r.json()}async function dh(e,t){const n=await fetch(`/lorebooks/characters/${e}/lorebooks/${t}`,{method:"POST"});if(!n.ok)throw new Error(`Link character to lorebook failed: ${n.status}`);return n.json()}async function fh(e,t){const n=await fetch(`/lorebooks/characters/${e}/lorebooks/${t}`,{method:"DELETE"});if(!n.ok)throw new Error(`Unlink character from lorebook failed: ${n.status}`);return n.json()}async function ph(e){const t=await fetch(`/lorebooks/characters/${e}/lorebooks`);if(!t.ok)throw new Error(`Get character lorebooks failed: ${t.status}`);return t.json()}async function hh(e){const t=await fetch("/lorebooks/inject_context",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Inject context failed: ${t.status}`);return t.json()}async function ed(){const e=await fetch("/chats");if(!e.ok)throw new Error(`List chats failed: ${e.status}`);return e.json()}async function mh(e){const t=await fetch(`/chats/${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Get chat failed: ${t.status}`);return t.json()}async function td(e){const t=await fetch(`/chats/${encodeURIComponent(e)}/reset`,{method:"POST"});if(!t.ok)throw new Error(`Reset chat failed: ${t.status}`);return t.json()}async function gh(){const e=await fetch("/prompts");if(!e.ok)throw new Error(`Get prompts failed: ${e.status}`);return e.json()}async function yh(e){const t=await fetch("/prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Save prompts failed: ${t.status}`);return t.json()}async function vh(e="default"){const t=await fetch("/lore/suggest_from_chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(!t.ok)throw new Error(`Suggest lore failed: ${t.status}`);return t.json()}async function xh(){const e=await fetch("/tools/mcp");if(!e.ok)throw new Error(`Get MCP servers failed: ${e.status}`);return e.json()}async function wh(e){const t=await fetch("/tools/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Save MCP servers failed: ${t.status}`);return t.json()}async function kh(){const e=await fetch("/tools/mcp/awesome");if(!e.ok)throw new Error(`Fetch MCP awesome failed: ${e.status}`);return e.json()}const ci=An((e,t)=>({messages:[],input:"",sending:!1,error:null,sessionId:"default",availableSessions:["default"],setMessages:n=>e({messages:n}),setInput:n=>e({input:n}),setSending:n=>e({sending:n}),setError:n=>e({error:n}),setSessionId:n=>e({sessionId:n}),setAvailableSessions:n=>e({availableSessions:n}),sendMessage:async n=>{if(!n.trim()||t().sending)return"";const{sessionId:r,messages:s}=t(),l={role:"user",content:n.trim()};e({sending:!0,input:"",error:null,messages:[...s,l]});try{const i=await Yu(n,r);return e({sending:!1}),i}catch(i){throw e({error:i.message,sending:!1}),i}},loadChat:async n=>{try{const{messages:r}=await mh(n);e({messages:r||[],sessionId:n,error:null})}catch(r){e({error:r.message})}},loadSessions:async()=>{try{const{sessions:n}=await ed();e({availableSessions:n||["default"]})}catch(n){console.warn("Failed to load sessions:",n)}},resetChatSession:async n=>{try{await td(n),await t().loadChat(n)}catch(r){e({error:r.message})}},createNewSession:n=>{const r=n.trim()||`session-${Date.now()}`;e({sessionId:r,messages:[],input:"",error:null})}})),jh=An((e,t)=>({showConfig:!1,showCharacters:!1,showChats:!1,showTools:!1,showLorebooks:!1,phoneOpen:!1,settingsTab:"connection",phoneUrl:"https://example.org",phoneStyle:"classic",suggestOpen:!1,suggests:[],showSOHint:!1,suppressSOHint:!1,expandedEntries:{},editorOpen:!1,editingChar:null,appTheme:{background_animations:[]},setShowConfig:n=>e({showConfig:n}),setShowCharacters:n=>e({showCharacters:n}),setShowChats:n=>e({showChats:n}),setShowTools:n=>e({showTools:n}),setShowLorebooks:n=>e({showLorebooks:n}),setPhoneOpen:n=>e({phoneOpen:n}),setSettingsTab:n=>e({settingsTab:n}),setPhoneUrl:n=>e({phoneUrl:n}),setPhoneStyle:n=>e({phoneStyle:n}),setSuggestOpen:n=>e({suggestOpen:n}),setSuggests:n=>e({suggests:n}),setShowSOHint:n=>e({showSOHint:n}),setSuppressSOHint:n=>e({suppressSOHint:n}),setExpandedEntries:n=>e({expandedEntries:n}),toggleExpandedEntry:n=>e(r=>({expandedEntries:{...r.expandedEntries,[n]:!r.expandedEntries[n]}})),setEditorOpen:n=>e({editorOpen:n}),setEditingChar:n=>e({editingChar:n}),closeAllPanels:()=>e({showConfig:!1,showCharacters:!1,showChats:!1,showTools:!1,showLorebooks:!1}),togglePanel:(n,r)=>{const s=t()[n],l=r!==void 0?r:!s;l&&n!=="phoneOpen"&&t().closeAllPanels(),e({[n]:l})},applyPluginAnimations:n=>{!n||!Array.isArray(n)||e(r=>({...r,appTheme:{...r.appTheme,background_animations:n.map(s=>typeof s=="string"?s:s.id).filter(Boolean)}}))},setAppTheme:n=>{e(r=>({...r,appTheme:{...r.appTheme,...n}}))},updateAppTheme:n=>{e(r=>({...r,appTheme:{...r.appTheme,...n}}))}})),Sh=An((e,t)=>({characters:[],selectedCharacterId:null,lorebooks:[],selectedLorebook:null,loreEntries:[],selectedLorebookId:null,userPersona:{name:"User",description:""},extensions:[],extensionsEnabled:{},extensionsInitialized:!1,setCharacters:n=>e({characters:n}),setSelectedCharacterId:n=>e({selectedCharacterId:n}),setLorebooks:n=>e({lorebooks:n}),setSelectedLorebook:n=>e({selectedLorebook:n}),setLoreEntries:n=>e({loreEntries:n}),setSelectedLorebookId:n=>e({selectedLorebookId:n}),setUserPersona:n=>e({userPersona:n}),setExtensions:n=>e({extensions:n}),setExtensionsEnabled:n=>e({extensionsEnabled:n}),setExtensionsInitialized:n=>e({extensionsInitialized:n}),loadCharacters:async()=>{try{const n=await qp();e({characters:n||[]})}catch(n){console.warn("Failed to load characters:",n)}},loadLorebooks:async()=>{try{const n=await ai(),r=(n==null?void 0:n.lorebooks)||[];e({lorebooks:r}),(r==null?void 0:r.length)>0&&!t().selectedLorebook&&e({selectedLorebook:r[0]})}catch(n){console.warn("Failed to load lorebooks:",n)}},loadLoreEntries:async n=>{try{const r=await pl(n);e({loreEntries:r.entries||[]})}catch(r){console.warn("Failed to load lore entries:",r),e({loreEntries:[]})}},deleteCharacterAction:async n=>{try{await Xu(n);const r=t().characters.filter(s=>s.id!==n);e({characters:r}),t().selectedCharacterId===n&&e({selectedCharacterId:null})}catch(r){throw console.error("Failed to delete character:",r),r}},updateLoreEntry:async(n,r)=>{try{await Zu(n,r);const l=t().loreEntries.map(i=>i.id===n?{...i,...r}:i);e({loreEntries:l})}catch(s){throw console.error("Failed to update lore entry:",s),s}},updateExtensionsEnabled:async(n,r={})=>{const{persist:s=!0}=r;try{if(e({extensionsEnabled:n}),s&&!(await fetch("/plugins/enabled",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:n})})).ok)throw new Error("Failed to persist extensions")}catch(l){throw console.error("Failed to update extensions:",l),l}},findCharacterById:n=>t().characters.find(r=>r.id===n)||null,findLorebookById:n=>t().lorebooks.find(r=>r.id===n)||null})),Ch=An((e,t)=>({activeProvider:"echo",providers:{},configDraft:{api_key:"",api_base:"",model:"",temperature:.7},modelList:[],loadingModels:!1,debugFlags:{log_prompts:!1,log_responses:!1},userPersona:{name:"",description:""},maxTokens:2048,structuredOutput:!1,setActiveProvider:n=>e({activeProvider:n}),setProviders:n=>e({providers:n}),setConfigDraft:n=>e({configDraft:n}),setModelList:n=>e({modelList:n}),setLoadingModels:n=>e({loadingModels:n}),setUserPersona:n=>e({userPersona:n}),setDebugFlags:n=>e({debugFlags:n}),setMaxTokens:n=>e({maxTokens:n}),setStructuredOutput:n=>e({structuredOutput:n}),loadConfig:async()=>{var n;try{const r=await nt();e({activeProvider:r.active_provider||"echo",providers:r.providers||{},debugFlags:r.debug||{log_prompts:!1,log_responses:!1},userPersona:r.user_persona||{name:"",description:""},maxTokens:r.max_context_tokens||2048,structuredOutput:r.structured_output||!1});const s=((n=r.providers)==null?void 0:n[r.active_provider])||{};e({configDraft:{api_key:"",api_base:s.api_base||"",model:s.model||"",temperature:s.temperature??.7}}),await t().loadModelsForProvider(r.active_provider)}catch(r){console.warn("Failed to load config:",r)}},updateMaxTokens:async n=>{try{await Fe({max_context_tokens:n}),e({maxTokens:n})}catch(r){throw console.error("Failed to update max tokens:",r),r}},updateDebugFlags:async n=>{try{await Fe({debug:n}),e({debugFlags:n})}catch(r){throw console.error("Failed to update debug flags:",r),r}},updateUserPersona:async n=>{try{await Fe({user_persona:n}),e({userPersona:n})}catch(r){throw console.error("Failed to update user persona:",r),r}},updateStructuredOutput:async n=>{try{await Fe({structured_output:n}),e({structuredOutput:n})}catch(r){throw console.error("Failed to update structured output:",r),r}},updateProviderConfig:async(n,r)=>{try{await Fe({active_provider:n,providers:{[n]:r}}),e(s=>({providers:{...s.providers,[n]:r},configDraft:r}))}catch(s){throw console.error("Failed to update provider config:",s),s}},loadModels:async()=>{const n=t().activeProvider;await t().loadModelsForProvider(n)},loadModelsForProvider:async n=>{try{e({loadingModels:!0});const{models:r}=await eh(n);e({modelList:r||[],loadingModels:!1})}catch(r){console.error("Failed to load models:",r),e({modelList:[],loadingModels:!1})}}})),go={primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827",phone_style:"classic",background_animations:[]};An((e,t)=>({appTheme:go,availableThemes:[go],currentThemeName:null,customThemes:{},setAppTheme:n=>{e({appTheme:n}),t().applyTheme(n)},updateThemeColors:n=>{e(r=>({appTheme:{...r.appTheme,...n}})),t().applyTheme(t().appTheme)},setPhoneStyle:n=>{e(r=>({appTheme:{...r.appTheme,phone_style:n}}))},addBackgroundAnimation:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:[...r.appTheme.background_animations||[],n].filter((s,l,i)=>i.indexOf(s)===l)}}))},removeBackgroundAnimation:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:(r.appTheme.background_animations||[]).filter(s=>s!==n)}}))},setBackgroundAnimations:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:n}}))},saveCustomTheme:(n,r)=>{e(s=>({customThemes:{...s.customThemes,[n]:{...r}}}));try{const s=localStorage.getItem("coolchat-themes")||"{}",l=JSON.parse(s);l[n]=r,localStorage.setItem("coolchat-themes",JSON.stringify(l))}catch(s){console.warn("Failed to save theme to localStorage:",s)}},deleteCustomTheme:n=>{e(r=>{const s={...r.customThemes};delete s[n];try{const l=localStorage.getItem("coolchat-themes")||"{}",i=JSON.parse(l);delete i[n],localStorage.setItem("coolchat-themes",JSON.stringify(i))}catch(l){console.warn("Failed to delete theme from localStorage:",l)}return{customThemes:s}})},loadCustomTheme:n=>{const r=t().customThemes[n];r?(t().setAppTheme(r),e({currentThemeName:n})):console.warn("Theme not found:",n)},exportTheme:()=>{const n=t().appTheme,r=t().currentThemeName||"Exported Theme";return JSON.stringify({name:r,theme:n,exportedAt:new Date().toISOString(),version:"1.0"},null,2)},importTheme:n=>{try{const{name:r,theme:s}=JSON.parse(n);s&&typeof s=="object"&&t().saveCustomTheme(r,s)}catch(r){throw console.error("Failed to import theme:",r),new Error("Invalid theme format")}},applyTheme:n=>{const r=document.documentElement.style;n.primary&&r.setProperty("--primary",n.primary),n.secondary&&r.setProperty("--panel",n.secondary),n.text1&&r.setProperty("--text",n.text1),n.text2&&r.setProperty("--muted",n.text2),n.highlight&&r.setProperty("--assistant",n.highlight),n.lowlight&&r.setProperty("--bg",n.lowlight);const s=n.background_animations||[],l=new CustomEvent("coolchat:themeUpdate",{detail:{...n,background_animations:s}});window.dispatchEvent(l)},resetTheme:()=>{t().setAppTheme(go),e({currentThemeName:null})}}));const Nh=()=>{const e=ci(),t=N.useCallback(async r=>await e.sendMessage(r),[e]),n=N.useCallback(async r=>{e.setSessionId(r),await e.loadChat(r)},[e]);return{messages:e.messages,input:e.input,sending:e.sending,error:e.error,sessionId:e.sessionId,availableSessions:e.availableSessions,sendMessage:t,setInput:e.setInput,setError:e.setError,setMessages:e.setMessages,setSending:e.setSending,switchSession:n,resetChat:e.resetChatSession,loadSessions:e.loadSessions,createSession:e.createNewSession}},Eh=()=>{const e=ci(),t=N.useCallback(async()=>{try{const r=await oh(e.sessionId);e.setMessages([...e.messages,{role:"assistant",image_url:r.image_url,content:""}])}catch(r){throw new Error(r.message)}},[e]),n=N.useCallback(async r=>{try{const s=await lh(r,e.sessionId);e.setMessages([...e.messages,{role:"assistant",image_url:s.image_url,content:r}])}catch(s){throw new Error(s.message)}},[e]);return{generateImageFromLastMessage:t,generateImage:n}},_h=()=>{const e=ci();return{suggestLore:N.useCallback(async()=>{try{return await vh(e.sessionId)}catch(n){throw new Error(n.message)}},[e])}};class Th{constructor(){this.config=null,this.lastConfigCheck=0,this.configCacheTime=5e3,this.loadConfig()}async loadConfig(){const t=Date.now();if(this.config&&t-this.lastConfigCheck<this.configCacheTime)return await this.config;try{const n=await fetch("/debug.json");if(!n.ok)throw new Error(`HTTP ${n.status}`);this.config=await n.json(),this.lastConfigCheck=t}catch{this.config||console.warn("Failed to load debug.json - using defaults"),this.config={frontend:{tool_parsing:!0,llm_responses:!0,api_calls:!1,store_actions:!1,component_render:!1,performance:!1},enabled:!0}}return this.config}async isEnabled(t){const n=await this.loadConfig();return!n||!n.enabled?!1:(n.frontend||{})[t]===!0}async log(t,n,...r){await this.isEnabled(t)&&console.log(`[DEBUG ${t.toUpperCase()}] ${n}`,...r)}async debugToolParsing(t,...n){await this.log("tool_parsing",t,...n)}async debugLLMResponses(t,...n){await this.log("llm_responses",t,...n)}async debugAPICalls(t,...n){await this.log("api_calls",t,...n)}async debugStoreActions(t,...n){await this.log("store_actions",t,...n)}async debugComponentRender(t,...n){await this.log("component_render",t,...n)}async debugPerformance(t,...n){await this.log("performance",t,...n)}}let yo=null;function nd(){return yo||(yo=new Th),yo}const it=(e,...t)=>nd().debugToolParsing(e,...t),Ma=(e,...t)=>nd().debugLLMResponses(e,...t);const wr=new Map,Vr=e=>{const t=wr.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Lh=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=wr.get(n.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(n),stores:{}};return wr.set(n.name,s),{type:"tracked",store:e,...s}},Ph=(e,t)=>{if(t===void 0)return;const n=wr.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&wr.delete(e))},bh=e=>{var t,n;if(!e)return;const r=e.split(`
`),s=r.findIndex(i=>i.includes("api.setState"));if(s<0)return;const l=((t=r[s+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(l))==null?void 0:n[1]},Oh=(e,t={})=>(n,r,s)=>{const{enabled:l,anonymousActionType:i,store:a,...c}=t;let u;try{u=(l??!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return e(n,r,s);const{connection:h,...w}=Lh(a,u,c);let v=!0;s.setState=(j,P,f)=>{const d=n(j,P);if(!v)return d;const m=f===void 0?{type:i||bh(new Error().stack)||"anonymous"}:typeof f=="string"?{type:f}:f;return a===void 0?(h==null||h.send(m,r()),d):(h==null||h.send({...m,type:`${a}/${m.type}`},{...Vr(c.name),[a]:s.getState()}),d)},s.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),Ph(c.name,a)}};const y=(...j)=>{const P=v;v=!1,n(...j),v=P},g=e(s.setState,r,s);if(w.type==="untracked"?h==null||h.init(g):(w.stores[w.store]=s,h==null||h.init(Object.fromEntries(Object.entries(w.stores).map(([j,P])=>[j,j===w.store?g:P.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let j=!1;const P=s.dispatch;s.dispatch=(...f)=>{P(...f)}}return h.subscribe(j=>{var P;switch(j.type){case"ACTION":if(typeof j.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return vo(j.payload,f=>{if(f.type==="__setState"){if(a===void 0){y(f.state);return}Object.keys(f.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const d=f.state[a];if(d==null)return;JSON.stringify(s.getState())!==JSON.stringify(d)&&y(d);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(f)});case"DISPATCH":switch(j.payload.type){case"RESET":return y(g),a===void 0?h==null?void 0:h.init(s.getState()):h==null?void 0:h.init(Vr(c.name));case"COMMIT":if(a===void 0){h==null||h.init(s.getState());return}return h==null?void 0:h.init(Vr(c.name));case"ROLLBACK":return vo(j.state,f=>{if(a===void 0){y(f),h==null||h.init(s.getState());return}y(f[a]),h==null||h.init(Vr(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return vo(j.state,f=>{if(a===void 0){y(f);return}JSON.stringify(s.getState())!==JSON.stringify(f[a])&&y(f[a])});case"IMPORT_STATE":{const{nextLiftedState:f}=j.payload,d=(P=f.computedStates.slice(-1)[0])==null?void 0:P.state;if(!d)return;y(a===void 0?d:d[a]),h==null||h.send(null,f);return}case"PAUSE_RECORDING":return v=!v}return}}),g},Dh=Oh,vo=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)},rd=An()(Dh((e,t)=>({lorebooks:[],selectedLorebook:null,lorebookLoading:!1,loreEntries:[],selectedEntries:new Set,entryLoading:!1,currentPage:0,pageSize:50,totalEntries:0,hasMoreEntries:!1,searchQuery:"",searchResults:[],searchFilters:{keywords:[],secondary_keywords:[]},isSearching:!1,showEditor:!1,editingEntry:null,showBulkOps:!1,showImport:!1,linkedCharacters:[],availableCharacters:[],cache:new Map,fetchLorebooks:async()=>{console.log("[DEBUG] fetchLorebooks called");try{e({lorebookLoading:!0});const n=await ai(),r=n&&n.lorebooks?n.lorebooks:[];console.log("[DEBUG] Fetch completed, found",r.length,"lorebooks"),e({lorebooks:r,lorebookLoading:!1}),r.length>0&&!t().selectedLorebook&&t().selectLorebook(r[0])}catch(n){console.error("Failed to fetch lorebooks:",n),e({lorebookLoading:!1})}},selectLorebook:n=>{e({selectedLorebook:n}),n?t().refreshLoreEntries():e({loreEntries:[],totalEntries:0,currentPage:0,hasMoreEntries:!1})},createLorebookAction:async n=>{try{const r=await th({name:n.name,description:n.description||"",entries:n.entries||[]});return t().fetchLorebooks(),r}catch(r){throw console.error("Failed to create lorebook:",r),r}},updateLorebookAction:async(n,r)=>{try{await qu(n,r);const s=t().lorebooks.map(i=>i.id===n?{...i,...r}:i);e({lorebooks:s});const l=t().selectedLorebook;l&&l.id===n&&e({selectedLorebook:{...l,...r}})}catch(s){throw console.error("Failed to update lorebook:",s),s}},deleteLorebookAction:async n=>{try{await ch(n);const r=t().lorebooks.filter(l=>l.id!==n);e({lorebooks:r});const s=t().selectedLorebook;s&&s.id===n&&e({selectedLorebook:null,loreEntries:[]})}catch(r){throw console.error("Failed to delete lorebook:",r),r}},refreshLoreEntries:async()=>{const n=t().selectedLorebook;if(n)try{e({entryLoading:!0});const s=(await pl(n.id)).entries||[];e({loreEntries:s,totalEntries:s.length,currentPage:0,hasMoreEntries:!1,entryLoading:!1})}catch(r){console.error("Failed to refresh lore entries:",r),e({entryLoading:!1})}},loadLoreEntriesPaginated:async(n=0,r=50)=>{const s=t().selectedLorebook;if(s)try{e({entryLoading:!0});const i=(await pl(s.id)).entries||[],a=n*r,c=a+r;e({loreEntries:i.slice(a,c),currentPage:n,pageSize:r,totalEntries:i.length,hasMoreEntries:c<i.length,entryLoading:!1})}catch(l){console.error("Failed to load lore entries:",l),e({entryLoading:!1})}},createLoreEntryAction:async n=>{try{const r=t().selectedLorebook;if(!r)throw new Error("No lorebook selected");const s={...n,lorebook_id:r.id},l=await ih(s),i=t().loreEntries;return e({loreEntries:[...i,l],totalEntries:t().totalEntries+1}),l}catch(r){throw console.error("Failed to create lore entry:",r),r}},updateLoreEntryAction:async(n,r)=>{try{await Zu(n,r);const l=t().loreEntries.map(i=>i.id===n?{...i,...r}:i);e({loreEntries:l})}catch(s){throw console.error("Failed to update lore entry:",s),s}},deleteLoreEntryAction:async(n,r=!0)=>{try{if(await ah(n),r){const l=t().loreEntries.filter(i=>i.id!==n);e({loreEntries:l,totalEntries:t().totalEntries-1,selectedEntries:new Set([...t().selectedEntries].filter(i=>i!==n))})}}catch(s){throw console.error("Failed to delete lore entry:",s),s}},searchLoreAction:async(n,r={})=>{try{e({isSearching:!0,searchQuery:n});const s=await uh(n,100);e({searchResults:s.results||[],isSearching:!1})}catch(s){console.error("Search failed:",s),e({isSearching:!1})}},clearSearch:()=>{e({searchQuery:"",searchResults:[],searchFilters:{keywords:[],secondary_keywords:[]}})},toggleEntrySelection:n=>{const r=new Set(t().selectedEntries);r.has(n)?r.delete(n):r.add(n),e({selectedEntries:r})},selectAllEntries:()=>{const n=t().loreEntries.map(s=>s.id);if(new Set([...n].filter(s=>!t().selectedEntries.has(s))).size>0){const s=new Set([...t().selectedEntries,...n]);e({selectedEntries:s})}else e({selectedEntries:new Set})},clearSelection:()=>{e({selectedEntries:new Set})},bulkUpdateEntries:async n=>{const r=Array.from(t().selectedEntries);try{for(const s of r)n.type==="update"&&await t().updateLoreEntryAction(s,n.data);t().clearSelection()}catch(s){throw console.error("Bulk update failed:",s),s}},bulkDeleteEntries:async()=>{const n=Array.from(t().selectedEntries);try{for(const l of n)await t().deleteLoreEntryAction(l,!1);const s=t().loreEntries.filter(l=>!n.includes(l.id));e({loreEntries:s,selectedEntries:new Set,totalEntries:t().totalEntries-n.length})}catch(r){throw console.error("Bulk delete failed:",r),r}},loadLinkedCharacters:async n=>{try{const r=await ph(n);e({linkedCharacters:r.lorebooks||[]})}catch(r){throw console.error("Failed to load linked characters:",r),r}},linkCharacterAction:async n=>{const r=t().selectedLorebook;if(r)try{await dh(n,r.id),t().loadLinkedCharacters(n)}catch(s){throw console.error("Failed to link character:",s),s}},unlinkCharacterAction:async n=>{const r=t().selectedLorebook;if(r)try{await fh(n,r.id),t().loadLinkedCharacters(n)}catch(s){throw console.error("Failed to unlink character:",s),s}},importLorebookAction:async n=>{try{await nh(n),t().fetchLorebooks()}catch(r){throw console.error("Import failed:",r),r}},injectContextForChat:async(n,r={})=>{const s=t().selectedLorebook;if(!s)throw new Error("No lorebook selected");const l=n.slice(-3).join(" "),i={session_id:r.sessionId||"default",max_tokens:r.maxTokens||1e3,lorebook_ids:s?[s.id]:[],recent_text:l};try{return await hh(i)}catch(a){throw console.error("Context injection failed:",a),a}},setShowEditor:(n,r=null)=>{e({showEditor:n,editingEntry:r})},setShowBulkOps:n=>{e({showBulkOps:n})},setShowImport:n=>{e({showImport:n})},getCached:n=>t().cache.get(n),setCached:(n,r)=>{const s=new Map(t().cache);s.set(n,r),e({cache:s})},reset:()=>{e({selectedLorebook:null,loreEntries:[],selectedEntries:new Set,currentPage:0,searchQuery:"",searchResults:[],showEditor:!1,editingEntry:null,showBulkOps:!1,showImport:!1,linkedCharacters:[],availableCharacters:[]})}}),{name:"lorebook-store"})),Ah=({lorebooks:e,viewMode:t,selectedLorebookId:n,onSelectLorebook:r,onEditLorebook:s,onDeleteLorebook:l,onCreateLorebook:i})=>{const[a,c]=N.useState(""),[u,h]=N.useState(""),w=async v=>{v.preventDefault(),a.trim()&&(await i({name:a,description:u,entries:[]}),c(""),h(""))};return e.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:"📚"}),o.jsx("h3",{children:"No Lorebooks Yet"}),o.jsx("p",{children:"Create your first lorebook to get started with organizing your game world."}),o.jsxs("form",{onSubmit:w,className:"quick-create-form",children:[o.jsx("input",{type:"text",placeholder:"Lorebook name",value:a,onChange:v=>c(v.target.value),required:!0}),o.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:v=>h(v.target.value)}),o.jsx("button",{type:"submit",className:"primary",children:"Create Lorebook"})]})]}):t==="table"?o.jsx("div",{className:"lorebook-table-container",children:o.jsxs("table",{className:"lorebook-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Description"}),o.jsx("th",{children:"Entries"}),o.jsx("th",{children:"Last Updated"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:e.map(v=>o.jsxs("tr",{className:n===v.id?"selected":"",onClick:()=>r(v),children:[o.jsx("td",{className:"lorebook-name",children:v.name}),o.jsx("td",{className:"lorebook-description",children:v.description||"—"}),o.jsx("td",{className:"entry-count",children:v.entry_count}),o.jsx("td",{className:"updated-at",children:new Date(v.updated_at).toLocaleDateString()}),o.jsxs("td",{className:"actions",children:[o.jsx("button",{onClick:y=>{y.stopPropagation(),s(v)},title:"Edit lorebook",children:"✏️"}),o.jsx("button",{onClick:y=>{y.stopPropagation(),l(v.id)},title:"Delete lorebook",className:"delete-btn",children:"🗑️"})]})]},v.id))})]})}):o.jsxs("div",{className:"lorebook-grid",children:[e.map(v=>o.jsx(zh,{lorebook:v,isSelected:n===v.id,onSelect:()=>r(v),onEdit:()=>s(v),onDelete:()=>l(v.id)},v.id)),o.jsxs("div",{className:"lorebook-card quick-create-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"card-icon add-icon",children:"➕"}),o.jsx("h3",{children:"Create New"})]}),o.jsx("div",{className:"card-content",children:o.jsxs("form",{onSubmit:w,children:[o.jsx("input",{type:"text",placeholder:"Lorebook title",value:a,onChange:v=>c(v.target.value),required:!0}),o.jsx("textarea",{placeholder:"Brief description...",value:u,onChange:v=>h(v.target.value),rows:2}),o.jsx("button",{type:"submit",className:"primary create-btn",children:"Create Lorebook"})]})})]})]})},zh=({lorebook:e,isSelected:t,onSelect:n,onEdit:r,onDelete:s})=>{const[l,i]=N.useState(!1),a=c=>{const u=new Date(c),w=Math.abs(new Date().getTime()-u.getTime()),v=Math.ceil(w/(1e3*60*60*24));return v===1?"Today":v===2?"Yesterday":v<=7?`${v-1} days ago`:u.toLocaleDateString()};return o.jsxs("div",{className:`lorebook-card ${t?"selected":""} ${l?"show-actions":""}`,onClick:n,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"card-icon",children:"📚"}),o.jsx("h3",{className:"card-title",children:e.name}),o.jsxs("div",{className:"card-actions",children:[o.jsx("button",{onClick:c=>{c.stopPropagation(),r()},title:"Edit lorebook",children:"⚙️"}),o.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm(`Delete "${e.name}"?`)&&s()},title:"Delete lorebook",className:"delete-btn",children:"🗑️"})]})]}),o.jsxs("div",{className:"card-content",children:[o.jsx("p",{className:"card-description",children:e.description||"No description"}),o.jsxs("div",{className:"card-stats",children:[o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-label",children:"Entries:"}),o.jsx("span",{className:"stat-value",children:e.entry_count})]}),o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-label",children:"Updated:"}),o.jsx("span",{className:"stat-value",children:a(e.updated_at)})]})]})]}),t&&o.jsx("div",{className:"selection-indicator",children:"✓ Selected"})]})},Ih=({onSearch:e,onClear:t,isSearching:n,searchResults:r})=>{const[s,l]=N.useState(""),[i,a]=N.useState(null),[c,u]=N.useState(!1),[h,w]=N.useState({keywords:[],secondaryKeywords:[],logic:"AND ANY",minTrigger:"",maxTrigger:"",limit:50}),v=N.useCallback(d=>{i&&clearTimeout(i);const m=setTimeout(async()=>{d.trim()?await e(d):t()},300);a(m)},[e,t,i]),y=d=>{const m=d.target.value;l(m),v(m)},g=async()=>{(s||h.keywords.length>0)&&await e(s)},j=()=>{l(""),w({keywords:[],secondaryKeywords:[],logic:"AND ANY",minTrigger:"",maxTrigger:"",limit:50}),t()},P=(d,m)=>{m.trim()&&w(k=>({...k,[d]:[...k[d],m.trim()].filter((x,C,E)=>E.indexOf(x)===C)}))},f=(d,m)=>{w(k=>({...k,[d]:k[d].filter(x=>x!==m)}))};return o.jsxs("div",{className:"lorebook-search",children:[o.jsxs("div",{className:"search-input-container",children:[o.jsxs("div",{className:"search-input-wrapper",children:[o.jsx("input",{type:"text",placeholder:"Search lore entries...",value:s,onChange:y,className:"search-input"}),s&&o.jsx("button",{onClick:j,className:"clear-search-btn",title:"Clear search",children:"✕"}),o.jsx("button",{onClick:()=>u(!c),className:`advanced-search-btn ${c?"active":""}`,title:"Advanced search",children:"⚙️"})]}),r.length>0&&s&&o.jsxs("div",{className:"search-stats",children:["Found ",r.length,' entries matching "',s,'"']})]}),c&&o.jsx("div",{className:"advanced-search-panel",children:o.jsxs("div",{className:"advanced-search-content",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Primary Keywords"}),o.jsxs("div",{className:"keyword-input-group",children:[h.keywords.map((d,m)=>o.jsxs("span",{className:"keyword-tag",children:[d,o.jsx("button",{onClick:()=>f("keywords",d),className:"remove-keyword",children:"×"})]},m)),o.jsx("input",{type:"text",placeholder:"Add keyword...",onKeyPress:d=>{d.key==="Enter"&&(P("keywords",d.target.value),d.target.value="")},className:"keyword-input"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Secondary Keywords"}),o.jsxs("div",{className:"keyword-input-group",children:[h.secondaryKeywords.map((d,m)=>o.jsxs("span",{className:"keyword-tag",children:[d,o.jsx("button",{onClick:()=>f("secondaryKeywords",d),className:"remove-keyword",children:"×"})]},m)),o.jsx("input",{type:"text",placeholder:"Add secondary keyword...",onKeyPress:d=>{d.key==="Enter"&&(P("secondaryKeywords",d.target.value),d.target.value="")},className:"keyword-input"})]})]}),o.jsxs("div",{className:"filter-row",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Logic"}),o.jsxs("select",{value:h.logic,onChange:d=>w(m=>({...m,logic:d.target.value})),className:"logic-select",children:[o.jsx("option",{value:"AND ANY",children:"AND ANY"}),o.jsx("option",{value:"AND ALL",children:"AND ALL"}),o.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),o.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Trigger Range"}),o.jsxs("div",{className:"trigger-range",children:[o.jsx("input",{type:"number",placeholder:"Min%",value:h.minTrigger,onChange:d=>w(m=>({...m,minTrigger:d.target.value})),min:"0",max:"100"}),o.jsx("span",{children:"to"}),o.jsx("input",{type:"number",placeholder:"Max%",value:h.maxTrigger,onChange:d=>w(m=>({...m,maxTrigger:d.target.value})),min:"0",max:"100"})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("h4",{children:"Limit Results"}),o.jsx("input",{type:"number",value:h.limit,onChange:d=>w(m=>({...m,limit:parseInt(d.target.value,10)||50})),min:"1",max:"1000",className:"limit-input"})]})]}),o.jsxs("div",{className:"advanced-search-actions",children:[o.jsx("button",{onClick:g,disabled:n,className:"primary",children:n?"Searching...":"Search"}),o.jsx("button",{onClick:j,className:"secondary",children:"Clear All"}),o.jsx("button",{onClick:()=>u(!1),className:"secondary",children:"Close"})]})]})}),s&&o.jsx("div",{className:"search-results-summary",children:n?o.jsxs("div",{className:"searching-indicator",children:[o.jsx("div",{className:"spinner"}),"Searching..."]}):r.length>0?o.jsx(Mh,{results:r.slice(0,3)}):s&&o.jsxs("div",{className:"no-results",children:['No entries found matching "',s,'"']})})]})},Mh=({results:e})=>o.jsxs("div",{className:"search-results-preview",children:[e.map((t,n)=>{var r;return o.jsxs("div",{className:"search-result-item",children:[o.jsxs("div",{className:"result-header",children:[o.jsx("h4",{children:t.title||"Untitled Entry"}),o.jsxs("span",{className:"result-score",children:["Score: ",Math.round(t.score)]})]}),o.jsxs("div",{className:"result-content",children:[t.content.substring(0,100),"..."]}),o.jsxs("div",{className:"result-meta",children:[t.lorebook_name," • Keywords: ",((r=t.keywords)==null?void 0:r.join(", "))||"none"]})]},n)}),e.length>=3&&o.jsxs("div",{className:"view-all-results",children:["+ ",e.length," more results..."]})]}),Fh=({selectedCount:e,onBulkDelete:t,onBulkEdit:n,onClearSelection:r,onBulkTag:s,onBulkMove:l})=>{const[i,a]=N.useState("idle"),[c,u]=N.useState("");if(e===0)return null;const h=async()=>{if(i!=="deleting"){a("deleting");return}if(window.confirm(`Delete ${e} entry${e===1?"":"ies"}? This action cannot be undone.`))try{await t(),a("idle")}catch(y){console.error("Bulk delete failed:",y),a("idle")}else a("idle")},w=async()=>{if(c.trim()&&s)try{await s(c.trim()),u("")}catch(y){console.error("Bulk tagging failed:",y)}},v=y=>i===y?"active":"";return o.jsxs("div",{className:"bulk-actions-panel",children:[o.jsxs("div",{className:"bulk-selection-info",children:[o.jsxs("span",{className:"selection-count",children:[e," entr",e===1?"y":"ies"," selected"]}),o.jsx("button",{onClick:r,className:"clear-selection-btn",title:"Clear selection",children:"✕"})]}),o.jsxs("div",{className:"bulk-action-buttons",children:[o.jsx("button",{onClick:()=>a("editing"),className:`bulk-action-btn edit-btn ${v("editing")}`,title:"Bulk edit selected entries",children:"📝 Edit"}),s&&o.jsx("button",{onClick:()=>{},className:"bulk-action-btn tag-btn",title:"Add tag to selected entries",children:"🏷️ Tag"}),l&&o.jsx("button",{onClick:()=>{},className:"bulk-action-btn move-btn",title:"Move selected entries",children:"↗️ Move"}),o.jsxs("button",{onClick:h,className:`bulk-action-btn delete-btn ${v("deleting")}`,title:"Delete selected entries",children:["🗑️ ",i==="deleting"?"Confirm Delete":"Delete"]})]}),i==="editing"&&o.jsx(Rh,{selectedCount:e,onSave:()=>{n(),a("idle")},onCancel:()=>a("idle")}),i==="tagging"&&s&&o.jsx("div",{className:"bulk-tagging-panel",children:o.jsxs("div",{className:"tag-input-group",children:[o.jsx("input",{type:"text",placeholder:"Add tag to selected entries...",value:c,onChange:y=>u(y.target.value),onKeyPress:y=>{y.key==="Enter"&&w()},autoFocus:!0}),o.jsx("button",{onClick:w,disabled:!c.trim(),className:"add-tag-btn",children:"Add Tag"}),o.jsx("button",{onClick:()=>{a("idle"),u("")},className:"cancel-tag-btn",children:"Cancel"})]})}),i==="deleting"&&o.jsxs("div",{className:"bulk-delete-confirm",children:[o.jsxs("div",{className:"confirm-message",children:["This will permanently delete ",e," selected entr",e===1?"y":"ies",". This action cannot be undone."]}),o.jsxs("div",{className:"confirm-actions",children:[o.jsx("button",{onClick:h,className:"confirm-delete-btn danger",children:"Yes, Delete All"}),o.jsx("button",{onClick:()=>a("idle"),className:"cancel-delete-btn",children:"Cancel"})]})]})]})},Rh=({selectedCount:e,onSave:t,onCancel:n})=>{const[r,s]=N.useState("logic"),[l,i]=N.useState(""),a=()=>{t()};return o.jsxs("div",{className:"bulk-edit-panel",children:[o.jsxs("div",{className:"panel-header",children:[o.jsxs("h3",{children:["Bulk Edit ",e," Entr",e===1?"y":"ies"]}),o.jsx("button",{onClick:n,className:"close-btn",title:"Close bulk edit",children:"×"})]}),o.jsxs("div",{className:"bulk-edit-content",children:[o.jsxs("div",{className:"field-selector",children:[o.jsx("label",{children:"Field to edit:"}),o.jsxs("select",{value:r,onChange:c=>s(c.target.value),children:[o.jsx("option",{value:"logic",children:"Logic"}),o.jsx("option",{value:"trigger",children:"Trigger"}),o.jsx("option",{value:"order",children:"Order"}),o.jsx("option",{value:"addKeyword",children:"Add Keyword"}),o.jsx("option",{value:"removeKeyword",children:"Remove Keyword"})]})]}),o.jsxs("div",{className:"value-input",children:[r==="logic"&&o.jsxs("select",{value:l||"AND ANY",onChange:c=>i(c.target.value),children:[o.jsx("option",{value:"AND ANY",children:"AND ANY"}),o.jsx("option",{value:"AND ALL",children:"AND ALL"}),o.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),o.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]}),r==="trigger"&&o.jsxs("div",{className:"range-input",children:[o.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:l||50,onChange:c=>i(parseInt(c.target.value,10))}),o.jsxs("span",{children:[l||50,"%"]})]}),r==="order"&&o.jsx("input",{type:"number",value:l||0,onChange:c=>i(parseFloat(c.target.value)),step:"0.1",placeholder:"0.0"}),(r==="addKeyword"||r==="removeKeyword")&&o.jsx("input",{type:"text",value:l||"",onChange:c=>i(c.target.value),placeholder:"Enter keyword..."})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Preview:"}),o.jsxs("div",{className:"preview-text",children:["Set ",o.jsx("strong",{children:r})," to ",o.jsx("strong",{children:l||"value"})," for selected entries"]})]})]}),o.jsxs("div",{className:"panel-actions",children:[o.jsx("button",{onClick:a,className:"primary",children:"Apply Changes"}),o.jsx("button",{onClick:n,className:"secondary",children:"Cancel"})]})]})},$h=({onImport:e,onCancel:t})=>{const[n,r]=N.useState(!1),[s,l]=N.useState(null),[i,a]=N.useState(!1),[c,u]=N.useState(null),[h,w]=N.useState(null),v=x=>{x.preventDefault(),r(!0)},y=x=>{x.preventDefault(),r(!1)},g=x=>{x.preventDefault(),r(!1),u(null);const C=Array.from(x.dataTransfer.files);C.length>0&&P(C[0])},j=x=>{const C=x.target.files;C&&C.length>0&&P(C[0])},P=async x=>{if(!x.name.toLowerCase().endsWith(".json")){u("Only JSON files are supported");return}const C=10*1024*1024;if(x.size>C){u("File size must be less than 10MB");return}l(x),u(null);try{const E=await x.text(),O=JSON.parse(E),R=f(O);w(R)}catch{u("Invalid JSON format"),w(null)}},f=x=>{var C;try{let E=[];if(x&&typeof x=="object"){x.entries?E=Array.isArray(x.entries)?x.entries:Object.values(x.entries||{}):Array.isArray(x)&&(E=x);const O={name:x.name||((C=s==null?void 0:s.name)==null?void 0:C.replace(".json","")),description:x.description||"",totalEntries:E.length,keywords:[],logicTypes:{},averageTrigger:0,previewEntries:E.slice(0,3),format:d(x)};let R=0;const b=new Set,Q=new Set;return E.forEach(re=>{re.keywords&&Array.isArray(re.keywords)&&re.keywords.forEach(Le=>b.add(Le)),re.logic&&(O.logicTypes[re.logic]=(O.logicTypes[re.logic]||0)+1),typeof re.trigger=="number"&&(R+=re.trigger)}),O.keywords=Array.from(b),O.averageTrigger=E.length>0?Math.round(R/E.length):0,O}}catch(E){console.error("Preview generation error:",E)}return null},d=x=>x.entries&&x.name?"SillyTavern":Array.isArray(x)?"Compact Array":x.lastUpdate?"AidanAI":"Unknown",m=async()=>{if(s){a(!0),u(null);try{await e(s)}catch(x){u(x.message||"Import failed")}finally{a(!1)}}},k=()=>{l(null),w(null),u(null)};return o.jsxs("div",{className:"lorebook-import-panel",children:[o.jsxs("div",{className:"panel-header",children:[o.jsx("h3",{children:"Import Lorebook"}),o.jsx("button",{onClick:t,className:"close-btn",title:"Close import panel",children:"×"})]}),o.jsxs("div",{className:"import-content",children:[s?o.jsxs("div",{className:"file-preview",children:[o.jsxs("div",{className:"file-header",children:[o.jsxs("div",{className:"file-info",children:[o.jsxs("h4",{children:["📄 ",s.name]}),o.jsxs("span",{className:"file-size",children:[(s.size/1024).toFixed(1)," KB"]})]}),o.jsx("div",{className:"file-actions",children:o.jsx("button",{onClick:k,className:"secondary",children:"Choose Different File"})})]}),c&&o.jsxs("div",{className:"error-message",children:[o.jsx("span",{className:"error-icon",children:"⚠️"}),c]}),h&&o.jsxs("div",{className:"import-preview",children:[o.jsx("h4",{children:"Import Preview"}),o.jsxs("div",{className:"preview-grid",children:[o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Lorebook Name:"}),o.jsx("span",{children:h.name||"Untitled"})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Format:"}),o.jsx("span",{children:h.format})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Entries:"}),o.jsx("span",{children:h.totalEntries})]}),o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Keywords:"}),o.jsxs("span",{children:[h.keywords.length," unique"]})]}),Object.keys(h.logicTypes).length>0&&o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Logic Types:"}),o.jsx("span",{children:Object.entries(h.logicTypes).map(([x,C])=>`${x}: ${C}`).join(", ")})]}),h.averageTrigger>0&&o.jsxs("div",{className:"preview-section",children:[o.jsx("label",{children:"Avg. Trigger:"}),o.jsxs("span",{children:[h.averageTrigger,"%"]})]})]}),h.previewEntries&&h.previewEntries.length>0&&o.jsxs("div",{className:"sample-entries",children:[o.jsx("h5",{children:"Sample Entries:"}),o.jsx("div",{className:"entry-preview",children:h.previewEntries.slice(0,3).map((x,C)=>{var E;return o.jsxs("div",{className:"entry-summary",children:[o.jsx("div",{className:"entry-title",children:x.title||x.comment||"Untitled"}),o.jsxs("div",{className:"entry-content",children:[(E=x.content)==null?void 0:E.substring(0,100),"..."]}),x.keywords&&x.keywords.length>0&&o.jsxs("div",{className:"entry-keywords",children:["Keywords: ",x.keywords.slice(0,3).join(", "),x.keywords.length>3&&` +${x.keywords.length-3} more`]})]},C)})})]})]}),o.jsxs("div",{className:"import-actions",children:[o.jsx("button",{onClick:m,disabled:i||!!c,className:"primary import-btn",children:i?"Importing...":"Import Lorebook"}),o.jsx("button",{onClick:t,className:"secondary",disabled:i,children:"Cancel"})]})]}):o.jsx("div",{className:`file-dropzone ${n?"dragging":""}`,onDragOver:v,onDragLeave:y,onDrop:g,children:o.jsxs("div",{className:"dropzone-content",children:[o.jsx("div",{className:"upload-icon",children:"📁"}),o.jsx("p",{children:"Drop JSON file here"}),o.jsx("p",{children:"or"}),o.jsxs("label",{className:"file-input-label",children:["Browse Files",o.jsx("input",{type:"file",accept:"application/json,.json",onChange:j,hidden:!0})]}),o.jsx("small",{className:"file-info",children:"Supports SillyTavern, AidanAI, and compact JSON formats (max 10MB)"})]})}),o.jsxs("div",{className:"import-help",children:[o.jsx("h5",{children:"Supported Formats:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"SillyTavern:"})," Standard lorebook JSON with name, description, and entries"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"AidanAI:"})," Lore export with specific field mappings"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compact Array:"})," Simple array of entry objects"]})]}),o.jsx("p",{children:"All formats are automatically converted to the internal structure."})]})]})]})},Uh=({lorebooks:e})=>{const[t,n]=N.useState([]);N.useEffect(()=>{(async()=>{try{const i=await fetch("/config");if(i.ok){const a=await i.json();n(a.active_lorebook_ids||[])}}catch(i){console.error("Failed to load active lorebook IDs:",i)}})()},[]);const r=async l=>{if(t.includes(l))return;const i=[...t,l];n(i);try{await fetch("/config/active_lorebook_ids",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:i})})}catch(a){console.error("Failed to add active lorebook:",a)}},s=async l=>{const i=t.filter(a=>a!==l);n(i);try{await fetch("/config/active_lorebook_ids",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:i})})}catch(a){console.error("Failed to remove active lorebook:",a)}};return o.jsxs("div",{style:{padding:"16px",background:"var(--panel)",borderRadius:"8px",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--text)"},children:"Active Lorebooks for Chat Context"}),o.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap",marginBottom:"8px"},children:o.jsxs("select",{onChange:l=>{l.target.value&&(r(parseInt(l.target.value)),l.target.value="")},value:"",style:{padding:"4px 8px",borderRadius:"4px",background:"var(--bg)",color:"var(--text)",border:"1px solid var(--muted)"},children:[o.jsx("option",{value:"",children:"+ Add to Active"}),e.filter(l=>!t.includes(l.id)).map(l=>o.jsx("option",{value:l.id,children:l.name},l.id))]})}),o.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:t.map(l=>{const i=e.find(a=>a.id===l);return o.jsxs("span",{style:{padding:"4px 8px",borderRadius:"12px",background:"var(--primary)",color:"var(--text)",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},title:`Active in chat: ${(i==null?void 0:i.name)||`#${l}`}`,children:[i?i.name:`#${l}`,o.jsx("button",{onClick:()=>s(l),style:{border:"none",background:"transparent",color:"var(--text)",cursor:"pointer",fontSize:"14px",lineHeight:1,padding:"0",marginLeft:"4px"},children:"×"})]},l)})}),t.length===0&&o.jsx("p",{style:{margin:"8px 0 0 0",color:"var(--muted)",fontSize:"14px"},children:"No active lorebooks. Select one above to add it to your current chat context."})]})},Bh=()=>{var P;const e=rd(),[t,n]=N.useState("cards"),[r,s]=N.useState("single"),[l,i]=N.useState(null),[a,c]=N.useState([]);N.useEffect(()=>{console.log("[DEBUG] LorebookDashboard useEffect triggered, calling fetchLorebooks"),e.fetchLorebooks()},[]);const u=sn.useMemo(()=>e.lorebooks,[e.lorebooks]),h=async f=>{try{await e.createLorebookAction(f),s("single")}catch(d){console.error("Failed to create lorebook:",d)}},w=async f=>{for(const d of f)await h(d);s("single")},v=async f=>{try{await e.importLorebookAction(f),s("single")}catch(d){console.error("Import failed:",d)}},y=async f=>{i(f);try{const d=await fetch(`/lorebooks/${f.id}`);if(d.ok){const m=await d.json();c(m.entries||[])}else c([])}catch(d){console.error("Failed to load lorebook entries:",d),c([])}},g=async()=>{if(l)try{await e.updateLorebookAction(l.id,{name:l.name,description:l.description});const f=a,d=await fetch(`/lorebooks/${l.id}`);if(!d.ok)throw new Error("Failed to load current entries");const k=(await d.json()).entries||[],x=new Map(k.map(b=>[b.id,b])),C=new Map(f.map(b=>[b.id,b])),E=[],O=[],R=[];for(const b of a)!b.id||b.id.toString().includes(".")?E.push(b):O.push(b);for(const b of k)a.some(re=>re.id===b.id)||R.push(b.id);console.log("Entry operations:",{toCreate:E.length,toUpdate:O.length,toDelete:R.length});for(const b of E)try{const Q={lorebook_id:l.id,title:b.title,content:b.content,keywords:b.keywords,secondary_keywords:b.secondary_keywords,logic:b.logic,trigger:b.trigger,order:b.order};await fetch("/lorebooks/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})}catch(Q){console.error("Failed to create entry:",Q)}for(const b of O)try{const Q={title:b.title,content:b.content,keywords:b.keywords,secondary_keywords:b.secondary_keywords,logic:b.logic,trigger:b.trigger,order:b.order};await fetch(`/lorebooks/entries/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})}catch(Q){console.error("Failed to update entry:",Q)}for(const b of R)try{await fetch(`/lorebooks/entries/${b}`,{method:"DELETE"})}catch(Q){console.error("Failed to delete entry:",Q)}await e.fetchLorebooks(),i(null),c([]),console.log("Lorebook updated successfully")}catch(f){console.error("Failed to update lorebook:",f)}},j=()=>{i(null)};return e.lorebookLoading&&e.lorebooks.length===0?o.jsxs("div",{className:"lorebook-dashboard loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading lorebooks..."})]}):o.jsxs("div",{className:"lorebook-dashboard",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsx("h1",{children:"Lorebook Management"}),o.jsxs("div",{className:"dashboard-actions",children:[o.jsx("button",{className:`action-btn ${t==="cards"?"active":""}`,onClick:()=>n("cards"),children:"📋 Cards"}),o.jsx("button",{className:`action-btn ${t==="table"?"active":""}`,onClick:()=>n("table"),children:"📊 Table"}),o.jsxs("div",{className:"dropdown-menu",children:[o.jsx("button",{className:"primary",children:"+ Create"}),o.jsxs("div",{className:"dropdown-content",children:[o.jsx("button",{onClick:()=>s("single"),children:"New Lorebook"}),o.jsx("button",{onClick:()=>s("bulk"),children:"Bulk Create"}),o.jsx("button",{onClick:()=>s("import"),children:"Import JSON"})]})]})]})]}),o.jsx(Ih,{onSearch:f=>e.searchLoreAction(f),onClear:()=>e.clearSearch(),isSearching:e.isSearching,searchResults:e.searchResults}),o.jsx(Fh,{selectedCount:e.selectedEntries.size,onBulkDelete:()=>e.bulkDeleteEntries(),onBulkEdit:()=>{},onClearSelection:()=>e.clearSelection()}),o.jsx("div",{className:"lorebook-stats",children:o.jsxs("span",{className:"stats",children:[e.lorebooks.length," lorebooks, ",e.lorebooks.reduce((f,d)=>f+d.entry_count,0)," total entries"]})}),o.jsx(Uh,{lorebooks:e.lorebooks}),o.jsxs("div",{className:"dashboard-content",children:[r==="import"?o.jsx($h,{onImport:v,onCancel:()=>s("single")}):r==="bulk"?o.jsx(Hh,{onCreate:w,onCancel:()=>s("single")}):o.jsx(Ah,{lorebooks:u,viewMode:t,onSelectLorebook:e.selectLorebook,selectedLorebookId:(P=e.selectedLorebook)==null?void 0:P.id,onEditLorebook:y,onDeleteLorebook:f=>{window.confirm("Delete this lorebook? This action cannot be undone.")&&e.deleteLorebookAction(f)},onCreateLorebook:h}),l&&o.jsx("div",{className:"modal-overlay",children:o.jsxs("div",{className:"modal-content large-modal",children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("h2",{children:["Edit Lorebook: ",l.name]}),o.jsx("button",{className:"close-btn",onClick:j,children:"×"})]}),o.jsx("div",{className:"modal-body",children:o.jsxs("div",{className:"lorebook-editor",children:[o.jsxs("div",{className:"editor-section",children:[o.jsx("h3",{children:"Lorebook Details"}),o.jsx("div",{className:"metadata-form",children:o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"edit-name",children:"Name:"}),o.jsx("input",{id:"edit-name",name:"name",type:"text",defaultValue:l.name,required:!0,maxLength:255,onChange:f=>{i(d=>d?{...d,name:f.target.value}:null)}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"edit-description",children:"Description:"}),o.jsx("textarea",{id:"edit-description",name:"description",rows:3,defaultValue:l.description||"",placeholder:"Describe this lorebook...",onChange:f=>{i(d=>d?{...d,description:f.target.value}:null)}})]})]})})]}),o.jsxs("div",{className:"editor-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h3",{children:"Lorebook Entries"}),o.jsx("button",{type:"button",className:"primary",onClick:()=>{const f={id:Date.now()+Math.random(),title:"",content:"",keywords:[],secondary_keywords:[],logic:"AND ANY",trigger:100,order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([...a,f])},children:"+ Add Entry"})]}),o.jsxs("div",{className:"entries-editor",children:[a.map((f,d)=>o.jsxs("div",{className:"entry-editor",children:[o.jsxs("div",{className:"entry-header",children:[o.jsx("input",{type:"text",placeholder:"Entry title...",value:f.title,onChange:m=>{const k=[...a];k[d]={...f,title:m.target.value},c(k)}}),o.jsx("button",{type:"button",className:"delete-btn",onClick:()=>{const m=a.filter((k,x)=>x!==d);c(m)},children:"×"})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Keywords:"}),o.jsx("input",{type:"text",placeholder:"keyword1, keyword2",value:f.keywords.join(", "),onChange:m=>{const k=[...a];k[d]={...f,keywords:m.target.value.split(",").map(x=>x.trim()).filter(x=>x)},c(k)}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Secondary Keywords:"}),o.jsx("input",{type:"text",placeholder:"secondary1, secondary2",value:f.secondary_keywords.join(", "),onChange:m=>{const k=[...a];k[d]={...f,secondary_keywords:m.target.value.split(",").map(x=>x.trim()).filter(x=>x)},c(k)}})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Logic:"}),o.jsxs("select",{value:f.logic,onChange:m=>{const k=[...a];k[d]={...f,logic:m.target.value},c(k)},children:[o.jsx("option",{value:"AND ANY",children:"AND ANY"}),o.jsx("option",{value:"AND ALL",children:"AND ALL"}),o.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),o.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Trigger (%):"}),o.jsx("input",{type:"number",min:"0",max:"100",value:f.trigger,onChange:m=>{const k=[...a];k[d]={...f,trigger:parseInt(m.target.value)||0},c(k)}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Order:"}),o.jsx("input",{type:"number",value:f.order,onChange:m=>{const k=[...a];k[d]={...f,order:parseFloat(m.target.value)||0},c(k)}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Content:"}),o.jsx("textarea",{rows:4,placeholder:"Entry content...",value:f.content,onChange:m=>{const k=[...a];k[d]={...f,content:m.target.value},c(k)},required:!0})]})]},f.id||d)),a.length===0&&o.jsxs("div",{className:"no-entries",children:[o.jsx("p",{children:"No entries in this lorebook yet."}),o.jsx("button",{type:"button",className:"primary",onClick:()=>{const f={id:Date.now()+Math.random(),title:"",content:"",keywords:[],secondary_keywords:[],logic:"AND ANY",trigger:100,order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([f])},children:"Add First Entry"})]})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"primary",onClick:g,children:"Save All Changes"}),o.jsx("button",{type:"button",className:"secondary",onClick:j,children:"Cancel"})]})]})})]})})]})]})},Hh=({onCreate:e,onCancel:t})=>{const[n,r]=N.useState(""),s=async()=>{const i=n.split(`
`).filter(a=>a.trim()).map(a=>({name:a.trim(),description:"",entries:[]}));await e(i),r("")};return o.jsxs("div",{className:"bulk-creation-panel",children:[o.jsx("h3",{children:"Create Multiple Lorebooks"}),o.jsx("p",{children:"Enter one lorebook name per line:"}),o.jsx("textarea",{value:n,onChange:l=>r(l.target.value),placeholder:`Fantasy World
Sci-Fi Universe
Historical Era`,rows:6}),o.jsxs("div",{className:"panel-actions",children:[o.jsx("button",{onClick:s,children:"Create"}),o.jsx("button",{className:"secondary",onClick:t,children:"Cancel"})]})]})};function Vh({messageId:e,role:t,onSwipe:n,onEdit:r,onDelete:s,isVisible:l}){if(!l)return null;const i=u=>{u.preventDefault(),u.stopPropagation(),console.log("Swipe clicked for message:",e),n(e)},a=u=>{u.preventDefault(),u.stopPropagation(),console.log("Edit clicked for message:",e),r(e)},c=u=>{u.preventDefault(),u.stopPropagation(),console.log("Delete clicked for message:",e),s(e)};return o.jsxs("div",{className:"message-controls",children:[t==="assistant"&&o.jsx("button",{className:"message-btn swipe-btn",title:"Regenerate message",onClick:i,children:"🔃"}),o.jsx("button",{className:"message-btn edit-btn",title:"Edit message",onClick:a,children:"📝"}),o.jsx("button",{className:"message-btn delete-btn",title:"Delete message",onClick:c,children:"💀"})]})}function Wh(){var vi,xi;const e=Nh(),t=jh(),n=Ch(),r=Sh();rd();const{generateImage:s,generateImageFromLastMessage:l}=Eh(),{suggestLore:i}=_h(),a=N.useRef(null),[c,u]=N.useState(!1),[h,w]=N.useState(null);N.useState({});const[v,y]=N.useState(!1),[g,j]=N.useState(!1),[P,f]=N.useState([]),[d,m]=N.useState("https://example.org"),[k,x]=N.useState([]),[C,E]=N.useState(!1),[O,R]=N.useState(null),[b,Q]=N.useState(!1),re=N.useRef(null),Le=N.useRef(null),[nn,zn]=N.useState(null),[vt,xt]=N.useState(""),[T,I]=N.useState({}),[M,Z]=N.useState({}),[le,rt]=N.useState(null),[st,$t]=N.useState(null),[ot,lt]=N.useState(null);N.useEffect(()=>{n.loadConfig(),r.loadCharacters(),r.loadLorebooks()},[]),N.useEffect(()=>{const p=S=>{try{S&&S.detail&&t.setPhoneStyle(S.detail)}catch{}};return window.addEventListener("coolchat:phoneStyle",p),()=>window.removeEventListener("coolchat:phoneStyle",p)},[]),N.useEffect(()=>{const p=S=>{try{S&&S.detail&&t.updateAppTheme(S.detail)}catch{}};return window.addEventListener("coolchat:themeUpdate",p),()=>window.removeEventListener("coolchat:themeUpdate",p)},[]),N.useEffect(()=>{const p=()=>{try{const S=Vp();t.applyPluginAnimations(S)}catch(S){console.error(S)}};try{Kp(p)}catch{}return p(),()=>{try{Gp(p)}catch{}}},[]);const Ye=(p,S="info")=>{const L=Date.now();x(A=>[...A,{id:L,message:p,type:S}]),setTimeout(()=>x(A=>A.filter(z=>z.id!==L)),4e3)};N.useEffect(()=>{const p=S=>{window.innerWidth<=768&&!S.target.closest(".header")&&E(!1)};if(C)return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[C]),N.useEffect(()=>{a.current&&setTimeout(()=>{try{a.current.scrollTop=a.current.scrollHeight}catch{}},0)},[e.messages]),N.useEffect(()=>{t.showConfig&&(async()=>{try{n.loadModels()}catch(p){console.error("Failed to load models:",p)}})()},[n.activeProvider,t.showConfig]),N.useEffect(()=>{r.selectedLorebook?r.loadLoreEntries(r.selectedLorebook.id):r.setLoreEntries([])},[r.selectedLorebook]);const sd=p=>{if(!p||typeof p!="string")return{obj:null,captionText:""};let S="",L=null;const A=p.replace(/\*+/g,"").trim();try{return L=JSON.parse(A),{obj:L,captionText:""}}catch{}const z=Math.max(A.lastIndexOf("}"),A.lastIndexOf("]"));if(z>0){const $=A.charAt(z),W=$==="}"?"{":"[";let Ut=0,H=-1;for(let ie=z;ie>=0;ie--){const wi=A.charAt(ie);if(wi===$&&Ut++,wi===W&&(Ut--,Ut===0)){H=ie;break}}if(H>=0)try{const ie=A.slice(H,z+1);return L=JSON.parse(ie),S=A.slice(0,H).trim(),{obj:L,captionText:S}}catch{}}const K=A.match(/toolCalls\s*:?\s*(\[[\s\S]*\])$/);if(K)try{const $=K[1];return L={toolCalls:JSON.parse($)},S=A.slice(0,K.index).trim(),{obj:L,captionText:S}}catch{}const U=A.match(/\{[\s\S]*\}/);if(U)try{return L=JSON.parse(U[0]),S=A.slice(0,U.index).trim(),{obj:L,captionText:S}}catch{}return{obj:null,captionText:""}},ui=async p=>{var L,A,z;p.preventDefault(),e.setError(null);const S=e.input.trim();if(S)try{const K=await e.sendMessage(S);await Ma("Raw LLM response: "+K);let U=!1,$="";try{const{obj:W,captionText:Ut}=sd(K);if($=Ut,it("Extraction result: "+JSON.stringify({obj:W,captionText:$})),W||it("No JSON extracted from response"),W&&Array.isArray(W.toolCalls)){for(const H of W.toolCalls)if(!(!H||!H.type))if(H.type==="image_request"&&((L=H.payload)!=null&&L.prompt))await s(H.payload.prompt),U=!0;else if(H.type==="phone_url"&&((A=H.payload)!=null&&A.url)){let ie=H.payload.url;/^https?:/i.test(ie)||(ie="https://"+ie),m(ie),t.setPhoneOpen(!0),$&&e.setMessages([...e.messages,{role:"assistant",content:$}]),U=!0}else H.type==="lore_suggestions"&&Array.isArray((z=H.payload)==null?void 0:z.items)&&(f(H.payload.items.map(ie=>({keyword:ie.keyword,content:ie.content}))),t.setSuggestOpen(!0),U=!0)}else{if(it("No toolCalls array found, trying flat keys"),W&&W.image_request&&(it("Found flat key: image_request"),await s(W.image_request),U=!0),W&&W.phone_url){it("Found flat key: phone_url");let ie=W.phone_url;/^https?:/i.test(ie)||(ie="https://"+ie),m(ie),t.setPhoneOpen(!0),$&&(it("Adding caption message for phone_url: "+$),e.setMessages([...e.messages,{role:"assistant",content:$}])),U=!0}W&&Array.isArray(W.lore_suggestions)&&(it("Found flat key: lore_suggestions"),f(W.lore_suggestions),t.setSuggestOpen(!0),U=!0);const H=/toolCalls\s*:|image_request|phone_url|lore_suggestions/i.test(K);!n.structuredOutput&&!g&&H&&!U&&y(!0)}}catch(W){console.warn("Tool parse failed",W)}it("Parsing complete. Handled: "+U+", Caption text: "+$)}catch(K){console.error("Error sending message:",K),Ye(K.message,"error")}},di=(p,S)=>{S?(re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{R(p),Q(!0)},300)):(re.current&&clearTimeout(re.current),Q(!1),R(null))},fi=(p,S)=>{S?(Le.current&&clearTimeout(Le.current),Le.current=setTimeout(()=>{Z(L=>({...L,[p]:!0}))},300)):(Le.current&&clearTimeout(Le.current),Z(L=>({...L,[p]:!1})))},od=async p=>{Q(!1);try{let S=e.messages;if(p>=S.length||p<0){Ye("Message not found","error");return}const L=S[p];if(L.role!=="assistant"){Ye("Only assistant messages can be regenerated","error");return}let A=null;for(let z=p-1;z>=0;z--)if(S[z].role==="user"){A=S[z].content;break}if(!A){Ye("No user message found to regenerate from","error");return}rt(p),setTimeout(async()=>{e.setSending(!0),e.setError(null),T[p]||(T[p]={currentIndex:0,generations:[L.content]});try{const z=await Yu(A,e.sessionId);await Ma("Raw LLM response after swipe: "+z);const K=T[p];K.generations.push(z),K.currentIndex=K.generations.length-1;const U=[...S];U[p]={...L,content:z},e.setMessages(U),I({...T}),rt(null),$t(p),setTimeout(()=>{$t(null)},800),e.setSending(!1),Ye("Message regenerated successfully","success")}catch(z){console.error("Error during swipe:",z),e.setSending(!1),rt(null),$t(null),Ye("Failed to regenerate message: "+z.message,"error")}},300)}catch(S){console.error("Error during swipe:",S),Ye("Failed to regenerate message: "+S.message,"error"),rt(null)}},ld=p=>{Q(!1);const S=e.messages[p];S&&(zn(p),xt(S.content))},id=async()=>{if(!(!nn||!vt.trim()))try{const p=nn,S=[...e.messages];S[p]={...S[p],content:vt.trim()},e.setMessages(S),zn(null),xt(""),Ye("Message edited successfully","success")}catch(p){console.error("Error editing message:",p),Ye("Failed to edit message: "+p.message,"error")}},ad=()=>{zn(null),xt("")},cd=p=>{if(Q(!1),p>=e.messages.length||p<0)return;const S={...T};delete S[p];const L={};Object.entries(S).forEach(([z,K])=>{const U=parseInt(z);U>p?L[U-1]=K:L[U]=K});const A=e.messages.filter((z,K)=>K!==p);e.setMessages(A),I(L),Ye("Message deleted","success")},pi=p=>{const S=T[p];if(!S||S.currentIndex>0){const L=Math.max(0,((S==null?void 0:S.currentIndex)??0)-1),A=[...e.messages];A[p]={...A[p],content:S.generations[L]};const z={...T};z[p]={...S,currentIndex:L},e.setMessages(A),I(z),lt(p),setTimeout(()=>{lt(null)},1e3)}},hi=p=>{const S=T[p];if(!S||S.currentIndex<S.generations.length-1){const L=Math.min(((S==null?void 0:S.generations.length)??1)-1,((S==null?void 0:S.currentIndex)??0)+1),A=[...e.messages];A[p]={...A[p],content:S.generations[L]};const z={...T};z[p]={...S,currentIndex:L},e.setMessages(A),I(z),lt(p),setTimeout(()=>{lt(null)},1e3)}},[mi,ud]=N.useState([]),[gi,yi]=N.useState({});N.useEffect(()=>{(async()=>{try{const p=await fetch("/plugins");if(p.ok){const S=await p.json();ud(S.plugins||[]),yi(S.enabled||{});try{fl(S.enabled||{})}catch{}try{await Da()}catch(L){console.error(L)}}}catch(p){console.error("Failed to load plugins",p)}})()},[]);const dd=async p=>{try{if(!(await fetch("/plugins/enabled",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw new Error("Save failed");yi(p);try{fl(p);const L=await fetch("/plugins"),A=L.ok?await L.json():null;A&&Qp(A.plugins||[]),await Da(A)}catch(L){console.error(L)}try{await Fe({extensions:p})}catch(L){console.error("Failed to persist extensions to config",L)}}catch(S){console.error(S),alert(S.message)}};return o.jsxs("div",{className:`app ${t.phoneOpen?"phone-open":""}`,children:[o.jsx("div",{className:"bg-animations",children:(((vi=t.appTheme)==null?void 0:vi.background_animations)||[]).map((p,S)=>o.jsx("div",{className:`anim-${p}`},S))}),o.jsxs("header",{className:`header ${C?"menu-open":""}`,role:"banner",children:[o.jsx("h1",{children:"CoolChat"}),o.jsx("div",{className:"spacer"}),o.jsxs("div",{className:"header-buttons",children:[o.jsx("button",{className:"secondary","aria-label":t.showCharacters?"Hide characters panel":"Show characters panel","aria-expanded":t.showCharacters,onClick:()=>t.setShowCharacters(!t.showCharacters),children:t.showCharacters?"Hide Characters":"Characters"}),o.jsx("button",{className:"secondary","aria-label":t.showChats?"Hide chats panel":"Show chats panel","aria-expanded":t.showChats,onClick:()=>t.setShowChats(!t.showChats),children:t.showChats?"Hide Chats":"Chats"}),o.jsx("button",{className:"secondary","aria-label":t.showTools?"Hide tools panel":"Show tools panel","aria-expanded":t.showTools,onClick:()=>t.setShowTools(!t.showTools),children:t.showTools?"Hide Tools":"Tools"}),o.jsx("button",{className:"secondary","aria-label":t.showLorebooks?"Hide lorebooks panel":"Show lorebooks panel","aria-expanded":t.showLorebooks,onClick:()=>t.setShowLorebooks(!t.showLorebooks),children:t.showLorebooks?"Hide Lorebooks":"Lorebooks"}),o.jsx("button",{className:"secondary","aria-label":t.phoneOpen?"Close phone simulator":"Open phone simulator","aria-expanded":t.phoneOpen,onClick:()=>t.setPhoneOpen(!t.phoneOpen),children:t.phoneOpen?"Close Phone":"Phone"}),o.jsx("button",{className:"secondary","aria-label":t.showConfig?"Close settings":"Open settings","aria-expanded":t.showConfig,onClick:()=>t.setShowConfig(!t.showConfig),children:t.showConfig?"Close Settings":"Settings"})]}),o.jsx("button",{className:"menu-toggle","aria-label":"Toggle menu","aria-expanded":C,onClick:()=>E(!C),children:"☰"})]}),t.phoneOpen&&o.jsxs("div",{className:`phone-panel ${t.phoneStyle}`,children:[o.jsx("div",{className:"outer-overlay",onClick:p=>{p.target===p.currentTarget&&t.setPhoneOpen(!1)}}),o.jsx("div",{className:"skin"}),o.jsxs("div",{className:"screen",children:[o.jsx("div",{className:"statusbar",children:t.phoneStyle==="iphone"?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"left",children:"📶"}),o.jsx("span",{className:"time",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.jsx("span",{className:"right",children:"🔊 📶"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.jsx("span",{children:"📶 📍 🔔"})]})}),o.jsxs("div",{className:"bar",children:[o.jsx("input",{style:{flex:1},placeholder:"https://",value:d,onChange:p=>m(p.target.value)}),o.jsx("button",{className:"secondary",onClick:()=>{let p=d;/^https?:/i.test(p)||(p="https://"+p),m(p)},children:"Go"}),o.jsx("button",{className:"secondary",title:"Open in new tab",onClick:()=>{try{let p=d;/^https?:/i.test(p)||(p="https://"+p),window.open(p,"_blank")}catch(p){console.error(p)}},children:"✨"})]}),o.jsx("iframe",{src:/^https?:/i.test(d)?d:"https://"+d,title:"Phone",onLoad:()=>{try{fetch("/phone/debug",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"load",url:d})})}catch(p){console.error(p)}},onError:()=>{try{fetch("/phone/debug",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"error",url:d})})}catch(p){console.error(p)}}})]})]}),o.jsxs("main",{className:"chat",children:[t.showCharacters&&o.jsxs("section",{className:"characters overlay",children:[o.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[o.jsx("h2",{style:{margin:0},children:"Characters"}),o.jsx("button",{className:"secondary",onClick:()=>t.setShowCharacters(!1),children:"Close"})]}),o.jsxs("div",{className:"row",children:[o.jsxs("label",{className:"secondary",style:{padding:"8px 10px",borderRadius:6,cursor:"pointer"},children:["Import JSON/PNG",o.jsx("input",{type:"file",accept:"application/json,.json,image/png",style:{display:"none"},onChange:async p=>{var L;const S=(L=p.target.files)==null?void 0:L[0];if(S){try{if(S.type==="image/png"){const A=new FormData;if(A.append("file",S),!(await fetch("/characters/import",{method:"POST",body:A})).ok)throw new Error("Import failed")}else{const A=await S.text(),z=JSON.parse(A);if(!z.name)throw new Error("JSON must include name");await Ia({name:z.name,description:z.description||"",avatar_url:z.avatar_url||null})}r.loadCharacters()}catch(A){alert(A.message)}p.target.value=""}}})]}),o.jsx("button",{className:"secondary",onClick:()=>r.loadCharacters(),children:"Refresh"})]}),o.jsxs("div",{className:"char-grid",children:[o.jsxs("div",{className:"char-card",onClick:()=>{w(null),u(!0)},children:[o.jsx("img",{src:"https://placehold.co/400x600?text=New+Character",alt:"New Character"}),o.jsx("div",{className:"name",children:"+ New"})]}),r.characters.map(p=>o.jsxs("div",{className:"char-card",children:[o.jsx("img",{src:p.avatar_url||"https://placehold.co/400x600?text=Character",alt:p.name}),o.jsx("div",{className:"name",children:p.name}),o.jsx("div",{className:"cog",onClick:S=>{S.stopPropagation(),w(p),u(!0)},children:o.jsx("span",{children:"⚙️"})}),o.jsx("div",{style:{padding:"8px"},children:o.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[o.jsx("button",{onClick:async()=>{try{await Fe({active_character_id:p.id}),t.setShowCharacters(!1)}catch(S){console.error(S),alert(S.message)}},children:"Use"}),o.jsx("button",{className:"secondary",onClick:async()=>{try{await Xu(p.id),r.loadCharacters()}catch(S){alert(S.message)}},children:"Delete"})]})})]},p.id))]})]}),t.showChats&&o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Chats"}),o.jsx(qh,{sessionId:e.sessionId,setSessionId:e.switchSession,onClose:()=>t.setShowChats(!1)})]}),t.showTools&&o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Tools"}),o.jsx(Kh,{onClose:()=>t.setShowTools(!1)})]}),t.showConfig&&o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Configuration"}),o.jsxs("div",{className:"row",style:{gap:6,marginBottom:8},children:[o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("connection")},children:"Connection"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("persona")},children:"Persona"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("appearance")},children:"Appearance"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("images")},children:"Images"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("prompts")},children:"Prompts"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("advanced")},children:"Advanced"}),o.jsx("button",{className:"secondary",onClick:p=>{p.preventDefault(),t.setSettingsTab("extensions")},children:"Extensions"})]}),t.settingsTab==="connection"&&o.jsxs("form",{className:"config-form",onSubmit:async p=>{var S;p.preventDefault();try{const L=await nt(),A=((S=n.providers)==null?void 0:S[n.activeProvider])||{},z={};for(const U of["api_key","api_base","model","temperature"]){const $=n.configDraft[U],W=A[U]??"";U==="temperature"?typeof $=="number"&&$!==W&&(z[U]=$):$&&$!==W&&(z[U]=$)}if(Object.keys(z).length){const U=Object.entries(z).map(([$,W])=>`- ${$}: old=${A[$]??"(none)"} -> new=${W}`).join(`
`);if(!window.confirm(`Config.json already has this information, would you like to update it or discard?
${U}`)){n.setConfigDraft({api_key:"",api_base:A.api_base||"",model:A.model||"",temperature:A.temperature??.7});return}}const K=await Fe({active_provider:n.activeProvider,providers:{[n.activeProvider]:z},max_context_tokens:n.maxTokens});n.setProviders(K.providers||{})}catch(L){console.error(L),alert(L.message)}},children:[o.jsxs("label",{children:[o.jsx("span",{children:"Provider"}),o.jsxs("select",{value:n.activeProvider,onChange:async p=>{const S=p.target.value;n.setActiveProvider(S);const L=n.providers[S]||{};n.setConfigDraft({api_key:"",api_base:L.api_base||"",model:L.model||"",temperature:L.temperature??.7});try{await n.updateProvider(S)}catch{}},children:[o.jsx("option",{value:"echo",children:"Echo (no API key)"}),o.jsx("option",{value:"openai",children:"OpenAI-compatible"}),o.jsx("option",{value:"openrouter",children:"OpenRouter"}),o.jsx("option",{value:"gemini",children:"Google Gemini"})]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"API Key"}),o.jsx("input",{type:"password",placeholder:(xi=n.providers[n.activeProvider])!=null&&xi.api_key_masked?`Saved: ${n.providers[n.activeProvider].api_key_masked}`:"sk-...",value:n.configDraft.api_key,onChange:p=>n.setConfigDraft({...n.configDraft,api_key:p.target.value})})]}),o.jsxs("label",{children:[o.jsx("span",{children:"API Base"}),o.jsx("input",{type:"text",placeholder:n.activeProvider==="openrouter"?"https://openrouter.ai/api/v1":n.activeProvider==="openai"?"https://api.openai.com/v1":"https://generativelanguage.googleapis.com/v1beta/openai",value:n.configDraft.api_base,onChange:p=>n.setConfigDraft({...n.configDraft,api_base:p.target.value})})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Model"}),n.modelList.length>0?o.jsxs("select",{value:n.configDraft.model||"",onChange:p=>n.setConfigDraft({...n.configDraft,model:p.target.value}),children:[o.jsx("option",{value:"",children:n.loadingModels?"Loading…":"Select a model"}),n.modelList.map(p=>o.jsx("option",{value:p,children:p},p))]}):o.jsx("input",{type:"text",placeholder:n.activeProvider==="gemini"?"gemini-1.5-flash":"gpt-4o-mini",value:n.configDraft.model,onChange:p=>n.setConfigDraft({...n.configDraft,model:p.target.value})})]}),o.jsx("div",{className:"row",children:o.jsx("button",{type:"button",className:"secondary",onClick:async()=>{try{await n.updateProviderConfig(n.activeProvider,n.configDraft)}catch{console.warn("Failed to update provider config")}try{await n.loadModelsForProvider(n.activeProvider)}catch{n.setModelList([])}},disabled:n.loadingModels,children:n.loadingModels?"Refreshing…":"Refresh models"})}),o.jsxs("label",{children:[o.jsx("span",{children:"Temperature"}),o.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:n.configDraft.temperature,onChange:p=>n.setConfigDraft({...n.configDraft,temperature:parseFloat(p.target.value)})})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Structured Output (Gemini)"}),o.jsx("input",{type:"checkbox",checked:n.structuredOutput,onChange:async p=>{try{await n.updateStructuredOutput(p.target.checked)}catch(S){alert(S.message)}}})]}),o.jsxs("div",{className:"row",children:[o.jsx("button",{type:"submit",children:"Save"}),o.jsx("button",{type:"button",className:"secondary",onClick:()=>{var p,S,L;return n.setConfigDraft({api_key:"",api_base:((p=n.providers[n.activeProvider])==null?void 0:p.api_base)||"",model:((S=n.providers[n.activeProvider])==null?void 0:S.model)||"",temperature:((L=n.providers[n.activeProvider])==null?void 0:L.temperature)??.7})},children:"Reset"})]}),o.jsxs("label",{children:[o.jsxs("span",{children:["Max Context Tokens (",n.maxTokens,")"]}),o.jsx("input",{type:"range",min:"512",max:"8192",step:"128",value:n.maxTokens,onChange:p=>n.updateMaxTokens(parseInt(p.target.value,10))})]})]}),t.settingsTab==="persona"&&o.jsxs("div",{className:"config-form",children:[o.jsxs("label",{children:[o.jsx("span",{children:"User Name"}),o.jsx("input",{value:n.userPersona.name,onChange:p=>n.setUserPersona({...n.userPersona,name:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch(p){console.error(p),alert(p.message)}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"User Description"}),o.jsx("textarea",{rows:3,value:n.userPersona.description,onChange:p=>n.setUserPersona({...n.userPersona,description:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch(p){console.error(p),alert(p.message)}}})]})]}),t.settingsTab==="debug"&&o.jsxs("div",{className:"config-form",children:[o.jsxs("label",{children:[o.jsx("span",{children:"Log Prompts"}),o.jsx("input",{type:"checkbox",checked:n.debugFlags.log_prompts,onChange:async p=>{const S=p.target.checked,L={...n.debugFlags,log_prompts:S};n.setDebugFlags(L);try{await n.updateDebugFlags(L)}catch{}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Log Responses"}),o.jsx("input",{type:"checkbox",checked:n.debugFlags.log_responses,onChange:async p=>{const S=p.target.checked,L={...n.debugFlags,log_responses:S};n.setDebugFlags(L);try{await n.updateDebugFlags(L)}catch{}}})]}),o.jsxs("label",{children:[o.jsxs("span",{children:["Max Context Tokens (",n.maxTokens,")"]}),o.jsx("input",{type:"range",min:"512",max:"8192",step:"128",value:n.maxTokens,onChange:async p=>{const S=parseInt(p.target.value,10);n.updateMaxTokens(S);try{await Fe({max_context_tokens:S})}catch{}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"User Name"}),o.jsx("input",{value:n.userPersona.name,onChange:p=>n.setUserPersona({...n.userPersona,name:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch{}}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"User Description"}),o.jsx("textarea",{rows:3,value:n.userPersona.description,onChange:p=>n.setUserPersona({...n.userPersona,description:p.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch{}}})]})]}),t.settingsTab==="appearance"&&o.jsx(Xh,{}),t.settingsTab==="images"&&o.jsx(Qh,{providers:n.providers}),t.settingsTab==="prompts"&&o.jsx(Jh,{}),t.settingsTab==="advanced"&&o.jsx(Gh,{}),t.settingsTab==="extensions"&&o.jsxs("div",{className:"config-form",children:[o.jsx("h3",{children:"Extensions"}),o.jsx("p",{className:"muted",children:"Detected extensions found under /extensions. Enable ones you trust."}),o.jsxs("div",{style:{marginTop:8},children:[mi.length===0?o.jsxs("div",{className:"muted",children:["No extensions detected. If you expect extensions, verify the backend is running and that ",o.jsx("code",{children:"/plugins"})," returns manifests."]}):null,mi.map(p=>o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("strong",{children:p.name||p.id}),o.jsx("div",{className:"muted",children:p.description||""})]}),o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:!!gi[p.id],onChange:S=>{const L={...gi,[p.id]:S.target.checked};dd(L)}})," Enabled"]})]},p.id))]})]}),t.settingsTab==="connection"&&o.jsx("div",{className:"hint",children:o.jsx("p",{className:"muted",children:"OpenRouter uses OpenAI-compatible endpoints. You can set API Base to https://openrouter.ai/api/v1. Gemini uses the OpenAI-compatible base at https://generativelanguage.googleapis.com/v1beta/openai."})})]}),t.showLorebooks&&o.jsx("section",{className:"panel overlay",children:o.jsx(Bh,{onClose:()=>t.setShowLorebooks(!1)})}),o.jsxs("div",{className:"messages","aria-live":"polite",ref:a,children:[e.messages.map((p,S)=>{const L=p.id||`msg-${S}`,A=O===S&&b,z=nn===S,K=le===S,U=st===S,$=ot===S,W=T[S]&&T[S].generations.length>1,Ut=M[S]||!1;return o.jsx("div",{className:`message ${p.role}${A?" message-hovered":""}${z?" message-editing":""}${K?" message-animating-swipe":""}${U?" message-swipe-new":""}${$?" message-flip":""}`,onMouseEnter:()=>{di(S,!0),W&&fi(S,!0)},onMouseLeave:()=>{di(S,!1),W&&fi(S,!1)},children:o.jsxs("div",{className:`bubble ${W?"has-swipes":""}`,children:[o.jsx("div",{className:"bubble-content",children:p.image_url?o.jsxs("div",{children:[o.jsx("img",{src:p.image_url,alt:"generated",style:{maxWidth:"100%",borderRadius:8}}),p.content?o.jsx("div",{className:"img-caption",children:p.content}):null]}):o.jsx(o.Fragment,{children:z?o.jsxs("div",{className:"message-edit-container",children:[o.jsx("textarea",{value:vt,onChange:H=>xt(H.target.value),className:"message-edit-input",autoFocus:!0,rows:Math.ceil(vt.length/60)}),o.jsxs("div",{className:"message-edit-buttons",children:[o.jsx("button",{className:"message-edit-save",onClick:id,children:"💾 Save"}),o.jsx("button",{className:"message-edit-cancel",onClick:ad,children:"❌ Cancel"})]})]}):p.content})}),p.role==="assistant"&&W&&Ut&&o.jsxs("div",{className:"swipe-navigation",children:[o.jsx("button",{className:"swipe-nav-btn swipe-nav-prev",onClick:H=>{H.preventDefault(),H.stopPropagation(),pi(S)},disabled:T[S].currentIndex===0,title:"Previous generation",children:"⬅️"}),o.jsx("span",{className:"swipe-count",children:`${T[S].currentIndex+1}/${T[S].generations.length}`}),o.jsx("button",{className:"swipe-nav-btn swipe-nav-next",onClick:H=>{H.preventDefault(),H.stopPropagation(),hi(S)},disabled:T[S].currentIndex===T[S].generations.length-1,title:"Next generation",children:"➡️"})]}),p.role==="assistant"&&o.jsx("div",{className:"swipe-navigation",children:T[S]&&T[S].generations.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"swipe-nav-btn swipe-nav-prev",onClick:H=>{H.preventDefault(),H.stopPropagation(),pi(S)},disabled:T[S].currentIndex===0,title:"Previous generation",children:"⬅️"}),o.jsx("span",{className:"swipe-count",children:T[S].generations.length>1&&`${T[S].currentIndex+1}/${T[S].generations.length}`}),o.jsx("button",{className:"swipe-nav-btn swipe-nav-next",onClick:H=>{H.preventDefault(),H.stopPropagation(),hi(S)},disabled:T[S].currentIndex===T[S].generations.length-1,title:"Next generation",children:"➡️"})]})}),o.jsx(Vh,{messageId:S,role:p.role,onSwipe:od,onEdit:ld,onDelete:cd,isVisible:A})]})},L)}),e.error&&o.jsx("div",{className:"message error",children:o.jsx("div",{className:"bubble",children:e.error})})]}),o.jsxs("div",{className:"input-tools",children:[o.jsx("button",{className:"secondary","aria-label":"Suggest lore entries from chat",title:"Suggest lore entries from chat",onClick:async()=>{try{const p=await i(e.sessionId);if(!p.suggestions||p.suggestions.length===0){alert("No suggestions");return}f(p.suggestions),t.setSuggestOpen(!0)}catch(p){console.error(p),alert(p.message)}},children:"📖"}),o.jsx("button",{className:"secondary","aria-label":"Generate image from chat",title:"Generate image from chat",onClick:l,children:"🎨"}),o.jsx("button",{className:"secondary","aria-label":"Send URL to phone simulator",title:"Send URL to phone",onClick:()=>{let p=prompt("Open URL on phone:");p&&(/^https?:/i.test(p)||(p="https://"+p),m(p),t.setPhoneOpen(!0))},children:"📱"}),o.jsx("button",{className:"secondary","aria-label":"Scroll to bottom of messages",title:"Scroll to bottom",style:{marginLeft:"auto"},onClick:()=>{try{const p=document.querySelectorAll(".message.assistant");p.length>0?p[p.length-1].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}):a.current&&a.current.scrollTo({top:a.current.scrollHeight,behavior:"smooth"})}catch(p){console.error("Error scrolling to last message:",p)}},children:"⬇️"})]}),o.jsxs("form",{className:"input-row",onSubmit:ui,children:[o.jsx("input",{type:"text",placeholder:"Type your message",value:e.input,onChange:p=>e.setInput(p.target.value),onKeyDown:p=>{p.ctrlKey&&p.key==="Enter"&&ui(p)},disabled:e.sending,"aria-label":"Message input (Ctrl+Enter to send)","aria-describedby":"send-button"}),o.jsx("button",{type:"submit",id:"send-button",disabled:e.sending||!e.input.trim(),children:e.sending?o.jsxs("span",{className:"loading-text",children:[o.jsx("div",{className:"spinner"}),"Sending…"]}):"Send"})]}),c&&o.jsx(em,{character:h,lorebooks:r.lorebooks,onClose:()=>u(!1),onSave:async p=>{try{h?await rh(h.id,p):(it("No toolCalls array found, trying flat keys"),await Ia(p)),r.loadCharacters(),u(!1)}catch(S){alert(S.message)}},onThink:async(p,S)=>{try{const L={...S};return typeof L.alternate_greetings=="string"&&(L.alternate_greetings=L.alternate_greetings.split(",").map(z=>z.trim()).filter(Boolean)),typeof L.tags=="string"&&(L.tags=L.tags.split(",").map(z=>z.trim()).filter(Boolean)),(await suggestCharacterField(p,L)).value}catch(L){return alert(L.message),""}}}),t.suggestOpen&&o.jsx(Zh,{suggestions:P,onClose:()=>t.setSuggestOpen(!1),onApply:async(p,S)=>{try{const A=(await nt()).active_lorebook_ids||[],z=S||A[0];if(!z){alert("No active lorebooks set");return}const K=[];for(const U of p.filter($=>$.include)){const $=await fetch("/lore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:U.keyword,content:U.content})});if($.ok){const W=await $.json();K.push(W.id)}}if(K.length){const $=[...(await(await fetch(`/lorebooks/${z}`)).json()).entry_ids||[],...K];await qu(z,{entry_ids:$})}t.setSuggestOpen(!1)}catch(L){console.error(L),alert(L.message)}}}),v&&o.jsx("section",{className:"panel overlay",onClick:()=>y(!1),children:o.jsxs("div",{className:"dialog",onClick:p=>p.stopPropagation(),children:[o.jsx("h3",{children:"Enable Structured Output?"}),o.jsx("p",{className:"muted",children:"The assistant attempted to call a tool. Structured Output improves tool reliability on Gemini models."}),o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",onChange:p=>j(p.target.checked)})," Don't show again (this session)"]}),o.jsx("span",{style:{flex:1}}),o.jsx("button",{className:"secondary",onClick:()=>y(!1),children:"Cancel"}),o.jsx("button",{onClick:async()=>{try{await Fe({structured_output:!0}),y(!1)}catch(p){alert(String(p))}},children:"Enable"})]})]})})]}),o.jsx("div",{className:"toast-container","aria-live":"assertive","aria-atomic":"true",children:k.map(p=>o.jsxs("div",{className:`toast toast-${p.type}`,children:[p.message,o.jsx("button",{className:"toast-close",onClick:()=>x(S=>S.filter(L=>L.id!==p.id)),"aria-label":"Dismiss notification",children:"×"})]},p.id))})]})}function Qh(){var v;const[e,t]=N.useState({active:"pollinations",pollinations:{api_key:"",model:""},dezgo:{api_key:"",model:"",lora_flux_1:"",lora_flux_2:"",lora_sd1_1:"",lora_sd1_2:"",transparent:!1,width:"",height:"",steps:"",upscale:!1}}),[n,r]=N.useState([]),[s,l]=N.useState("");N.useEffect(()=>{(async()=>{var y,g;try{const j=await nt();t(j.images);const P=await sh(j.images.active);r(P.models||[]);const f=a((g=(y=j.images)==null?void 0:y.dezgo)==null?void 0:g.model);l(f)}catch(j){console.error(j)}})()},[]);const i=async y=>{try{await Fe({images:y})}catch(g){console.error(g),alert(g.message)}},a=y=>{const g=(y||"").toLowerCase();return g.includes("flux")?"flux":g.includes("lightning")?"sdxl_lightning":g.includes("sdxl")?"sdxl":"sd1"},c=a((v=e.dezgo)==null?void 0:v.model),u=s||c,h=[{id:"flux",label:"Flux"},{id:"sdxl",label:"SDXL"},{id:"sdxl_lightning",label:"SDXL Lightning"},{id:"sd1",label:"SD1"}],w=(n||[]).filter(y=>a(y)===u);return o.jsxs("div",{className:"config-form",children:[o.jsxs("label",{children:[o.jsx("span",{children:"Active Provider"}),o.jsxs("select",{value:e.active,onChange:async y=>{const g=y.target.value,j={...e,active:g};t(j),await i(j)},children:[o.jsx("option",{value:"pollinations",children:"Pollinations"}),o.jsx("option",{value:"dezgo",children:"Dezgo"})]})]}),e.active==="pollinations"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"Model"}),o.jsxs("select",{value:e.pollinations.model||"",onChange:async y=>{const g=y.target.value,j={...e,pollinations:{...e.pollinations,model:g}};t(j),await i(j)},children:[o.jsx("option",{value:"",children:"(default)"}),n.map(y=>o.jsx("option",{value:y,children:y},y))]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"API Key"}),o.jsx("input",{placeholder:e.pollinations.api_key_masked?`Saved: ${e.pollinations.api_key_masked}`:"",value:e.pollinations.api_key||"",onChange:y=>t(g=>({...g,pollinations:{...g.pollinations,api_key:y.target.value}}))})]})]}),e.active==="dezgo"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"API Key"}),o.jsx("input",{placeholder:e.dezgo.api_key_masked?`Saved: ${e.dezgo.api_key_masked}`:"",value:e.dezgo.api_key||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,api_key:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Family"}),o.jsx("select",{value:u,onChange:y=>l(y.target.value),children:h.map(y=>o.jsx("option",{value:y.id,children:y.label},y.id))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Model"}),o.jsxs("select",{value:e.dezgo.model||"",onChange:y=>{const g=y.target.value,j=a(g),P={...e,dezgo:{...e.dezgo,model:g,steps:j==="flux"?4:j==="sdxl_lightning"?"":e.dezgo.steps||30}};t(P),i(P)},children:[o.jsx("option",{value:"",children:"(default)"}),w.map(y=>o.jsx("option",{value:y,children:y},y))]})]}),o.jsxs("div",{className:"muted",children:["Family: ",u.toUpperCase()]}),o.jsx("div",{className:"muted",children:u==="sd1"?"Transparent background disabled; Upscale available.":u==="sdxl_lightning"?"Steps disabled (Lightning is fixed).":"Transparent background available; consider steps ~30."}),u==="flux"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"Flux LORA #1 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_flux_1||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_flux_1:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Flux LORA #2 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_flux_2||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_flux_2:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 1 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_flux_1,value:e.dezgo.lora1_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora1_strength:parseFloat(y.target.value)}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 2 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_flux_2,value:e.dezgo.lora2_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora2_strength:parseFloat(y.target.value)}}))})]})]}),u==="sd1"&&o.jsxs(o.Fragment,{children:[o.jsxs("label",{children:[o.jsx("span",{children:"SD1 LORA #1 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_sd1_1||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_sd1_1:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"SD1 LORA #2 (SHA256)"}),o.jsx("input",{value:e.dezgo.lora_sd1_2||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora_sd1_2:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 1 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_sd1_1,value:e.dezgo.lora1_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora1_strength:parseFloat(y.target.value)}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"LoRA 2 Strength"}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_sd1_2,value:e.dezgo.lora2_strength??.7,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,lora2_strength:parseFloat(y.target.value)}}))})]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Width"}),o.jsx("input",{type:"number",value:e.dezgo.width||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,width:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Height"}),o.jsx("input",{type:"number",value:e.dezgo.height||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,height:y.target.value}}))})]}),u!=="sdxl_lightning"&&o.jsxs("label",{children:[o.jsx("span",{children:"Steps"}),o.jsx("input",{type:"number",value:e.dezgo.steps||"",onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,steps:y.target.value}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Transparent Background"}),o.jsx("input",{type:"checkbox",disabled:u==="sd1",checked:!!e.dezgo.transparent,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,transparent:y.target.checked}}))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Upscale"}),o.jsx("input",{type:"checkbox",disabled:u!=="sd1",checked:!!e.dezgo.upscale,onChange:y=>t(g=>({...g,dezgo:{...g.dezgo,upscale:y.target.checked}}))})]})]}),o.jsx("div",{className:"row",style:{gridColumn:"1 / -1"},children:o.jsx("button",{onClick:async()=>{try{const y=(await nt()).images;if(JSON.stringify(e)!==JSON.stringify(y)&&!window.confirm("Images config.json will be updated. Proceed?"))return;await i(e),alert("Saved")}catch(y){console.error(y),alert(y.message)}},children:"Save Image Settings"})})]})}function Jh(){const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,l]=N.useState(""),[i,a]=N.useState({lore_suggest:"",image_summary:"",main:"",tool_call:""}),[c,u]=N.useState({}),[h,w]=N.useState(""),[v,y]=N.useState(""),[g,j]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const k=await gh();t(k.all||[]),r(k.active||[]),a(k.system||{lore_suggest:"",image_summary:""}),u(k.variables||{})}catch(k){console.error(k)}})()},[]);const P=async(k=e,x=n,C=i,E=c)=>{try{await yh({all:k,active:x,system:C,variables:E}),t(k),r(x),a(C),u(E)}catch(O){console.error(O),alert(O.message)}},f=k=>{const x=n.includes(k)?n.filter(C=>C!==k):[...n,k];P(e,x)},d=()=>{const k=s.trim();if(!k)return;const x=[...e,k];l(""),P(x,n)},m=k=>{const x=e.filter(E=>E!==k),C=n.filter(E=>E!==k);P(x,C)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"config-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsx("h3",{children:"System Prompts"}),o.jsxs("div",{className:"muted",children:["These prompts guide built-in tools. ",o.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),j(!0)},children:"Use placeholders"}),"."]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Main System Prompt"}),o.jsx("textarea",{rows:4,value:i.main||"",onChange:k=>a(x=>({...x,main:k.target.value})),onBlur:()=>P(e,n,{...i},c),placeholder:"{{tool_call_prompt}}, {{user_persona}}, {{character_description}}, {{tool_list}}, {{conversation}}"})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Tool Call Prompt"}),o.jsx("textarea",{rows:4,value:i.tool_call||"",onChange:k=>a(x=>({...x,tool_call:k.target.value})),onBlur:()=>P(e,n,{...i},c),placeholder:"Describe structured output JSON with toolCalls array."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Lorebook suggestion prompt"}),o.jsx("textarea",{rows:4,value:i.lore_suggest,onChange:k=>a(x=>({...x,lore_suggest:k.target.value})),onBlur:()=>P(e,n,{...i},c),placeholder:"Use {{conversation}} and {{existing_keywords}}"})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Image generation prompt"}),o.jsx("textarea",{rows:4,value:i.image_summary,onChange:k=>a(x=>({...x,image_summary:k.target.value})),onBlur:()=>P(e,n,{...i},c),placeholder:"Use {{conversation}}"})]}),o.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:8},children:[o.jsx("h3",{children:"Variables"}),o.jsxs("div",{className:"muted",children:["Define reusable snippets that replace tags like ",o.jsxs("code",{children:["{","{","company","}","}"]})," anywhere the LLM sees them."]})]}),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("input",{placeholder:"name (e.g., site)",value:h,onChange:k=>w(k.target.value)}),o.jsx("input",{placeholder:"value",value:v,onChange:k=>y(k.target.value)}),o.jsx("button",{className:"secondary",onClick:()=>{const k=h.trim();if(!k)return;const x={...c,[k]:v};w(""),y(""),P(e,n,i,x)},children:"Add"})]}),o.jsx("div",{className:"row",style:{display:"block",marginTop:8},children:Object.entries(c).map(([k,x])=>o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsx("code",{style:{width:160},children:`{{${k}}}`}),o.jsx("input",{style:{flex:1},value:x,onChange:C=>{const E={...c,[k]:C.target.value};u(E)},onBlur:()=>P(e,n,i,c)}),o.jsx("button",{className:"secondary",onClick:()=>{const C={...c};delete C[k],P(e,n,i,C)},children:"Delete"})]},k))}),o.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:8},children:[o.jsx("h3",{children:"General Prompts"}),o.jsx("div",{className:"muted",children:"Short, reusable prompts that can be toggled on to influence replies globally."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"New Prompt"}),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("input",{value:s,onChange:k=>l(k.target.value),placeholder:"Short prompt text to include in system context"}),o.jsx("button",{className:"secondary",onClick:d,children:"Add"})]})]}),o.jsx("div",{className:"row",style:{display:"block"},children:(e||[]).map((k,x)=>o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsx("input",{type:"checkbox",checked:n.includes(k),onChange:()=>f(k)}),o.jsx("span",{style:{flex:1},children:k}),o.jsx("button",{className:"secondary",onClick:()=>m(k),children:"Delete"})]},x))})]}),g&&o.jsx("section",{className:"panel overlay",onClick:()=>j(!1),children:o.jsxs("div",{className:"dialog",onClick:k=>k.stopPropagation(),children:[o.jsx("h3",{children:"Available placeholders"}),o.jsxs("ul",{className:"muted",children:[o.jsxs("li",{children:[o.jsx("code",{children:"{{conversation}}"}),": recent conversation window"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{existing_keywords}}"}),": active lore keywords"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{tool_call_prompt}}"}),": tool call guidance"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{user_persona}}"}),": user persona summary"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{character_description}}"}),": character description/personality"]}),o.jsxs("li",{children:[o.jsx("code",{children:"{{tool_list}}"}),": enabled tools list"]}),Object.keys(c).map(k=>o.jsxs("li",{children:[o.jsx("code",{children:`{{${k}}}`}),": variable"]},k))]}),o.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:o.jsx("button",{className:"secondary",onClick:()=>j(!1),children:"Close"})})]})})]})}function Kh({onClose:e}){var m,k;const[t,n]=N.useState({phone:!1,image_gen:!1,lore_suggest:!1}),[r,s]=N.useState(!1),[l,i]=N.useState(!1),[a,c]=N.useState([]),[u,h]=N.useState([]),[w,v]=N.useState(""),[y,g]=N.useState(""),[j,P]=N.useState("");N.useEffect(()=>{(async()=>{try{const x=await nt();s(!!x.structured_output);const C=x.active_character_id,E=await(await fetch(`/tools/settings${C?`?character_id=${C}`:""}`)).json();n(E.enabled||{})}catch(x){console.error(x)}})()},[]);const f=async x=>{try{const E=(await nt()).active_character_id;await fetch(`/tools/settings${E?`?character_id=${E}`:""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:x})}),n(x),!l&&(x.phone||x.image_gen||x.lore_suggest)&&!r&&(alert("Enabling tools benefits from Structured Output. You can toggle it in Connection settings."),i(!0))}catch(C){console.error(C),alert("Save failed")}};N.useEffect(()=>{(async()=>{try{const x=await xh();c(x.servers||[]);const C=await kh();h(C.items||[])}catch(x){console.error(x)}})()},[]);const d=async x=>{try{await wh({servers:x}),c(x)}catch(C){console.error(C),alert("Save failed")}};return o.jsxs("div",{className:"config-form",children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!t.phone,onChange:x=>f({...t,phone:x.target.checked})}),"Phone Panel ",o.jsx("em",{children:"(phone_url)"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!t.image_gen,onChange:x=>f({...t,image_gen:x.target.checked})}),"Image Generation ",o.jsx("em",{children:"(image_request)"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:!!t.lore_suggest,onChange:x=>f({...t,lore_suggest:x.target.checked})}),"Lore Suggest ",o.jsx("em",{children:"(lore_suggestions)"})]})]}),o.jsx("p",{className:"muted",style:{marginTop:12},children:'When tools are enabled, the assistant receives concise instructions about each tool. For Gemini models, enable "Structured Output" in Connection to get reliable tool-usage responses.'}),o.jsx("hr",{}),o.jsx("h3",{children:"MCP Servers"}),o.jsxs("label",{children:[o.jsx("span",{children:"Catalog"}),o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsxs("select",{value:w,onChange:x=>v(x.target.value),children:[o.jsx("option",{value:"",children:"(select server)"}),u.map((x,C)=>o.jsx("option",{value:C,children:x.name},C))]}),w!==""&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"secondary",onClick:()=>{const x=u[parseInt(w,10)];if(!x)return;const C=[...a,{name:x.name,url:x.url}];d(C)},children:"Add Server"}),o.jsx("a",{className:"secondary",href:(m=u[parseInt(w,10)])==null?void 0:m.url,target:"_blank",rel:"noreferrer",children:"Open"})]})]}),w!==""&&o.jsx("div",{className:"muted",style:{marginTop:6},children:(k=u[parseInt(w,10)])==null?void 0:k.description})]}),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsx("input",{placeholder:"Name",value:y,onChange:x=>g(x.target.value)}),o.jsx("input",{placeholder:"URL or command",value:j,onChange:x=>P(x.target.value)}),o.jsx("button",{onClick:()=>{const x=y.trim(),C=j.trim();if(!x||!C)return;const E=[...a,{name:x,url:C}];d(E),g(""),P("")},children:"Add"})]}),o.jsx("div",{style:{marginTop:8},children:a.map((x,C)=>o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginBottom:6,padding:8,background:"var(--panel)",borderRadius:8},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("strong",{style:{fontSize:14},children:x.name}),o.jsx("button",{className:"secondary",onClick:()=>{const E=a.filter((O,R)=>R!==C);d(E)},children:"Remove"})]}),o.jsx("div",{className:"muted",style:{fontSize:12,wordBreak:"break-all"},children:x.url})]},C))}),o.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:o.jsx("button",{className:"secondary",onClick:e,children:"Close"})})]})}function Gh(){const[e,t]=N.useState(""),[n,r]=N.useState(!0),[s,l]=N.useState(null);return N.useEffect(()=>{(async()=>{try{r(!0);const i=await fetch("/config/raw");if(!i.ok)throw new Error(`HTTP ${i.status}`);const a=await i.json();t(JSON.stringify(a,null,2))}catch(i){console.error(i),l(String(i)),t("")}finally{r(!1)}})()},[]),o.jsxs("div",{children:[o.jsx("p",{className:"muted",children:"Full settings.json (copy/share):"}),n?o.jsx("div",{className:"muted",children:"Loading settings…"}):s?o.jsxs("div",{className:"muted",children:["Unable to load settings: ",s]}):o.jsx("textarea",{rows:16,style:{width:"100%"},value:e,onChange:i=>t(i.target.value)}),o.jsxs("div",{className:"row",style:{marginTop:8},children:[o.jsx("button",{className:"secondary",onClick:()=>{const i=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(i),c=document.createElement("a");c.href=a,c.download="settings.json",c.click(),URL.revokeObjectURL(a)},children:"Export settings.json"}),o.jsxs("label",{className:"secondary",style:{padding:"8px 10px",borderRadius:6,cursor:"pointer"},children:["Import settings.json",o.jsx("input",{type:"file",accept:"application/json,.json",style:{display:"none"},onChange:async i=>{var c;const a=(c=i.target.files)==null?void 0:c[0];if(a)try{const u=await a.text(),h=JSON.parse(u);if(!(await fetch("/config/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Import failed");alert("Imported. Reloading..."),location.reload()}catch(u){console.error(u),alert(u.message)}finally{i.target.value=""}}})]}),o.jsx("button",{onClick:async()=>{try{const i=JSON.parse(e);if(!(await fetch("/config/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw new Error("Save failed");alert("Saved. Reloading..."),location.reload()}catch(i){console.error(i),alert(i.message)}},children:"Save settings.json"})]}),o.jsx("hr",{}),o.jsx("p",{className:"muted",children:"Advanced settings"})]})}function Yh(){const[e,t]=N.useState([]),[n,r]=N.useState("");N.useState(null);const s=async()=>{try{const l=await fetch("/themes");if(l.ok){const i=await l.json();t(i.names||[])}}catch(l){console.error(l)}};return N.useEffect(()=>{s()},[]),o.jsxs("div",{className:"row",style:{gap:8},children:[o.jsxs("select",{value:n,onChange:l=>r(l.target.value),children:[o.jsx("option",{value:"",children:"(select)"}),e.map(l=>o.jsx("option",{value:l,children:l},l))]}),o.jsx("button",{className:"secondary",onClick:async()=>{if(n)try{const l=await fetch(`/themes/${n}`);if(!l.ok)throw new Error("Load failed");const i=await l.json();await fetch("/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:i})});try{const a=document.documentElement;a.style.setProperty("--primary",i.primary),a.style.setProperty("--panel",i.secondary),a.style.setProperty("--text",i.text1),a.style.setProperty("--muted",i.text2),a.style.setProperty("--assistant",i.highlight),a.style.setProperty("--bg",i.lowlight)}catch(a){console.error(a)}alert("Theme loaded")}catch(l){console.error(l),alert(l.message)}},children:"Load Theme"}),o.jsx("button",{onClick:async()=>{const l=prompt("Save theme as:");if(l)try{const a=(await nt()).theme||{};if(!(await fetch("/themes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,theme:a})})).ok)throw new Error("Save theme failed");alert("Theme saved"),s()}catch(i){console.error(i),alert(i.message)}},children:"Save Current Theme"})]})}function Xh(){const[e,t]=N.useState({primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827",phone_style:"classic"}),[n,r]=N.useState([{name:"Default",theme:{primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827"}},{name:"Dark",theme:{primary:"#8b5cf6",secondary:"#1f2937",text1:"#f9fafb",text2:"#d1d5db",highlight:"#f59e0b",lowlight:"#111827"}},{name:"Light",theme:{primary:"#3b82f6",secondary:"#f3f4f6",text1:"#111827",text2:"#6b7280",highlight:"#059669",lowlight:"#f9fafb"}},{name:"Forest",theme:{primary:"#059669",secondary:"#064e3b",text1:"#ecfdf5",text2:"#a7f3d0",highlight:"#f59e0b",lowlight:"#022c22"}},{name:"Ocean",theme:{primary:"#0891b2",secondary:"#164e63",text1:"#ecfeff",text2:"#a5f3fc",highlight:"#f97316",lowlight:"#0c4a6e"}},{name:"Rose",theme:{primary:"#db2777",secondary:"#5b21b6",text1:"#fef2f2",text2:"#fecaca",highlight:"#eab308",lowlight:"#581c87"}}]);N.useEffect(()=>{(async()=>{try{const u=await nt();u.theme&&t(u.theme)}catch(u){console.error(u)}})()},[]),N.useEffect(()=>{const u=document.documentElement;u.style.setProperty("--primary",e.primary),u.style.setProperty("--panel",e.secondary),u.style.setProperty("--text",e.text1),u.style.setProperty("--muted",e.text2),u.style.setProperty("--assistant",e.highlight),u.style.setProperty("--bg",e.lowlight)},[e]);const s=async u=>{t(u);try{await Fe({theme:u});try{window.dispatchEvent(new CustomEvent("coolchat:themeUpdate",{detail:u}))}catch{}}catch(h){console.error(h),alert(h.message)}},l=async()=>{try{const u=await fetch("/theme/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({primary:e.primary})});if(!u.ok)throw new Error("Suggest failed");const{colors:h}=await u.json();if(h.length>=5){const w={...e,secondary:h[0],text1:h[1],text2:h[2],highlight:h[3],lowlight:h[4]};await s(w)}}catch(u){console.error(u),alert(u.message)}},i=async u=>{await s({...e,...u.theme})},a=async()=>{const u={...e,secondary:e.lowlight,lowlight:e.secondary,text1:e.text1,text2:e.text2};await s(u)},c=({label:u,keyName:h,withThink:w})=>o.jsxs("label",{children:[o.jsx("span",{children:u}),o.jsxs("div",{className:"row color-row",style:{gap:8,alignItems:"center"},children:[o.jsx("input",{className:"color-swatch",type:"color",value:e[h],onChange:async v=>{await s({...e,[h]:v.target.value})}}),o.jsx("input",{style:{flex:1},value:e[h],onChange:async v=>{await s({...e,[h]:v.target.value})}}),w&&o.jsx("button",{className:"think",title:"AI suggests complementary colors for this primary",onClick:l,children:"💭"})]})]});return o.jsxs("div",{className:"config-form",children:[o.jsxs("div",{className:"theme-preview",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16,padding:12,background:"var(--panel)",borderRadius:8,border:"1px solid var(--muted)"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--primary)",width:40,height:20,borderRadius:4,margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Primary"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--bg)",width:40,height:20,borderRadius:4,border:"1px solid var(--secondary)",margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Background"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--panel)",width:40,height:20,borderRadius:4,border:"1px solid var(--muted)",margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Panel"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"var(--assistant)",width:40,height:20,borderRadius:4,margin:"0 auto 8px"}}),o.jsx("small",{style:{color:"var(--text)"},children:"Assistant"})]})]}),o.jsxs("label",{style:{gridColumn:"1 / -1"},children:[o.jsx("span",{children:"Preset Themes"}),o.jsxs("div",{className:"row",style:{gap:6,flexWrap:"wrap",marginTop:6},children:[n.map((u,h)=>o.jsx("button",{className:"secondary theme-btn",style:{background:`linear-gradient(45deg, ${u.theme.primary}, ${u.theme.secondary})`,color:u.theme.text1,border:"none",borderRadius:6,padding:"6px 12px",fontSize:12,cursor:"pointer"},onClick:()=>i(u),title:`Apply ${u.name} theme`,children:u.name},h)),o.jsx("button",{className:"secondary",onClick:a,title:"Swap background colors for high contrast",children:"🔄 Invert BG"})]})]}),o.jsx(c,{label:"Primary",keyName:"primary",withThink:!0}),o.jsx(c,{label:"Secondary",keyName:"secondary"}),o.jsx(c,{label:"Text 1",keyName:"text1"}),o.jsx(c,{label:"Text 2",keyName:"text2"}),o.jsx(c,{label:"Highlight",keyName:"highlight"}),o.jsx(c,{label:"Lowlight",keyName:"lowlight"}),o.jsxs("label",{children:[o.jsx("span",{children:"Phone Style"}),o.jsxs("select",{value:e.phone_style||"classic",onChange:async u=>{const h={...e,phone_style:u.target.value};await s(h);try{window.dispatchEvent(new CustomEvent("coolchat:phoneStyle",{detail:h.phone_style}))}catch{}},children:[o.jsx("option",{value:"classic",children:"Classic"}),o.jsx("option",{value:"modern",children:"Modern"}),o.jsx("option",{value:"iphone",children:"iPhone"}),o.jsx("option",{value:"cyberpunk",children:"Cyberpunk"})]})]}),o.jsxs("label",{style:{gridColumn:"1 / -1"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:["Background Animations",o.jsx("small",{style:{color:"var(--muted)",fontWeight:"normal"},children:"(Multiple allowed)"})]}),o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[o.jsxs("select",{id:"anim-select",style:{flex:1},children:[o.jsx("option",{value:"gradient_flow",children:"Gradient Flow"}),o.jsx("option",{value:"floating_squares",children:"Floating Squares"}),o.jsx("option",{value:"waves",children:"Ocean Waves"}),o.jsx("option",{value:"neon_rain",children:"Neon Rain"}),o.jsx("option",{value:"matrix",children:"Matrix Code"}),o.jsx("option",{value:"particles",children:"Floating Particles"}),o.jsx("option",{value:"geometric",children:"Geometric Shapes"})]}),o.jsx("button",{className:"secondary",onClick:()=>{try{const u=document.querySelector("#anim-select"),h=u==null?void 0:u.value;if(!h||h==="")return;const w=Array.isArray(e.background_animations)?[...e.background_animations]:[];!w.includes(h)&&w.length<3?s({...e,background_animations:[...w,h]}):w.length>=3&&alert("Maximum 3 background animations allowed")}catch(u){console.error(u)}},children:"+ Add"})]}),o.jsx("div",{className:"row",style:{gap:6,flexWrap:"wrap"},children:(e.background_animations||[]).map((u,h)=>o.jsxs("span",{className:"tag",style:{padding:"4px 8px",borderRadius:12,background:"var(--panel)",border:"1px solid var(--muted)",fontSize:12,display:"flex",alignItems:"center",gap:4},children:[u,o.jsx("button",{className:"remove-tag",onClick:()=>{const w=(e.background_animations||[]).filter(v=>v!==u);s({...e,background_animations:w})},style:{border:"none",background:"transparent",color:"var(--muted)",cursor:"pointer",fontSize:14,lineHeight:1},children:"×"})]},h))})]}),o.jsx("hr",{}),o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{children:o.jsx("strong",{children:"Saved Themes"})}),o.jsx("button",{className:"secondary",onClick:async()=>{const u=prompt("Export current theme as:");u&&u.trim()&&(await fetch("/themes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.trim(),theme:{...e}})}),alert("Theme exported: "+u.trim()))},title:"Export current theme to saved themes",children:"📤 Export"})]}),o.jsx("div",{style:{marginTop:8},children:o.jsx(Yh,{})})]})]})}function Zh({suggestions:e,onClose:t,onApply:n}){const[r,s]=N.useState(()=>(e||[]).map(u=>({include:!0,keyword:u.keyword||"",content:u.content||""}))),[l,i]=N.useState([]),[a,c]=N.useState("");return N.useEffect(()=>{(async()=>{var u;try{const w=(await nt()).active_lorebook_ids||[];if(w.length){const y=(await ai()).filter(g=>w.includes(g.id)).map(g=>({id:g.id,name:g.name}));i(y),c(String(((u=y[0])==null?void 0:u.id)||""))}}catch(h){console.error(h)}})()},[]),o.jsxs("section",{className:"panel overlay",children:[o.jsx("h2",{children:"Lore Suggestions"}),l.length>1&&o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsx("span",{className:"muted",children:"Target Lorebook"}),o.jsx("select",{value:a,onChange:u=>c(u.target.value),children:l.map(u=>o.jsx("option",{value:u.id,children:u.name},u.id))})]}),o.jsx("div",{className:"char-list",style:{maxHeight:360,overflow:"auto"},children:r.map((u,h)=>o.jsxs("div",{className:"char-item",style:{flexDirection:"column",alignItems:"stretch"},children:[o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsx("input",{type:"checkbox",checked:u.include,onChange:w=>s(v=>v.map((y,g)=>g===h?{...y,include:w.target.checked}:y))}),o.jsx("input",{placeholder:"Keyword",value:u.keyword,onChange:w=>s(v=>v.map((y,g)=>g===h?{...y,keyword:w.target.value}:y))})]}),o.jsx("textarea",{rows:3,placeholder:"Content",value:u.content,onChange:w=>s(v=>v.map((y,g)=>g===h?{...y,content:w.target.value}:y))})]},h))}),o.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:8},children:[o.jsx("button",{className:"secondary",onClick:t,children:"Cancel"}),o.jsx("button",{onClick:()=>n(r,a?parseInt(a,10):null),children:"Add Selected"})]})]})}function qh({sessionId:e,setSessionId:t,onClose:n}){const[r,s]=N.useState([]),[l,i]=N.useState(""),a=async()=>{try{const c=await ed();s(c.sessions||[])}catch(c){console.error(c)}};return N.useEffect(()=>{a()},[]),o.jsxs("div",{className:"config-form",children:[o.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[o.jsx("select",{value:e,onChange:async c=>{const u=c.target.value;t(u)},children:[...r].map(c=>o.jsx("option",{value:c,children:c},c))}),o.jsx("button",{className:"secondary",onClick:a,children:"Refresh"}),o.jsx("button",{className:"secondary",onClick:async()=>{try{await td(e),await a(),t("default")}catch(c){alert(c.message)}},children:"Reset"}),o.jsx("button",{className:"secondary",onClick:n,children:"Close"})]}),o.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[o.jsx("input",{placeholder:"New session id (e.g., 2025-01-01T12:00)",value:l,onChange:c=>i(c.target.value),style:{flex:1}}),o.jsx("button",{onClick:async()=>{const c=(l||"").trim()||String(Date.now());r.includes(c)||s(u=>[...u,c]),t(c),i("")},children:"New"})]})]})}function em({character:e,onClose:t,onSave:n,onThink:r,lorebooks:s}){const[l,i]=N.useState(()=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",avatar_url:(e==null?void 0:e.avatar_url)||"",first_message:(e==null?void 0:e.first_message)||"",alternate_greetings:((e==null?void 0:e.alternate_greetings)||[]).join(", "),scenario:(e==null?void 0:e.scenario)||"",system_prompt:(e==null?void 0:e.system_prompt)||"",personality:(e==null?void 0:e.personality)||"",mes_example:(e==null?void 0:e.mes_example)||"",creator_notes:(e==null?void 0:e.creator_notes)||"",tags:((e==null?void 0:e.tags)||[]).join(", "),post_history_instructions:(e==null?void 0:e.post_history_instructions)||"",lorebook_ids:(e==null?void 0:e.lorebook_ids)||[],image_prompt_prefix:(e==null?void 0:e.image_prompt_prefix)||"",image_prompt_suffix:(e==null?void 0:e.image_prompt_suffix)||""})),[a,c]=N.useState(null),[u,h]=N.useState(!1),[w,v]=N.useState(!1),y=async g=>{try{c(g);const j=await r(g,l);i(P=>({...P,[g]:j}))}finally{c(null)}};return o.jsx("div",{className:"modal",onClick:t,children:o.jsxs("div",{className:"dialog",onClick:g=>g.stopPropagation(),children:[o.jsx("h2",{children:e?"Edit Character":"New Character"}),o.jsxs("div",{className:"editor-grid",children:[o.jsx("span",{className:"label",children:"Name"}),o.jsxs("div",{children:[o.jsx("input",{value:l.name,onChange:g=>i(j=>({...j,name:g.target.value}))})," ",o.jsx("button",{className:"think",onClick:()=>y("name"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Avatar"}),o.jsxs("div",{children:[l.avatar_url&&o.jsx("img",{src:l.avatar_url,alt:"Avatar preview",style:{width:80,height:80,objectFit:"cover",borderRadius:8,marginRight:8,border:"1px solid #1f2937"}}),o.jsx("input",{type:"file",accept:"image/*",onChange:async g=>{var P;const j=(P=g.target.files)==null?void 0:P[0];if(j)try{v(!0);const f=new FormData;f.append("file",j);const d=await fetch("/characters/upload_avatar",{method:"POST",body:f});if(!d.ok)throw new Error("Upload failed");const m=await d.json();i(k=>({...k,avatar_url:m.avatar_url}))}catch(f){alert(f.message)}finally{v(!1),g.target.value=""}}}),o.jsx("button",{className:`paint ${u?"thinking":""}`,onClick:async()=>{try{h(!0);const g=await fetch("/characters/generate_avatar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({character:l})});if(!g.ok)throw new Error("Generate failed");const j=await g.json();i(P=>({...P,avatar_url:j.avatar_url}))}catch(g){alert(g.message)}finally{h(!1)}},children:"🖌️"})]}),o.jsx("span",{className:"label",children:"Description"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.description,onChange:g=>i(j=>({...j,description:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="description"?"thinking":""}`,onClick:()=>y("description"),children:"💭"})]}),o.jsx("span",{className:"label",children:"First Message"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.first_message,onChange:g=>i(j=>({...j,first_message:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="first_message"?"thinking":""}`,onClick:()=>y("first_message"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Alternate Greetings (comma)"}),o.jsxs("div",{children:[o.jsx("input",{value:l.alternate_greetings,onChange:g=>i(j=>({...j,alternate_greetings:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="alternate_greetings"?"thinking":""}`,onClick:()=>y("alternate_greetings"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Scenario"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.scenario,onChange:g=>i(j=>({...j,scenario:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="scenario"?"thinking":""}`,onClick:()=>y("scenario"),children:"💭"})]}),o.jsx("span",{className:"label",children:"System Prompt"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.system_prompt,onChange:g=>i(j=>({...j,system_prompt:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="system_prompt"?"thinking":""}`,onClick:()=>y("system_prompt"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Personality"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.personality,onChange:g=>i(j=>({...j,personality:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="personality"?"thinking":""}`,onClick:()=>y("personality"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Message Example"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.mes_example,onChange:g=>i(j=>({...j,mes_example:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="mes_example"?"thinking":""}`,onClick:()=>y("mes_example"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Creator Notes"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.creator_notes,onChange:g=>i(j=>({...j,creator_notes:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="creator_notes"?"thinking":""}`,onClick:()=>y("creator_notes"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Prepend to image prompts"}),o.jsxs("div",{children:[o.jsx("input",{value:l.image_prompt_prefix,onChange:g=>i(j=>({...j,image_prompt_prefix:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="image_prompt_prefix"?"thinking":""}`,onClick:()=>y("image_prompt_prefix"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Append to image prompts"}),o.jsxs("div",{children:[o.jsx("input",{value:l.image_prompt_suffix,onChange:g=>i(j=>({...j,image_prompt_suffix:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="image_prompt_suffix"?"thinking":""}`,onClick:()=>y("image_prompt_suffix"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Tags (comma)"}),o.jsx("div",{children:o.jsx("input",{value:l.tags,onChange:g=>i(j=>({...j,tags:g.target.value}))})}),o.jsx("span",{className:"label",children:"Post-History Instructions"}),o.jsxs("div",{children:[o.jsx("textarea",{rows:3,value:l.post_history_instructions,onChange:g=>i(j=>({...j,post_history_instructions:g.target.value}))})," ",o.jsx("button",{className:`think ${a==="post_history_instructions"?"thinking":""}`,onClick:()=>y("post_history_instructions"),children:"💭"})]}),o.jsx("span",{className:"label",children:"Lorebook"}),o.jsx("div",{children:o.jsxs("select",{value:l.lorebook_ids[0]||"",onChange:g=>{const j=g.target.value?[parseInt(g.target.value,10)]:[];i(P=>({...P,lorebook_ids:j}))},children:[o.jsx("option",{value:"",children:"-- None --"}),s.map(g=>o.jsx("option",{value:g.id,children:g.name},g.id))]})})]}),o.jsxs("div",{className:"row",style:{justifyContent:"flex-end",marginTop:12},children:[o.jsx("button",{className:"secondary",onClick:t,children:"Cancel"}),o.jsx("button",{onClick:()=>{const g={...l,alternate_greetings:l.alternate_greetings.split(",").map(j=>j.trim()).filter(Boolean),tags:l.tags.split(",").map(j=>j.trim()).filter(Boolean)};n(g)},children:"Save"})]})]})})}xo.createRoot(document.getElementById("root")).render(o.jsx(sn.StrictMode,{children:o.jsx(Wh,{})}));
