(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function ih(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lh={exports:{}},qi={},ah={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=Symbol.for("react.element"),nv=Symbol.for("react.portal"),rv=Symbol.for("react.fragment"),ov=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),iv=Symbol.for("react.provider"),lv=Symbol.for("react.context"),av=Symbol.for("react.forward_ref"),cv=Symbol.for("react.suspense"),uv=Symbol.for("react.memo"),dv=Symbol.for("react.lazy"),Ku=Symbol.iterator;function fv(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var ch={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uh=Object.assign,dh={};function oo(e,t,n){this.props=e,this.context=t,this.refs=dh,this.updater=n||ch}oo.prototype.isReactComponent={};oo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fh(){}fh.prototype=oo.prototype;function jc(e,t,n){this.props=e,this.context=t,this.refs=dh,this.updater=n||ch}var bc=jc.prototype=new fh;bc.constructor=jc;uh(bc,oo.prototype);bc.isPureReactComponent=!0;var Gu=Array.isArray,hh=Object.prototype.hasOwnProperty,Tc={current:null},ph={key:!0,ref:!0,__self:!0,__source:!0};function mh(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)hh.call(t,r)&&!ph.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:ms,type:e,key:s,ref:i,props:o,_owner:Tc.current}}function hv(e,t){return{$$typeof:ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ms}function pv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xu=/\/+/g;function Nl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pv(""+e.key):t.toString(36)}function ti(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ms:case nv:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Nl(i,0):r,Gu(o)?(n="",e!=null&&(n=e.replace(Xu,"$&/")+"/"),ti(o,t,n,"",function(u){return u})):o!=null&&(Pc(o)&&(o=hv(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Xu,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",Gu(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+Nl(s,a);i+=ti(s,t,n,c,o)}else if(c=fv(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+Nl(s,a++),i+=ti(s,t,n,c,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function js(e,t,n){if(e==null)return e;var r=[],o=0;return ti(e,r,"","",function(s){return t.call(n,s,o++)}),r}function mv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},ni={transition:null},gv={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:ni,ReactCurrentOwner:Tc};function gh(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:js,forEach:function(e,t,n){js(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return js(e,function(){t++}),t},toArray:function(e){return js(e,function(t){return t})||[]},only:function(e){if(!Pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=oo;ae.Fragment=rv;ae.Profiler=sv;ae.PureComponent=jc;ae.StrictMode=ov;ae.Suspense=cv;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv;ae.act=gh;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=uh({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Tc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)hh.call(t,c)&&!ph.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ms,type:e.type,key:o,ref:s,props:r,_owner:i}};ae.createContext=function(e){return e={$$typeof:lv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iv,_context:e},e.Consumer=e};ae.createElement=mh;ae.createFactory=function(e){var t=mh.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:av,render:e}};ae.isValidElement=Pc;ae.lazy=function(e){return{$$typeof:dv,_payload:{_status:-1,_result:e},_init:mv}};ae.memo=function(e,t){return{$$typeof:uv,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=ni.transition;ni.transition={};try{e()}finally{ni.transition=t}};ae.unstable_act=gh;ae.useCallback=function(e,t){return rt.current.useCallback(e,t)};ae.useContext=function(e){return rt.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};ae.useEffect=function(e,t){return rt.current.useEffect(e,t)};ae.useId=function(){return rt.current.useId()};ae.useImperativeHandle=function(e,t,n){return rt.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return rt.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return rt.current.useReducer(e,t,n)};ae.useRef=function(e){return rt.current.useRef(e)};ae.useState=function(e){return rt.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return rt.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return rt.current.useTransition()};ae.version="18.3.1";ah.exports=ae;var S=ah.exports;const O=ih(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=S,vv=Symbol.for("react.element"),xv=Symbol.for("react.fragment"),wv=Object.prototype.hasOwnProperty,Sv=yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kv={key:!0,ref:!0,__self:!0,__source:!0};function yh(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)wv.call(t,r)&&!kv.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:vv,type:e,key:s,ref:i,props:o,_owner:Sv.current}}qi.Fragment=xv;qi.jsx=yh;qi.jsxs=yh;lh.exports=qi;var l=lh.exports,pa={},vh={exports:{}},xt={},xh={exports:{}},wh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,j){var D=A.length;A.push(j);e:for(;0<D;){var F=D-1>>>1,B=A[F];if(0<o(B,j))A[F]=j,A[D]=B,D=F;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var j=A[0],D=A.pop();if(D!==j){A[0]=D;e:for(var F=0,B=A.length,G=B>>>1;F<G;){var Y=2*(F+1)-1,Z=A[Y],te=Y+1,ne=A[te];if(0>o(Z,D))te<B&&0>o(ne,Z)?(A[F]=ne,A[te]=D,F=te):(A[F]=Z,A[Y]=D,F=Y);else if(te<B&&0>o(ne,D))A[F]=ne,A[te]=D,F=te;else break e}}return j}function o(A,j){var D=A.sortIndex-j.sortIndex;return D!==0?D:A.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var c=[],u=[],d=1,f=null,h=3,p=!1,y=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=A)r(u),j.sortIndex=j.expirationTime,t(c,j);else break;j=n(u)}}function v(A){if(x=!1,w(A),!y)if(n(c)!==null)y=!0,M(k);else{var j=n(u);j!==null&&z(v,j.startTime-A)}}function k(A,j){y=!1,x&&(x=!1,m($),$=-1),p=!0;var D=h;try{for(w(j),f=n(c);f!==null&&(!(f.expirationTime>j)||A&&!I());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var B=F(f.expirationTime<=j);j=e.unstable_now(),typeof B=="function"?f.callback=B:f===n(c)&&r(c),w(j)}else r(c);f=n(c)}if(f!==null)var G=!0;else{var Y=n(u);Y!==null&&z(v,Y.startTime-j),G=!1}return G}finally{f=null,h=D,p=!1}}var N=!1,b=null,$=-1,T=5,P=-1;function I(){return!(e.unstable_now()-P<T)}function H(){if(b!==null){var A=e.unstable_now();P=A;var j=!0;try{j=b(!0,A)}finally{j?U():(N=!1,b=null)}}else N=!1}var U;if(typeof g=="function")U=function(){g(H)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,R=C.port2;C.port1.onmessage=H,U=function(){R.postMessage(null)}}else U=function(){E(H,0)};function M(A){b=A,N||(N=!0,U())}function z(A,j){$=E(function(){A(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,M(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var D=h;h=j;try{return A()}finally{h=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,j){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=h;h=A;try{return j()}finally{h=D}},e.unstable_scheduleCallback=function(A,j,D){var F=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?F+D:F):D=F,A){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=D+B,A={id:d++,callback:j,priorityLevel:A,startTime:D,expirationTime:B,sortIndex:-1},D>F?(A.sortIndex=D,t(u,A),n(c)===null&&A===n(u)&&(x?(m($),$=-1):x=!0,z(v,D-F))):(A.sortIndex=B,t(c,A),y||p||(y=!0,M(k))),A},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(A){var j=h;return function(){var D=h;h=j;try{return A.apply(this,arguments)}finally{h=D}}}})(wh);xh.exports=wh;var Ev=xh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=S,yt=Ev;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sh=new Set,Uo={};function pr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Uo[e]=t,e=0;e<t.length;e++)Sh.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=Object.prototype.hasOwnProperty,_v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qu={},Ju={};function Nv(e){return ma.call(Ju,e)?!0:ma.call(Qu,e)?!1:_v.test(e)?Ju[e]=!0:(Qu[e]=!0,!1)}function jv(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bv(e,t,n,r){if(t===null||typeof t>"u"||jv(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lc=/[\-:]([a-z])/g;function Mc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lc,Mc);Ge[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lc,Mc);Ge[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lc,Mc);Ge[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function $c(e,t,n,r){var o=Ge.hasOwnProperty(t)?Ge[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bv(t,n,o,r)&&(n=null),r||o===null?Nv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xn=Cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bs=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),_r=Symbol.for("react.fragment"),Ac=Symbol.for("react.strict_mode"),ga=Symbol.for("react.profiler"),kh=Symbol.for("react.provider"),Eh=Symbol.for("react.context"),Dc=Symbol.for("react.forward_ref"),ya=Symbol.for("react.suspense"),va=Symbol.for("react.suspense_list"),Rc=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Ch=Symbol.for("react.offscreen"),Zu=Symbol.iterator;function fo(e){return e===null||typeof e!="object"?null:(e=Zu&&e[Zu]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,jl;function No(e){if(jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var bl=!1;function Tl(e,t){if(!e||bl)return"";bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a);break}}}finally{bl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?No(e):""}function Tv(e){switch(e.tag){case 5:return No(e.type);case 16:return No("Lazy");case 13:return No("Suspense");case 19:return No("SuspenseList");case 0:case 2:case 15:return e=Tl(e.type,!1),e;case 11:return e=Tl(e.type.render,!1),e;case 1:return e=Tl(e.type,!0),e;default:return""}}function xa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _r:return"Fragment";case Cr:return"Portal";case ga:return"Profiler";case Ac:return"StrictMode";case ya:return"Suspense";case va:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Eh:return(e.displayName||"Context")+".Consumer";case kh:return(e._context.displayName||"Context")+".Provider";case Dc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rc:return t=e.displayName||null,t!==null?t:xa(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return xa(e(t))}catch{}}return null}function Pv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xa(t);case 8:return t===Ac?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _h(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lv(e){var t=_h(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ts(e){e._valueTracker||(e._valueTracker=Lv(e))}function Nh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_h(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wa(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jh(e,t){t=t.checked,t!=null&&$c(e,"checked",t,!1)}function Sa(e,t){jh(e,t);var n=Vn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ka(e,t.type,n):t.hasOwnProperty("defaultValue")&&ka(e,t.type,Vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ed(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ka(e,t,n){(t!=="number"||xi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jo=Array.isArray;function Or(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ea(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function td(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(V(92));if(jo(n)){if(1<n.length)throw Error(V(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vn(n)}}function bh(e,t){var n=Vn(t.value),r=Vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Th(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ca(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Th(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ps,Ph=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ps=Ps||document.createElement("div"),Ps.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ps.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ho(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mv=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(e){Mv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$o[t]=$o[e]})});function Lh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$o.hasOwnProperty(e)&&$o[e]?(""+t).trim():t+"px"}function Mh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Lh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var $v=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _a(e,t){if(t){if($v[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Na(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ja=null;function Oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ba=null,Ir=null,zr=null;function rd(e){if(e=vs(e)){if(typeof ba!="function")throw Error(V(280));var t=e.stateNode;t&&(t=ol(t),ba(e.stateNode,e.type,t))}}function $h(e){Ir?zr?zr.push(e):zr=[e]:Ir=e}function Ah(){if(Ir){var e=Ir,t=zr;if(zr=Ir=null,rd(e),t)for(e=0;e<t.length;e++)rd(t[e])}}function Dh(e,t){return e(t)}function Rh(){}var Pl=!1;function Oh(e,t,n){if(Pl)return e(t,n);Pl=!0;try{return Dh(e,t,n)}finally{Pl=!1,(Ir!==null||zr!==null)&&(Rh(),Ah())}}function Vo(e,t){var n=e.stateNode;if(n===null)return null;var r=ol(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(V(231,t,typeof n));return n}var Ta=!1;if(fn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Ta=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Ta=!1}function Av(e,t,n,r,o,s,i,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ao=!1,wi=null,Si=!1,Pa=null,Dv={onError:function(e){Ao=!0,wi=e}};function Rv(e,t,n,r,o,s,i,a,c){Ao=!1,wi=null,Av.apply(Dv,arguments)}function Ov(e,t,n,r,o,s,i,a,c){if(Rv.apply(this,arguments),Ao){if(Ao){var u=wi;Ao=!1,wi=null}else throw Error(V(198));Si||(Si=!0,Pa=u)}}function mr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ih(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function od(e){if(mr(e)!==e)throw Error(V(188))}function Iv(e){var t=e.alternate;if(!t){if(t=mr(e),t===null)throw Error(V(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return od(o),e;if(s===r)return od(o),t;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?e:t}function zh(e){return e=Iv(e),e!==null?Fh(e):null}function Fh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fh(e);if(t!==null)return t;e=e.sibling}return null}var Bh=yt.unstable_scheduleCallback,sd=yt.unstable_cancelCallback,zv=yt.unstable_shouldYield,Fv=yt.unstable_requestPaint,De=yt.unstable_now,Bv=yt.unstable_getCurrentPriorityLevel,Ic=yt.unstable_ImmediatePriority,Uh=yt.unstable_UserBlockingPriority,ki=yt.unstable_NormalPriority,Uv=yt.unstable_LowPriority,Hh=yt.unstable_IdlePriority,el=null,Gt=null;function Hv(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(el,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:Yv,Vv=Math.log,Wv=Math.LN2;function Yv(e){return e>>>=0,e===0?32:31-(Vv(e)/Wv|0)|0}var Ls=64,Ms=4194304;function bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ei(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=bo(a):(s&=i,s!==0&&(r=bo(s)))}else i=n&~o,i!==0?r=bo(i):s!==0&&(r=bo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-It(t),o=1<<n,r|=e[n],t&=~o;return r}function Kv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gv(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-It(s),a=1<<i,c=o[i];c===-1?(!(a&n)||a&r)&&(o[i]=Kv(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function La(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vh(){var e=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),e}function Ll(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=n}function Xv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-It(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function zc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-It(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ge=0;function Wh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yh,Fc,Kh,Gh,Xh,Ma=!1,$s=[],Dn=null,Rn=null,On=null,Wo=new Map,Yo=new Map,Pn=[],Qv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function id(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(t.pointerId)}}function po(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=vs(t),t!==null&&Fc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Jv(e,t,n,r,o){switch(t){case"focusin":return Dn=po(Dn,e,t,n,r,o),!0;case"dragenter":return Rn=po(Rn,e,t,n,r,o),!0;case"mouseover":return On=po(On,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return Wo.set(s,po(Wo.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Yo.set(s,po(Yo.get(s)||null,e,t,n,r,o)),!0}return!1}function Qh(e){var t=Zn(e.target);if(t!==null){var n=mr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ih(n),t!==null){e.blockedOn=t,Xh(e.priority,function(){Kh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$a(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ja=r,n.target.dispatchEvent(r),ja=null}else return t=vs(n),t!==null&&Fc(t),e.blockedOn=n,!1;t.shift()}return!0}function ld(e,t,n){ri(e)&&n.delete(t)}function Zv(){Ma=!1,Dn!==null&&ri(Dn)&&(Dn=null),Rn!==null&&ri(Rn)&&(Rn=null),On!==null&&ri(On)&&(On=null),Wo.forEach(ld),Yo.forEach(ld)}function mo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ma||(Ma=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,Zv)))}function Ko(e){function t(o){return mo(o,e)}if(0<$s.length){mo($s[0],e);for(var n=1;n<$s.length;n++){var r=$s[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Dn!==null&&mo(Dn,e),Rn!==null&&mo(Rn,e),On!==null&&mo(On,e),Wo.forEach(t),Yo.forEach(t),n=0;n<Pn.length;n++)r=Pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pn.length&&(n=Pn[0],n.blockedOn===null);)Qh(n),n.blockedOn===null&&Pn.shift()}var Fr=xn.ReactCurrentBatchConfig,Ci=!0;function qv(e,t,n,r){var o=ge,s=Fr.transition;Fr.transition=null;try{ge=1,Bc(e,t,n,r)}finally{ge=o,Fr.transition=s}}function e0(e,t,n,r){var o=ge,s=Fr.transition;Fr.transition=null;try{ge=4,Bc(e,t,n,r)}finally{ge=o,Fr.transition=s}}function Bc(e,t,n,r){if(Ci){var o=$a(e,t,n,r);if(o===null)Bl(e,t,r,_i,n),id(e,r);else if(Jv(o,e,t,n,r))r.stopPropagation();else if(id(e,r),t&4&&-1<Qv.indexOf(e)){for(;o!==null;){var s=vs(o);if(s!==null&&Yh(s),s=$a(e,t,n,r),s===null&&Bl(e,t,r,_i,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Bl(e,t,r,null,n)}}var _i=null;function $a(e,t,n,r){if(_i=null,e=Oc(r),e=Zn(e),e!==null)if(t=mr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ih(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _i=e,null}function Jh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bv()){case Ic:return 1;case Uh:return 4;case ki:case Uv:return 16;case Hh:return 536870912;default:return 16}default:return 16}}var $n=null,Uc=null,oi=null;function Zh(){if(oi)return oi;var e,t=Uc,n=t.length,r,o="value"in $n?$n.value:$n.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return oi=o.slice(e,1<r?1-r:void 0)}function si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function As(){return!0}function ad(){return!1}function wt(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?As:ad,this.isPropagationStopped=ad,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),t}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hc=wt(so),ys=Pe({},so,{view:0,detail:0}),t0=wt(ys),Ml,$l,go,tl=Pe({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==go&&(go&&e.type==="mousemove"?(Ml=e.screenX-go.screenX,$l=e.screenY-go.screenY):$l=Ml=0,go=e),Ml)},movementY:function(e){return"movementY"in e?e.movementY:$l}}),cd=wt(tl),n0=Pe({},tl,{dataTransfer:0}),r0=wt(n0),o0=Pe({},ys,{relatedTarget:0}),Al=wt(o0),s0=Pe({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=wt(s0),l0=Pe({},so,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),a0=wt(l0),c0=Pe({},so,{data:0}),ud=wt(c0),u0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=f0[e])?!!t[e]:!1}function Vc(){return h0}var p0=Pe({},ys,{key:function(e){if(e.key){var t=u0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?d0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vc,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),m0=wt(p0),g0=Pe({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=wt(g0),y0=Pe({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vc}),v0=wt(y0),x0=Pe({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),w0=wt(x0),S0=Pe({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),k0=wt(S0),E0=[9,13,27,32],Wc=fn&&"CompositionEvent"in window,Do=null;fn&&"documentMode"in document&&(Do=document.documentMode);var C0=fn&&"TextEvent"in window&&!Do,qh=fn&&(!Wc||Do&&8<Do&&11>=Do),fd=String.fromCharCode(32),hd=!1;function ep(e,t){switch(e){case"keyup":return E0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function _0(e,t){switch(e){case"compositionend":return tp(t);case"keypress":return t.which!==32?null:(hd=!0,fd);case"textInput":return e=t.data,e===fd&&hd?null:e;default:return null}}function N0(e,t){if(Nr)return e==="compositionend"||!Wc&&ep(e,t)?(e=Zh(),oi=Uc=$n=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qh&&t.locale!=="ko"?null:t.data;default:return null}}var j0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!j0[e.type]:t==="textarea"}function np(e,t,n,r){$h(r),t=Ni(t,"onChange"),0<t.length&&(n=new Hc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ro=null,Go=null;function b0(e){hp(e,0)}function nl(e){var t=Tr(e);if(Nh(t))return e}function T0(e,t){if(e==="change")return t}var rp=!1;if(fn){var Dl;if(fn){var Rl="oninput"in document;if(!Rl){var md=document.createElement("div");md.setAttribute("oninput","return;"),Rl=typeof md.oninput=="function"}Dl=Rl}else Dl=!1;rp=Dl&&(!document.documentMode||9<document.documentMode)}function gd(){Ro&&(Ro.detachEvent("onpropertychange",op),Go=Ro=null)}function op(e){if(e.propertyName==="value"&&nl(Go)){var t=[];np(t,Go,e,Oc(e)),Oh(b0,t)}}function P0(e,t,n){e==="focusin"?(gd(),Ro=t,Go=n,Ro.attachEvent("onpropertychange",op)):e==="focusout"&&gd()}function L0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl(Go)}function M0(e,t){if(e==="click")return nl(t)}function $0(e,t){if(e==="input"||e==="change")return nl(t)}function A0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:A0;function Xo(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ma.call(t,o)||!Ft(e[o],t[o]))return!1}return!0}function yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vd(e,t){var n=yd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yd(n)}}function sp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ip(){for(var e=window,t=xi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xi(e.document)}return t}function Yc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D0(e){var t=ip(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sp(n.ownerDocument.documentElement,n)){if(r!==null&&Yc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=vd(n,s);var i=vd(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var R0=fn&&"documentMode"in document&&11>=document.documentMode,jr=null,Aa=null,Oo=null,Da=!1;function xd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Da||jr==null||jr!==xi(r)||(r=jr,"selectionStart"in r&&Yc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&Xo(Oo,r)||(Oo=r,r=Ni(Aa,"onSelect"),0<r.length&&(t=new Hc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=jr)))}function Ds(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionend:Ds("Transition","TransitionEnd")},Ol={},lp={};fn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function rl(e){if(Ol[e])return Ol[e];if(!br[e])return e;var t=br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lp)return Ol[e]=t[n];return e}var ap=rl("animationend"),cp=rl("animationiteration"),up=rl("animationstart"),dp=rl("transitionend"),fp=new Map,wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(e,t){fp.set(e,t),pr(t,[e])}for(var Il=0;Il<wd.length;Il++){var zl=wd[Il],O0=zl.toLowerCase(),I0=zl[0].toUpperCase()+zl.slice(1);Yn(O0,"on"+I0)}Yn(ap,"onAnimationEnd");Yn(cp,"onAnimationIteration");Yn(up,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(dp,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z0=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function Sd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ov(r,t,void 0,e),e.currentTarget=null}function hp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&o.isPropagationStopped())break e;Sd(o,a,u),s=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&o.isPropagationStopped())break e;Sd(o,a,u),s=c}}}if(Si)throw e=Pa,Si=!1,Pa=null,e}function Se(e,t){var n=t[Fa];n===void 0&&(n=t[Fa]=new Set);var r=e+"__bubble";n.has(r)||(pp(t,e,2,!1),n.add(r))}function Fl(e,t,n){var r=0;t&&(r|=4),pp(n,e,r,t)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[Rs]){e[Rs]=!0,Sh.forEach(function(n){n!=="selectionchange"&&(z0.has(n)||Fl(n,!1,e),Fl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rs]||(t[Rs]=!0,Fl("selectionchange",!1,t))}}function pp(e,t,n,r){switch(Jh(t)){case 1:var o=qv;break;case 4:o=e0;break;default:o=Bc}n=o.bind(null,t,n,e),o=void 0,!Ta||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Bl(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Zn(a),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}a=a.parentNode}}r=r.return}Oh(function(){var u=s,d=Oc(n),f=[];e:{var h=fp.get(e);if(h!==void 0){var p=Hc,y=e;switch(e){case"keypress":if(si(n)===0)break e;case"keydown":case"keyup":p=m0;break;case"focusin":y="focus",p=Al;break;case"focusout":y="blur",p=Al;break;case"beforeblur":case"afterblur":p=Al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=r0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=v0;break;case ap:case cp:case up:p=i0;break;case dp:p=w0;break;case"scroll":p=t0;break;case"wheel":p=k0;break;case"copy":case"cut":case"paste":p=a0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=dd}var x=(t&4)!==0,E=!x&&e==="scroll",m=x?h!==null?h+"Capture":null:h;x=[];for(var g=u,w;g!==null;){w=g;var v=w.stateNode;if(w.tag===5&&v!==null&&(w=v,m!==null&&(v=Vo(g,m),v!=null&&x.push(Jo(g,v,w)))),E)break;g=g.return}0<x.length&&(h=new p(h,y,null,n,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==ja&&(y=n.relatedTarget||n.fromElement)&&(Zn(y)||y[hn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?Zn(y):null,y!==null&&(E=mr(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(x=cd,v="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=dd,v="onPointerLeave",m="onPointerEnter",g="pointer"),E=p==null?h:Tr(p),w=y==null?h:Tr(y),h=new x(v,g+"leave",p,n,d),h.target=E,h.relatedTarget=w,v=null,Zn(d)===u&&(x=new x(m,g+"enter",y,n,d),x.target=w,x.relatedTarget=E,v=x),E=v,p&&y)t:{for(x=p,m=y,g=0,w=x;w;w=vr(w))g++;for(w=0,v=m;v;v=vr(v))w++;for(;0<g-w;)x=vr(x),g--;for(;0<w-g;)m=vr(m),w--;for(;g--;){if(x===m||m!==null&&x===m.alternate)break t;x=vr(x),m=vr(m)}x=null}else x=null;p!==null&&kd(f,h,p,x,!1),y!==null&&E!==null&&kd(f,E,y,x,!0)}}e:{if(h=u?Tr(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=T0;else if(pd(h))if(rp)k=$0;else{k=L0;var N=P0}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=M0);if(k&&(k=k(e,u))){np(f,k,n,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ka(h,"number",h.value)}switch(N=u?Tr(u):window,e){case"focusin":(pd(N)||N.contentEditable==="true")&&(jr=N,Aa=u,Oo=null);break;case"focusout":Oo=Aa=jr=null;break;case"mousedown":Da=!0;break;case"contextmenu":case"mouseup":case"dragend":Da=!1,xd(f,n,d);break;case"selectionchange":if(R0)break;case"keydown":case"keyup":xd(f,n,d)}var b;if(Wc)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Nr?ep(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(qh&&n.locale!=="ko"&&(Nr||$!=="onCompositionStart"?$==="onCompositionEnd"&&Nr&&(b=Zh()):($n=d,Uc="value"in $n?$n.value:$n.textContent,Nr=!0)),N=Ni(u,$),0<N.length&&($=new ud($,e,null,n,d),f.push({event:$,listeners:N}),b?$.data=b:(b=tp(n),b!==null&&($.data=b)))),(b=C0?_0(e,n):N0(e,n))&&(u=Ni(u,"onBeforeInput"),0<u.length&&(d=new ud("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=b))}hp(f,t)})}function Jo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ni(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Vo(e,n),s!=null&&r.unshift(Jo(e,s,o)),s=Vo(e,t),s!=null&&r.push(Jo(e,s,o))),e=e.return}return r}function vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kd(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,o?(c=Vo(n,s),c!=null&&i.unshift(Jo(n,c,a))):o||(c=Vo(n,s),c!=null&&i.push(Jo(n,c,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var F0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function Ed(e){return(typeof e=="string"?e:""+e).replace(F0,`
`).replace(B0,"")}function Os(e,t,n){if(t=Ed(t),Ed(e)!==t&&n)throw Error(V(425))}function ji(){}var Ra=null,Oa=null;function Ia(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var za=typeof setTimeout=="function"?setTimeout:void 0,U0=typeof clearTimeout=="function"?clearTimeout:void 0,Cd=typeof Promise=="function"?Promise:void 0,H0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cd<"u"?function(e){return Cd.resolve(null).then(e).catch(V0)}:za;function V0(e){setTimeout(function(){throw e})}function Ul(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ko(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ko(t)}function In(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _d(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var io=Math.random().toString(36).slice(2),Kt="__reactFiber$"+io,Zo="__reactProps$"+io,hn="__reactContainer$"+io,Fa="__reactEvents$"+io,W0="__reactListeners$"+io,Y0="__reactHandles$"+io;function Zn(e){var t=e[Kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hn]||n[Kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_d(e);e!==null;){if(n=e[Kt])return n;e=_d(e)}return t}e=n,n=e.parentNode}return null}function vs(e){return e=e[Kt]||e[hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function ol(e){return e[Zo]||null}var Ba=[],Pr=-1;function Kn(e){return{current:e}}function ke(e){0>Pr||(e.current=Ba[Pr],Ba[Pr]=null,Pr--)}function xe(e,t){Pr++,Ba[Pr]=e.current,e.current=t}var Wn={},Ze=Kn(Wn),ct=Kn(!1),lr=Wn;function Kr(e,t){var n=e.type.contextTypes;if(!n)return Wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ut(e){return e=e.childContextTypes,e!=null}function bi(){ke(ct),ke(Ze)}function Nd(e,t,n){if(Ze.current!==Wn)throw Error(V(168));xe(Ze,t),xe(ct,n)}function mp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(V(108,Pv(e)||"Unknown",o));return Pe({},n,r)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,lr=Ze.current,xe(Ze,e),xe(ct,ct.current),!0}function jd(e,t,n){var r=e.stateNode;if(!r)throw Error(V(169));n?(e=mp(e,t,lr),r.__reactInternalMemoizedMergedChildContext=e,ke(ct),ke(Ze),xe(Ze,e)):ke(ct),xe(ct,n)}var on=null,sl=!1,Hl=!1;function gp(e){on===null?on=[e]:on.push(e)}function K0(e){sl=!0,gp(e)}function Gn(){if(!Hl&&on!==null){Hl=!0;var e=0,t=ge;try{var n=on;for(ge=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}on=null,sl=!1}catch(o){throw on!==null&&(on=on.slice(e+1)),Bh(Ic,Gn),o}finally{ge=t,Hl=!1}}return null}var Lr=[],Mr=0,Pi=null,Li=0,Et=[],Ct=0,ar=null,sn=1,ln="";function Xn(e,t){Lr[Mr++]=Li,Lr[Mr++]=Pi,Pi=e,Li=t}function yp(e,t,n){Et[Ct++]=sn,Et[Ct++]=ln,Et[Ct++]=ar,ar=e;var r=sn;e=ln;var o=32-It(r)-1;r&=~(1<<o),n+=1;var s=32-It(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,sn=1<<32-It(t)+o|n<<o|r,ln=s+e}else sn=1<<s|n<<o|r,ln=e}function Kc(e){e.return!==null&&(Xn(e,1),yp(e,1,0))}function Gc(e){for(;e===Pi;)Pi=Lr[--Mr],Lr[Mr]=null,Li=Lr[--Mr],Lr[Mr]=null;for(;e===ar;)ar=Et[--Ct],Et[Ct]=null,ln=Et[--Ct],Et[Ct]=null,sn=Et[--Ct],Et[Ct]=null}var gt=null,mt=null,_e=!1,Rt=null;function vp(e,t){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,mt=In(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ar!==null?{id:sn,overflow:ln}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,mt=null,!0):!1;default:return!1}}function Ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ha(e){if(_e){var t=mt;if(t){var n=t;if(!bd(e,t)){if(Ua(e))throw Error(V(418));t=In(n.nextSibling);var r=gt;t&&bd(e,t)?vp(r,n):(e.flags=e.flags&-4097|2,_e=!1,gt=e)}}else{if(Ua(e))throw Error(V(418));e.flags=e.flags&-4097|2,_e=!1,gt=e}}}function Td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function Is(e){if(e!==gt)return!1;if(!_e)return Td(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ia(e.type,e.memoizedProps)),t&&(t=mt)){if(Ua(e))throw xp(),Error(V(418));for(;t;)vp(e,t),t=In(t.nextSibling)}if(Td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mt=In(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=gt?In(e.stateNode.nextSibling):null;return!0}function xp(){for(var e=mt;e;)e=In(e.nextSibling)}function Gr(){mt=gt=null,_e=!1}function Xc(e){Rt===null?Rt=[e]:Rt.push(e)}var G0=xn.ReactCurrentBatchConfig;function yo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,e))}return e}function zs(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pd(e){var t=e._init;return t(e._payload)}function wp(e){function t(m,g){if(e){var w=m.deletions;w===null?(m.deletions=[g],m.flags|=16):w.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=Un(m,g),m.index=0,m.sibling=null,m}function s(m,g,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<g?(m.flags|=2,g):w):(m.flags|=2,g)):(m.flags|=1048576,g)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,g,w,v){return g===null||g.tag!==6?(g=Ql(w,m.mode,v),g.return=m,g):(g=o(g,w),g.return=m,g)}function c(m,g,w,v){var k=w.type;return k===_r?d(m,g,w.props.children,v,w.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Nn&&Pd(k)===g.type)?(v=o(g,w.props),v.ref=yo(m,g,w),v.return=m,v):(v=fi(w.type,w.key,w.props,null,m.mode,v),v.ref=yo(m,g,w),v.return=m,v)}function u(m,g,w,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Jl(w,m.mode,v),g.return=m,g):(g=o(g,w.children||[]),g.return=m,g)}function d(m,g,w,v,k){return g===null||g.tag!==7?(g=or(w,m.mode,v,k),g.return=m,g):(g=o(g,w),g.return=m,g)}function f(m,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ql(""+g,m.mode,w),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case bs:return w=fi(g.type,g.key,g.props,null,m.mode,w),w.ref=yo(m,null,g),w.return=m,w;case Cr:return g=Jl(g,m.mode,w),g.return=m,g;case Nn:var v=g._init;return f(m,v(g._payload),w)}if(jo(g)||fo(g))return g=or(g,m.mode,w,null),g.return=m,g;zs(m,g)}return null}function h(m,g,w,v){var k=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(m,g,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bs:return w.key===k?c(m,g,w,v):null;case Cr:return w.key===k?u(m,g,w,v):null;case Nn:return k=w._init,h(m,g,k(w._payload),v)}if(jo(w)||fo(w))return k!==null?null:d(m,g,w,v,null);zs(m,w)}return null}function p(m,g,w,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(w)||null,a(g,m,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bs:return m=m.get(v.key===null?w:v.key)||null,c(g,m,v,k);case Cr:return m=m.get(v.key===null?w:v.key)||null,u(g,m,v,k);case Nn:var N=v._init;return p(m,g,w,N(v._payload),k)}if(jo(v)||fo(v))return m=m.get(w)||null,d(g,m,v,k,null);zs(g,v)}return null}function y(m,g,w,v){for(var k=null,N=null,b=g,$=g=0,T=null;b!==null&&$<w.length;$++){b.index>$?(T=b,b=null):T=b.sibling;var P=h(m,b,w[$],v);if(P===null){b===null&&(b=T);break}e&&b&&P.alternate===null&&t(m,b),g=s(P,g,$),N===null?k=P:N.sibling=P,N=P,b=T}if($===w.length)return n(m,b),_e&&Xn(m,$),k;if(b===null){for(;$<w.length;$++)b=f(m,w[$],v),b!==null&&(g=s(b,g,$),N===null?k=b:N.sibling=b,N=b);return _e&&Xn(m,$),k}for(b=r(m,b);$<w.length;$++)T=p(b,m,$,w[$],v),T!==null&&(e&&T.alternate!==null&&b.delete(T.key===null?$:T.key),g=s(T,g,$),N===null?k=T:N.sibling=T,N=T);return e&&b.forEach(function(I){return t(m,I)}),_e&&Xn(m,$),k}function x(m,g,w,v){var k=fo(w);if(typeof k!="function")throw Error(V(150));if(w=k.call(w),w==null)throw Error(V(151));for(var N=k=null,b=g,$=g=0,T=null,P=w.next();b!==null&&!P.done;$++,P=w.next()){b.index>$?(T=b,b=null):T=b.sibling;var I=h(m,b,P.value,v);if(I===null){b===null&&(b=T);break}e&&b&&I.alternate===null&&t(m,b),g=s(I,g,$),N===null?k=I:N.sibling=I,N=I,b=T}if(P.done)return n(m,b),_e&&Xn(m,$),k;if(b===null){for(;!P.done;$++,P=w.next())P=f(m,P.value,v),P!==null&&(g=s(P,g,$),N===null?k=P:N.sibling=P,N=P);return _e&&Xn(m,$),k}for(b=r(m,b);!P.done;$++,P=w.next())P=p(b,m,$,P.value,v),P!==null&&(e&&P.alternate!==null&&b.delete(P.key===null?$:P.key),g=s(P,g,$),N===null?k=P:N.sibling=P,N=P);return e&&b.forEach(function(H){return t(m,H)}),_e&&Xn(m,$),k}function E(m,g,w,v){if(typeof w=="object"&&w!==null&&w.type===_r&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case bs:e:{for(var k=w.key,N=g;N!==null;){if(N.key===k){if(k=w.type,k===_r){if(N.tag===7){n(m,N.sibling),g=o(N,w.props.children),g.return=m,m=g;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Nn&&Pd(k)===N.type){n(m,N.sibling),g=o(N,w.props),g.ref=yo(m,N,w),g.return=m,m=g;break e}n(m,N);break}else t(m,N);N=N.sibling}w.type===_r?(g=or(w.props.children,m.mode,v,w.key),g.return=m,m=g):(v=fi(w.type,w.key,w.props,null,m.mode,v),v.ref=yo(m,g,w),v.return=m,m=v)}return i(m);case Cr:e:{for(N=w.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(m,g.sibling),g=o(g,w.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=Jl(w,m.mode,v),g.return=m,m=g}return i(m);case Nn:return N=w._init,E(m,g,N(w._payload),v)}if(jo(w))return y(m,g,w,v);if(fo(w))return x(m,g,w,v);zs(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,w),g.return=m,m=g):(n(m,g),g=Ql(w,m.mode,v),g.return=m,m=g),i(m)):n(m,g)}return E}var Xr=wp(!0),Sp=wp(!1),Mi=Kn(null),$i=null,$r=null,Qc=null;function Jc(){Qc=$r=$i=null}function Zc(e){var t=Mi.current;ke(Mi),e._currentValue=t}function Va(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){$i=e,Qc=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Qc!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if($i===null)throw Error(V(308));$r=e,$i.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var qn=null;function qc(e){qn===null?qn=[e]:qn.push(e)}function kp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,qc(t)):(n.next=o.next,o.next=n),t.interleaved=n,pn(e,r)}function pn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function eu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,pn(e,n)}return o=r.interleaved,o===null?(t.next=t,qc(r)):(t.next=o.next,o.next=t),r.interleaved=t,pn(e,n)}function ii(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zc(e,n)}}function Ld(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ai(e,t,n,r){var o=e.updateQueue;jn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=o.baseState;i=0,d=u=c=null,a=s;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,x=a;switch(h=t,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){f=y.call(p,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(p,f,h):y,h==null)break e;f=Pe({},f,h);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,i|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(d===null&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);ur|=i,e.lanes=i,e.memoizedState=f}}function Md(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(V(191,o));o.call(r)}}}var xs={},Xt=Kn(xs),qo=Kn(xs),es=Kn(xs);function er(e){if(e===xs)throw Error(V(174));return e}function tu(e,t){switch(xe(es,t),xe(qo,e),xe(Xt,xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ca(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ca(t,e)}ke(Xt),xe(Xt,t)}function Qr(){ke(Xt),ke(qo),ke(es)}function Cp(e){er(es.current);var t=er(Xt.current),n=Ca(t,e.type);t!==n&&(xe(qo,e),xe(Xt,n))}function nu(e){qo.current===e&&(ke(Xt),ke(qo))}var je=Kn(0);function Di(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vl=[];function ru(){for(var e=0;e<Vl.length;e++)Vl[e]._workInProgressVersionPrimary=null;Vl.length=0}var li=xn.ReactCurrentDispatcher,Wl=xn.ReactCurrentBatchConfig,cr=0,be=null,ze=null,Ve=null,Ri=!1,Io=!1,ts=0,X0=0;function Xe(){throw Error(V(321))}function ou(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function su(e,t,n,r,o,s){if(cr=s,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,li.current=e===null||e.memoizedState===null?q0:ex,e=n(r,o),Io){s=0;do{if(Io=!1,ts=0,25<=s)throw Error(V(301));s+=1,Ve=ze=null,t.updateQueue=null,li.current=tx,e=n(r,o)}while(Io)}if(li.current=Oi,t=ze!==null&&ze.next!==null,cr=0,Ve=ze=be=null,Ri=!1,t)throw Error(V(300));return e}function iu(){var e=ts!==0;return ts=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?be.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function Lt(){if(ze===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Ve===null?be.memoizedState:Ve.next;if(t!==null)Ve=t,ze=e;else{if(e===null)throw Error(V(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ve===null?be.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function ns(e,t){return typeof t=="function"?t(e):t}function Yl(e){var t=Lt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=ze,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,c=null,u=s;do{var d=u.lane;if((cr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,i=r):c=c.next=f,be.lanes|=d,ur|=d}u=u.next}while(u!==null&&u!==s);c===null?i=r:c.next=a,Ft(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,be.lanes|=s,ur|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Kl(e){var t=Lt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Ft(s,t.memoizedState)||(lt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _p(){}function Np(e,t){var n=be,r=Lt(),o=t(),s=!Ft(r.memoizedState,o);if(s&&(r.memoizedState=o,lt=!0),r=r.queue,lu(Tp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,rs(9,bp.bind(null,n,r,o,t),void 0,null),We===null)throw Error(V(349));cr&30||jp(n,t,o)}return o}function jp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bp(e,t,n,r){t.value=n,t.getSnapshot=r,Pp(t)&&Lp(e)}function Tp(e,t,n){return n(function(){Pp(t)&&Lp(e)})}function Pp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function Lp(e){var t=pn(e,1);t!==null&&zt(t,e,1,-1)}function $d(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=Z0.bind(null,be,e),[t.memoizedState,e]}function rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Mp(){return Lt().memoizedState}function ai(e,t,n,r){var o=Yt();be.flags|=e,o.memoizedState=rs(1|t,n,void 0,r===void 0?null:r)}function il(e,t,n,r){var o=Lt();r=r===void 0?null:r;var s=void 0;if(ze!==null){var i=ze.memoizedState;if(s=i.destroy,r!==null&&ou(r,i.deps)){o.memoizedState=rs(t,n,s,r);return}}be.flags|=e,o.memoizedState=rs(1|t,n,s,r)}function Ad(e,t){return ai(8390656,8,e,t)}function lu(e,t){return il(2048,8,e,t)}function $p(e,t){return il(4,2,e,t)}function Ap(e,t){return il(4,4,e,t)}function Dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rp(e,t,n){return n=n!=null?n.concat([e]):null,il(4,4,Dp.bind(null,t,e),n)}function au(){}function Op(e,t){var n=Lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ip(e,t){var n=Lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zp(e,t,n){return cr&21?(Ft(n,t)||(n=Vh(),be.lanes|=n,ur|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function Q0(e,t){var n=ge;ge=n!==0&&4>n?n:4,e(!0);var r=Wl.transition;Wl.transition={};try{e(!1),t()}finally{ge=n,Wl.transition=r}}function Fp(){return Lt().memoizedState}function J0(e,t,n){var r=Bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bp(e))Up(t,n);else if(n=kp(e,t,n,r),n!==null){var o=nt();zt(n,e,r,o),Hp(n,t,r)}}function Z0(e,t,n){var r=Bn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bp(e))Up(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Ft(a,i)){var c=t.interleaved;c===null?(o.next=o,qc(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=kp(e,t,o,r),n!==null&&(o=nt(),zt(n,e,r,o),Hp(n,t,r))}}function Bp(e){var t=e.alternate;return e===be||t!==null&&t===be}function Up(e,t){Io=Ri=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zc(e,n)}}var Oi={readContext:Pt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},q0={readContext:Pt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:Ad,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ai(4194308,4,Dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return ai(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=J0.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:$d,useDebugValue:au,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=$d(!1),t=e[0];return e=Q0.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=be,o=Yt();if(_e){if(n===void 0)throw Error(V(407));n=n()}else{if(n=t(),We===null)throw Error(V(349));cr&30||jp(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ad(Tp.bind(null,r,s,e),[e]),r.flags|=2048,rs(9,bp.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Yt(),t=We.identifierPrefix;if(_e){var n=ln,r=sn;n=(r&~(1<<32-It(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=X0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ex={readContext:Pt,useCallback:Op,useContext:Pt,useEffect:lu,useImperativeHandle:Rp,useInsertionEffect:$p,useLayoutEffect:Ap,useMemo:Ip,useReducer:Yl,useRef:Mp,useState:function(){return Yl(ns)},useDebugValue:au,useDeferredValue:function(e){var t=Lt();return zp(t,ze.memoizedState,e)},useTransition:function(){var e=Yl(ns)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Np,useId:Fp,unstable_isNewReconciler:!1},tx={readContext:Pt,useCallback:Op,useContext:Pt,useEffect:lu,useImperativeHandle:Rp,useInsertionEffect:$p,useLayoutEffect:Ap,useMemo:Ip,useReducer:Kl,useRef:Mp,useState:function(){return Kl(ns)},useDebugValue:au,useDeferredValue:function(e){var t=Lt();return ze===null?t.memoizedState=e:zp(t,ze.memoizedState,e)},useTransition:function(){var e=Kl(ns)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Np,useId:Fp,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Wa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ll={isMounted:function(e){return(e=e._reactInternals)?mr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nt(),o=Bn(e),s=cn(r,o);s.payload=t,n!=null&&(s.callback=n),t=zn(e,s,o),t!==null&&(zt(t,e,o,r),ii(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nt(),o=Bn(e),s=cn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=zn(e,s,o),t!==null&&(zt(t,e,o,r),ii(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nt(),r=Bn(e),o=cn(n,r);o.tag=2,t!=null&&(o.callback=t),t=zn(e,o,r),t!==null&&(zt(t,e,r,n),ii(t,e,r))}};function Dd(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!Xo(n,r)||!Xo(o,s):!0}function Vp(e,t,n){var r=!1,o=Wn,s=t.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(o=ut(t)?lr:Ze.current,r=t.contextTypes,s=(r=r!=null)?Kr(e,o):Wn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ll,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Rd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ll.enqueueReplaceState(t,t.state,null)}function Ya(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},eu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Pt(s):(s=ut(t)?lr:Ze.current,o.context=Kr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Wa(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ll.enqueueReplaceState(o,o.state,null),Ai(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Jr(e,t){try{var n="",r=t;do n+=Tv(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function Gl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ka(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var nx=typeof WeakMap=="function"?WeakMap:Map;function Wp(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zi||(zi=!0,rc=r),Ka(e,t)},n}function Yp(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ka(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ka(e,t),typeof r!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Od(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new nx;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gx.bind(null,e,t,n),t.then(e,e))}function Id(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var rx=xn.ReactCurrentOwner,lt=!1;function tt(e,t,n,r){t.child=e===null?Sp(t,null,n,r):Xr(t,e.child,n,r)}function Fd(e,t,n,r,o){n=n.render;var s=t.ref;return Br(t,o),r=su(e,t,n,r,s,o),n=iu(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mn(e,t,o)):(_e&&n&&Kc(t),t.flags|=1,tt(e,t,r,o),t.child)}function Bd(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!gu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Kp(e,t,s,r,o)):(e=fi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xo,n(i,r)&&e.ref===t.ref)return mn(e,t,o)}return t.flags|=1,e=Un(s,r),e.ref=t.ref,e.return=t,t.child=e}function Kp(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(Xo(s,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,mn(e,t,o)}return Ga(e,t,n,r,o)}function Gp(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Dr,pt),pt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(Dr,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Dr,pt),pt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,xe(Dr,pt),pt|=r;return tt(e,t,o,n),t.child}function Xp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ga(e,t,n,r,o){var s=ut(n)?lr:Ze.current;return s=Kr(t,s),Br(t,o),n=su(e,t,n,r,s,o),r=iu(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mn(e,t,o)):(_e&&r&&Kc(t),t.flags|=1,tt(e,t,n,o),t.child)}function Ud(e,t,n,r,o){if(ut(n)){var s=!0;Ti(t)}else s=!1;if(Br(t,o),t.stateNode===null)ci(e,t),Vp(t,n,r),Ya(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=ut(n)?lr:Ze.current,u=Kr(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Rd(t,i,r,u),jn=!1;var h=t.memoizedState;i.state=h,Ai(t,r,i,o),c=t.memoizedState,a!==r||h!==c||ct.current||jn?(typeof d=="function"&&(Wa(t,n,d,r),c=t.memoizedState),(a=jn||Dd(t,n,a,r,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ep(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:$t(t.type,a),i.props=u,f=t.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Pt(c):(c=ut(n)?lr:Ze.current,c=Kr(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==c)&&Rd(t,i,r,c),jn=!1,h=t.memoizedState,i.state=h,Ai(t,r,i,o);var y=t.memoizedState;a!==f||h!==y||ct.current||jn?(typeof p=="function"&&(Wa(t,n,p,r),y=t.memoizedState),(u=jn||Dd(t,n,u,r,h,y,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Xa(e,t,n,r,s,o)}function Xa(e,t,n,r,o,s){Xp(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&jd(t,n,!1),mn(e,t,s);r=t.stateNode,rx.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Xr(t,e.child,null,s),t.child=Xr(t,null,a,s)):tt(e,t,a,s),t.memoizedState=r.state,o&&jd(t,n,!0),t.child}function Qp(e){var t=e.stateNode;t.pendingContext?Nd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nd(e,t.context,!1),tu(e,t.containerInfo)}function Hd(e,t,n,r,o){return Gr(),Xc(o),t.flags|=256,tt(e,t,n,r),t.child}var Qa={dehydrated:null,treeContext:null,retryLane:0};function Ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jp(e,t,n){var r=t.pendingProps,o=je.current,s=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),xe(je,o&1),e===null)return Ha(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ul(i,r,0,null),e=or(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ja(n),t.memoizedState=Qa,e):cu(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return ox(e,t,i,r,a,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Un(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Un(a,s):(s=or(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Ja(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Qa,r}return s=e.child,e=s.sibling,r=Un(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cu(e,t){return t=ul({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fs(e,t,n,r){return r!==null&&Xc(r),Xr(t,e.child,null,n),e=cu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ox(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=Gl(Error(V(422))),Fs(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ul({mode:"visible",children:r.children},o,0,null),s=or(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Xr(t,e.child,null,i),t.child.memoizedState=Ja(i),t.memoizedState=Qa,s);if(!(t.mode&1))return Fs(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(V(419)),r=Gl(s,r,void 0),Fs(e,t,i,r)}if(a=(i&e.childLanes)!==0,lt||a){if(r=We,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,pn(e,o),zt(r,e,o,-1))}return mu(),r=Gl(Error(V(421))),Fs(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=yx.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,mt=In(o.nextSibling),gt=t,_e=!0,Rt=null,e!==null&&(Et[Ct++]=sn,Et[Ct++]=ln,Et[Ct++]=ar,sn=e.id,ln=e.overflow,ar=t),t=cu(t,r.children),t.flags|=4096,t)}function Vd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Va(e.return,t,n)}function Xl(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Zp(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(tt(e,t,r.children,n),r=je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vd(e,n,t);else if(e.tag===19)Vd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xe(je,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Di(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Xl(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Di(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Xl(t,!0,n,null,s);break;case"together":Xl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ur|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sx(e,t,n){switch(t.tag){case 3:Qp(t),Gr();break;case 5:Cp(t);break;case 1:ut(t.type)&&Ti(t);break;case 4:tu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;xe(Mi,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xe(je,je.current&1),t.flags|=128,null):n&t.child.childLanes?Jp(e,t,n):(xe(je,je.current&1),e=mn(e,t,n),e!==null?e.sibling:null);xe(je,je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Zp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),xe(je,je.current),r)break;return null;case 22:case 23:return t.lanes=0,Gp(e,t,n)}return mn(e,t,n)}var qp,Za,em,tm;qp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Za=function(){};em=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,er(Xt.current);var s=null;switch(n){case"input":o=wa(e,o),r=wa(e,r),s=[];break;case"select":o=Pe({},o,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":o=Ea(e,o),r=Ea(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ji)}_a(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Se("scroll",e),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};tm=function(e,t,n,r){n!==r&&(t.flags|=4)};function vo(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ix(e,t,n){var r=t.pendingProps;switch(Gc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return ut(t.type)&&bi(),Qe(t),null;case 3:return r=t.stateNode,Qr(),ke(ct),ke(Ze),ru(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Is(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rt!==null&&(ic(Rt),Rt=null))),Za(e,t),Qe(t),null;case 5:nu(t);var o=er(es.current);if(n=t.type,e!==null&&t.stateNode!=null)em(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(V(166));return Qe(t),null}if(e=er(Xt.current),Is(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Kt]=t,r[Zo]=s,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(o=0;o<To.length;o++)Se(To[o],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":qu(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":td(r,s),Se("invalid",r)}_a(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Os(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Os(r.textContent,a,e),o=["children",""+a]):Uo.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Se("scroll",r)}switch(n){case"input":Ts(r),ed(r,s,!0);break;case"textarea":Ts(r),nd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ji)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Th(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Kt]=t,e[Zo]=r,qp(e,t,!1,!1),t.stateNode=e;e:{switch(i=Na(n,r),n){case"dialog":Se("cancel",e),Se("close",e),o=r;break;case"iframe":case"object":case"embed":Se("load",e),o=r;break;case"video":case"audio":for(o=0;o<To.length;o++)Se(To[o],e);o=r;break;case"source":Se("error",e),o=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),o=r;break;case"details":Se("toggle",e),o=r;break;case"input":qu(e,r),o=wa(e,r),Se("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Pe({},r,{value:void 0}),Se("invalid",e);break;case"textarea":td(e,r),o=Ea(e,r),Se("invalid",e);break;default:o=r}_a(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Mh(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ph(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ho(e,c):typeof c=="number"&&Ho(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Se("scroll",e):c!=null&&$c(e,s,c,i))}switch(n){case"input":Ts(e),ed(e,r,!1);break;case"textarea":Ts(e),nd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Or(e,!!r.multiple,s,!1):r.defaultValue!=null&&Or(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ji)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)tm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(V(166));if(n=er(es.current),er(Xt.current),Is(t)){if(r=t.stateNode,n=t.memoizedProps,r[Kt]=t,(s=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:Os(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=t,t.stateNode=r}return Qe(t),null;case 13:if(ke(je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&mt!==null&&t.mode&1&&!(t.flags&128))xp(),Gr(),t.flags|=98560,s=!1;else if(s=Is(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(V(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[Kt]=t}else Gr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),s=!1}else Rt!==null&&(ic(Rt),Rt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Fe===0&&(Fe=3):mu())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return Qr(),Za(e,t),e===null&&Qo(t.stateNode.containerInfo),Qe(t),null;case 10:return Zc(t.type._context),Qe(t),null;case 17:return ut(t.type)&&bi(),Qe(t),null;case 19:if(ke(je),s=t.memoizedState,s===null)return Qe(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)vo(s,!1);else{if(Fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Di(e),i!==null){for(t.flags|=128,vo(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(je,je.current&1|2),t.child}e=e.sibling}s.tail!==null&&De()>Zr&&(t.flags|=128,r=!0,vo(s,!1),t.lanes=4194304)}else{if(!r)if(e=Di(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!_e)return Qe(t),null}else 2*De()-s.renderingStartTime>Zr&&n!==1073741824&&(t.flags|=128,r=!0,vo(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=De(),t.sibling=null,n=je.current,xe(je,r?n&1|2:n&1),t):(Qe(t),null);case 22:case 23:return pu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pt&1073741824&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function lx(e,t){switch(Gc(t),t.tag){case 1:return ut(t.type)&&bi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),ke(ct),ke(Ze),ru(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nu(t),null;case 13:if(ke(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Gr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(je),null;case 4:return Qr(),null;case 10:return Zc(t.type._context),null;case 22:case 23:return pu(),null;case 24:return null;default:return null}}var Bs=!1,Je=!1,ax=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ar(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(e,t,r)}else n.current=null}function qa(e,t,n){try{n()}catch(r){Me(e,t,r)}}var Wd=!1;function cx(e,t){if(Ra=Ci,e=ip(),Yc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||o!==0&&f.nodeType!==3||(a=i+o),f!==s||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===o&&(a=i),h===s&&++d===r&&(c=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oa={focusedElem:e,selectionRange:n},Ci=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,E=y.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:$t(t.type,x),E);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(v){Me(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return y=Wd,Wd=!1,y}function zo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&qa(t,n,s)}o=o.next}while(o!==r)}}function al(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ec(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function nm(e){var t=e.alternate;t!==null&&(e.alternate=null,nm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[Zo],delete t[Fa],delete t[W0],delete t[Y0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rm(e){return e.tag===5||e.tag===3||e.tag===4}function Yd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ji));else if(r!==4&&(e=e.child,e!==null))for(tc(e,t,n),e=e.sibling;e!==null;)tc(e,t,n),e=e.sibling}function nc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nc(e,t,n),e=e.sibling;e!==null;)nc(e,t,n),e=e.sibling}var Ye=null,At=!1;function Cn(e,t,n){for(n=n.child;n!==null;)om(e,t,n),n=n.sibling}function om(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:Je||Ar(n,t);case 6:var r=Ye,o=At;Ye=null,Cn(e,t,n),Ye=r,At=o,Ye!==null&&(At?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(At?(e=Ye,n=n.stateNode,e.nodeType===8?Ul(e.parentNode,n):e.nodeType===1&&Ul(e,n),Ko(e)):Ul(Ye,n.stateNode));break;case 4:r=Ye,o=At,Ye=n.stateNode.containerInfo,At=!0,Cn(e,t,n),Ye=r,At=o;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&qa(n,t,i),o=o.next}while(o!==r)}Cn(e,t,n);break;case 1:if(!Je&&(Ar(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,t,a)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,Cn(e,t,n),Je=r):Cn(e,t,n);break;default:Cn(e,t,n)}}function Kd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ax),t.forEach(function(r){var o=vx.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ye=a.stateNode,At=!1;break e;case 3:Ye=a.stateNode.containerInfo,At=!0;break e;case 4:Ye=a.stateNode.containerInfo,At=!0;break e}a=a.return}if(Ye===null)throw Error(V(160));om(s,i,o),Ye=null,At=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){Me(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sm(t,e),t=t.sibling}function sm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),Vt(e),r&4){try{zo(3,e,e.return),al(3,e)}catch(x){Me(e,e.return,x)}try{zo(5,e,e.return)}catch(x){Me(e,e.return,x)}}break;case 1:Mt(t,e),Vt(e),r&512&&n!==null&&Ar(n,n.return);break;case 5:if(Mt(t,e),Vt(e),r&512&&n!==null&&Ar(n,n.return),e.flags&32){var o=e.stateNode;try{Ho(o,"")}catch(x){Me(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jh(o,s),Na(a,i);var u=Na(a,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?Mh(o,f):d==="dangerouslySetInnerHTML"?Ph(o,f):d==="children"?Ho(o,f):$c(o,d,f,u)}switch(a){case"input":Sa(o,s);break;case"textarea":bh(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Or(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Or(o,!!s.multiple,s.defaultValue,!0):Or(o,!!s.multiple,s.multiple?[]:"",!1))}o[Zo]=s}catch(x){Me(e,e.return,x)}}break;case 6:if(Mt(t,e),Vt(e),r&4){if(e.stateNode===null)throw Error(V(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(x){Me(e,e.return,x)}}break;case 3:if(Mt(t,e),Vt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(t.containerInfo)}catch(x){Me(e,e.return,x)}break;case 4:Mt(t,e),Vt(e);break;case 13:Mt(t,e),Vt(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(fu=De())),r&4&&Kd(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Je=(u=Je)||d,Mt(t,e),Je=u):Mt(t,e),Vt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Q=e,d=e.child;d!==null;){for(f=Q=d;Q!==null;){switch(h=Q,p=h.child,h.tag){case 0:case 11:case 14:case 15:zo(4,h,h.return);break;case 1:Ar(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){Me(r,n,x)}}break;case 5:Ar(h,h.return);break;case 22:if(h.memoizedState!==null){Xd(f);continue}}p!==null?(p.return=h,Q=p):Xd(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Lh("display",i))}catch(x){Me(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Me(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mt(t,e),Vt(e),r&4&&Kd(e);break;case 21:break;default:Mt(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rm(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ho(o,""),r.flags&=-33);var s=Yd(e);nc(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Yd(e);tc(e,a,i);break;default:throw Error(V(161))}}catch(c){Me(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ux(e,t,n){Q=e,im(e)}function im(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var o=Q,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Bs;if(!i){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Je;a=Bs;var u=Je;if(Bs=i,(Je=c)&&!u)for(Q=o;Q!==null;)i=Q,c=i.child,i.tag===22&&i.memoizedState!==null?Qd(o):c!==null?(c.return=i,Q=c):Qd(o);for(;s!==null;)Q=s,im(s),s=s.sibling;Q=o,Bs=a,Je=u}Gd(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Q=s):Gd(e)}}function Gd(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||al(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Je)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:$t(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Md(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Md(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ko(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Je||t.flags&512&&ec(t)}catch(h){Me(t,t.return,h)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Xd(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Qd(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(c){Me(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Me(t,o,c)}}var s=t.return;try{ec(t)}catch(c){Me(t,s,c)}break;case 5:var i=t.return;try{ec(t)}catch(c){Me(t,i,c)}}}catch(c){Me(t,t.return,c)}if(t===e){Q=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Q=a;break}Q=t.return}}var dx=Math.ceil,Ii=xn.ReactCurrentDispatcher,uu=xn.ReactCurrentOwner,Tt=xn.ReactCurrentBatchConfig,fe=0,We=null,Ie=null,Ke=0,pt=0,Dr=Kn(0),Fe=0,os=null,ur=0,cl=0,du=0,Fo=null,it=null,fu=0,Zr=1/0,rn=null,zi=!1,rc=null,Fn=null,Us=!1,An=null,Fi=0,Bo=0,oc=null,ui=-1,di=0;function nt(){return fe&6?De():ui!==-1?ui:ui=De()}function Bn(e){return e.mode&1?fe&2&&Ke!==0?Ke&-Ke:G0.transition!==null?(di===0&&(di=Vh()),di):(e=ge,e!==0||(e=window.event,e=e===void 0?16:Jh(e.type)),e):1}function zt(e,t,n,r){if(50<Bo)throw Bo=0,oc=null,Error(V(185));gs(e,n,r),(!(fe&2)||e!==We)&&(e===We&&(!(fe&2)&&(cl|=n),Fe===4&&Ln(e,Ke)),dt(e,r),n===1&&fe===0&&!(t.mode&1)&&(Zr=De()+500,sl&&Gn()))}function dt(e,t){var n=e.callbackNode;Gv(e,t);var r=Ei(e,e===We?Ke:0);if(r===0)n!==null&&sd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sd(n),t===1)e.tag===0?K0(Jd.bind(null,e)):gp(Jd.bind(null,e)),H0(function(){!(fe&6)&&Gn()}),n=null;else{switch(Wh(r)){case 1:n=Ic;break;case 4:n=Uh;break;case 16:n=ki;break;case 536870912:n=Hh;break;default:n=ki}n=pm(n,lm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lm(e,t){if(ui=-1,di=0,fe&6)throw Error(V(327));var n=e.callbackNode;if(Ur()&&e.callbackNode!==n)return null;var r=Ei(e,e===We?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Bi(e,r);else{t=r;var o=fe;fe|=2;var s=cm();(We!==e||Ke!==t)&&(rn=null,Zr=De()+500,rr(e,t));do try{px();break}catch(a){am(e,a)}while(1);Jc(),Ii.current=s,fe=o,Ie!==null?t=0:(We=null,Ke=0,t=Fe)}if(t!==0){if(t===2&&(o=La(e),o!==0&&(r=o,t=sc(e,o))),t===1)throw n=os,rr(e,0),Ln(e,r),dt(e,De()),n;if(t===6)Ln(e,r);else{if(o=e.current.alternate,!(r&30)&&!fx(o)&&(t=Bi(e,r),t===2&&(s=La(e),s!==0&&(r=s,t=sc(e,s))),t===1))throw n=os,rr(e,0),Ln(e,r),dt(e,De()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(V(345));case 2:Qn(e,it,rn);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=fu+500-De(),10<t)){if(Ei(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){nt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=za(Qn.bind(null,e,it,rn),t);break}Qn(e,it,rn);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-It(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dx(r/1960))-r,10<r){e.timeoutHandle=za(Qn.bind(null,e,it,rn),r);break}Qn(e,it,rn);break;case 5:Qn(e,it,rn);break;default:throw Error(V(329))}}}return dt(e,De()),e.callbackNode===n?lm.bind(null,e):null}function sc(e,t){var n=Fo;return e.current.memoizedState.isDehydrated&&(rr(e,t).flags|=256),e=Bi(e,t),e!==2&&(t=it,it=n,t!==null&&ic(t)),e}function ic(e){it===null?it=e:it.push.apply(it,e)}function fx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Ft(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~du,t&=~cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-It(t),r=1<<n;e[n]=-1,t&=~r}}function Jd(e){if(fe&6)throw Error(V(327));Ur();var t=Ei(e,0);if(!(t&1))return dt(e,De()),null;var n=Bi(e,t);if(e.tag!==0&&n===2){var r=La(e);r!==0&&(t=r,n=sc(e,r))}if(n===1)throw n=os,rr(e,0),Ln(e,t),dt(e,De()),n;if(n===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qn(e,it,rn),dt(e,De()),null}function hu(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(Zr=De()+500,sl&&Gn())}}function dr(e){An!==null&&An.tag===0&&!(fe&6)&&Ur();var t=fe;fe|=1;var n=Tt.transition,r=ge;try{if(Tt.transition=null,ge=1,e)return e()}finally{ge=r,Tt.transition=n,fe=t,!(fe&6)&&Gn()}}function pu(){pt=Dr.current,ke(Dr)}function rr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,U0(n)),Ie!==null)for(n=Ie.return;n!==null;){var r=n;switch(Gc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bi();break;case 3:Qr(),ke(ct),ke(Ze),ru();break;case 5:nu(r);break;case 4:Qr();break;case 13:ke(je);break;case 19:ke(je);break;case 10:Zc(r.type._context);break;case 22:case 23:pu()}n=n.return}if(We=e,Ie=e=Un(e.current,null),Ke=pt=t,Fe=0,os=null,du=cl=ur=0,it=Fo=null,qn!==null){for(t=0;t<qn.length;t++)if(n=qn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}qn=null}return e}function am(e,t){do{var n=Ie;try{if(Jc(),li.current=Oi,Ri){for(var r=be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ri=!1}if(cr=0,Ve=ze=be=null,Io=!1,ts=0,uu.current=null,n===null||n.return===null){Fe=1,os=t,Ie=null;break}e:{var s=e,i=n.return,a=n,c=t;if(t=Ke,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Id(i);if(p!==null){p.flags&=-257,zd(p,i,a,s,t),p.mode&1&&Od(s,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var x=new Set;x.add(c),t.updateQueue=x}else y.add(c);break e}else{if(!(t&1)){Od(s,u,t),mu();break e}c=Error(V(426))}}else if(_e&&a.mode&1){var E=Id(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),zd(E,i,a,s,t),Xc(Jr(c,a));break e}}s=c=Jr(c,a),Fe!==4&&(Fe=2),Fo===null?Fo=[s]:Fo.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=Wp(s,c,t);Ld(s,m);break e;case 1:a=c;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fn===null||!Fn.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=Yp(s,a,t);Ld(s,v);break e}}s=s.return}while(s!==null)}dm(n)}catch(k){t=k,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(1)}function cm(){var e=Ii.current;return Ii.current=Oi,e===null?Oi:e}function mu(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),We===null||!(ur&268435455)&&!(cl&268435455)||Ln(We,Ke)}function Bi(e,t){var n=fe;fe|=2;var r=cm();(We!==e||Ke!==t)&&(rn=null,rr(e,t));do try{hx();break}catch(o){am(e,o)}while(1);if(Jc(),fe=n,Ii.current=r,Ie!==null)throw Error(V(261));return We=null,Ke=0,Fe}function hx(){for(;Ie!==null;)um(Ie)}function px(){for(;Ie!==null&&!zv();)um(Ie)}function um(e){var t=hm(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?dm(e):Ie=t,uu.current=null}function dm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lx(n,t),n!==null){n.flags&=32767,Ie=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Ie=null;return}}else if(n=ix(n,t,pt),n!==null){Ie=n;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);Fe===0&&(Fe=5)}function Qn(e,t,n){var r=ge,o=Tt.transition;try{Tt.transition=null,ge=1,mx(e,t,n,r)}finally{Tt.transition=o,ge=r}return null}function mx(e,t,n,r){do Ur();while(An!==null);if(fe&6)throw Error(V(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Xv(e,s),e===We&&(Ie=We=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Us||(Us=!0,pm(ki,function(){return Ur(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tt.transition,Tt.transition=null;var i=ge;ge=1;var a=fe;fe|=4,uu.current=null,cx(e,n),sm(n,e),D0(Oa),Ci=!!Ra,Oa=Ra=null,e.current=n,ux(n),Fv(),fe=a,ge=i,Tt.transition=s}else e.current=n;if(Us&&(Us=!1,An=e,Fi=o),s=e.pendingLanes,s===0&&(Fn=null),Hv(n.stateNode),dt(e,De()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(zi)throw zi=!1,e=rc,rc=null,e;return Fi&1&&e.tag!==0&&Ur(),s=e.pendingLanes,s&1?e===oc?Bo++:(Bo=0,oc=e):Bo=0,Gn(),null}function Ur(){if(An!==null){var e=Wh(Fi),t=Tt.transition,n=ge;try{if(Tt.transition=null,ge=16>e?16:e,An===null)var r=!1;else{if(e=An,An=null,Fi=0,fe&6)throw Error(V(331));var o=fe;for(fe|=4,Q=e.current;Q!==null;){var s=Q,i=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:zo(8,d,s)}var f=d.child;if(f!==null)f.return=d,Q=f;else for(;Q!==null;){d=Q;var h=d.sibling,p=d.return;if(nm(d),d===u){Q=null;break}if(h!==null){h.return=p,Q=h;break}Q=p}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}Q=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Q=i;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zo(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Q=m;break e}Q=s.return}}var g=e.current;for(Q=g;Q!==null;){i=Q;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,Q=w;else e:for(i=g;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:al(9,a)}}catch(k){Me(a,a.return,k)}if(a===i){Q=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,Q=v;break e}Q=a.return}}if(fe=o,Gn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(el,e)}catch{}r=!0}return r}finally{ge=n,Tt.transition=t}}return!1}function Zd(e,t,n){t=Jr(n,t),t=Wp(e,t,1),e=zn(e,t,1),t=nt(),e!==null&&(gs(e,1,t),dt(e,t))}function Me(e,t,n){if(e.tag===3)Zd(e,e,n);else for(;t!==null;){if(t.tag===3){Zd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fn===null||!Fn.has(r))){e=Jr(n,e),e=Yp(t,e,1),t=zn(t,e,1),e=nt(),t!==null&&(gs(t,1,e),dt(t,e));break}}t=t.return}}function gx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&n,We===e&&(Ke&n)===n&&(Fe===4||Fe===3&&(Ke&130023424)===Ke&&500>De()-fu?rr(e,0):du|=n),dt(e,t)}function fm(e,t){t===0&&(e.mode&1?(t=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):t=1);var n=nt();e=pn(e,t),e!==null&&(gs(e,t,n),dt(e,n))}function yx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),fm(e,n)}function vx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(t),fm(e,n)}var hm;hm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,sx(e,t,n);lt=!!(e.flags&131072)}else lt=!1,_e&&t.flags&1048576&&yp(t,Li,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ci(e,t),e=t.pendingProps;var o=Kr(t,Ze.current);Br(t,n),o=su(null,t,r,e,o,n);var s=iu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(r)?(s=!0,Ti(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,eu(t),o.updater=ll,t.stateNode=o,o._reactInternals=t,Ya(t,r,e,n),t=Xa(null,t,r,!0,s,n)):(t.tag=0,_e&&s&&Kc(t),tt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ci(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=wx(r),e=$t(r,e),o){case 0:t=Ga(null,t,r,e,n);break e;case 1:t=Ud(null,t,r,e,n);break e;case 11:t=Fd(null,t,r,e,n);break e;case 14:t=Bd(null,t,r,$t(r.type,e),n);break e}throw Error(V(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:$t(r,o),Ga(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:$t(r,o),Ud(e,t,r,o,n);case 3:e:{if(Qp(t),e===null)throw Error(V(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Ep(e,t),Ai(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Jr(Error(V(423)),t),t=Hd(e,t,r,n,o);break e}else if(r!==o){o=Jr(Error(V(424)),t),t=Hd(e,t,r,n,o);break e}else for(mt=In(t.stateNode.containerInfo.firstChild),gt=t,_e=!0,Rt=null,n=Sp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gr(),r===o){t=mn(e,t,n);break e}tt(e,t,r,n)}t=t.child}return t;case 5:return Cp(t),e===null&&Ha(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Ia(r,o)?i=null:s!==null&&Ia(r,s)&&(t.flags|=32),Xp(e,t),tt(e,t,i,n),t.child;case 6:return e===null&&Ha(t),null;case 13:return Jp(e,t,n);case 4:return tu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xr(t,null,r,n):tt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:$t(r,o),Fd(e,t,r,o,n);case 7:return tt(e,t,t.pendingProps,n),t.child;case 8:return tt(e,t,t.pendingProps.children,n),t.child;case 12:return tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,xe(Mi,r._currentValue),r._currentValue=i,s!==null)if(Ft(s.value,i)){if(s.children===o.children&&!ct.current){t=mn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=cn(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Va(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(V(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Va(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}tt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Br(t,n),o=Pt(o),r=r(o),t.flags|=1,tt(e,t,r,n),t.child;case 14:return r=t.type,o=$t(r,t.pendingProps),o=$t(r.type,o),Bd(e,t,r,o,n);case 15:return Kp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:$t(r,o),ci(e,t),t.tag=1,ut(r)?(e=!0,Ti(t)):e=!1,Br(t,n),Vp(t,r,o),Ya(t,r,o,n),Xa(null,t,r,!0,e,n);case 19:return Zp(e,t,n);case 22:return Gp(e,t,n)}throw Error(V(156,t.tag))};function pm(e,t){return Bh(e,t)}function xx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,n,r){return new xx(e,t,n,r)}function gu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wx(e){if(typeof e=="function")return gu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dc)return 11;if(e===Rc)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fi(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")gu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case _r:return or(n.children,o,s,t);case Ac:i=8,o|=8;break;case ga:return e=jt(12,n,t,o|2),e.elementType=ga,e.lanes=s,e;case ya:return e=jt(13,n,t,o),e.elementType=ya,e.lanes=s,e;case va:return e=jt(19,n,t,o),e.elementType=va,e.lanes=s,e;case Ch:return ul(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kh:i=10;break e;case Eh:i=9;break e;case Dc:i=11;break e;case Rc:i=14;break e;case Nn:i=16,r=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=jt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function or(e,t,n,r){return e=jt(7,e,r,t),e.lanes=n,e}function ul(e,t,n,r){return e=jt(22,e,r,t),e.elementType=Ch,e.lanes=n,e.stateNode={isHidden:!1},e}function Ql(e,t,n){return e=jt(6,e,null,t),e.lanes=n,e}function Jl(e,t,n){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sx(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function yu(e,t,n,r,o,s,i,a,c){return e=new Sx(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=jt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(s),e}function kx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function mm(e){if(!e)return Wn;e=e._reactInternals;e:{if(mr(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var n=e.type;if(ut(n))return mp(e,n,t)}return t}function gm(e,t,n,r,o,s,i,a,c){return e=yu(n,r,!0,e,o,s,i,a,c),e.context=mm(null),n=e.current,r=nt(),o=Bn(n),s=cn(r,o),s.callback=t??null,zn(n,s,o),e.current.lanes=o,gs(e,o,r),dt(e,r),e}function dl(e,t,n,r){var o=t.current,s=nt(),i=Bn(o);return n=mm(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zn(o,t,i),e!==null&&(zt(e,o,i,s),ii(e,o,i)),i}function Ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vu(e,t){qd(e,t),(e=e.alternate)&&qd(e,t)}function Ex(){return null}var ym=typeof reportError=="function"?reportError:function(e){console.error(e)};function xu(e){this._internalRoot=e}fl.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));dl(e,t,null,null)};fl.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){dl(null,e,null,null)}),t[hn]=null}};function fl(e){this._internalRoot=e}fl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pn.length&&t!==0&&t<Pn[n].priority;n++);Pn.splice(n,0,e),n===0&&Qh(e)}};function wu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ef(){}function Cx(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=Ui(i);s.call(u)}}var i=gm(t,r,e,0,null,!1,!1,"",ef);return e._reactRootContainer=i,e[hn]=i.current,Qo(e.nodeType===8?e.parentNode:e),dr(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=Ui(c);a.call(u)}}var c=yu(e,0,!1,null,null,!1,!1,"",ef);return e._reactRootContainer=c,e[hn]=c.current,Qo(e.nodeType===8?e.parentNode:e),dr(function(){dl(t,c,n,r)}),c}function pl(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var c=Ui(i);a.call(c)}}dl(t,i,e,o)}else i=Cx(n,t,e,o,r);return Ui(i)}Yh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bo(t.pendingLanes);n!==0&&(zc(t,n|1),dt(t,De()),!(fe&6)&&(Zr=De()+500,Gn()))}break;case 13:dr(function(){var r=pn(e,1);if(r!==null){var o=nt();zt(r,e,1,o)}}),vu(e,1)}};Fc=function(e){if(e.tag===13){var t=pn(e,134217728);if(t!==null){var n=nt();zt(t,e,134217728,n)}vu(e,134217728)}};Kh=function(e){if(e.tag===13){var t=Bn(e),n=pn(e,t);if(n!==null){var r=nt();zt(n,e,t,r)}vu(e,t)}};Gh=function(){return ge};Xh=function(e,t){var n=ge;try{return ge=e,t()}finally{ge=n}};ba=function(e,t,n){switch(t){case"input":if(Sa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ol(r);if(!o)throw Error(V(90));Nh(r),Sa(r,o)}}}break;case"textarea":bh(e,n);break;case"select":t=n.value,t!=null&&Or(e,!!n.multiple,t,!1)}};Dh=hu;Rh=dr;var _x={usingClientEntryPoint:!1,Events:[vs,Tr,ol,$h,Ah,hu]},xo={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nx={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zh(e),e===null?null:e.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||Ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{el=Hs.inject(Nx),Gt=Hs}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_x;xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wu(t))throw Error(V(200));return kx(e,t,null,n)};xt.createRoot=function(e,t){if(!wu(e))throw Error(V(299));var n=!1,r="",o=ym;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=yu(e,1,!1,null,null,n,!1,r,o),e[hn]=t.current,Qo(e.nodeType===8?e.parentNode:e),new xu(t)};xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=zh(t),e=e===null?null:e.stateNode,e};xt.flushSync=function(e){return dr(e)};xt.hydrate=function(e,t,n){if(!hl(t))throw Error(V(200));return pl(null,e,t,!0,n)};xt.hydrateRoot=function(e,t,n){if(!wu(e))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=ym;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=gm(t,null,e,1,n??null,o,!1,s,i),e[hn]=t.current,Qo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new fl(t)};xt.render=function(e,t,n){if(!hl(t))throw Error(V(200));return pl(null,e,t,!1,n)};xt.unmountComponentAtNode=function(e){if(!hl(e))throw Error(V(40));return e._reactRootContainer?(dr(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0):!1};xt.unstable_batchedUpdates=hu;xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!hl(n))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return pl(e,t,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function vm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vm)}catch(e){console.error(e)}}vm(),vh.exports=xt;var Er=vh.exports,tf=Er;pa.createRoot=tf.createRoot,pa.hydrateRoot=tf.hydrateRoot;const jx="modulepreload",bx=function(e){return"/"+e},nf={},xm=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=bx(s),s in nf)return;nf[s]=!0;const i=s.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.href===s&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":jx,i||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),i)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})};var rf="popstate";function Tx(e={}){function t(r,o){let{pathname:s,search:i,hash:a}=r.location;return lc("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:ss(o)}return Lx(t,n,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Px(){return Math.random().toString(36).substring(2,10)}function of(e,t){return{usr:e.state,key:e.key,idx:t}}function lc(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?lo(t):t,state:n,key:t&&t.key||r||Px()}}function ss({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function lo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Lx(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){a="POP";let E=d(),m=E==null?null:E-u;u=E,c&&c({action:a,location:x.location,delta:m})}function h(E,m){a="PUSH";let g=lc(x.location,E,m);n&&n(g,E),u=d()+1;let w=of(g,u),v=x.createHref(g);try{i.pushState(w,"",v)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(v)}s&&c&&c({action:a,location:x.location,delta:1})}function p(E,m){a="REPLACE";let g=lc(x.location,E,m);n&&n(g,E),u=d();let w=of(g,u),v=x.createHref(g);i.replaceState(w,"",v),s&&c&&c({action:a,location:x.location,delta:0})}function y(E){return Mx(E)}let x={get action(){return a},get location(){return e(o,i)},listen(E){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(rf,f),c=E,()=>{o.removeEventListener(rf,f),c=null}},createHref(E){return t(o,E)},createURL:y,encodeLocation(E){let m=y(E);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(E){return i.go(E)}};return x}function Mx(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Te(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ss(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function wm(e,t,n="/"){return $x(e,t,n,!1)}function $x(e,t,n,r){let o=typeof t=="string"?lo(t):t,s=gn(o.pathname||"/",n);if(s==null)return null;let i=Sm(e);Ax(i);let a=null;for(let c=0;a==null&&c<i.length;++c){let u=Wx(s);a=Hx(i[c],u,r)}return a}function Sm(e,t=[],n=[],r="",o=!1){let s=(i,a,c=o,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;Te(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=un([r,d.relativePath]),h=n.concat(d);i.children&&i.children.length>0&&(Te(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Sm(i.children,t,h,f,c)),!(i.path==null&&!i.index)&&t.push({path:f,score:Bx(f,i.index),routesMeta:h})};return e.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of km(i.path))s(i,a,!0,u)}),t}function km(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=km(r.join("/")),a=[];return a.push(...i.map(c=>c===""?s:[s,c].join("/"))),o&&a.push(...i),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ax(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ux(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Dx=/^:[\w-]+$/,Rx=3,Ox=2,Ix=1,zx=10,Fx=-2,sf=e=>e==="*";function Bx(e,t){let n=e.split("/"),r=n.length;return n.some(sf)&&(r+=Fx),t&&(r+=Ox),n.filter(o=>!sf(o)).reduce((o,s)=>o+(Dx.test(s)?Rx:s===""?Ix:zx),r)}function Ux(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function Hx(e,t,n=!1){let{routesMeta:r}=e,o={},s="/",i=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=Hi({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Hi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:un([s,f.pathname]),pathnameBase:Xx(un([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=un([s,f.pathnameBase]))}return i}function Hi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Vx(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let y=a[h]||"";i=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function Vx(e,t=!1,n=!0){Jt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function Wx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function gn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Yx(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?lo(e):e;return{pathname:n?n.startsWith("/")?n:Kx(n,t):t,search:Qx(r),hash:Jx(o)}}function Kx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Zl(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Em(e){let t=Gx(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Cm(e,t,n,r=!1){let o;typeof e=="string"?o=lo(e):(o={...e},Te(!o.pathname||!o.pathname.includes("?"),Zl("?","pathname","search",o)),Te(!o.pathname||!o.pathname.includes("#"),Zl("#","pathname","hash",o)),Te(!o.search||!o.search.includes("#"),Zl("#","search","hash",o)));let s=e===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let f=t.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;o.pathname=h.join("/")}a=f>=0?t[f]:"/"}let c=Yx(o,a),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var un=e=>e.join("/").replace(/\/\/+/g,"/"),Xx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Jx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Zx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var _m=["POST","PUT","PATCH","DELETE"];new Set(_m);var qx=["GET",..._m];new Set(qx);var ao=S.createContext(null);ao.displayName="DataRouter";var ml=S.createContext(null);ml.displayName="DataRouterState";S.createContext(!1);var Nm=S.createContext({isTransitioning:!1});Nm.displayName="ViewTransition";var ew=S.createContext(new Map);ew.displayName="Fetchers";var tw=S.createContext(null);tw.displayName="Await";var qt=S.createContext(null);qt.displayName="Navigation";var ws=S.createContext(null);ws.displayName="Location";var wn=S.createContext({outlet:null,matches:[],isDataRoute:!1});wn.displayName="Route";var Su=S.createContext(null);Su.displayName="RouteError";function nw(e,{relative:t}={}){Te(Ss(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(qt),{hash:o,pathname:s,search:i}=ks(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:un([n,s])),r.createHref({pathname:a,search:i,hash:o})}function Ss(){return S.useContext(ws)!=null}function gr(){return Te(Ss(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(ws).location}var jm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bm(e){S.useContext(qt).static||S.useLayoutEffect(e)}function rw(){let{isDataRoute:e}=S.useContext(wn);return e?gw():ow()}function ow(){Te(Ss(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(ao),{basename:t,navigator:n}=S.useContext(qt),{matches:r}=S.useContext(wn),{pathname:o}=gr(),s=JSON.stringify(Em(r)),i=S.useRef(!1);return bm(()=>{i.current=!0}),S.useCallback((c,u={})=>{if(Jt(i.current,jm),!i.current)return;if(typeof c=="number"){n.go(c);return}let d=Cm(c,JSON.parse(s),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:un([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,s,o,e])}S.createContext(null);function ks(e,{relative:t}={}){let{matches:n}=S.useContext(wn),{pathname:r}=gr(),o=JSON.stringify(Em(n));return S.useMemo(()=>Cm(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function sw(e,t){return Tm(e,t)}function Tm(e,t,n,r,o){var g;Te(Ss(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=S.useContext(qt),{matches:i}=S.useContext(wn),a=i[i.length-1],c=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let w=f&&f.path||"";Pm(u,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=gr(),p;if(t){let w=typeof t=="string"?lo(t):t;Te(d==="/"||((g=w.pathname)==null?void 0:g.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),p=w}else p=h;let y=p.pathname||"/",x=y;if(d!=="/"){let w=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let E=wm(e,{pathname:x});Jt(f||E!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Jt(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=uw(E&&E.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:un([d,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:un([d,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r,o);return t&&m?S.createElement(ws.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},m):m}function iw(){let e=mw(),t=Zx(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:s},"ErrorBoundary")," or"," ",S.createElement("code",{style:s},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:o},n):null,i)}var lw=S.createElement(iw,null),aw=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?S.createElement(wn.Provider,{value:this.props.routeContext},S.createElement(Su.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cw({routeContext:e,match:t,children:n}){let r=S.useContext(ao);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(wn.Provider,{value:e},n)}function uw(e,t=[],n=null,r=null,o=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Te(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let h,p=!1,y=null,x=null;n&&(h=i&&d.route.id?i[d.route.id]:void 0,y=d.route.errorElement||lw,a&&(c<0&&f===0?(Pm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,x=null):c===f&&(p=!0,x=d.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,f+1)),m=()=>{let g;return h?g=y:p?g=x:d.route.Component?g=S.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=u,S.createElement(cw,{match:d,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:g})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?S.createElement(aw,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:m(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):m()},null)}function ku(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dw(e){let t=S.useContext(ao);return Te(t,ku(e)),t}function fw(e){let t=S.useContext(ml);return Te(t,ku(e)),t}function hw(e){let t=S.useContext(wn);return Te(t,ku(e)),t}function Eu(e){let t=hw(e),n=t.matches[t.matches.length-1];return Te(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function pw(){return Eu("useRouteId")}function mw(){var r;let e=S.useContext(Su),t=fw("useRouteError"),n=Eu("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function gw(){let{router:e}=dw("useNavigate"),t=Eu("useNavigate"),n=S.useRef(!1);return bm(()=>{n.current=!0}),S.useCallback(async(o,s={})=>{Jt(n.current,jm),n.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...s}))},[e,t])}var lf={};function Pm(e,t,n){!t&&!lf[e]&&(lf[e]=!0,Jt(!1,n))}S.memo(yw);function yw({routes:e,future:t,state:n,unstable_onError:r}){return Tm(e,void 0,n,r,t)}function Lm(e){Te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vw({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Te(!Ss(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=lo(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=n,p=S.useMemo(()=>{let y=gn(c,i);return y==null?null:{location:{pathname:y,search:u,hash:d,state:f,key:h},navigationType:r}},[i,c,u,d,f,h,r]);return Jt(p!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:S.createElement(qt.Provider,{value:a},S.createElement(ws.Provider,{children:t,value:p}))}function xw({children:e,location:t}){return sw(ac(e),t)}function ac(e,t=[]){let n=[];return S.Children.forEach(e,(r,o)=>{if(!S.isValidElement(r))return;let s=[...t,o];if(r.type===S.Fragment){n.push.apply(n,ac(r.props.children,s));return}Te(r.type===Lm,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Te(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=ac(r.props.children,s)),n.push(i)}),n}var hi="get",pi="application/x-www-form-urlencoded";function gl(e){return e!=null&&typeof e.tagName=="string"}function ww(e){return gl(e)&&e.tagName.toLowerCase()==="button"}function Sw(e){return gl(e)&&e.tagName.toLowerCase()==="form"}function kw(e){return gl(e)&&e.tagName.toLowerCase()==="input"}function Ew(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Cw(e,t){return e.button===0&&(!t||t==="_self")&&!Ew(e)}var Vs=null;function _w(){if(Vs===null)try{new FormData(document.createElement("form"),0),Vs=!1}catch{Vs=!0}return Vs}var Nw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ql(e){return e!=null&&!Nw.has(e)?(Jt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pi}"`),null):e}function jw(e,t){let n,r,o,s,i;if(Sw(e)){let a=e.getAttribute("action");r=a?gn(a,t):null,n=e.getAttribute("method")||hi,o=ql(e.getAttribute("enctype"))||pi,s=new FormData(e)}else if(ww(e)||kw(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||a.getAttribute("action");if(r=c?gn(c,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||hi,o=ql(e.getAttribute("formenctype"))||ql(a.getAttribute("enctype"))||pi,s=new FormData(a,e),!_w()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(gl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hi,r=null,o=pi,i=e}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cu(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bw(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&gn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Tw(e,t){if(e.id in t)return t[e.id];try{let n=await xm(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pw(e){return e!=null&&typeof e.page=="string"}function Lw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Mw(e,t,n){let r=await Promise.all(e.map(async o=>{let s=t.routes[o.route.id];if(s){let i=await Tw(s,n);return i.links?i.links():[]}return[]}));return Rw(r.flat(1).filter(Lw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function af(e,t,n,r,o,s){let i=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,a=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,u)=>i(c,u)||a(c,u)):s==="data"?t.filter((c,u)=>{var f;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||a(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function $w(e,t,{includeHydrateFallback:n}={}){return Aw(e.map(r=>{let o=t.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function Aw(e){return[...new Set(e)]}function Dw(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Rw(e,t){let n=new Set,r=new Set(t);return e.reduce((o,s)=>{if(t&&!Pw(s)&&s.as==="script"&&s.href&&r.has(s.href))return o;let a=JSON.stringify(Dw(s));return n.has(a)||(n.add(a),o.push({key:a,link:s})),o},[])}function Mm(){let e=S.useContext(ao);return Cu(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ow(){let e=S.useContext(ml);return Cu(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _u=S.createContext(void 0);_u.displayName="FrameworkContext";function $m(){let e=S.useContext(_u);return Cu(e,"You must render this element inside a <HydratedRouter> element"),e}function Iw(e,t){let n=S.useContext(_u),[r,o]=S.useState(!1),[s,i]=S.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=S.useRef(null);S.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let x=m=>{m.forEach(g=>{i(g.isIntersecting)})},E=new IntersectionObserver(x,{threshold:.5});return h.current&&E.observe(h.current),()=>{E.disconnect()}}},[e]),S.useEffect(()=>{if(r){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[r]);let p=()=>{o(!0)},y=()=>{o(!1),i(!1)};return n?e!=="intent"?[s,h,{}]:[s,h,{onFocus:wo(a,p),onBlur:wo(c,y),onMouseEnter:wo(u,p),onMouseLeave:wo(d,y),onTouchStart:wo(f,p)}]:[!1,h,{}]}function wo(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function zw({page:e,...t}){let{router:n}=Mm(),r=S.useMemo(()=>wm(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(Bw,{page:e,matches:r,...t}):null}function Fw(e){let{manifest:t,routeModules:n}=$m(),[r,o]=S.useState([]);return S.useEffect(()=>{let s=!1;return Mw(e,t,n).then(i=>{s||o(i)}),()=>{s=!0}},[e,t,n]),r}function Bw({page:e,matches:t,...n}){let r=gr(),{manifest:o,routeModules:s}=$m(),{basename:i}=Mm(),{loaderData:a,matches:c}=Ow(),u=S.useMemo(()=>af(e,t,c,o,r,"data"),[e,t,c,o,r]),d=S.useMemo(()=>af(e,t,c,o,r,"assets"),[e,t,c,o,r]),f=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(t.forEach(m=>{var w;let g=o.routes[m.route.id];!g||!g.hasLoader||(!u.some(v=>v.route.id===m.route.id)&&m.route.id in a&&((w=s[m.route.id])!=null&&w.shouldRevalidate)||g.hasClientLoader?x=!0:y.add(m.route.id))}),y.size===0)return[];let E=bw(e,i,"data");return x&&y.size>0&&E.searchParams.set("_routes",t.filter(m=>y.has(m.route.id)).map(m=>m.route.id).join(",")),[E.pathname+E.search]},[i,a,r,o,u,t,e,s]),h=S.useMemo(()=>$w(d,o),[d,o]),p=Fw(d);return S.createElement(S.Fragment,null,f.map(y=>S.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),h.map(y=>S.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),p.map(({key:y,link:x})=>S.createElement("link",{key:y,nonce:n.nonce,...x})))}function Uw(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Am=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Am&&(window.__reactRouterVersion="7.8.2")}catch{}function Hw({basename:e,children:t,window:n}){let r=S.useRef();r.current==null&&(r.current=Tx({window:n,v5Compat:!0}));let o=r.current,[s,i]=S.useState({action:o.action,location:o.location}),a=S.useCallback(c=>{S.startTransition(()=>i(c))},[i]);return S.useLayoutEffect(()=>o.listen(a),[o,a]),S.createElement(vw,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:o})}var Dm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rm=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:y}=S.useContext(qt),x=typeof u=="string"&&Dm.test(u),E,m=!1;if(typeof u=="string"&&x&&(E=u,Am))try{let T=new URL(window.location.href),P=u.startsWith("//")?new URL(T.protocol+u):new URL(u),I=gn(P.pathname,y);P.origin===T.origin&&I!=null?u=I+P.search+P.hash:m=!0}catch{Jt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=nw(u,{relative:o}),[w,v,k]=Iw(r,h),N=Kw(u,{replace:i,state:a,target:c,preventScrollReset:d,relative:o,viewTransition:f});function b(T){t&&t(T),T.defaultPrevented||N(T)}let $=S.createElement("a",{...h,...k,href:E||g,onClick:m||s?t:b,ref:Uw(p,v),target:c,"data-discover":!x&&n==="render"?"true":void 0});return w&&!x?S.createElement(S.Fragment,null,$,S.createElement(zw,{page:g})):$});Rm.displayName="Link";var Vw=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:c,...u},d){let f=ks(i,{relative:u.relative}),h=gr(),p=S.useContext(ml),{navigator:y,basename:x}=S.useContext(qt),E=p!=null&&Zw(f)&&a===!0,m=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,g=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(g=g.toLowerCase(),w=w?w.toLowerCase():null,m=m.toLowerCase()),w&&x&&(w=gn(w,x)||w);const v=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=g===m||!o&&g.startsWith(m)&&g.charAt(v)==="/",N=w!=null&&(w===m||!o&&w.startsWith(m)&&w.charAt(m.length)==="/"),b={isActive:k,isPending:N,isTransitioning:E},$=k?t:void 0,T;typeof r=="function"?T=r(b):T=[r,k?"active":null,N?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(b):s;return S.createElement(Rm,{...u,"aria-current":$,className:T,ref:d,style:P,to:i,viewTransition:a},typeof c=="function"?c(b):c)});Vw.displayName="NavLink";var Ww=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:s,method:i=hi,action:a,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let y=Qw(),x=Jw(a,{relative:u}),E=i.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&Dm.test(a),g=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let v=w.nativeEvent.submitter,k=(v==null?void 0:v.getAttribute("formmethod"))||i;y(v||w.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:o,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return S.createElement("form",{ref:p,method:E,action:x,onSubmit:r?c:g,...h,"data-discover":!m&&e==="render"?"true":void 0})});Ww.displayName="Form";function Yw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Om(e){let t=S.useContext(ao);return Te(t,Yw(e)),t}function Kw(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=rw(),c=gr(),u=ks(e,{relative:s});return S.useCallback(d=>{if(Cw(d,t)){d.preventDefault();let f=n!==void 0?n:ss(c)===ss(u);a(e,{replace:f,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[c,a,u,n,r,t,e,o,s,i])}var Gw=0,Xw=()=>`__${String(++Gw)}__`;function Qw(){let{router:e}=Om("useSubmit"),{basename:t}=S.useContext(qt),n=pw();return S.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:c,body:u}=jw(r,t);if(o.navigate===!1){let d=o.fetcherKey||Xw();await e.fetch(d,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:c,body:u,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await e.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:c,body:u,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function Jw(e,{relative:t}={}){let{basename:n}=S.useContext(qt),r=S.useContext(wn);Te(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...ks(e||".",{relative:t})},i=gr();if(e==null){s.search=i.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(d=>d==="")){a.delete("index"),c.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();s.search=d?`?${d}`:""}}return(!e||e===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:un([n,s.pathname])),ss(s)}function Zw(e,{relative:t}={}){let n=S.useContext(Nm);Te(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Om("useViewTransitionState"),o=ks(e,{relative:t});if(!n.isTransitioning)return!1;let s=gn(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=gn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Hi(o.pathname,i)!=null||Hi(o.pathname,s)!=null}const X=({}.VITE_API_BASE??"").replace(/\/$/,"");async function Im(e,t="default"){const n=await fetch(`${X}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:t})});if(!n.ok){const o=await n.text();throw new Error(`Chat request failed: ${n.status} ${o}`)}return(await n.json()).reply}async function qw(){const e=await fetch(`${X}/characters`);if(!e.ok)throw new Error(`List characters failed: ${e.status}`);return e.json()}async function cf({name:e,description:t="",avatar_url:n=null}){const r=await fetch(`${X}/characters`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,avatar_url:n})});if(!r.ok)throw new Error(`Create character failed: ${r.status}`);return r.json()}async function zm(e){const t=await fetch(`${X}/characters/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete character failed: ${t.status}`)}async function Zt(){const e=await fetch(`${X}/config`);if(!e.ok){const t=await e.text();throw new Error(`Get config failed: ${e.status} ${t}`)}return e.json()}async function _t(e){const t=await fetch(`${X}/config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();try{const r=JSON.parse(n),o=typeof(r==null?void 0:r.detail)=="string"?r.detail:JSON.stringify((r==null?void 0:r.detail)??r);throw new Error(`Update config failed: ${t.status} ${o}`)}catch{throw new Error(`Update config failed: ${t.status} ${n}`)}}return t.json()}async function e1(e){const t=e?`?provider=${encodeURIComponent(e)}`:"",n=await fetch(`${X}/models${t}`);if(!n.ok){const r=await n.text();try{const o=JSON.parse(r),s=typeof(o==null?void 0:o.detail)=="string"?o.detail:JSON.stringify((o==null?void 0:o.detail)??o);throw new Error(`Get models failed: ${n.status} ${s}`)}catch{throw new Error(`Get models failed: ${n.status} ${r}`)}}return n.json()}async function Nu(){const e=await fetch(`${X}/lorebooks/`);if(!e.ok)throw new Error(`List lorebooks failed: ${e.status}`);return e.json()}async function t1({name:e,description:t="",entries:n=[]}){const r=await fetch(`${X}/lorebooks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,entries:n})});if(!r.ok)throw new Error(`Create lorebook failed: ${r.status}`);return r.json()}async function n1(e){const t=new FormData;t.append("file",e);const n=await fetch(`${X}/lorebooks/import`,{method:"POST",body:t});if(!n.ok)throw new Error(`Import lorebook failed: ${n.status}`);return n.json()}async function r1(e,t){const n=await fetch(`${X}/characters/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update character failed: ${n.status}`);return n.json()}async function o1(e){const t=await fetch(`${X}/image/models?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Get image models failed: ${t.status}`);return t.json()}async function s1(e="default"){const t=await fetch(`${X}/images/generate_from_chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(!t.ok)throw new Error(`Generate image failed: ${t.status}`);return t.json()}async function i1(e,t="default"){const n=await fetch(`${X}/images/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,session_id:t})});if(!n.ok)throw new Error(`Generate image failed: ${n.status}`);return n.json()}async function Fm(e,t){const n=await fetch(`${X}/lorebooks/entries/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update lore failed: ${n.status}`);return n.json()}async function Bm(e,t){const n=await fetch(`${X}/lorebooks/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Update lorebook failed: ${n.status}`);return n.json()}async function cc(e){const t=await fetch(`${X}/lorebooks/${e}`);if(!t.ok)throw new Error(`Get lorebook failed: ${t.status}`);return t.json()}async function l1(e){const t=await fetch(`${X}/lorebooks/entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Create lore entry failed: ${t.status}`);return t.json()}async function a1(e){const t=await fetch(`${X}/lorebooks/entries/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete lore entry failed: ${t.status}`);return t.json()}async function c1(e){const t=await fetch(`${X}/lorebooks/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Delete lorebook failed: ${t.status}`);return t.json()}async function u1(e,t=10,n=!1){const r=new URLSearchParams({q:e||"",limit:t.toString(),use_rag:n.toString()}),o=await fetch(`${X}/lorebooks/search?${r}`);if(!o.ok)throw new Error(`Search lorebooks failed: ${o.status}`);return o.json()}async function d1(e,t){const n=await fetch(`${X}/lorebooks/characters/${e}/lorebooks/${t}`,{method:"POST"});if(!n.ok)throw new Error(`Link character to lorebook failed: ${n.status}`);return n.json()}async function f1(e,t){const n=await fetch(`${X}/lorebooks/characters/${e}/lorebooks/${t}`,{method:"DELETE"});if(!n.ok)throw new Error(`Unlink character from lorebook failed: ${n.status}`);return n.json()}async function h1(e){const t=await fetch(`${X}/lorebooks/characters/${e}/lorebooks`);if(!t.ok)throw new Error(`Get character lorebooks failed: ${t.status}`);return t.json()}async function p1(e){const t=await fetch(`${X}/lorebooks/inject_context`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Inject context failed: ${t.status}`);return t.json()}async function Um(){const e=await fetch(`${X}/chats`);if(!e.ok)throw new Error(`List chats failed: ${e.status}`);return e.json()}async function m1(e){const t=await fetch(`${X}/chats/${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Get chat failed: ${t.status}`);return t.json()}async function Hm(e){const t=await fetch(`${X}/chats/${encodeURIComponent(e)}/reset`,{method:"POST"});if(!t.ok)throw new Error(`Reset chat failed: ${t.status}`);return t.json()}async function g1(){const e=await fetch(`${X}/prompts`);if(!e.ok)throw new Error(`Get prompts failed: ${e.status}`);return e.json()}async function y1(e){const t=await fetch(`${X}/prompts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Save prompts failed: ${t.status}`);return t.json()}async function v1(e="default"){const t=await fetch(`${X}/lore/suggest_from_chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(!t.ok)throw new Error(`Suggest lore failed: ${t.status}`);return t.json()}async function x1(){const e=await fetch(`${X}/tools/mcp`);if(!e.ok)throw new Error(`Get MCP servers failed: ${e.status}`);return e.json()}async function w1(e){const t=await fetch(`${X}/tools/mcp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Save MCP servers failed: ${t.status}`);return t.json()}async function S1(){const e=await fetch(`${X}/tools/mcp/awesome`);if(!e.ok)throw new Error(`Fetch MCP awesome failed: ${e.status}`);return e.json()}const he={backgroundAnimations:[],extensions:[],enabledExtensions:{},pluginDisposers:{},registeredStyles:{}};function Es(){if(console.log("Plugin state updated"),Array.isArray(he._listeners))for(const e of he._listeners.slice())try{e()}catch(t){console.warn("pluginHost listener error",t)}}function k1(){window.coolChat||(window.coolChat={})}function uf(e,t){const n=document.createElement("style");n.textContent=t,document.head.appendChild(n),he.registeredStyles[e]=he.registeredStyles[e]||[],he.registeredStyles[e].push(n)}function df(e,t){const n=(t||[]).map(r=>({...r,__pluginId:e}));he.backgroundAnimations=[...he.backgroundAnimations,...n],Es()}function E1(){return he.backgroundAnimations.map(({__pluginId:e,...t})=>t)}function C1(){return he.extensions.map(e=>({...e,enabled:!!he.enabledExtensions[e.id]}))}function uc(e){he.enabledExtensions=e,Es()}function _1(e){he.extensions=Array.isArray(e)?e:[],Es()}async function ff(e){var t;k1(),window.coolChat.registerStyles=n=>{console.warn("window.coolChat.registerStyles is deprecated; use the init API argument instead"),uf("__global__",n)},window.coolChat.registerBackgroundAnimations=n=>{console.warn("window.coolChat.registerBackgroundAnimations is deprecated; use the init API argument instead"),df("__global__",n)},window.coolChat.getExtensions=C1,window.coolChat.setEnabledExtensions=uc;try{let n=[],r={};if(e&&typeof e=="object")n=Array.isArray(e.plugins)?e.plugins:[],r=e.enabled||{};else{const s=await fetch(`${X}/plugins`);if(!s.ok){console.warn("Failed to fetch /plugins");return}const i=await s.json();n=Array.isArray(i.plugins)?i.plugins:[],r=i.enabled||{}}const o=new Set(Object.keys(r).filter(s=>r[s]));for(const s of Object.keys(he.pluginDisposers||{}))if(!o.has(s))try{await N1(s)}catch(i){console.warn("Unload failed",s,i)}he.extensions=n,he.enabledExtensions={...he.enabledExtensions,...r||{}};for(const s of n){if(!he.enabledExtensions[s.id]){console.log(`Skipping disabled plugin: ${s.id}`);continue}try{const i=((t=s==null?void 0:s.client)==null?void 0:t.entry)||"plugin.js",a=`${X}/plugins/static/${s.id}/${i}`;console.log("Loading plugin:",s.id,"from",a);const c=await xm(()=>import(a),[]),u=(c==null?void 0:c.default)||(c==null?void 0:c.init);if(typeof u=="function"){const d=await u({registerStyles:f=>uf(s.id,f),registerBackgroundAnimations:f=>df(s.id,f)});typeof d=="function"&&(he.pluginDisposers[s.id]=d)}}catch(i){console.warn("Plugin load failed:",s==null?void 0:s.id,i)}}Es()}catch(n){console.warn("Plugin manifest load failed",n)}}async function N1(e){try{const t=he.pluginDisposers&&he.pluginDisposers[e];if(typeof t=="function"){try{await t()}catch(r){console.warn("Plugin disposer threw",e,r)}delete he.pluginDisposers[e]}const n=he.registeredStyles[e]||[];for(const r of n)try{r.remove()}catch{}delete he.registeredStyles[e],he.backgroundAnimations=he.backgroundAnimations.filter(r=>r.__pluginId!==e),Es()}catch(t){console.warn("Failed to unload plugin",e,t)}}function j1(e){he._listeners=he._listeners||[],he._listeners.push(e)}function b1(e){he._listeners=he._listeners||[];const t=he._listeners.indexOf(e);t>=0&&he._listeners.splice(t,1)}const hf=e=>{let t;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,h))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(r,o,a);return a},T1=e=>e?hf(e):hf,P1=e=>e;function L1(e,t=P1){const n=O.useSyncExternalStore(e.subscribe,O.useCallback(()=>t(e.getState()),[e,t]),O.useCallback(()=>t(e.getInitialState()),[e,t]));return O.useDebugValue(n),n}const pf=e=>{const t=T1(e),n=r=>L1(t,r);return Object.assign(n,t),n},yr=e=>e?pf(e):pf,st=yr((e,t)=>({messages:[],input:"",sending:!1,error:null,sessionId:"default",availableSessions:["default"],setMessages:n=>e(r=>({messages:typeof n=="function"?n(r.messages):n})),setInput:n=>e({input:n}),setSending:n=>e({sending:n}),setError:n=>e({error:n}),setSessionId:n=>e({sessionId:n}),setAvailableSessions:n=>e({availableSessions:n}),sendMessage:async n=>{if(!n.trim()||t().sending)return"";const{sessionId:r,messages:o}=t();n.trim(),e({sending:!0,error:null});try{const s=await Im(n,r);return console.log("sendMessage: got reply:",s.slice(0,50)),e({sending:!1}),s}catch(s){throw e({error:s.message,sending:!1,messages:o}),s}},loadChat:async n=>{try{const{messages:r}=await m1(n);e({messages:r||[],sessionId:n,error:null})}catch(r){e({error:r.message})}},loadSessions:async()=>{try{const{sessions:n}=await Um();e({availableSessions:n||["default"]})}catch(n){console.warn("Failed to load sessions:",n)}},resetChatSession:async n=>{try{await Hm(n),await t().loadChat(n)}catch(r){e({error:r.message})}},createNewSession:n=>{const r=n.trim()||`session-${Date.now()}`;e({sessionId:r,messages:[],input:"",error:null})}})),M1=yr((e,t)=>({showConfig:!1,showCharacters:!1,showChats:!1,showTools:!1,showLorebooks:!1,showCircuits:!1,phoneOpen:!1,settingsTab:"connection",phoneUrl:"https://example.org",phoneStyle:"classic",suggestOpen:!1,suggests:[],showSOHint:!1,suppressSOHint:!1,expandedEntries:{},editorOpen:!1,editingChar:null,appTheme:{background_animations:[]},setShowConfig:n=>e({showConfig:n}),setShowCharacters:n=>e({showCharacters:n}),setShowChats:n=>e({showChats:n}),setShowTools:n=>e({showTools:n}),setShowLorebooks:n=>e({showLorebooks:n}),setShowCircuits:n=>e({showCircuits:n}),setPhoneOpen:n=>e({phoneOpen:n}),setSettingsTab:n=>e({settingsTab:n}),setPhoneUrl:n=>e({phoneUrl:n}),setPhoneStyle:n=>e({phoneStyle:n}),setSuggestOpen:n=>e({suggestOpen:n}),setSuggests:n=>e({suggests:n}),setShowSOHint:n=>e({showSOHint:n}),setSuppressSOHint:n=>e({suppressSOHint:n}),setExpandedEntries:n=>e({expandedEntries:n}),toggleExpandedEntry:n=>e(r=>({expandedEntries:{...r.expandedEntries,[n]:!r.expandedEntries[n]}})),setEditorOpen:n=>e({editorOpen:n}),setEditingChar:n=>e({editingChar:n}),closeAllPanels:()=>e({showConfig:!1,showCharacters:!1,showChats:!1,showTools:!1,showLorebooks:!1,showCircuits:!1}),togglePanel:(n,r)=>{const o=t()[n],s=r!==void 0?r:!o;s&&n!=="phoneOpen"&&t().closeAllPanels(),e({[n]:s})},applyPluginAnimations:n=>{!n||!Array.isArray(n)||e(r=>({...r,appTheme:{...r.appTheme,background_animations:n.map(o=>typeof o=="string"?o:o.id).filter(Boolean)}}))},setAppTheme:n=>{e(r=>({...r,appTheme:{...r.appTheme,...n}}))},updateAppTheme:n=>{e(r=>({...r,appTheme:{...r.appTheme,...n}}))}})),$1=yr((e,t)=>({characters:[],selectedCharacterId:null,lorebooks:[],selectedLorebook:null,loreEntries:[],selectedLorebookId:null,userPersona:{name:"User",description:""},extensions:[],extensionsEnabled:{},extensionsInitialized:!1,setCharacters:n=>e({characters:n}),setSelectedCharacterId:n=>e({selectedCharacterId:n}),setLorebooks:n=>e({lorebooks:n}),setSelectedLorebook:n=>e({selectedLorebook:n}),setLoreEntries:n=>e({loreEntries:n}),setSelectedLorebookId:n=>e({selectedLorebookId:n}),setUserPersona:n=>e({userPersona:n}),setExtensions:n=>e({extensions:n}),setExtensionsEnabled:n=>e({extensionsEnabled:n}),setExtensionsInitialized:n=>e({extensionsInitialized:n}),loadCharacters:async()=>{try{const n=await qw();e({characters:n||[]})}catch(n){console.warn("Failed to load characters:",n)}},loadLorebooks:async()=>{try{const n=await Nu(),r=(n==null?void 0:n.lorebooks)||[];e({lorebooks:r}),(r==null?void 0:r.length)>0&&!t().selectedLorebook&&e({selectedLorebook:r[0]})}catch(n){console.warn("Failed to load lorebooks:",n)}},loadLoreEntries:async n=>{try{const r=await cc(n);e({loreEntries:r.entries||[]})}catch(r){console.warn("Failed to load lore entries:",r),e({loreEntries:[]})}},deleteCharacterAction:async n=>{try{await zm(n);const r=t().characters.filter(o=>o.id!==n);e({characters:r}),t().selectedCharacterId===n&&e({selectedCharacterId:null})}catch(r){throw console.error("Failed to delete character:",r),r}},updateLoreEntry:async(n,r)=>{try{await Fm(n,r);const s=t().loreEntries.map(i=>i.id===n?{...i,...r}:i);e({loreEntries:s})}catch(o){throw console.error("Failed to update lore entry:",o),o}},updateExtensionsEnabled:async(n,r={})=>{const{persist:o=!0}=r;try{if(e({extensionsEnabled:n}),o&&!(await fetch(`${X}/plugins/enabled`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:n})})).ok)throw new Error("Failed to persist extensions")}catch(s){throw console.error("Failed to update extensions:",s),s}},findCharacterById:n=>t().characters.find(r=>r.id===n)||null,findLorebookById:n=>t().lorebooks.find(r=>r.id===n)||null})),A1=yr((e,t)=>({activeProvider:"echo",providers:{},configDraft:{api_key:"",api_base:"",model:"",temperature:.7},modelList:[],loadingModels:!1,debugFlags:{log_prompts:!1,log_responses:!1},userPersona:{name:"",description:""},maxTokens:2048,structuredOutput:!1,setActiveProvider:n=>e({activeProvider:n}),setProviders:n=>e({providers:n}),setConfigDraft:n=>e({configDraft:n}),setModelList:n=>e({modelList:n}),setLoadingModels:n=>e({loadingModels:n}),setUserPersona:n=>e({userPersona:n}),setDebugFlags:n=>e({debugFlags:n}),setMaxTokens:n=>e({maxTokens:n}),setStructuredOutput:n=>e({structuredOutput:n}),loadConfig:async()=>{var n;try{const r=await Zt();e({activeProvider:r.active_provider||"echo",providers:r.providers||{},debugFlags:r.debug||{log_prompts:!1,log_responses:!1},userPersona:r.user_persona||{name:"",description:""},maxTokens:r.max_context_tokens||2048,structuredOutput:r.structured_output||!1});const o=((n=r.providers)==null?void 0:n[r.active_provider])||{};e({configDraft:{api_key:"",api_base:o.api_base||"",model:o.model||"",temperature:o.temperature??.7}}),await t().loadModelsForProvider(r.active_provider)}catch(r){console.warn("Failed to load config:",r)}},updateMaxTokens:async n=>{try{await _t({max_context_tokens:n}),e({maxTokens:n})}catch(r){throw console.error("Failed to update max tokens:",r),r}},updateDebugFlags:async n=>{try{await _t({debug:n}),e({debugFlags:n})}catch(r){throw console.error("Failed to update debug flags:",r),r}},updateUserPersona:async n=>{try{await _t({user_persona:n}),e({userPersona:n})}catch(r){throw console.error("Failed to update user persona:",r),r}},updateStructuredOutput:async n=>{try{await _t({structured_output:n}),e({structuredOutput:n})}catch(r){throw console.error("Failed to update structured output:",r),r}},updateProviderConfig:async(n,r)=>{try{await _t({active_provider:n,providers:{[n]:r}}),e(o=>({providers:{...o.providers,[n]:r},configDraft:r}))}catch(o){throw console.error("Failed to update provider config:",o),o}},loadModels:async()=>{const n=t().activeProvider;await t().loadModelsForProvider(n)},loadModelsForProvider:async n=>{try{e({loadingModels:!0});const{models:r}=await e1(n);e({modelList:r||[],loadingModels:!1})}catch(r){console.error("Failed to load models:",r),e({modelList:[],loadingModels:!1})}}})),ea={primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827",phone_style:"classic",background_animations:[]};yr((e,t)=>({appTheme:ea,availableThemes:[ea],currentThemeName:null,customThemes:{},setAppTheme:n=>{e({appTheme:n}),t().applyTheme(n)},updateThemeColors:n=>{e(r=>({appTheme:{...r.appTheme,...n}})),t().applyTheme(t().appTheme)},setPhoneStyle:n=>{e(r=>({appTheme:{...r.appTheme,phone_style:n}}))},addBackgroundAnimation:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:[...r.appTheme.background_animations||[],n].filter((o,s,i)=>i.indexOf(o)===s)}}))},removeBackgroundAnimation:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:(r.appTheme.background_animations||[]).filter(o=>o!==n)}}))},setBackgroundAnimations:n=>{e(r=>({appTheme:{...r.appTheme,background_animations:n}}))},saveCustomTheme:(n,r)=>{e(o=>({customThemes:{...o.customThemes,[n]:{...r}}}));try{const o=localStorage.getItem("coolchat-themes")||"{}",s=JSON.parse(o);s[n]=r,localStorage.setItem("coolchat-themes",JSON.stringify(s))}catch(o){console.warn("Failed to save theme to localStorage:",o)}},deleteCustomTheme:n=>{e(r=>{const o={...r.customThemes};delete o[n];try{const s=localStorage.getItem("coolchat-themes")||"{}",i=JSON.parse(s);delete i[n],localStorage.setItem("coolchat-themes",JSON.stringify(i))}catch(s){console.warn("Failed to delete theme from localStorage:",s)}return{customThemes:o}})},loadCustomTheme:n=>{const r=t().customThemes[n];r?(t().setAppTheme(r),e({currentThemeName:n})):console.warn("Theme not found:",n)},exportTheme:()=>{const n=t().appTheme,r=t().currentThemeName||"Exported Theme";return JSON.stringify({name:r,theme:n,exportedAt:new Date().toISOString(),version:"1.0"},null,2)},importTheme:n=>{try{const{name:r,theme:o}=JSON.parse(n);o&&typeof o=="object"&&t().saveCustomTheme(r,o)}catch(r){throw console.error("Failed to import theme:",r),new Error("Invalid theme format")}},applyTheme:n=>{const r=document.documentElement.style;n.primary&&r.setProperty("--primary",n.primary),n.secondary&&r.setProperty("--panel",n.secondary),n.text1&&r.setProperty("--text",n.text1),n.text2&&r.setProperty("--muted",n.text2),n.highlight&&r.setProperty("--assistant",n.highlight),n.lowlight&&r.setProperty("--bg",n.lowlight);const o=n.background_animations||[],s=new CustomEvent("coolchat:themeUpdate",{detail:{...n,background_animations:o}});window.dispatchEvent(s)},resetTheme:()=>{t().setAppTheme(ea),e({currentThemeName:null})}}));const D1=()=>{const e=st(),t=S.useCallback(async u=>await e.sendMessage(u),[e]),n=S.useCallback(async u=>{e.setSessionId(u),await e.loadChat(u)},[e]),r=st(u=>u.messages),o=st(u=>u.input),s=st(u=>u.sending),i=st(u=>u.error),a=st(u=>u.sessionId),c=st(u=>u.availableSessions);return{messages:r,input:o,sending:s,error:i,sessionId:a,availableSessions:c,sendMessage:t,setInput:e.setInput,setError:e.setError,setMessages:e.setMessages,setSending:e.setSending,switchSession:n,resetChat:e.resetChatSession,loadSessions:e.loadSessions,createSession:e.createNewSession}},R1=()=>{const e=st(),t=S.useCallback(async()=>{try{const r=await s1(e.sessionId);e.setMessages(o=>[...o,{role:"assistant",image_url:r.image_url,content:""}])}catch(r){throw new Error(r.message)}},[e]),n=S.useCallback(async r=>{try{const o=await i1(r,e.sessionId);e.setMessages(s=>[...s,{role:"assistant",image_url:o.image_url,content:r}])}catch(o){throw new Error(o.message)}},[e]);return{generateImageFromLastMessage:t,generateImage:n}},O1=()=>{const e=st();return{suggestLore:S.useCallback(async()=>{try{return await v1(e.sessionId)}catch(n){throw new Error(n.message)}},[e])}};class I1{constructor(){this.config=null,this.lastConfigCheck=0,this.configCacheTime=5e3,this.loadConfig()}async loadConfig(){const t=Date.now();if(this.config&&t-this.lastConfigCheck<this.configCacheTime)return await this.config;try{const n=await fetch(`${X}/debug.json`);if(!n.ok)throw new Error(`HTTP ${n.status}`);this.config=await n.json(),this.lastConfigCheck=t}catch{this.config||console.warn("Failed to load debug.json - using defaults"),this.config={frontend:{tool_parsing:!0,llm_responses:!0,api_calls:!1,store_actions:!1,component_render:!1,performance:!1},enabled:!0}}return this.config}async isEnabled(t){const n=await this.loadConfig();return!n||!n.enabled?!1:(n.frontend||{})[t]===!0}async log(t,n,...r){await this.isEnabled(t)&&console.log(`[DEBUG ${t.toUpperCase()}] ${n}`,...r)}async debugToolParsing(t,...n){await this.log("tool_parsing",t,...n)}async debugLLMResponses(t,...n){await this.log("llm_responses",t,...n)}async debugAPICalls(t,...n){await this.log("api_calls",t,...n)}async debugStoreActions(t,...n){await this.log("store_actions",t,...n)}async debugComponentRender(t,...n){await this.log("component_render",t,...n)}async debugPerformance(t,...n){await this.log("performance",t,...n)}}let ta=null;function Vm(){return ta||(ta=new I1),ta}const Wt=(e,...t)=>Vm().debugToolParsing(e,...t),mf=(e,...t)=>Vm().debugLLMResponses(e,...t),is=new Map,Ws=e=>{const t=is.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},z1=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=is.get(n.name);if(r)return{type:"tracked",store:e,...r};const o={connection:t.connect(n),stores:{}};return is.set(n.name,o),{type:"tracked",store:e,...o}},F1=(e,t)=>{if(t===void 0)return;const n=is.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&is.delete(e))},B1=e=>{var t,n;if(!e)return;const r=e.split(`
`),o=r.findIndex(i=>i.includes("api.setState"));if(o<0)return;const s=((t=r[o+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(s))==null?void 0:n[1]},U1=(e,t={})=>(n,r,o)=>{const{enabled:s,anonymousActionType:i,store:a,...c}=t;let u;try{u=(s??!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return e(n,r,o);const{connection:d,...f}=z1(a,u,c);let h=!0;o.setState=(x,E,m)=>{const g=n(x,E);if(!h)return g;const w=m===void 0?{type:i||B1(new Error().stack)||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(d==null||d.send(w,r()),g):(d==null||d.send({...w,type:`${a}/${w.type}`},{...Ws(c.name),[a]:o.getState()}),g)},o.devtools={cleanup:()=>{d&&typeof d.unsubscribe=="function"&&d.unsubscribe(),F1(c.name,a)}};const p=(...x)=>{const E=h;h=!1,n(...x),h=E},y=e(o.setState,r,o);if(f.type==="untracked"?d==null||d.init(y):(f.stores[f.store]=o,d==null||d.init(Object.fromEntries(Object.entries(f.stores).map(([x,E])=>[x,x===f.store?y:E.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let x=!1;const E=o.dispatch;o.dispatch=(...m)=>{E(...m)}}return d.subscribe(x=>{var E;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return na(x.payload,m=>{if(m.type==="__setState"){if(a===void 0){p(m.state);return}Object.keys(m.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const g=m.state[a];if(g==null)return;JSON.stringify(o.getState())!==JSON.stringify(g)&&p(g);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(m)});case"DISPATCH":switch(x.payload.type){case"RESET":return p(y),a===void 0?d==null?void 0:d.init(o.getState()):d==null?void 0:d.init(Ws(c.name));case"COMMIT":if(a===void 0){d==null||d.init(o.getState());return}return d==null?void 0:d.init(Ws(c.name));case"ROLLBACK":return na(x.state,m=>{if(a===void 0){p(m),d==null||d.init(o.getState());return}p(m[a]),d==null||d.init(Ws(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return na(x.state,m=>{if(a===void 0){p(m);return}JSON.stringify(o.getState())!==JSON.stringify(m[a])&&p(m[a])});case"IMPORT_STATE":{const{nextLiftedState:m}=x.payload,g=(E=m.computedStates.slice(-1)[0])==null?void 0:E.state;if(!g)return;p(a===void 0?g:g[a]),d==null||d.send(null,m);return}case"PAUSE_RECORDING":return h=!h}return}}),y},H1=U1,na=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)},Wm=yr()(H1((e,t)=>({lorebooks:[],selectedLorebook:null,lorebookLoading:!1,loreEntries:[],selectedEntries:new Set,entryLoading:!1,currentPage:0,pageSize:50,totalEntries:0,hasMoreEntries:!1,searchQuery:"",searchResults:[],searchFilters:{keywords:[],secondary_keywords:[]},isSearching:!1,showEditor:!1,editingEntry:null,showBulkOps:!1,showImport:!1,linkedCharacters:[],availableCharacters:[],cache:new Map,fetchLorebooks:async()=>{console.log("[DEBUG] fetchLorebooks called");try{e({lorebookLoading:!0});const n=await Nu(),r=n&&n.lorebooks?n.lorebooks:[];console.log("[DEBUG] Fetch completed, found",r.length,"lorebooks"),e({lorebooks:r,lorebookLoading:!1}),r.length>0&&!t().selectedLorebook&&t().selectLorebook(r[0])}catch(n){console.error("Failed to fetch lorebooks:",n),e({lorebookLoading:!1})}},selectLorebook:n=>{e({selectedLorebook:n}),n?t().refreshLoreEntries():e({loreEntries:[],totalEntries:0,currentPage:0,hasMoreEntries:!1})},createLorebookAction:async n=>{try{const r=await t1({name:n.name,description:n.description||"",entries:n.entries||[]});return t().fetchLorebooks(),r}catch(r){throw console.error("Failed to create lorebook:",r),r}},updateLorebookAction:async(n,r)=>{try{await Bm(n,r);const o=t().lorebooks.map(i=>i.id===n?{...i,...r}:i);e({lorebooks:o});const s=t().selectedLorebook;s&&s.id===n&&e({selectedLorebook:{...s,...r}})}catch(o){throw console.error("Failed to update lorebook:",o),o}},deleteLorebookAction:async n=>{try{await c1(n);const r=t().lorebooks.filter(s=>s.id!==n);e({lorebooks:r});const o=t().selectedLorebook;o&&o.id===n&&e({selectedLorebook:null,loreEntries:[]})}catch(r){throw console.error("Failed to delete lorebook:",r),r}},refreshLoreEntries:async()=>{const n=t().selectedLorebook;if(n)try{e({entryLoading:!0});const o=(await cc(n.id)).entries||[];e({loreEntries:o,totalEntries:o.length,currentPage:0,hasMoreEntries:!1,entryLoading:!1})}catch(r){console.error("Failed to refresh lore entries:",r),e({entryLoading:!1})}},loadLoreEntriesPaginated:async(n=0,r=50)=>{const o=t().selectedLorebook;if(o)try{e({entryLoading:!0});const i=(await cc(o.id)).entries||[],a=n*r,c=a+r;e({loreEntries:i.slice(a,c),currentPage:n,pageSize:r,totalEntries:i.length,hasMoreEntries:c<i.length,entryLoading:!1})}catch(s){console.error("Failed to load lore entries:",s),e({entryLoading:!1})}},createLoreEntryAction:async n=>{try{const r=t().selectedLorebook;if(!r)throw new Error("No lorebook selected");const o={...n,lorebook_id:r.id},s=await l1(o),i=t().loreEntries;return e({loreEntries:[...i,s],totalEntries:t().totalEntries+1}),s}catch(r){throw console.error("Failed to create lore entry:",r),r}},updateLoreEntryAction:async(n,r)=>{try{await Fm(n,r);const s=t().loreEntries.map(i=>i.id===n?{...i,...r}:i);e({loreEntries:s})}catch(o){throw console.error("Failed to update lore entry:",o),o}},deleteLoreEntryAction:async(n,r=!0)=>{try{if(await a1(n),r){const s=t().loreEntries.filter(i=>i.id!==n);e({loreEntries:s,totalEntries:t().totalEntries-1,selectedEntries:new Set([...t().selectedEntries].filter(i=>i!==n))})}}catch(o){throw console.error("Failed to delete lore entry:",o),o}},searchLoreAction:async(n,r={},o=!1)=>{try{e({isSearching:!0,searchQuery:n});const s=await u1(n,100,o);e({searchResults:s.results||[],isSearching:!1})}catch(s){console.error("Search failed:",s),e({isSearching:!1})}},clearSearch:()=>{e({searchQuery:"",searchResults:[],searchFilters:{keywords:[],secondary_keywords:[]}})},toggleEntrySelection:n=>{const r=new Set(t().selectedEntries);r.has(n)?r.delete(n):r.add(n),e({selectedEntries:r})},selectAllEntries:()=>{const n=t().loreEntries.map(o=>o.id);if(new Set([...n].filter(o=>!t().selectedEntries.has(o))).size>0){const o=new Set([...t().selectedEntries,...n]);e({selectedEntries:o})}else e({selectedEntries:new Set})},clearSelection:()=>{e({selectedEntries:new Set})},bulkUpdateEntries:async n=>{const r=Array.from(t().selectedEntries);try{for(const o of r)n.type==="update"&&await t().updateLoreEntryAction(o,n.data);t().clearSelection()}catch(o){throw console.error("Bulk update failed:",o),o}},bulkDeleteEntries:async()=>{const n=Array.from(t().selectedEntries);try{for(const s of n)await t().deleteLoreEntryAction(s,!1);const o=t().loreEntries.filter(s=>!n.includes(s.id));e({loreEntries:o,selectedEntries:new Set,totalEntries:t().totalEntries-n.length})}catch(r){throw console.error("Bulk delete failed:",r),r}},loadLinkedCharacters:async n=>{try{const r=await h1(n);e({linkedCharacters:r.lorebooks||[]})}catch(r){throw console.error("Failed to load linked characters:",r),r}},linkCharacterAction:async n=>{const r=t().selectedLorebook;if(r)try{await d1(n,r.id),t().loadLinkedCharacters(n)}catch(o){throw console.error("Failed to link character:",o),o}},unlinkCharacterAction:async n=>{const r=t().selectedLorebook;if(r)try{await f1(n,r.id),t().loadLinkedCharacters(n)}catch(o){throw console.error("Failed to unlink character:",o),o}},importLorebookAction:async n=>{try{await n1(n),t().fetchLorebooks()}catch(r){throw console.error("Import failed:",r),r}},injectContextForChat:async(n,r={})=>{const o=t().selectedLorebook;if(!o)throw new Error("No lorebook selected");const s=n.slice(-3).join(" "),i={session_id:r.sessionId||"default",max_tokens:r.maxTokens||1e3,lorebook_ids:o?[o.id]:[],recent_text:s};try{return await p1(i)}catch(a){throw console.error("Context injection failed:",a),a}},setShowEditor:(n,r=null)=>{e({showEditor:n,editingEntry:r})},setShowBulkOps:n=>{e({showBulkOps:n})},setShowImport:n=>{e({showImport:n})},getCached:n=>t().cache.get(n),setCached:(n,r)=>{const o=new Map(t().cache);o.set(n,r),e({cache:o})},reset:()=>{e({selectedLorebook:null,loreEntries:[],selectedEntries:new Set,currentPage:0,searchQuery:"",searchResults:[],showEditor:!1,editingEntry:null,showBulkOps:!1,showImport:!1,linkedCharacters:[],availableCharacters:[]})}}),{name:"lorebook-store"})),V1=({lorebooks:e,viewMode:t,selectedLorebookId:n,onSelectLorebook:r,onEditLorebook:o,onDeleteLorebook:s,onCreateLorebook:i})=>{const[a,c]=S.useState(""),[u,d]=S.useState(""),f=async h=>{h.preventDefault(),a.trim()&&(await i({name:a,description:u,entries:[]}),c(""),d(""))};return e.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"No Lorebooks Yet"}),l.jsx("p",{children:"Create your first lorebook to get started with organizing your game world."}),l.jsxs("form",{onSubmit:f,className:"quick-create-form",children:[l.jsx("input",{type:"text",placeholder:"Lorebook name",value:a,onChange:h=>c(h.target.value),required:!0}),l.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:h=>d(h.target.value)}),l.jsx("button",{type:"submit",className:"primary",children:"Create Lorebook"})]})]}):t==="table"?l.jsx("div",{className:"lorebook-table-container",children:l.jsxs("table",{className:"lorebook-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Name"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Entries"}),l.jsx("th",{children:"Last Updated"}),l.jsx("th",{children:"Actions"})]})}),l.jsx("tbody",{children:e.map(h=>l.jsxs("tr",{className:n===h.id?"selected":"",onClick:()=>r(h),children:[l.jsx("td",{className:"lorebook-name",children:h.name}),l.jsx("td",{className:"lorebook-description",children:h.description||""}),l.jsx("td",{className:"entry-count",children:h.entry_count}),l.jsx("td",{className:"updated-at",children:new Date(h.updated_at).toLocaleDateString()}),l.jsxs("td",{className:"actions",children:[l.jsx("button",{onClick:p=>{p.stopPropagation(),o(h)},title:"Edit lorebook",children:""}),l.jsx("button",{onClick:p=>{p.stopPropagation(),s(h.id)},title:"Delete lorebook",className:"delete-btn",children:""})]})]},h.id))})]})}):l.jsxs("div",{className:"lorebook-grid",children:[e.map(h=>l.jsx(W1,{lorebook:h,isSelected:n===h.id,onSelect:()=>r(h),onEdit:()=>o(h),onDelete:()=>s(h.id)},h.id)),l.jsxs("div",{className:"lorebook-card quick-create-card",children:[l.jsxs("div",{className:"card-header",children:[l.jsx("div",{className:"card-icon add-icon",children:""}),l.jsx("h3",{children:"Create New"})]}),l.jsx("div",{className:"card-content",children:l.jsxs("form",{onSubmit:f,children:[l.jsx("input",{type:"text",placeholder:"Lorebook title",value:a,onChange:h=>c(h.target.value),required:!0}),l.jsx("textarea",{placeholder:"Brief description...",value:u,onChange:h=>d(h.target.value),rows:2}),l.jsx("button",{type:"submit",className:"primary create-btn",children:"Create Lorebook"})]})})]})]})},W1=({lorebook:e,isSelected:t,onSelect:n,onEdit:r,onDelete:o})=>{const[s,i]=S.useState(!1),a=c=>{const u=new Date(c),f=Math.abs(new Date().getTime()-u.getTime()),h=Math.ceil(f/(1e3*60*60*24));return h===1?"Today":h===2?"Yesterday":h<=7?`${h-1} days ago`:u.toLocaleDateString()};return l.jsxs("div",{className:`lorebook-card ${t?"selected":""} ${s?"show-actions":""}`,onClick:n,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[l.jsxs("div",{className:"card-header",children:[l.jsx("div",{className:"card-icon",children:""}),l.jsx("h3",{className:"card-title",children:e.name}),l.jsxs("div",{className:"card-actions",children:[l.jsx("button",{onClick:c=>{c.stopPropagation(),r()},title:"Edit lorebook",children:""}),l.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm(`Delete "${e.name}"?`)&&o()},title:"Delete lorebook",className:"delete-btn",children:""})]})]}),l.jsxs("div",{className:"card-content",children:[l.jsx("p",{className:"card-description",children:e.description||"No description"}),l.jsxs("div",{className:"card-stats",children:[l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Entries:"}),l.jsx("span",{className:"stat-value",children:e.entry_count})]}),l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Updated:"}),l.jsx("span",{className:"stat-value",children:a(e.updated_at)})]})]})]}),t&&l.jsx("div",{className:"selection-indicator",children:" Selected"})]})},Y1=({onSearch:e,onClear:t,isSearching:n,searchResults:r})=>{const[o,s]=S.useState(""),[i,a]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState({keywords:[],secondaryKeywords:[],logic:"AND ANY",minTrigger:"",maxTrigger:"",limit:50}),[h,p]=S.useState(!1),y=S.useCallback(v=>{i&&clearTimeout(i);const k=setTimeout(async()=>{v.trim()?await e(v,h):t()},300);a(k)},[e,t,i,h]),x=v=>{const k=v.target.value;s(k),y(k)},E=async()=>{(o||d.keywords.length>0)&&await e(o,h)},m=()=>{s(""),f({keywords:[],secondaryKeywords:[],logic:"AND ANY",minTrigger:"",maxTrigger:"",limit:50}),t()},g=(v,k)=>{k.trim()&&f(N=>({...N,[v]:[...N[v],k.trim()].filter((b,$,T)=>T.indexOf(b)===$)}))},w=(v,k)=>{f(N=>({...N,[v]:N[v].filter(b=>b!==k)}))};return l.jsxs("div",{className:"lorebook-search",children:[l.jsxs("div",{className:"search-input-container",children:[l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx("input",{type:"text",placeholder:"Search lore entries...",value:o,onChange:x,className:"search-input"}),o&&l.jsx("button",{onClick:m,className:"clear-search-btn",title:"Clear search",children:""}),l.jsx("button",{onClick:()=>u(!c),className:`advanced-search-btn ${c?"active":""}`,title:"Advanced search",children:""})]}),r.length>0&&o&&l.jsxs("div",{className:"search-stats",children:["Found ",r.length,' entries matching "',o,'"']})]}),c&&l.jsx("div",{className:"advanced-search-panel",children:l.jsxs("div",{className:"advanced-search-content",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("h4",{children:"Primary Keywords"}),l.jsxs("div",{className:"keyword-input-group",children:[d.keywords.map((v,k)=>l.jsxs("span",{className:"keyword-tag",children:[v,l.jsx("button",{onClick:()=>w("keywords",v),className:"remove-keyword",children:""})]},k)),l.jsx("input",{type:"text",placeholder:"Add keyword...",onKeyPress:v=>{v.key==="Enter"&&(g("keywords",v.target.value),v.target.value="")},className:"keyword-input"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("h4",{children:"Secondary Keywords"}),l.jsxs("div",{className:"keyword-input-group",children:[d.secondaryKeywords.map((v,k)=>l.jsxs("span",{className:"keyword-tag",children:[v,l.jsx("button",{onClick:()=>w("secondaryKeywords",v),className:"remove-keyword",children:""})]},k)),l.jsx("input",{type:"text",placeholder:"Add secondary keyword...",onKeyPress:v=>{v.key==="Enter"&&(g("secondaryKeywords",v.target.value),v.target.value="")},className:"keyword-input"})]})]}),l.jsxs("div",{className:"filter-row",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("div",{className:"filter-row",children:l.jsxs("div",{className:"filter-group",children:[l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:h,onChange:v=>p(v.target.checked)}),"Enable Semantic Search (RAG)"]}),l.jsx("div",{className:"rag-info",children:l.jsx("small",{children:"Use semantic search for better results based on meaning rather than exact keywords"})})]})}),l.jsx("h4",{children:"Logic"}),l.jsxs("select",{value:d.logic,onChange:v=>f(k=>({...k,logic:v.target.value})),className:"logic-select",children:[l.jsx("option",{value:"AND ANY",children:"AND ANY"}),l.jsx("option",{value:"AND ALL",children:"AND ALL"}),l.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),l.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("h4",{children:"Trigger Range"}),l.jsxs("div",{className:"trigger-range",children:[l.jsx("input",{type:"number",placeholder:"Min%",value:d.minTrigger,onChange:v=>f(k=>({...k,minTrigger:v.target.value})),min:"0",max:"100"}),l.jsx("span",{children:"to"}),l.jsx("input",{type:"number",placeholder:"Max%",value:d.maxTrigger,onChange:v=>f(k=>({...k,maxTrigger:v.target.value})),min:"0",max:"100"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("h4",{children:"Limit Results"}),l.jsx("input",{type:"number",value:d.limit,onChange:v=>f(k=>({...k,limit:parseInt(v.target.value,10)||50})),min:"1",max:"1000",className:"limit-input"})]})]}),l.jsxs("div",{className:"advanced-search-actions",children:[l.jsx("button",{onClick:E,disabled:n,className:"primary",children:n?"Searching...":"Search"}),l.jsx("button",{onClick:m,className:"secondary",children:"Clear All"}),l.jsx("button",{onClick:()=>u(!1),className:"secondary",children:"Close"})]})]})}),o&&l.jsx("div",{className:"search-results-summary",children:n?l.jsxs("div",{className:"searching-indicator",children:[l.jsx("div",{className:"spinner"}),"Searching..."]}):r.length>0?l.jsx(K1,{results:r.slice(0,3)}):o&&l.jsxs("div",{className:"no-results",children:['No entries found matching "',o,'"']})})]})},K1=({results:e})=>l.jsxs("div",{className:"search-results-preview",children:[e.map((t,n)=>{var r;return l.jsxs("div",{className:"search-result-item",children:[l.jsxs("div",{className:"result-header",children:[l.jsx("h4",{children:t.title||"Untitled Entry"}),l.jsxs("span",{className:"result-score",children:["Score: ",Math.round(t.score)]})]}),l.jsxs("div",{className:"result-content",children:[t.content.substring(0,100),"..."]}),l.jsxs("div",{className:"result-meta",children:[t.lorebook_name,"  Keywords: ",((r=t.keywords)==null?void 0:r.join(", "))||"none"]})]},n)}),e.length>=3&&l.jsxs("div",{className:"view-all-results",children:["+ ",e.length," more results..."]})]}),G1=({selectedCount:e,onBulkDelete:t,onBulkEdit:n,onClearSelection:r,onBulkTag:o,onBulkMove:s})=>{const[i,a]=S.useState("idle"),[c,u]=S.useState("");if(e===0)return null;const d=async()=>{if(i!=="deleting"){a("deleting");return}if(window.confirm(`Delete ${e} entry${e===1?"":"ies"}? This action cannot be undone.`))try{await t(),a("idle")}catch(p){console.error("Bulk delete failed:",p),a("idle")}else a("idle")},f=async()=>{if(c.trim()&&o)try{await o(c.trim()),u("")}catch(p){console.error("Bulk tagging failed:",p)}},h=p=>i===p?"active":"";return l.jsxs("div",{className:"bulk-actions-panel",children:[l.jsxs("div",{className:"bulk-selection-info",children:[l.jsxs("span",{className:"selection-count",children:[e," entr",e===1?"y":"ies"," selected"]}),l.jsx("button",{onClick:r,className:"clear-selection-btn",title:"Clear selection",children:""})]}),l.jsxs("div",{className:"bulk-action-buttons",children:[l.jsx("button",{onClick:()=>a("editing"),className:`bulk-action-btn edit-btn ${h("editing")}`,title:"Bulk edit selected entries",children:" Edit"}),o&&l.jsx("button",{onClick:()=>{},className:"bulk-action-btn tag-btn",title:"Add tag to selected entries",children:" Tag"}),s&&l.jsx("button",{onClick:()=>{},className:"bulk-action-btn move-btn",title:"Move selected entries",children:" Move"}),l.jsxs("button",{onClick:d,className:`bulk-action-btn delete-btn ${h("deleting")}`,title:"Delete selected entries",children:[" ",i==="deleting"?"Confirm Delete":"Delete"]})]}),i==="editing"&&l.jsx(X1,{selectedCount:e,onSave:()=>{n(),a("idle")},onCancel:()=>a("idle")}),i==="tagging"&&o&&l.jsx("div",{className:"bulk-tagging-panel",children:l.jsxs("div",{className:"tag-input-group",children:[l.jsx("input",{type:"text",placeholder:"Add tag to selected entries...",value:c,onChange:p=>u(p.target.value),onKeyPress:p=>{p.key==="Enter"&&f()},autoFocus:!0}),l.jsx("button",{onClick:f,disabled:!c.trim(),className:"add-tag-btn",children:"Add Tag"}),l.jsx("button",{onClick:()=>{a("idle"),u("")},className:"cancel-tag-btn",children:"Cancel"})]})}),i==="deleting"&&l.jsxs("div",{className:"bulk-delete-confirm",children:[l.jsxs("div",{className:"confirm-message",children:["This will permanently delete ",e," selected entr",e===1?"y":"ies",". This action cannot be undone."]}),l.jsxs("div",{className:"confirm-actions",children:[l.jsx("button",{onClick:d,className:"confirm-delete-btn danger",children:"Yes, Delete All"}),l.jsx("button",{onClick:()=>a("idle"),className:"cancel-delete-btn",children:"Cancel"})]})]})]})},X1=({selectedCount:e,onSave:t,onCancel:n})=>{const[r,o]=S.useState("logic"),[s,i]=S.useState(""),a=()=>{t()};return l.jsxs("div",{className:"bulk-edit-panel",children:[l.jsxs("div",{className:"panel-header",children:[l.jsxs("h3",{children:["Bulk Edit ",e," Entr",e===1?"y":"ies"]}),l.jsx("button",{onClick:n,className:"close-btn",title:"Close bulk edit",children:""})]}),l.jsxs("div",{className:"bulk-edit-content",children:[l.jsxs("div",{className:"field-selector",children:[l.jsx("label",{children:"Field to edit:"}),l.jsxs("select",{value:r,onChange:c=>o(c.target.value),children:[l.jsx("option",{value:"logic",children:"Logic"}),l.jsx("option",{value:"trigger",children:"Trigger"}),l.jsx("option",{value:"order",children:"Order"}),l.jsx("option",{value:"addKeyword",children:"Add Keyword"}),l.jsx("option",{value:"removeKeyword",children:"Remove Keyword"})]})]}),l.jsxs("div",{className:"value-input",children:[r==="logic"&&l.jsxs("select",{value:s||"AND ANY",onChange:c=>i(c.target.value),children:[l.jsx("option",{value:"AND ANY",children:"AND ANY"}),l.jsx("option",{value:"AND ALL",children:"AND ALL"}),l.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),l.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]}),r==="trigger"&&l.jsxs("div",{className:"range-input",children:[l.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:s||50,onChange:c=>i(parseInt(c.target.value,10))}),l.jsxs("span",{children:[s||50,"%"]})]}),r==="order"&&l.jsx("input",{type:"number",value:s||0,onChange:c=>i(parseFloat(c.target.value)),step:"0.1",placeholder:"0.0"}),(r==="addKeyword"||r==="removeKeyword")&&l.jsx("input",{type:"text",value:s||"",onChange:c=>i(c.target.value),placeholder:"Enter keyword..."})]}),l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Preview:"}),l.jsxs("div",{className:"preview-text",children:["Set ",l.jsx("strong",{children:r})," to ",l.jsx("strong",{children:s||"value"})," for selected entries"]})]})]}),l.jsxs("div",{className:"panel-actions",children:[l.jsx("button",{onClick:a,className:"primary",children:"Apply Changes"}),l.jsx("button",{onClick:n,className:"secondary",children:"Cancel"})]})]})},Q1=({onImport:e,onCancel:t})=>{const[n,r]=S.useState(!1),[o,s]=S.useState(null),[i,a]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(null),h=k=>{k.preventDefault(),r(!0)},p=k=>{k.preventDefault(),r(!1)},y=k=>{k.preventDefault(),r(!1),u(null);const N=Array.from(k.dataTransfer.files);N.length>0&&E(N[0])},x=k=>{const N=k.target.files;N&&N.length>0&&E(N[0])},E=async k=>{if(!k.name.toLowerCase().endsWith(".json")){u("Only JSON files are supported");return}const N=10*1024*1024;if(k.size>N){u("File size must be less than 10MB");return}s(k),u(null);try{const b=await k.text(),$=JSON.parse(b),T=m($);f(T)}catch{u("Invalid JSON format"),f(null)}},m=k=>{var N;try{let b=[];if(k&&typeof k=="object"){k.entries?b=Array.isArray(k.entries)?k.entries:Object.values(k.entries||{}):Array.isArray(k)&&(b=k);const $={name:k.name||((N=o==null?void 0:o.name)==null?void 0:N.replace(".json","")),description:k.description||"",totalEntries:b.length,keywords:[],logicTypes:{},averageTrigger:0,previewEntries:b.slice(0,3),format:g(k)};let T=0;const P=new Set,I=new Set;return b.forEach(H=>{H.keywords&&Array.isArray(H.keywords)&&H.keywords.forEach(U=>P.add(U)),H.logic&&($.logicTypes[H.logic]=($.logicTypes[H.logic]||0)+1),typeof H.trigger=="number"&&(T+=H.trigger)}),$.keywords=Array.from(P),$.averageTrigger=b.length>0?Math.round(T/b.length):0,$}}catch(b){console.error("Preview generation error:",b)}return null},g=k=>k.entries&&k.name?"SillyTavern":Array.isArray(k)?"Compact Array":k.lastUpdate?"AidanAI":"Unknown",w=async()=>{if(o){a(!0),u(null);try{await e(o)}catch(k){u(k.message||"Import failed")}finally{a(!1)}}},v=()=>{s(null),f(null),u(null)};return l.jsxs("div",{className:"lorebook-import-panel",children:[l.jsxs("div",{className:"panel-header",children:[l.jsx("h3",{children:"Import Lorebook"}),l.jsx("button",{onClick:t,className:"close-btn",title:"Close import panel",children:""})]}),l.jsxs("div",{className:"import-content",children:[o?l.jsxs("div",{className:"file-preview",children:[l.jsxs("div",{className:"file-header",children:[l.jsxs("div",{className:"file-info",children:[l.jsxs("h4",{children:[" ",o.name]}),l.jsxs("span",{className:"file-size",children:[(o.size/1024).toFixed(1)," KB"]})]}),l.jsx("div",{className:"file-actions",children:l.jsx("button",{onClick:v,className:"secondary",children:"Choose Different File"})})]}),c&&l.jsxs("div",{className:"error-message",children:[l.jsx("span",{className:"error-icon",children:""}),c]}),d&&l.jsxs("div",{className:"import-preview",children:[l.jsx("h4",{children:"Import Preview"}),l.jsxs("div",{className:"preview-grid",children:[l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Lorebook Name:"}),l.jsx("span",{children:d.name||"Untitled"})]}),l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Format:"}),l.jsx("span",{children:d.format})]}),l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Entries:"}),l.jsx("span",{children:d.totalEntries})]}),l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Keywords:"}),l.jsxs("span",{children:[d.keywords.length," unique"]})]}),Object.keys(d.logicTypes).length>0&&l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Logic Types:"}),l.jsx("span",{children:Object.entries(d.logicTypes).map(([k,N])=>`${k}: ${N}`).join(", ")})]}),d.averageTrigger>0&&l.jsxs("div",{className:"preview-section",children:[l.jsx("label",{children:"Avg. Trigger:"}),l.jsxs("span",{children:[d.averageTrigger,"%"]})]})]}),d.previewEntries&&d.previewEntries.length>0&&l.jsxs("div",{className:"sample-entries",children:[l.jsx("h5",{children:"Sample Entries:"}),l.jsx("div",{className:"entry-preview",children:d.previewEntries.slice(0,3).map((k,N)=>{var b;return l.jsxs("div",{className:"entry-summary",children:[l.jsx("div",{className:"entry-title",children:k.title||k.comment||"Untitled"}),l.jsxs("div",{className:"entry-content",children:[(b=k.content)==null?void 0:b.substring(0,100),"..."]}),k.keywords&&k.keywords.length>0&&l.jsxs("div",{className:"entry-keywords",children:["Keywords: ",k.keywords.slice(0,3).join(", "),k.keywords.length>3&&` +${k.keywords.length-3} more`]})]},N)})})]})]}),l.jsxs("div",{className:"import-actions",children:[l.jsx("button",{onClick:w,disabled:i||!!c,className:"primary import-btn",children:i?"Importing...":"Import Lorebook"}),l.jsx("button",{onClick:t,className:"secondary",disabled:i,children:"Cancel"})]})]}):l.jsx("div",{className:`file-dropzone ${n?"dragging":""}`,onDragOver:h,onDragLeave:p,onDrop:y,children:l.jsxs("div",{className:"dropzone-content",children:[l.jsx("div",{className:"upload-icon",children:""}),l.jsx("p",{children:"Drop JSON file here"}),l.jsx("p",{children:"or"}),l.jsxs("label",{className:"file-input-label",children:["Browse Files",l.jsx("input",{type:"file",accept:"application/json,.json",onChange:x,hidden:!0})]}),l.jsx("small",{className:"file-info",children:"Supports SillyTavern, AidanAI, and compact JSON formats (max 10MB)"})]})}),l.jsxs("div",{className:"import-help",children:[l.jsx("h5",{children:"Supported Formats:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"SillyTavern:"})," Standard lorebook JSON with name, description, and entries"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"AidanAI:"})," Lore export with specific field mappings"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Compact Array:"})," Simple array of entry objects"]})]}),l.jsx("p",{children:"All formats are automatically converted to the internal structure."})]})]})]})},J1=({lorebooks:e})=>{const[t,n]=S.useState([]);S.useEffect(()=>{(async()=>{try{const i=await fetch(`${X}/config`);if(i.ok){const a=await i.json();n(a.active_lorebook_ids||[])}}catch(i){console.error("Failed to load active lorebook IDs:",i)}})()},[]);const r=async s=>{if(t.includes(s))return;const i=[...t,s];n(i);try{await fetch(`${X}/config/active_lorebook_ids`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:i})})}catch(a){console.error("Failed to add active lorebook:",a)}},o=async s=>{const i=t.filter(a=>a!==s);n(i);try{await fetch(`${X}/config/active_lorebook_ids`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:i})})}catch(a){console.error("Failed to remove active lorebook:",a)}};return l.jsxs("div",{style:{padding:"16px",background:"var(--panel)",borderRadius:"8px",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--text)"},children:"Active Lorebooks for Chat Context"}),l.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap",marginBottom:"8px"},children:l.jsxs("select",{onChange:s=>{s.target.value&&(r(parseInt(s.target.value)),s.target.value="")},value:"",style:{padding:"4px 8px",borderRadius:"4px",background:"var(--bg)",color:"var(--text)",border:"1px solid var(--muted)"},children:[l.jsx("option",{value:"",children:"+ Add to Active"}),e.filter(s=>!t.includes(s.id)).map(s=>l.jsx("option",{value:s.id,children:s.name},s.id))]})}),l.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:t.map(s=>{const i=e.find(a=>a.id===s);return l.jsxs("span",{style:{padding:"4px 8px",borderRadius:"12px",background:"var(--primary)",color:"var(--text)",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},title:`Active in chat: ${(i==null?void 0:i.name)||`#${s}`}`,children:[i?i.name:`#${s}`,l.jsx("button",{onClick:()=>o(s),style:{border:"none",background:"transparent",color:"var(--text)",cursor:"pointer",fontSize:"14px",lineHeight:1,padding:"0",marginLeft:"4px"},children:""})]},s)})}),t.length===0&&l.jsx("p",{style:{margin:"8px 0 0 0",color:"var(--muted)",fontSize:"14px"},children:"No active lorebooks. Select one above to add it to your current chat context."})]})},Z1=()=>{var E;const e=Wm(),[t,n]=S.useState("cards"),[r,o]=S.useState("single"),[s,i]=S.useState(null),[a,c]=S.useState([]);S.useEffect(()=>{console.log("[DEBUG] LorebookDashboard useEffect triggered, calling fetchLorebooks"),e.fetchLorebooks()},[]);const u=O.useMemo(()=>e.lorebooks,[e.lorebooks]),d=async m=>{try{await e.createLorebookAction(m),o("single")}catch(g){console.error("Failed to create lorebook:",g)}},f=async m=>{for(const g of m)await d(g);o("single")},h=async m=>{try{await e.importLorebookAction(m),o("single")}catch(g){console.error("Import failed:",g)}},p=async m=>{i(m);try{const g=await fetch(`${X}/lorebooks/${m.id}`);if(g.ok){const w=await g.json();c(w.entries||[])}else c([])}catch(g){console.error("Failed to load lorebook entries:",g),c([])}},y=async()=>{if(s)try{await e.updateLorebookAction(s.id,{name:s.name,description:s.description});const m=a,g=await fetch(`${X}/lorebooks/${s.id}`);if(!g.ok)throw new Error("Failed to load current entries");const v=(await g.json()).entries||[],k=new Map(v.map(P=>[P.id,P])),N=new Map(m.map(P=>[P.id,P])),b=[],$=[],T=[];for(const P of a)!P.id||P.id.toString().includes(".")?b.push(P):$.push(P);for(const P of v)a.some(H=>H.id===P.id)||T.push(P.id);console.log("Entry operations:",{toCreate:b.length,toUpdate:$.length,toDelete:T.length});for(const P of b)try{const I={lorebook_id:s.id,title:P.title,content:P.content,keywords:P.keywords,secondary_keywords:P.secondary_keywords,logic:P.logic,trigger:P.trigger,order:P.order};await fetch(`${X}/lorebooks/entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})}catch(I){console.error("Failed to create entry:",I)}for(const P of $)try{const I={title:P.title,content:P.content,keywords:P.keywords,secondary_keywords:P.secondary_keywords,logic:P.logic,trigger:P.trigger,order:P.order};await fetch(`${X}/lorebooks/entries/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})}catch(I){console.error("Failed to update entry:",I)}for(const P of T)try{await fetch(`${X}/lorebooks/entries/${P}`,{method:"DELETE"})}catch(I){console.error("Failed to delete entry:",I)}await e.fetchLorebooks(),i(null),c([]),console.log("Lorebook updated successfully")}catch(m){console.error("Failed to update lorebook:",m)}},x=()=>{i(null)};return e.lorebookLoading&&e.lorebooks.length===0?l.jsxs("div",{className:"lorebook-dashboard loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading lorebooks..."})]}):l.jsxs("div",{className:"lorebook-dashboard",children:[l.jsx("div",{className:"dashboard-header",children:l.jsx("h1",{children:"Lorebook Management"})}),l.jsx(J1,{lorebooks:e.lorebooks}),l.jsx(Y1,{onSearch:(m,g)=>e.searchLoreAction(m,{},g),onClear:()=>e.clearSearch(),isSearching:e.isSearching,searchResults:e.searchResults}),l.jsx(G1,{selectedCount:e.selectedEntries.size,onBulkDelete:()=>e.bulkDeleteEntries(),onBulkEdit:()=>{},onClearSelection:()=>e.clearSelection()}),l.jsx("div",{className:"lorebook-stats",children:l.jsxs("span",{className:"stats",children:[e.lorebooks.length," lorebooks, ",e.lorebooks.reduce((m,g)=>m+g.entry_count,0)," total entries"]})}),l.jsxs("div",{className:"dashboard-actions",children:[l.jsx("button",{className:`action-btn ${t==="cards"?"active":""}`,onClick:()=>n("cards"),children:" Cards"}),l.jsx("button",{className:`action-btn ${t==="table"?"active":""}`,onClick:()=>n("table"),children:" Table"}),l.jsxs("div",{className:"dropdown-menu",children:[l.jsx("button",{className:"primary",children:"+ Create"}),l.jsxs("div",{className:"dropdown-content",children:[l.jsx("button",{onClick:()=>o("single"),children:"New Lorebook"}),l.jsx("button",{onClick:()=>o("bulk"),children:"Bulk Create"}),l.jsx("button",{onClick:()=>o("import"),children:"Import JSON"})]})]})]}),l.jsxs("div",{className:"dashboard-content",children:[r==="import"?l.jsx(Q1,{onImport:h,onCancel:()=>o("single")}):r==="bulk"?l.jsx(q1,{onCreate:f,onCancel:()=>o("single")}):l.jsx(V1,{lorebooks:u,viewMode:t,onSelectLorebook:e.selectLorebook,selectedLorebookId:(E=e.selectedLorebook)==null?void 0:E.id,onEditLorebook:p,onDeleteLorebook:m=>{window.confirm("Delete this lorebook? This action cannot be undone.")&&e.deleteLorebookAction(m)},onCreateLorebook:d}),s&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-content large-modal",children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("h2",{children:["Edit Lorebook: ",s.name]}),l.jsx("button",{className:"close-btn",onClick:x,children:""})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"lorebook-editor",children:[l.jsxs("div",{className:"editor-section",children:[l.jsx("h3",{children:"Lorebook Details"}),l.jsx("div",{className:"metadata-form",children:l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"edit-name",children:"Name:"}),l.jsx("input",{id:"edit-name",name:"name",type:"text",defaultValue:s.name,required:!0,maxLength:255,onChange:m=>{i(g=>g?{...g,name:m.target.value}:null)}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"edit-description",children:"Description:"}),l.jsx("textarea",{id:"edit-description",name:"description",rows:3,defaultValue:s.description||"",placeholder:"Describe this lorebook...",onChange:m=>{i(g=>g?{...g,description:m.target.value}:null)}})]})]})})]}),l.jsxs("div",{className:"editor-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"Lorebook Entries"}),l.jsx("button",{type:"button",className:"primary",onClick:()=>{const m={id:Date.now()+Math.random(),title:"",content:"",keywords:[],secondary_keywords:[],logic:"AND ANY",trigger:100,order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([...a,m])},children:"+ Add Entry"})]}),l.jsxs("div",{className:"entries-editor",children:[a.map((m,g)=>l.jsxs("div",{className:"entry-editor",children:[l.jsxs("div",{className:"entry-header",children:[l.jsx("input",{type:"text",placeholder:"Entry title...",value:m.title,onChange:w=>{const v=[...a];v[g]={...m,title:w.target.value},c(v)}}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Trigger (%):"}),l.jsx("input",{type:"number",min:"0",max:"100",value:m.trigger,onChange:w=>{const v=[...a];v[g]={...m,trigger:parseInt(w.target.value)||0},c(v)}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Order:"}),l.jsx("input",{type:"number",value:m.order,onChange:w=>{const v=[...a];v[g]={...m,order:parseFloat(w.target.value)||0},c(v)}})]}),l.jsx("button",{type:"button",className:"delete-btn",onClick:()=>{const w=a.filter((v,k)=>k!==g);c(w)},children:""})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Keywords:"}),l.jsx("input",{type:"text",placeholder:"keyword1, keyword2",value:m.keywords.join(", "),onChange:w=>{const v=[...a];v[g]={...m,keywords:w.target.value.split(",").map(k=>k.trim()).filter(k=>k)},c(v)}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Logic:"}),l.jsxs("select",{value:m.logic,onChange:w=>{const v=[...a];v[g]={...m,logic:w.target.value},c(v)},children:[l.jsx("option",{value:"AND ANY",children:"AND ANY"}),l.jsx("option",{value:"AND ALL",children:"AND ALL"}),l.jsx("option",{value:"NOT ANY",children:"NOT ANY"}),l.jsx("option",{value:"NOT ALL",children:"NOT ALL"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Secondary Keywords:"}),l.jsx("input",{type:"text",placeholder:"secondary1, secondary2",value:m.secondary_keywords.join(", "),onChange:w=>{const v=[...a];v[g]={...m,secondary_keywords:w.target.value.split(",").map(k=>k.trim()).filter(k=>k)},c(v)}})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Content:"}),l.jsx("textarea",{rows:4,placeholder:"Entry content...",value:m.content,onChange:w=>{const v=[...a];v[g]={...m,content:w.target.value},c(v)},required:!0})]})]},m.id||g)),a.length===0&&l.jsxs("div",{className:"no-entries",children:[l.jsx("p",{children:"No entries in this lorebook yet."}),l.jsx("button",{type:"button",className:"primary",onClick:()=>{const m={id:Date.now()+Math.random(),title:"",content:"",keywords:[],secondary_keywords:[],logic:"AND ANY",trigger:100,order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([m])},children:"Add First Entry"})]})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{type:"button",className:"primary",onClick:y,children:"Save All Changes"}),l.jsx("button",{type:"button",className:"secondary",onClick:x,children:"Cancel"})]})]})})]})})]})]})},q1=({onCreate:e,onCancel:t})=>{const[n,r]=S.useState(""),o=async()=>{const i=n.split(`
`).filter(a=>a.trim()).map(a=>({name:a.trim(),description:"",entries:[]}));await e(i),r("")};return l.jsxs("div",{className:"bulk-creation-panel",children:[l.jsx("h3",{children:"Create Multiple Lorebooks"}),l.jsx("p",{children:"Enter one lorebook name per line:"}),l.jsx("textarea",{value:n,onChange:s=>r(s.target.value),placeholder:`Fantasy World
Sci-Fi Universe
Historical Era`,rows:6}),l.jsxs("div",{className:"panel-actions",children:[l.jsx("button",{onClick:o,children:"Create"}),l.jsx("button",{className:"secondary",onClick:t,children:"Cancel"})]})]})},gf=yr((e,t)=>({circuits:[],async fetchCircuits(){const r=await(await fetch(`${X}/circuits/`)).json();e({circuits:r})},async saveCircuit(n){const r=await fetch(`${X}/circuits/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to save");const o=await r.json();e({circuits:[...t().circuits,o],current:o})}}));function qe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=qe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ym={exports:{}},Km={},Gm={exports:{}},Xm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=S;function eS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tS=typeof Object.is=="function"?Object.is:eS,nS=qr.useState,rS=qr.useEffect,oS=qr.useLayoutEffect,sS=qr.useDebugValue;function iS(e,t){var n=t(),r=nS({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return oS(function(){o.value=n,o.getSnapshot=t,ra(o)&&s({inst:o})},[e,n,t]),rS(function(){return ra(o)&&s({inst:o}),e(function(){ra(o)&&s({inst:o})})},[e]),sS(n),n}function ra(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tS(e,n)}catch{return!0}}function lS(e,t){return t()}var aS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lS:iS;Xm.useSyncExternalStore=qr.useSyncExternalStore!==void 0?qr.useSyncExternalStore:aS;Gm.exports=Xm;var cS=Gm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=S,uS=cS;function dS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fS=typeof Object.is=="function"?Object.is:dS,hS=uS.useSyncExternalStore,pS=yl.useRef,mS=yl.useEffect,gS=yl.useMemo,yS=yl.useDebugValue;Km.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=pS(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=gS(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),o!==void 0&&i.hasValue){var y=i.value;if(o(y,p))return f=y}return f=p}if(y=f,fS(d,p))return y;var x=r(p);return o!==void 0&&o(y,x)?(d=p,y):(d=p,f=x)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,o]);var a=hS(e,s[0],s[1]);return mS(function(){i.hasValue=!0,i.value=a},[a]),yS(a),a};Ym.exports=Km;var vS=Ym.exports;const xS=ih(vS),yf=e=>{let t;const n=new Set,r=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,p))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{n.clear()}},u=t=e(r,o,c);return c},wS=e=>e?yf(e):yf,{useDebugValue:SS}=O,{useSyncExternalStoreWithSelector:kS}=xS,ES=e=>e;function Qm(e,t=ES,n){const r=kS(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return SS(r),r}const vf=(e,t)=>{const n=wS(e),r=(o,s=t)=>Qm(n,o,s);return Object.assign(r,n),r},CS=(e,t)=>e?vf(e,t):vf;function ft(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var _S={value:()=>{}};function vl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mi(n)}function mi(e){this._=e}function NS(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mi.prototype=vl.prototype={constructor:mi,on:function(e,t){var n=this._,r=NS(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=jS(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=xf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=xf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mi(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function jS(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function xf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=_S,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var dc="http://www.w3.org/1999/xhtml";const wf={svg:"http://www.w3.org/2000/svg",xhtml:dc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wf.hasOwnProperty(t)?{space:wf[t],local:e}:e}function bS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===dc&&t.documentElement.namespaceURI===dc?t.createElement(e):t.createElementNS(n,e)}}function TS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Jm(e){var t=xl(e);return(t.local?TS:bS)(t)}function PS(){}function ju(e){return e==null?PS:function(){return this.querySelector(e)}}function LS(e){typeof e!="function"&&(e=ju(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new vt(r,this._parents)}function MS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $S(){return[]}function Zm(e){return e==null?$S:function(){return this.querySelectorAll(e)}}function AS(e){return function(){return MS(e.apply(this,arguments))}}function DS(e){typeof e=="function"?e=AS(e):e=Zm(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&(r.push(e.call(c,c.__data__,u,i)),o.push(c));return new vt(r,o)}function qm(e){return function(){return this.matches(e)}}function eg(e){return function(t){return t.matches(e)}}var RS=Array.prototype.find;function OS(e){return function(){return RS.call(this.children,e)}}function IS(){return this.firstElementChild}function zS(e){return this.select(e==null?IS:OS(typeof e=="function"?e:eg(e)))}var FS=Array.prototype.filter;function BS(){return Array.from(this.children)}function US(e){return function(){return FS.call(this.children,e)}}function HS(e){return this.selectAll(e==null?BS:US(typeof e=="function"?e:eg(e)))}function VS(e){typeof e!="function"&&(e=qm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new vt(r,this._parents)}function tg(e){return new Array(e.length)}function WS(){return new vt(this._enter||this._groups.map(tg),this._parents)}function Vi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vi.prototype={constructor:Vi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function YS(e){return function(){return e}}function KS(e,t,n,r,o,s){for(var i=0,a,c=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],r[i]=a):n[i]=new Vi(e,s[i]);for(;i<c;++i)(a=t[i])&&(o[i]=a)}function GS(e,t,n,r,o,s,i){var a,c,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(a=0;a<d;++a)(c=t[a])&&(h[a]=p=i.call(c,c.__data__,a,t)+"",u.has(p)?o[a]=c:u.set(p,c));for(a=0;a<f;++a)p=i.call(e,s[a],a,s)+"",(c=u.get(p))?(r[a]=c,c.__data__=s[a],u.delete(p)):n[a]=new Vi(e,s[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(h[a])===c&&(o[a]=c)}function XS(e){return e.__data__}function QS(e,t){if(!arguments.length)return Array.from(this,XS);var n=t?GS:KS,r=this._parents,o=this._groups;typeof e!="function"&&(e=YS(e));for(var s=o.length,i=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var d=r[u],f=o[u],h=f.length,p=JS(e.call(d,d&&d.__data__,u,r)),y=p.length,x=a[u]=new Array(y),E=i[u]=new Array(y),m=c[u]=new Array(h);n(d,f,x,E,m,p,t);for(var g=0,w=0,v,k;g<y;++g)if(v=x[g]){for(g>=w&&(w=g+1);!(k=E[w])&&++w<y;);v._next=k||null}}return i=new vt(i,r),i._enter=a,i._exit=c,i}function JS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZS(){return new vt(this._exit||this._groups.map(tg),this._parents)}function qS(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function ek(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),a=new Array(o),c=0;c<i;++c)for(var u=n[c],d=r[c],f=u.length,h=a[c]=new Array(f),p,y=0;y<f;++y)(p=u[y]||d[y])&&(h[y]=p);for(;c<o;++c)a[c]=n[c];return new vt(a,this._parents)}function tk(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function nk(e){e||(e=rk);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],a=i.length,c=o[s]=new Array(a),u,d=0;d<a;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new vt(o,this._parents).order()}function rk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ok(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sk(){return Array.from(this)}function ik(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function lk(){let e=0;for(const t of this)++e;return e}function ak(){return!this.node()}function ck(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,a;s<i;++s)(a=o[s])&&e.call(a,a.__data__,s,o);return this}function uk(e){return function(){this.removeAttribute(e)}}function dk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fk(e,t){return function(){this.setAttribute(e,t)}}function hk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function pk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gk(e,t){var n=xl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?dk:uk:typeof t=="function"?n.local?mk:pk:n.local?hk:fk)(n,t))}function ng(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yk(e){return function(){this.style.removeProperty(e)}}function vk(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xk(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wk(e,t,n){return arguments.length>1?this.each((t==null?yk:typeof t=="function"?xk:vk)(e,t,n??"")):eo(this.node(),e)}function eo(e,t){return e.style.getPropertyValue(t)||ng(e).getComputedStyle(e,null).getPropertyValue(t)}function Sk(e){return function(){delete this[e]}}function kk(e,t){return function(){this[e]=t}}function Ek(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ck(e,t){return arguments.length>1?this.each((t==null?Sk:typeof t=="function"?Ek:kk)(e,t)):this.node()[e]}function rg(e){return e.trim().split(/^|\s+/)}function bu(e){return e.classList||new og(e)}function og(e){this._node=e,this._names=rg(e.getAttribute("class")||"")}og.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sg(e,t){for(var n=bu(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function ig(e,t){for(var n=bu(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function _k(e){return function(){sg(this,e)}}function Nk(e){return function(){ig(this,e)}}function jk(e,t){return function(){(t.apply(this,arguments)?sg:ig)(this,e)}}function bk(e,t){var n=rg(e+"");if(arguments.length<2){for(var r=bu(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?jk:t?_k:Nk)(n,t))}function Tk(){this.textContent=""}function Pk(e){return function(){this.textContent=e}}function Lk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Mk(e){return arguments.length?this.each(e==null?Tk:(typeof e=="function"?Lk:Pk)(e)):this.node().textContent}function $k(){this.innerHTML=""}function Ak(e){return function(){this.innerHTML=e}}function Dk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rk(e){return arguments.length?this.each(e==null?$k:(typeof e=="function"?Dk:Ak)(e)):this.node().innerHTML}function Ok(){this.nextSibling&&this.parentNode.appendChild(this)}function Ik(){return this.each(Ok)}function zk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fk(){return this.each(zk)}function Bk(e){var t=typeof e=="function"?e:Jm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Uk(){return null}function Hk(e,t){var n=typeof e=="function"?e:Jm(e),r=t==null?Uk:typeof t=="function"?t:ju(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vk(){var e=this.parentNode;e&&e.removeChild(this)}function Wk(){return this.each(Vk)}function Yk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gk(e){return this.select(e?Kk:Yk)}function Xk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qk(e){return function(t){e.call(this,t,this.__data__)}}function Jk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Zk(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function qk(e,t,n){return function(){var r=this.__on,o,s=Qk(t);if(r){for(var i=0,a=r.length;i<a;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function eE(e,t,n){var r=Jk(e+""),o,s=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(o=0,d=a[c];o<s;++o)if((i=r[o]).type===d.type&&i.name===d.name)return d.value}return}for(a=t?qk:Zk,o=0;o<s;++o)this.each(a(r[o],t,n));return this}function lg(e,t,n){var r=ng(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function tE(e,t){return function(){return lg(this,e,t)}}function nE(e,t){return function(){return lg(this,e,t.apply(this,arguments))}}function rE(e,t){return this.each((typeof t=="function"?nE:tE)(e,t))}function*oE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var ag=[null];function vt(e,t){this._groups=e,this._parents=t}function Cs(){return new vt([[document.documentElement]],ag)}function sE(){return this}vt.prototype=Cs.prototype={constructor:vt,select:LS,selectAll:DS,selectChild:zS,selectChildren:HS,filter:VS,data:QS,enter:WS,exit:ZS,join:qS,merge:ek,selection:sE,order:tk,sort:nk,call:ok,nodes:sk,node:ik,size:lk,empty:ak,each:ck,attr:gk,style:wk,property:Ck,classed:bk,text:Mk,html:Rk,raise:Ik,lower:Fk,append:Bk,insert:Hk,remove:Wk,clone:Gk,datum:Xk,on:eE,dispatch:rE,[Symbol.iterator]:oE};function Nt(e){return typeof e=="string"?new vt([[document.querySelector(e)]],[document.documentElement]):new vt([[e]],ag)}function iE(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Dt(e,t){if(e=iE(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const lE={passive:!1},ls={capture:!0,passive:!1};function oa(e){e.stopImmediatePropagation()}function Hr(e){e.preventDefault(),e.stopImmediatePropagation()}function cg(e){var t=e.document.documentElement,n=Nt(e).on("dragstart.drag",Hr,ls);"onselectstart"in t?n.on("selectstart.drag",Hr,ls):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ug(e,t){var n=e.document.documentElement,r=Nt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Hr,ls),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ys=e=>()=>e;function fc(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}fc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function aE(e){return!e.ctrlKey&&!e.button}function cE(){return this.parentNode}function uE(e,t){return t??{x:e.x,y:e.y}}function dE(){return navigator.maxTouchPoints||"ontouchstart"in this}function fE(){var e=aE,t=cE,n=uE,r=dE,o={},s=vl("start","drag","end"),i=0,a,c,u,d,f=0;function h(v){v.on("mousedown.drag",p).filter(r).on("touchstart.drag",E).on("touchmove.drag",m,lE).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,k){if(!(d||!e.call(this,v,k))){var N=w(this,t.call(this,v,k),v,k,"mouse");N&&(Nt(v.view).on("mousemove.drag",y,ls).on("mouseup.drag",x,ls),cg(v.view),oa(v),u=!1,a=v.clientX,c=v.clientY,N("start",v))}}function y(v){if(Hr(v),!u){var k=v.clientX-a,N=v.clientY-c;u=k*k+N*N>f}o.mouse("drag",v)}function x(v){Nt(v.view).on("mousemove.drag mouseup.drag",null),ug(v.view,u),Hr(v),o.mouse("end",v)}function E(v,k){if(e.call(this,v,k)){var N=v.changedTouches,b=t.call(this,v,k),$=N.length,T,P;for(T=0;T<$;++T)(P=w(this,b,v,k,N[T].identifier,N[T]))&&(oa(v),P("start",v,N[T]))}}function m(v){var k=v.changedTouches,N=k.length,b,$;for(b=0;b<N;++b)($=o[k[b].identifier])&&(Hr(v),$("drag",v,k[b]))}function g(v){var k=v.changedTouches,N=k.length,b,$;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<N;++b)($=o[k[b].identifier])&&(oa(v),$("end",v,k[b]))}function w(v,k,N,b,$,T){var P=s.copy(),I=Dt(T||N,k),H,U,C;if((C=n.call(v,new fc("beforestart",{sourceEvent:N,target:h,identifier:$,active:i,x:I[0],y:I[1],dx:0,dy:0,dispatch:P}),b))!=null)return H=C.x-I[0]||0,U=C.y-I[1]||0,function R(M,z,A){var j=I,D;switch(M){case"start":o[$]=R,D=i++;break;case"end":delete o[$],--i;case"drag":I=Dt(A||z,k),D=i;break}P.call(M,v,new fc(M,{sourceEvent:z,subject:C,target:h,identifier:$,active:D,x:I[0]+H,y:I[1]+U,dx:I[0]-j[0],dy:I[1]-j[1],dispatch:P}),b)}}return h.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Ys(!!v),h):e},h.container=function(v){return arguments.length?(t=typeof v=="function"?v:Ys(v),h):t},h.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ys(v),h):n},h.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Ys(!!v),h):r},h.on=function(){var v=s.on.apply(s,arguments);return v===s?h:v},h.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,h):Math.sqrt(f)},h}function Tu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function dg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _s(){}var as=.7,Wi=1/as,Vr="\\s*([+-]?\\d+)\\s*",cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hE=/^#([0-9a-f]{3,8})$/,pE=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),mE=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),gE=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${cs}\\)$`),yE=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${cs}\\)$`),vE=new RegExp(`^hsl\\(${cs},${Qt},${Qt}\\)$`),xE=new RegExp(`^hsla\\(${cs},${Qt},${Qt},${cs}\\)$`),Sf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tu(_s,us,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kf,formatHex:kf,formatHex8:wE,formatHsl:SE,formatRgb:Ef,toString:Ef});function kf(){return this.rgb().formatHex()}function wE(){return this.rgb().formatHex8()}function SE(){return fg(this).formatHsl()}function Ef(){return this.rgb().formatRgb()}function us(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Cf(t):n===3?new at(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ks(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ks(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pE.exec(e))?new at(t[1],t[2],t[3],1):(t=mE.exec(e))?new at(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gE.exec(e))?Ks(t[1],t[2],t[3],t[4]):(t=yE.exec(e))?Ks(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vE.exec(e))?jf(t[1],t[2]/100,t[3]/100,1):(t=xE.exec(e))?jf(t[1],t[2]/100,t[3]/100,t[4]):Sf.hasOwnProperty(e)?Cf(Sf[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function Cf(e){return new at(e>>16&255,e>>8&255,e&255,1)}function Ks(e,t,n,r){return r<=0&&(e=t=n=NaN),new at(e,t,n,r)}function kE(e){return e instanceof _s||(e=us(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function hc(e,t,n,r){return arguments.length===1?kE(e):new at(e,t,n,r??1)}function at(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Tu(at,hc,dg(_s,{brighter(e){return e=e==null?Wi:Math.pow(Wi,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?as:Math.pow(as,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new at(sr(this.r),sr(this.g),sr(this.b),Yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_f,formatHex:_f,formatHex8:EE,formatRgb:Nf,toString:Nf}));function _f(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`}function EE(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nf(){const e=Yi(this.opacity);return`${e===1?"rgb(":"rgba("}${sr(this.r)}, ${sr(this.g)}, ${sr(this.b)}${e===1?")":`, ${e})`}`}function Yi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tr(e){return e=sr(e),(e<16?"0":"")+e.toString(16)}function jf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ot(e,t,n,r)}function fg(e){if(e instanceof Ot)return new Ot(e.h,e.s,e.l,e.opacity);if(e instanceof _s||(e=us(e)),!e)return new Ot;if(e instanceof Ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,a=s-o,c=(s+o)/2;return a?(t===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-t)/a+2:i=(t-n)/a+4,a/=c<.5?s+o:2-s-o,i*=60):a=c>0&&c<1?0:i,new Ot(i,a,c,e.opacity)}function CE(e,t,n,r){return arguments.length===1?fg(e):new Ot(e,t,n,r??1)}function Ot(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tu(Ot,CE,dg(_s,{brighter(e){return e=e==null?Wi:Math.pow(Wi,e),new Ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?as:Math.pow(as,e),new Ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new at(sa(e>=240?e-240:e+120,o,r),sa(e,o,r),sa(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Ot(bf(this.h),Gs(this.s),Gs(this.l),Yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yi(this.opacity);return`${e===1?"hsl(":"hsla("}${bf(this.h)}, ${Gs(this.s)*100}%, ${Gs(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bf(e){return e=(e||0)%360,e<0?e+360:e}function Gs(e){return Math.max(0,Math.min(1,e||0))}function sa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hg=e=>()=>e;function _E(e,t){return function(n){return e+n*t}}function NE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function jE(e){return(e=+e)==1?pg:function(t,n){return n-t?NE(t,n,e):hg(isNaN(t)?n:t)}}function pg(e,t){var n=t-e;return n?_E(e,n):hg(isNaN(e)?t:e)}const Tf=function e(t){var n=jE(t);function r(o,s){var i=n((o=hc(o)).r,(s=hc(s)).r),a=n(o.g,s.g),c=n(o.b,s.b),u=pg(o.opacity,s.opacity);return function(d){return o.r=i(d),o.g=a(d),o.b=c(d),o.opacity=u(d),o+""}}return r.gamma=e,r}(1);function bn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var pc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ia=new RegExp(pc.source,"g");function bE(e){return function(){return e}}function TE(e){return function(t){return e(t)+""}}function PE(e,t){var n=pc.lastIndex=ia.lastIndex=0,r,o,s,i=-1,a=[],c=[];for(e=e+"",t=t+"";(r=pc.exec(e))&&(o=ia.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,c.push({i,x:bn(r,o)})),n=ia.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?c[0]?TE(c[0].x):bE(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)a[(f=c[d]).i]=f.x(u);return a.join("")})}var Pf=180/Math.PI,mc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mg(e,t,n,r,o,s){var i,a,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Pf,skewX:Math.atan(c)*Pf,scaleX:i,scaleY:a}}var Xs;function LE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mc:mg(t.a,t.b,t.c,t.d,t.e,t.f)}function ME(e){return e==null||(Xs||(Xs=document.createElementNS("http://www.w3.org/2000/svg","g")),Xs.setAttribute("transform",e),!(e=Xs.transform.baseVal.consolidate()))?mc:(e=e.matrix,mg(e.a,e.b,e.c,e.d,e.e,e.f))}function gg(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,y){if(u!==f||d!==h){var x=p.push("translate(",null,t,null,n);y.push({i:x-4,x:bn(u,f)},{i:x-2,x:bn(d,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(o(f)+"rotate(",null,r)-2,x:bn(u,d)})):d&&f.push(o(f)+"rotate("+d+r)}function a(u,d,f,h){u!==d?h.push({i:f.push(o(f)+"skewX(",null,r)-2,x:bn(u,d)}):d&&f.push(o(f)+"skewX("+d+r)}function c(u,d,f,h,p,y){if(u!==f||d!==h){var x=p.push(o(p)+"scale(",null,",",null,")");y.push({i:x-4,x:bn(u,f)},{i:x-2,x:bn(d,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),a(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var y=-1,x=h.length,E;++y<x;)f[(E=h[y]).i]=E.x(p);return f.join("")}}}var $E=gg(LE,"px, ","px)","deg)"),AE=gg(ME,", ",")",")"),DE=1e-12;function Lf(e){return((e=Math.exp(e))+1/e)/2}function RE(e){return((e=Math.exp(e))-1/e)/2}function OE(e){return((e=Math.exp(2*e))-1)/(e+1)}const IE=function e(t,n,r){function o(s,i){var a=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-a,y=f-c,x=p*p+y*y,E,m;if(x<DE)m=Math.log(h/u)/t,E=function(b){return[a+b*p,c+b*y,u*Math.exp(t*b*m)]};else{var g=Math.sqrt(x),w=(h*h-u*u+r*x)/(2*u*n*g),v=(h*h-u*u-r*x)/(2*h*n*g),k=Math.log(Math.sqrt(w*w+1)-w),N=Math.log(Math.sqrt(v*v+1)-v);m=(N-k)/t,E=function(b){var $=b*m,T=Lf(k),P=u/(n*g)*(T*OE(t*$+k)-RE(k));return[a+P*p,c+P*y,u*T/Lf(t*$+k)]}}return E.duration=m*1e3*t/Math.SQRT2,E}return o.rho=function(s){var i=Math.max(.001,+s),a=i*i,c=a*a;return e(i,a,c)},o}(Math.SQRT2,2,4);var to=0,Po=0,So=0,yg=1e3,Ki,Lo,Gi=0,fr=0,wl=0,ds=typeof performance=="object"&&performance.now?performance:Date,vg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pu(){return fr||(vg(zE),fr=ds.now()+wl)}function zE(){fr=0}function Xi(){this._call=this._time=this._next=null}Xi.prototype=xg.prototype={constructor:Xi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pu():+n)+(t==null?0:+t),!this._next&&Lo!==this&&(Lo?Lo._next=this:Ki=this,Lo=this),this._call=e,this._time=n,gc()},stop:function(){this._call&&(this._call=null,this._time=1/0,gc())}};function xg(e,t,n){var r=new Xi;return r.restart(e,t,n),r}function FE(){Pu(),++to;for(var e=Ki,t;e;)(t=fr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--to}function Mf(){fr=(Gi=ds.now())+wl,to=Po=0;try{FE()}finally{to=0,UE(),fr=0}}function BE(){var e=ds.now(),t=e-Gi;t>yg&&(wl-=t,Gi=e)}function UE(){for(var e,t=Ki,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ki=n);Lo=e,gc(r)}function gc(e){if(!to){Po&&(Po=clearTimeout(Po));var t=e-fr;t>24?(e<1/0&&(Po=setTimeout(Mf,e-ds.now()-wl)),So&&(So=clearInterval(So))):(So||(Gi=ds.now(),So=setInterval(BE,yg)),to=1,vg(Mf))}}function $f(e,t,n){var r=new Xi;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var HE=vl("start","end","cancel","interrupt"),VE=[],wg=0,Af=1,yc=2,gi=3,Df=4,vc=5,yi=6;function Sl(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;WE(e,n,{name:t,index:r,group:o,on:HE,tween:VE,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:wg})}function Lu(e,t){var n=Bt(e,t);if(n.state>wg)throw new Error("too late; already scheduled");return n}function en(e,t){var n=Bt(e,t);if(n.state>gi)throw new Error("too late; already running");return n}function Bt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function WE(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=xg(s,0,n.time);function s(u){n.state=Af,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,h,p;if(n.state!==Af)return c();for(d in r)if(p=r[d],p.name===n.name){if(p.state===gi)return $f(i);p.state===Df?(p.state=yi,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[d]):+d<t&&(p.state=yi,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[d])}if($f(function(){n.state===gi&&(n.state=Df,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=yc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===yc){for(n.state=gi,o=new Array(h=n.tween.length),d=0,f=-1;d<h;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=p);o.length=f+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=vc,1),f=-1,h=o.length;++f<h;)o[f].call(e,d);n.state===vc&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=yi,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function vi(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>yc&&r.state<vc,r.state=yi,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function YE(e){return this.each(function(){vi(this,e)})}function KE(e,t){var n,r;return function(){var o=en(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function GE(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=en(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}s.tween=o}}function XE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Bt(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?KE:GE)(n,e,t))}function Mu(e,t,n){var r=e._id;return e.each(function(){var o=en(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Bt(o,r).value[t]}}function Sg(e,t){var n;return(typeof t=="number"?bn:t instanceof us?Tf:(n=us(t))?(t=n,Tf):PE)(e,t)}function QE(e){return function(){this.removeAttribute(e)}}function JE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ZE(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function qE(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function eC(e,t,n){var r,o,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=a+"",i===c?null:i===r&&c===o?s:(o=c,s=t(r=i,a)))}}function tC(e,t,n){var r,o,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=a+"",i===c?null:i===r&&c===o?s:(o=c,s=t(r=i,a)))}}function nC(e,t){var n=xl(e),r=n==="transform"?AE:Sg;return this.attrTween(e,typeof t=="function"?(n.local?tC:eC)(n,r,Mu(this,"attr."+e,t)):t==null?(n.local?JE:QE)(n):(n.local?qE:ZE)(n,r,t))}function rC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function oC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sC(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&oC(e,s)),n}return o._value=t,o}function iC(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&rC(e,s)),n}return o._value=t,o}function lC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=xl(e);return this.tween(n,(r.local?sC:iC)(r,t))}function aC(e,t){return function(){Lu(this,e).delay=+t.apply(this,arguments)}}function cC(e,t){return t=+t,function(){Lu(this,e).delay=t}}function uC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aC:cC)(t,e)):Bt(this.node(),t).delay}function dC(e,t){return function(){en(this,e).duration=+t.apply(this,arguments)}}function fC(e,t){return t=+t,function(){en(this,e).duration=t}}function hC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dC:fC)(t,e)):Bt(this.node(),t).duration}function pC(e,t){if(typeof t!="function")throw new Error;return function(){en(this,e).ease=t}}function mC(e){var t=this._id;return arguments.length?this.each(pC(t,e)):Bt(this.node(),t).ease}function gC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;en(this,e).ease=n}}function yC(e){if(typeof e!="function")throw new Error;return this.each(gC(this._id,e))}function vC(e){typeof e!="function"&&(e=qm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new yn(r,this._parents,this._name,this._id)}function xC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),a=0;a<s;++a)for(var c=t[a],u=n[a],d=c.length,f=i[a]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;a<r;++a)i[a]=t[a];return new yn(i,this._parents,this._name,this._id)}function wC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function SC(e,t,n){var r,o,s=wC(t)?Lu:en;return function(){var i=s(this,e),a=i.on;a!==r&&(o=(r=a).copy()).on(t,n),i.on=o}}function kC(e,t){var n=this._id;return arguments.length<2?Bt(this.node(),n).on.on(e):this.each(SC(n,e,t))}function EC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function CC(){return this.on("end.remove",EC(this._id))}function _C(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ju(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var a=r[i],c=a.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=a[h])&&(f=e.call(d,d.__data__,h,a))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Sl(u[h],t,n,h,u,Bt(d,n)));return new yn(s,this._parents,t,n)}function NC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zm(e));for(var r=this._groups,o=r.length,s=[],i=[],a=0;a<o;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,y=Bt(d,n),x=0,E=h.length;x<E;++x)(p=h[x])&&Sl(p,t,n,x,h,y);s.push(h),i.push(d)}return new yn(s,i,t,n)}var jC=Cs.prototype.constructor;function bC(){return new jC(this._groups,this._parents)}function TC(e,t){var n,r,o;return function(){var s=eo(this,e),i=(this.style.removeProperty(e),eo(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function kg(e){return function(){this.style.removeProperty(e)}}function PC(e,t,n){var r,o=n+"",s;return function(){var i=eo(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function LC(e,t,n){var r,o,s;return function(){var i=eo(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),eo(this,e))),i===c?null:i===r&&c===o?s:(o=c,s=t(r=i,a))}}function MC(e,t){var n,r,o,s="style."+t,i="end."+s,a;return function(){var c=en(this,e),u=c.on,d=c.value[s]==null?a||(a=kg(t)):void 0;(u!==n||o!==d)&&(r=(n=u).copy()).on(i,o=d),c.on=r}}function $C(e,t,n){var r=(e+="")=="transform"?$E:Sg;return t==null?this.styleTween(e,TC(e,r)).on("end.style."+e,kg(e)):typeof t=="function"?this.styleTween(e,LC(e,r,Mu(this,"style."+e,t))).each(MC(this._id,e)):this.styleTween(e,PC(e,r,t),n).on("end.style."+e,null)}function AC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function DC(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&AC(e,i,n)),r}return s._value=t,s}function RC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,DC(e,t,n??""))}function OC(e){return function(){this.textContent=e}}function IC(e){return function(){var t=e(this);this.textContent=t??""}}function zC(e){return this.tween("text",typeof e=="function"?IC(Mu(this,"text",e)):OC(e==null?"":e+""))}function FC(e){return function(t){this.textContent=e.call(this,t)}}function BC(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&FC(o)),t}return r._value=e,r}function UC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,BC(e))}function HC(){for(var e=this._name,t=this._id,n=Eg(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,c,u=0;u<a;++u)if(c=i[u]){var d=Bt(c,t);Sl(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new yn(r,this._parents,e,n)}function VC(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var a={value:i},c={value:function(){--o===0&&s()}};n.each(function(){var u=en(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&s()})}var WC=0;function yn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Eg(){return++WC}var nn=Cs.prototype;yn.prototype={constructor:yn,select:_C,selectAll:NC,selectChild:nn.selectChild,selectChildren:nn.selectChildren,filter:vC,merge:xC,selection:bC,transition:HC,call:nn.call,nodes:nn.nodes,node:nn.node,size:nn.size,empty:nn.empty,each:nn.each,on:kC,attr:nC,attrTween:lC,style:$C,styleTween:RC,text:zC,textTween:UC,remove:CC,tween:XE,delay:uC,duration:hC,ease:mC,easeVarying:yC,end:VC,[Symbol.iterator]:nn[Symbol.iterator]};function YC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var KC={time:null,delay:0,duration:250,ease:YC};function GC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function XC(e){var t,n;e instanceof yn?(t=e._id,e=e._name):(t=Eg(),(n=KC).time=Pu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&Sl(c,e,t,u,i,n||GC(c,t));return new yn(r,this._parents,e,t)}Cs.prototype.interrupt=YE;Cs.prototype.transition=XC;const Qs=e=>()=>e;function QC(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function an(e,t,n){this.k=e,this.x=t,this.y=n}an.prototype={constructor:an,scale:function(e){return e===1?this:new an(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new an(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dn=new an(1,0,0);an.prototype;function la(e){e.stopImmediatePropagation()}function ko(e){e.preventDefault(),e.stopImmediatePropagation()}function JC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ZC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Rf(){return this.__zoom||dn}function qC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function e_(){return navigator.maxTouchPoints||"ontouchstart"in this}function t_(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Cg(){var e=JC,t=ZC,n=t_,r=qC,o=e_,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=IE,u=vl("start","zoom","end"),d,f,h,p=500,y=150,x=0,E=10;function m(C){C.property("__zoom",Rf).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",P).filter(o).on("touchstart.zoom",I).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(C,R,M,z){var A=C.selection?C.selection():C;A.property("__zoom",Rf),C!==A?k(C,R,M,z):A.interrupt().each(function(){N(this,arguments).event(z).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},m.scaleBy=function(C,R,M,z){m.scaleTo(C,function(){var A=this.__zoom.k,j=typeof R=="function"?R.apply(this,arguments):R;return A*j},M,z)},m.scaleTo=function(C,R,M,z){m.transform(C,function(){var A=t.apply(this,arguments),j=this.__zoom,D=M==null?v(A):typeof M=="function"?M.apply(this,arguments):M,F=j.invert(D),B=typeof R=="function"?R.apply(this,arguments):R;return n(w(g(j,B),D,F),A,i)},M,z)},m.translateBy=function(C,R,M,z){m.transform(C,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),i)},null,z)},m.translateTo=function(C,R,M,z,A){m.transform(C,function(){var j=t.apply(this,arguments),D=this.__zoom,F=z==null?v(j):typeof z=="function"?z.apply(this,arguments):z;return n(dn.translate(F[0],F[1]).scale(D.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof M=="function"?-M.apply(this,arguments):-M),j,i)},z,A)};function g(C,R){return R=Math.max(s[0],Math.min(s[1],R)),R===C.k?C:new an(R,C.x,C.y)}function w(C,R,M){var z=R[0]-M[0]*C.k,A=R[1]-M[1]*C.k;return z===C.x&&A===C.y?C:new an(C.k,z,A)}function v(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function k(C,R,M,z){C.on("start.zoom",function(){N(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(z).end()}).tween("zoom",function(){var A=this,j=arguments,D=N(A,j).event(z),F=t.apply(A,j),B=M==null?v(F):typeof M=="function"?M.apply(A,j):M,G=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),Y=A.__zoom,Z=typeof R=="function"?R.apply(A,j):R,te=c(Y.invert(B).concat(G/Y.k),Z.invert(B).concat(G/Z.k));return function(ne){if(ne===1)ne=Z;else{var ue=te(ne),re=G/ue[2];ne=new an(re,B[0]-ue[0]*re,B[1]-ue[1]*re)}D.zoom(null,ne)}})}function N(C,R,M){return!M&&C.__zooming||new b(C,R)}function b(C,R){this.that=C,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,R),this.taps=0}b.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,R){return this.mouse&&C!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var R=Nt(this.that).datum();u.call(C,this.that,new QC(C,{sourceEvent:this.sourceEvent,target:m,type:C,transform:this.that.__zoom,dispatch:u}),R)}};function $(C,...R){if(!e.apply(this,arguments))return;var M=N(this,R).event(C),z=this.__zoom,A=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,r.apply(this,arguments)))),j=Dt(C);if(M.wheel)(M.mouse[0][0]!==j[0]||M.mouse[0][1]!==j[1])&&(M.mouse[1]=z.invert(M.mouse[0]=j)),clearTimeout(M.wheel);else{if(z.k===A)return;M.mouse=[j,z.invert(j)],vi(this),M.start()}ko(C),M.wheel=setTimeout(D,y),M.zoom("mouse",n(w(g(z,A),M.mouse[0],M.mouse[1]),M.extent,i));function D(){M.wheel=null,M.end()}}function T(C,...R){if(h||!e.apply(this,arguments))return;var M=C.currentTarget,z=N(this,R,!0).event(C),A=Nt(C.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",G,!0),j=Dt(C,M),D=C.clientX,F=C.clientY;cg(C.view),la(C),z.mouse=[j,this.__zoom.invert(j)],vi(this),z.start();function B(Y){if(ko(Y),!z.moved){var Z=Y.clientX-D,te=Y.clientY-F;z.moved=Z*Z+te*te>x}z.event(Y).zoom("mouse",n(w(z.that.__zoom,z.mouse[0]=Dt(Y,M),z.mouse[1]),z.extent,i))}function G(Y){A.on("mousemove.zoom mouseup.zoom",null),ug(Y.view,z.moved),ko(Y),z.event(Y).end()}}function P(C,...R){if(e.apply(this,arguments)){var M=this.__zoom,z=Dt(C.changedTouches?C.changedTouches[0]:C,this),A=M.invert(z),j=M.k*(C.shiftKey?.5:2),D=n(w(g(M,j),z,A),t.apply(this,R),i);ko(C),a>0?Nt(this).transition().duration(a).call(k,D,z,C):Nt(this).call(m.transform,D,z,C)}}function I(C,...R){if(e.apply(this,arguments)){var M=C.touches,z=M.length,A=N(this,R,C.changedTouches.length===z).event(C),j,D,F,B;for(la(C),D=0;D<z;++D)F=M[D],B=Dt(F,this),B=[B,this.__zoom.invert(B),F.identifier],A.touch0?!A.touch1&&A.touch0[2]!==B[2]&&(A.touch1=B,A.taps=0):(A.touch0=B,j=!0,A.taps=1+!!d);d&&(d=clearTimeout(d)),j&&(A.taps<2&&(f=B[0],d=setTimeout(function(){d=null},p)),vi(this),A.start())}}function H(C,...R){if(this.__zooming){var M=N(this,R).event(C),z=C.changedTouches,A=z.length,j,D,F,B;for(ko(C),j=0;j<A;++j)D=z[j],F=Dt(D,this),M.touch0&&M.touch0[2]===D.identifier?M.touch0[0]=F:M.touch1&&M.touch1[2]===D.identifier&&(M.touch1[0]=F);if(D=M.that.__zoom,M.touch1){var G=M.touch0[0],Y=M.touch0[1],Z=M.touch1[0],te=M.touch1[1],ne=(ne=Z[0]-G[0])*ne+(ne=Z[1]-G[1])*ne,ue=(ue=te[0]-Y[0])*ue+(ue=te[1]-Y[1])*ue;D=g(D,Math.sqrt(ne/ue)),F=[(G[0]+Z[0])/2,(G[1]+Z[1])/2],B=[(Y[0]+te[0])/2,(Y[1]+te[1])/2]}else if(M.touch0)F=M.touch0[0],B=M.touch0[1];else return;M.zoom("touch",n(w(D,F,B),M.extent,i))}}function U(C,...R){if(this.__zooming){var M=N(this,R).event(C),z=C.changedTouches,A=z.length,j,D;for(la(C),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),j=0;j<A;++j)D=z[j],M.touch0&&M.touch0[2]===D.identifier?delete M.touch0:M.touch1&&M.touch1[2]===D.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(D=Dt(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<E)){var F=Nt(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return m.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Qs(+C),m):r},m.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Qs(!!C),m):e},m.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:Qs(!!C),m):o},m.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Qs([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),m):t},m.scaleExtent=function(C){return arguments.length?(s[0]=+C[0],s[1]=+C[1],m):[s[0],s[1]]},m.translateExtent=function(C){return arguments.length?(i[0][0]=+C[0][0],i[1][0]=+C[1][0],i[0][1]=+C[0][1],i[1][1]=+C[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(C){return arguments.length?(n=C,m):n},m.duration=function(C){return arguments.length?(a=+C,m):a},m.interpolate=function(C){return arguments.length?(c=C,m):c},m.on=function(){var C=u.on.apply(u,arguments);return C===u?m:C},m.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,m):Math.sqrt(x)},m.tapDistance=function(C){return arguments.length?(E=+C,m):E},m}const kl=S.createContext(null),n_=kl.Provider,vn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},_g=vn.error001();function Ee(e,t){const n=S.useContext(kl);if(n===null)throw new Error(_g);return Qm(n,e,t)}const Be=()=>{const e=S.useContext(kl);if(e===null)throw new Error(_g);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},r_=e=>e.userSelectionActive?"none":"all";function $u({position:e,children:t,className:n,style:r,...o}){const s=Ee(r_),i=`${e}`.split("-");return O.createElement("div",{className:qe(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function o_({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:O.createElement($u,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},O.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const s_=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d})=>{const f=S.useRef(null),[h,p]=S.useState({x:0,y:0,width:0,height:0}),y=qe(["react-flow__edge-textwrapper",u]);return S.useEffect(()=>{if(f.current){const x=f.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:O.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:y,visibility:h.width?"visible":"hidden",...d},o&&O.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),O.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:r},n),c)};var i_=S.memo(s_);const Au=e=>({width:e.offsetWidth,height:e.offsetHeight}),no=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Du=(e={x:0,y:0},t)=>({x:no(e.x,t[0][0],t[1][0]),y:no(e.y,t[0][1],t[1][1])}),Of=(e,t,n)=>e<t?no(Math.abs(e-t),1,50)/50:e>n?-no(Math.abs(e-n),1,50)/50:0,Ng=(e,t)=>{const n=Of(e.x,35,t.width-35)*20,r=Of(e.y,35,t.height-35)*20;return[n,r]},jg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},bg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),fs=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Tg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),If=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),l_=(e,t)=>Tg(bg(fs(e),fs(t))),xc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},a_=e=>bt(e.width)&&bt(e.height)&&bt(e.x)&&bt(e.y),bt=e=>!isNaN(e)&&isFinite(e),$e=Symbol.for("internals"),Pg=["Enter"," ","Escape"],c_=(e,t)=>{},u_=e=>"nativeEvent"in e;function wc(e){var o,s;const t=u_(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Lg=e=>"clientX"in e,Hn=(e,t)=>{var s,i;const n=Lg(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Qi=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Ns=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>O.createElement(O.Fragment,null,O.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&O.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&bt(n)&&bt(r)?O.createElement(i_,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Ns.displayName="BaseEdge";function Eo(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function Mg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[s,a,o,i]}function $g({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:a}){const c=e*.125+o*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var hr;(function(e){e.Strict="strict",e.Loose="loose"})(hr||(hr={}));var nr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(nr||(nr={}));var hs;(function(e){e.Partial="partial",e.Full="full"})(hs||(hs={}));var Mn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Mn||(Mn={}));var Ji;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ji||(Ji={}));var ee;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ee||(ee={}));function zf({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===ee.Left||e===ee.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Ag({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:o,targetPosition:s=ee.Top}){const[i,a]=zf({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=zf({pos:s,x1:r,y1:o,x2:e,y2:t}),[d,f,h,p]=$g({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${a} ${c},${u} ${r},${o}`,d,f,h,p]}const Ru=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=ee.Bottom,targetPosition:s=ee.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:x})=>{const[E,m,g]=Ag({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return O.createElement(Ns,{path:E,labelX:m,labelY:g,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:x})});Ru.displayName="SimpleBezierEdge";const Ff={[ee.Left]:{x:-1,y:0},[ee.Right]:{x:1,y:0},[ee.Top]:{x:0,y:-1},[ee.Bottom]:{x:0,y:1}},d_=({source:e,sourcePosition:t=ee.Bottom,target:n})=>t===ee.Left||t===ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Bf=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function f_({source:e,sourcePosition:t=ee.Bottom,target:n,targetPosition:r=ee.Top,center:o,offset:s}){const i=Ff[t],a=Ff[r],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},d=d_({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],y,x;const E={x:0,y:0},m={x:0,y:0},[g,w,v,k]=Mg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){y=o.x??g,x=o.y??w;const b=[{x:y,y:c.y},{x:y,y:u.y}],$=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?p=f==="x"?b:$:p=f==="x"?$:b}else{const b=[{x:c.x,y:u.y}],$=[{x:u.x,y:c.y}];if(f==="x"?p=i.x===h?$:b:p=i.y===h?b:$,t===r){const U=Math.abs(e[f]-n[f]);if(U<=s){const C=Math.min(s-1,s-U);i[f]===h?E[f]=(c[f]>e[f]?-1:1)*C:m[f]=(u[f]>n[f]?-1:1)*C}}if(t!==r){const U=f==="x"?"y":"x",C=i[f]===a[U],R=c[U]>u[U],M=c[U]<u[U];(i[f]===1&&(!C&&R||C&&M)||i[f]!==1&&(!C&&M||C&&R))&&(p=f==="x"?b:$)}const T={x:c.x+E.x,y:c.y+E.y},P={x:u.x+m.x,y:u.y+m.y},I=Math.max(Math.abs(T.x-p[0].x),Math.abs(P.x-p[0].x)),H=Math.max(Math.abs(T.y-p[0].y),Math.abs(P.y-p[0].y));I>=H?(y=(T.x+P.x)/2,x=p[0].y):(y=p[0].x,x=(T.y+P.y)/2)}return[[e,{x:c.x+E.x,y:c.y+E.y},...p,{x:u.x+m.x,y:u.y+m.y},n],y,x,v,k]}function h_(e,t,n,r){const o=Math.min(Bf(e,t)/2,Bf(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+o*u},${i}Q ${s},${i} ${s},${i+o*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${i+o*c}Q ${s},${i} ${s+o*a},${i}`}function Sc({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:o,targetPosition:s=ee.Top,borderRadius:i=5,centerX:a,centerY:c,offset:u=20}){const[d,f,h,p,y]=f_({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:a,y:c},offset:u});return[d.reduce((E,m,g)=>{let w="";return g>0&&g<d.length-1?w=h_(d[g-1],m,d[g+1],i):w=`${g===0?"M":"L"}${m.x} ${m.y}`,E+=w,E},""),f,h,p,y]}const El=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=ee.Bottom,targetPosition:h=ee.Top,markerEnd:p,markerStart:y,pathOptions:x,interactionWidth:E})=>{const[m,g,w]=Sc({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return O.createElement(Ns,{path:m,labelX:g,labelY:w,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:y,interactionWidth:E})});El.displayName="SmoothStepEdge";const Ou=S.memo(e=>{var t;return O.createElement(El,{...e,pathOptions:S.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ou.displayName="StepEdge";function p_({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,a]=Mg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,a]}const Iu=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[y,x,E]=p_({sourceX:e,sourceY:t,targetX:n,targetY:r});return O.createElement(Ns,{path:y,labelX:x,labelY:E,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});Iu.displayName="StraightEdge";function Js(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Uf({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case ee.Left:return[t-Js(t-r,s),n];case ee.Right:return[t+Js(r-t,s),n];case ee.Top:return[t,n-Js(n-o,s)];case ee.Bottom:return[t,n+Js(o-n,s)]}}function Dg({sourceX:e,sourceY:t,sourcePosition:n=ee.Bottom,targetX:r,targetY:o,targetPosition:s=ee.Top,curvature:i=.25}){const[a,c]=Uf({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[u,d]=Uf({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[f,h,p,y]=$g({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${r},${o}`,f,h,p,y]}const Zi=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=ee.Bottom,targetPosition:s=ee.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,pathOptions:x,interactionWidth:E})=>{const[m,g,w]=Dg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:x==null?void 0:x.curvature});return O.createElement(Ns,{path:m,labelX:g,labelY:w,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:E})});Zi.displayName="BezierEdge";const zu=S.createContext(null),m_=zu.Provider;zu.Consumer;const g_=()=>S.useContext(zu),y_=e=>"id"in e&&"source"in e&&"target"in e,v_=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,kc=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,x_=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Rg=(e,t)=>{if(!e.source||!e.target)return t;let n;return y_(e)?n={...e}:n={...e,id:v_(e)},x_(n,t)?t:t.concat(n)},Ec=({x:e,y:t},[n,r,o],s,[i,a])=>{const c={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(c.x/i),y:a*Math.round(c.y/a)}:c},Og=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),ir=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Cl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=ir(o,t).positionAbsolute;return bg(r,fs({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tg(n)},Ig=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const c={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:y=!1}=d;if(i&&!p||y)return!1;const{positionAbsolute:x}=ir(d,a),E={x:x.x,y:x.y,width:f||0,height:h||0},m=xc(c,E),g=typeof f>"u"||typeof h>"u"||f===null||h===null,w=s&&m>0,v=(f||0)*(h||0);(g||w||m>=v||d.dragging)&&u.push(d)}),u},zg=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Fg=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(i,a),u=no(c,r,o),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=n/2-f*u;return{x:h,y:p,zoom:u}},Jn=(e,t=0)=>e.transition().duration(t);function Hf(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,a;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),o},[])}function w_(e,t,n,r,o,s){const{x:i,y:a}=Hn(e),u=t.elementsFromPoint(i,a).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const x=Fu(void 0,u),E=u.getAttribute("data-handleid"),m=s({nodeId:y,id:E,type:x});if(m){const g=o.find(w=>w.nodeId===y&&w.type===x&&w.id===E);return{handle:{id:E,type:x,nodeId:y,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:m}}}}let d=[],f=1/0;if(o.forEach(y=>{const x=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(x<=r){const E=s(y);x<=f&&(x<f?d=[{handle:y,validHandleResult:E}]:x===f&&d.push({handle:y,validHandleResult:E}),f=x)}}),!d.length)return{handle:null,validHandleResult:Bg()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:y})=>y.isValid),p=d.some(({handle:y})=>y.type==="target");return d.find(({handle:y,validHandleResult:x})=>p?y.type==="target":h?x.isValid:!0)||d[0]}const S_={source:null,target:null,sourceHandle:null,targetHandle:null},Bg=()=>({handleDomNode:null,isValid:!1,connection:S_,endHandle:null});function Ug(e,t,n,r,o,s,i){const a=o==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Bg(),handleDomNode:c};if(c){const d=Fu(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),y=c.classList.contains("connectableend"),x={source:a?f:n,sourceHandle:a?h:r,target:a?n:f,targetHandle:a?r:h};u.connection=x,p&&y&&(t===hr.Strict?a&&d==="source"||!a&&d==="target":f!==n||h!==r)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function k_({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[$e]){const{handleBounds:i}=s[$e];let a=[],c=[];i&&(a=Hf(s,i,"source",`${t}-${n}-${r}`),c=Hf(s,i,"target",`${t}-${n}-${r}`)),o.push(...a,...c)}return o},[])}function Fu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function aa(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function E_(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Hg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const d=jg(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:y,onConnectStart:x,panBy:E,getNodes:m,cancelConnection:g}=s();let w=0,v;const{x:k,y:N}=Hn(e),b=d==null?void 0:d.elementFromPoint(k,N),$=Fu(c,b),T=h==null?void 0:h.getBoundingClientRect();if(!T||!$)return;let P,I=Hn(e,T),H=!1,U=null,C=!1,R=null;const M=k_({nodes:m(),nodeId:n,handleId:t,handleType:$}),z=()=>{if(!p)return;const[D,F]=Ng(I,T);E({x:D,y:F}),w=requestAnimationFrame(z)};i({connectionPosition:I,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:$,connectionStartHandle:{nodeId:n,handleId:t,type:$},connectionEndHandle:null}),x==null||x(e,{nodeId:n,handleId:t,handleType:$});function A(D){const{transform:F}=s();I=Hn(D,T);const{handle:B,validHandleResult:G}=w_(D,d,Ec(I,F,!1,[1,1]),y,M,Y=>Ug(Y,f,n,t,o?"target":"source",a,d));if(v=B,H||(z(),H=!0),R=G.handleDomNode,U=G.connection,C=G.isValid,i({connectionPosition:v&&C?Og({x:v.x,y:v.y},F):I,connectionStatus:E_(!!v,C),connectionEndHandle:G.endHandle}),!v&&!C&&!R)return aa(P);U.source!==U.target&&R&&(aa(P),P=R,R.classList.add("connecting","react-flow__handle-connecting"),R.classList.toggle("valid",C),R.classList.toggle("react-flow__handle-valid",C))}function j(D){var F,B;(v||R)&&U&&C&&(r==null||r(U)),(B=(F=s()).onConnectEnd)==null||B.call(F,D),c&&(u==null||u(D)),aa(P),g(),cancelAnimationFrame(w),H=!1,C=!1,U=null,R=null,d.removeEventListener("mousemove",A),d.removeEventListener("mouseup",j),d.removeEventListener("touchmove",A),d.removeEventListener("touchend",j)}d.addEventListener("mousemove",A),d.addEventListener("mouseup",j),d.addEventListener("touchmove",A),d.addEventListener("touchend",j)}const Vf=()=>!0,C_=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),__=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Vg=S.forwardRef(({type:e="source",position:t=ee.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var T,P;const y=i||null,x=e==="target",E=Be(),m=g_(),{connectOnClick:g,noPanClassName:w}=Ee(C_,ft),{connecting:v,clickConnecting:k}=Ee(__(m,y,e),ft);m||(P=(T=E.getState()).onError)==null||P.call(T,"010",vn.error010());const N=I=>{const{defaultEdgeOptions:H,onConnect:U,hasDefaultEdges:C}=E.getState(),R={...H,...I};if(C){const{edges:M,setEdges:z}=E.getState();z(Rg(R,M))}U==null||U(R),a==null||a(R)},b=I=>{if(!m)return;const H=Lg(I);o&&(H&&I.button===0||!H)&&Hg({event:I,handleId:y,nodeId:m,onConnect:N,isTarget:x,getState:E.getState,setState:E.setState,isValidConnection:n||E.getState().isValidConnection||Vf}),H?d==null||d(I):f==null||f(I)},$=I=>{const{onClickConnectStart:H,onClickConnectEnd:U,connectionClickStartHandle:C,connectionMode:R,isValidConnection:M}=E.getState();if(!m||!C&&!o)return;if(!C){H==null||H(I,{nodeId:m,handleId:y,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:y}});return}const z=jg(I.target),A=n||M||Vf,{connection:j,isValid:D}=Ug({nodeId:m,id:y,type:e},R,C.nodeId,C.handleId||null,C.type,A,z);D&&N(j),U==null||U(I),E.setState({connectionClickStartHandle:null})};return O.createElement("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${y}-${e}`,className:qe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:s,connecting:k,connectionindicator:r&&(o&&!v||s&&v)}]),onMouseDown:b,onTouchStart:b,onClick:g?$:void 0,ref:p,...h},c)});Vg.displayName="Handle";var ro=S.memo(Vg);const Wg=({data:e,isConnectable:t,targetPosition:n=ee.Top,sourcePosition:r=ee.Bottom})=>O.createElement(O.Fragment,null,O.createElement(ro,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,O.createElement(ro,{type:"source",position:r,isConnectable:t}));Wg.displayName="DefaultNode";var Cc=S.memo(Wg);const Yg=({data:e,isConnectable:t,sourcePosition:n=ee.Bottom})=>O.createElement(O.Fragment,null,e==null?void 0:e.label,O.createElement(ro,{type:"source",position:n,isConnectable:t}));Yg.displayName="InputNode";var Kg=S.memo(Yg);const Gg=({data:e,isConnectable:t,targetPosition:n=ee.Top})=>O.createElement(O.Fragment,null,O.createElement(ro,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Gg.displayName="OutputNode";var Xg=S.memo(Gg);const Bu=()=>null;Bu.displayName="GroupNode";const N_=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Zs=e=>e.id;function j_(e,t){return ft(e.selectedNodes.map(Zs),t.selectedNodes.map(Zs))&&ft(e.selectedEdges.map(Zs),t.selectedEdges.map(Zs))}const Qg=S.memo(({onSelectionChange:e})=>{const t=Be(),{selectedNodes:n,selectedEdges:r}=Ee(N_,j_);return S.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});Qg.displayName="SelectionListener";const b_=e=>!!e.onSelectionChange;function T_({onSelectionChange:e}){const t=Ee(b_);return e||t?O.createElement(Qg,{onSelectionChange:e}):null}const P_=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function xr(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ie(e,t,n){S.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const L_=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:y,minZoom:x,maxZoom:E,nodeExtent:m,onNodesChange:g,onEdgesChange:w,elementsSelectable:v,connectionMode:k,snapGrid:N,snapToGrid:b,translateExtent:$,connectOnClick:T,defaultEdgeOptions:P,fitView:I,fitViewOptions:H,onNodesDelete:U,onEdgesDelete:C,onNodeDrag:R,onNodeDragStart:M,onNodeDragStop:z,onSelectionDrag:A,onSelectionDragStart:j,onSelectionDragStop:D,noPanClassName:F,nodeOrigin:B,rfId:G,autoPanOnConnect:Y,autoPanOnNodeDrag:Z,onError:te,connectionRadius:ne,isValidConnection:ue,nodeDragThreshold:re})=>{const{setNodes:de,setEdges:Re,setDefaultNodesAndEdges:Ce,setMinZoom:Oe,setMaxZoom:Ue,setTranslateExtent:Ne,setNodeExtent:et,reset:me}=Ee(P_,ft),q=Be();return S.useEffect(()=>{const He=r==null?void 0:r.map(St=>({...St,...P}));return Ce(n,He),()=>{me()}},[]),ie("defaultEdgeOptions",P,q.setState),ie("connectionMode",k,q.setState),ie("onConnect",o,q.setState),ie("onConnectStart",s,q.setState),ie("onConnectEnd",i,q.setState),ie("onClickConnectStart",a,q.setState),ie("onClickConnectEnd",c,q.setState),ie("nodesDraggable",u,q.setState),ie("nodesConnectable",d,q.setState),ie("nodesFocusable",f,q.setState),ie("edgesFocusable",h,q.setState),ie("edgesUpdatable",p,q.setState),ie("elementsSelectable",v,q.setState),ie("elevateNodesOnSelect",y,q.setState),ie("snapToGrid",b,q.setState),ie("snapGrid",N,q.setState),ie("onNodesChange",g,q.setState),ie("onEdgesChange",w,q.setState),ie("connectOnClick",T,q.setState),ie("fitViewOnInit",I,q.setState),ie("fitViewOnInitOptions",H,q.setState),ie("onNodesDelete",U,q.setState),ie("onEdgesDelete",C,q.setState),ie("onNodeDrag",R,q.setState),ie("onNodeDragStart",M,q.setState),ie("onNodeDragStop",z,q.setState),ie("onSelectionDrag",A,q.setState),ie("onSelectionDragStart",j,q.setState),ie("onSelectionDragStop",D,q.setState),ie("noPanClassName",F,q.setState),ie("nodeOrigin",B,q.setState),ie("rfId",G,q.setState),ie("autoPanOnConnect",Y,q.setState),ie("autoPanOnNodeDrag",Z,q.setState),ie("onError",te,q.setState),ie("connectionRadius",ne,q.setState),ie("isValidConnection",ue,q.setState),ie("nodeDragThreshold",re,q.setState),xr(e,de),xr(t,Re),xr(x,Oe),xr(E,Ue),xr($,Ne),xr(m,et),null},Wf={display:"none"},M_={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Jg="react-flow__node-desc",Zg="react-flow__edge-desc",$_="react-flow__aria-live",A_=e=>e.ariaLiveMessage;function D_({rfId:e}){const t=Ee(A_);return O.createElement("div",{id:`${$_}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:M_},t)}function R_({rfId:e,disableKeyboardA11y:t}){return O.createElement(O.Fragment,null,O.createElement("div",{id:`${Jg}-${e}`,style:Wf},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),O.createElement("div",{id:`${Zg}-${e}`,style:Wf},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&O.createElement(D_,{rfId:e}))}var ps=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=S.useState(!1),o=S.useRef(!1),s=S.useRef(new Set([])),[i,a]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return S.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&wc(p))return!1;const x=Kf(p.code,a);s.current.add(p[x]),Yf(i,s.current,!1)&&(p.preventDefault(),r(!0))},f=p=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&wc(p))return!1;const x=Kf(p.code,a);Yf(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),o.current=!1},h=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,r]),n};function Yf(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Kf(e,t){return t.includes(e)?"code":"key"}function qg(e,t,n,r){var a,c;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),i=ir(s,r);return qg(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((a=s[$e])==null?void 0:a.z)??0)>(n.z??0)?((c=s[$e])==null?void 0:c.z)??0:n.z??0},r)}function ey(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:i,y:a,z:c}=qg(r,e,{...r.position,z:((s=r[$e])==null?void 0:s.z)??0},t);r.positionAbsolute={x:i,y:a},r[$e].z=c,n!=null&&n[r.id]&&(r[$e].isParent=!0)}})}function ca(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(a=>{var p;const c=(bt(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,$e,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[$e])==null?void 0:p.handleBounds,z:c}}),o.set(a.id,d)}),ey(o,n,s),o}function ty(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(a&&c&&(h||!t.initial)){const y=n().filter(E=>{var g;const m=t.includeHiddenNodes?E.width&&E.height:!E.hidden;return(g=t.nodes)!=null&&g.length?m&&t.nodes.some(w=>w.id===E.id):m}),x=y.every(E=>E.width&&E.height);if(y.length>0&&x){const E=Cl(y,f),{x:m,y:g,zoom:w}=Fg(E,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),v=dn.translate(m,g).scale(w);return typeof t.duration=="number"&&t.duration>0?a.transform(Jn(c,t.duration),v):a.transform(c,v),!0}}return!1}function O_(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[$e]:r[$e],selected:n.selected})}),new Map(t)}function I_(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function qs({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:O_(e,o)}),i==null||i(e)),t!=null&&t.length&&(u&&r({edges:I_(t,s)}),a==null||a(t))}const wr=()=>{},z_={zoomIn:wr,zoomOut:wr,zoomTo:wr,getZoom:()=>1,setViewport:wr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:wr,fitBounds:wr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},F_=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),B_=()=>{const e=Be(),{d3Zoom:t,d3Selection:n}=Ee(F_,ft);return S.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Jn(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Jn(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(Jn(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,a,c]=e.getState().transform,u=dn.translate(o.x??i,o.y??a).scale(o.zoom??c);t.transform(Jn(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>ty(e.getState,o),setCenter:(o,s,i)=>{const{width:a,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=a/2-o*d,h=c/2-s*d,p=dn.translate(f,h).scale(d);t.transform(Jn(n,i==null?void 0:i.duration),p)},fitBounds:(o,s)=>{const{width:i,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Fg(o,i,a,c,u,(s==null?void 0:s.padding)??.1),p=dn.translate(d,f).scale(h);t.transform(Jn(n,s==null?void 0:s.duration),p)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ec(o,s,i,a)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:a,domNode:c}=e.getState();if(!c)return o;const{x:u,y:d}=c.getBoundingClientRect(),f={x:o.x-u,y:o.y-d};return Ec(f,s,i,a)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:a,y:c}=i.getBoundingClientRect(),u=Og(o,s);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:z_,[t,n])};function Uu(){const e=B_(),t=Be(),n=S.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),r=S.useCallback(x=>t.getState().nodeInternals.get(x),[]),o=S.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(E=>({...E}))},[]),s=S.useCallback(x=>{const{edges:E=[]}=t.getState();return E.find(m=>m.id===x)},[]),i=S.useCallback(x=>{const{getNodes:E,setNodes:m,hasDefaultNodes:g,onNodesChange:w}=t.getState(),v=E(),k=typeof x=="function"?x(v):x;if(g)m(k);else if(w){const N=k.length===0?v.map(b=>({type:"remove",id:b.id})):k.map(b=>({item:b,type:"reset"}));w(N)}},[]),a=S.useCallback(x=>{const{edges:E=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:w}=t.getState(),v=typeof x=="function"?x(E):x;if(g)m(v);else if(w){const k=v.length===0?E.map(N=>({type:"remove",id:N.id})):v.map(N=>({item:N,type:"reset"}));w(k)}},[]),c=S.useCallback(x=>{const E=Array.isArray(x)?x:[x],{getNodes:m,setNodes:g,hasDefaultNodes:w,onNodesChange:v}=t.getState();if(w){const N=[...m(),...E];g(N)}else if(v){const k=E.map(N=>({item:N,type:"add"}));v(k)}},[]),u=S.useCallback(x=>{const E=Array.isArray(x)?x:[x],{edges:m=[],setEdges:g,hasDefaultEdges:w,onEdgesChange:v}=t.getState();if(w)g([...m,...E]);else if(v){const k=E.map(N=>({item:N,type:"add"}));v(k)}},[]),d=S.useCallback(()=>{const{getNodes:x,edges:E=[],transform:m}=t.getState(),[g,w,v]=m;return{nodes:x().map(k=>({...k})),edges:E.map(k=>({...k})),viewport:{x:g,y:w,zoom:v}}},[]),f=S.useCallback(({nodes:x,edges:E})=>{const{nodeInternals:m,getNodes:g,edges:w,hasDefaultNodes:v,hasDefaultEdges:k,onNodesDelete:N,onEdgesDelete:b,onNodesChange:$,onEdgesChange:T}=t.getState(),P=(x||[]).map(R=>R.id),I=(E||[]).map(R=>R.id),H=g().reduce((R,M)=>{const z=M.parentNode||M.parentId,A=!P.includes(M.id)&&z&&R.find(D=>D.id===z);return(typeof M.deletable=="boolean"?M.deletable:!0)&&(P.includes(M.id)||A)&&R.push(M),R},[]),U=w.filter(R=>typeof R.deletable=="boolean"?R.deletable:!0),C=U.filter(R=>I.includes(R.id));if(H||C){const R=zg(H,U),M=[...C,...R],z=M.reduce((A,j)=>(A.includes(j.id)||A.push(j.id),A),[]);if((k||v)&&(k&&t.setState({edges:w.filter(A=>!z.includes(A.id))}),v&&(H.forEach(A=>{m.delete(A.id)}),t.setState({nodeInternals:new Map(m)}))),z.length>0&&(b==null||b(M),T&&T(z.map(A=>({id:A,type:"remove"})))),H.length>0&&(N==null||N(H),$)){const A=H.map(j=>({id:j.id,type:"remove"}));$(A)}}},[]),h=S.useCallback(x=>{const E=a_(x),m=E?null:t.getState().nodeInternals.get(x.id);return!E&&!m?[null,null,E]:[E?x:If(m),m,E]},[]),p=S.useCallback((x,E=!0,m)=>{const[g,w,v]=h(x);return g?(m||t.getState().getNodes()).filter(k=>{if(!v&&(k.id===w.id||!k.positionAbsolute))return!1;const N=If(k),b=xc(N,g);return E&&b>0||b>=g.width*g.height}):[]},[]),y=S.useCallback((x,E,m=!0)=>{const[g]=h(x);if(!g)return!1;const w=xc(g,E);return m&&w>0||w>=g.width*g.height},[]);return S.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:a,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:y}),[e,n,r,o,s,i,a,c,u,d,f,p,y])}const U_={actInsideInputWithModifier:!1};var H_=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Be(),{deleteElements:r}=Uu(),o=ps(e,U_),s=ps(t);S.useEffect(()=>{if(o){const{edges:i,getNodes:a}=n.getState(),c=a().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),S.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function V_(e){const t=Be();S.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=Au(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",vn.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Hu={position:"absolute",width:"100%",height:"100%",top:0,left:0},W_=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ei=e=>({x:e.x,y:e.y,zoom:e.k}),Sr=(e,t)=>e.target.closest(`.${t}`),Gf=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xf=e=>{const t=e.ctrlKey&&Qi()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Y_=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),K_=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=nr.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:y,maxZoom:x,zoomActivationKeyCode:E,preventScrolling:m=!0,children:g,noWheelClassName:w,noPanClassName:v})=>{const k=S.useRef(),N=Be(),b=S.useRef(!1),$=S.useRef(!1),T=S.useRef(null),P=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:H,d3ZoomHandler:U,userSelectionActive:C}=Ee(Y_,ft),R=ps(E),M=S.useRef(0),z=S.useRef(!1),A=S.useRef();return V_(T),S.useEffect(()=>{if(T.current){const j=T.current.getBoundingClientRect(),D=Cg().scaleExtent([y,x]).translateExtent(p),F=Nt(T.current).call(D),B=dn.translate(h.x,h.y).scale(no(h.zoom,y,x)),G=[[0,0],[j.width,j.height]],Y=D.constrain()(B,G,p);D.transform(F,Y),D.wheelDelta(Xf),N.setState({d3Zoom:D,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:T.current.closest(".react-flow")})}},[]),S.useEffect(()=>{H&&I&&(i&&!R&&!C?H.on("wheel.zoom",j=>{if(Sr(j,w))return!1;j.preventDefault(),j.stopImmediatePropagation();const D=H.property("__zoom").k||1;if(j.ctrlKey&&s){const ue=Dt(j),re=Xf(j),de=D*Math.pow(2,re);I.scaleTo(H,de,ue,j);return}const F=j.deltaMode===1?20:1;let B=c===nr.Vertical?0:j.deltaX*F,G=c===nr.Horizontal?0:j.deltaY*F;!Qi()&&j.shiftKey&&c!==nr.Vertical&&(B=j.deltaY*F,G=0),I.translateBy(H,-(B/D)*a,-(G/D)*a,{internal:!0});const Y=ei(H.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:te,onViewportChangeEnd:ne}=N.getState();clearTimeout(A.current),z.current||(z.current=!0,t==null||t(j,Y),Z==null||Z(Y)),z.current&&(e==null||e(j,Y),te==null||te(Y),A.current=setTimeout(()=>{n==null||n(j,Y),ne==null||ne(Y),z.current=!1},150))},{passive:!1}):typeof U<"u"&&H.on("wheel.zoom",function(j,D){if(!m&&j.type==="wheel"&&!j.ctrlKey||Sr(j,w))return null;j.preventDefault(),U.call(this,j,D)},{passive:!1}))},[C,i,c,H,I,U,R,s,m,w,t,e,n]),S.useEffect(()=>{I&&I.on("start",j=>{var B,G;if(!j.sourceEvent||j.sourceEvent.internal)return null;M.current=(B=j.sourceEvent)==null?void 0:B.button;const{onViewportChangeStart:D}=N.getState(),F=ei(j.transform);b.current=!0,P.current=F,((G=j.sourceEvent)==null?void 0:G.type)==="mousedown"&&N.setState({paneDragging:!0}),D==null||D(F),t==null||t(j.sourceEvent,F)})},[I,t]),S.useEffect(()=>{I&&(C&&!b.current?I.on("zoom",null):C||I.on("zoom",j=>{var F;const{onViewportChange:D}=N.getState();if(N.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),$.current=!!(r&&Gf(f,M.current??0)),(e||D)&&!((F=j.sourceEvent)!=null&&F.internal)){const B=ei(j.transform);D==null||D(B),e==null||e(j.sourceEvent,B)}}))},[C,I,e,f,r]),S.useEffect(()=>{I&&I.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:D}=N.getState();if(b.current=!1,N.setState({paneDragging:!1}),r&&Gf(f,M.current??0)&&!$.current&&r(j.sourceEvent),$.current=!1,(n||D)&&W_(P.current,j.transform)){const F=ei(j.transform);P.current=F,clearTimeout(k.current),k.current=setTimeout(()=>{D==null||D(F),n==null||n(j.sourceEvent,F)},i?150:0)}})},[I,i,f,n,r]),S.useEffect(()=>{I&&I.filter(j=>{const D=R||o,F=s&&j.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&j.button===1&&j.type==="mousedown"&&(Sr(j,"react-flow__node")||Sr(j,"react-flow__edge")))return!0;if(!f&&!D&&!i&&!u&&!s||C||!u&&j.type==="dblclick"||Sr(j,w)&&j.type==="wheel"||Sr(j,v)&&(j.type!=="wheel"||i&&j.type==="wheel"&&!R)||!s&&j.ctrlKey&&j.type==="wheel"||!D&&!i&&!F&&j.type==="wheel"||!f&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(f)&&!f.includes(j.button)&&j.type==="mousedown")return!1;const B=Array.isArray(f)&&f.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&B})},[C,I,o,s,i,u,f,d,R]),O.createElement("div",{className:"react-flow__renderer",ref:T,style:Hu},g)},G_=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function X_(){const{userSelectionActive:e,userSelectionRect:t}=Ee(G_,ft);return e&&t?O.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Qf(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function ny(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(a=>a.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const a of s)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Qf(r,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&Qf(r,i);break}case"remove":return r}return r.push(i),r},n)}function ry(e,t){return ny(e,t)}function Q_(e,t){return ny(e,t)}const Tn=(e,t)=>({id:e,type:"select",selected:t});function Rr(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Tn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Tn(r.id,!1))),n},[])}const ua=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},J_=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),oy=S.memo(({isSelecting:e,selectionMode:t=hs.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=S.useRef(null),p=Be(),y=S.useRef(0),x=S.useRef(0),E=S.useRef(),{userSelectionActive:m,elementsSelectable:g,dragging:w}=Ee(J_,ft),v=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},k=U=>{s==null||s(U),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},N=U=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){U.preventDefault();return}i==null||i(U)},b=a?U=>a(U):void 0,$=U=>{const{resetSelectedElements:C,domNode:R}=p.getState();if(E.current=R==null?void 0:R.getBoundingClientRect(),!g||!e||U.button!==0||U.target!==h.current||!E.current)return;const{x:M,y:z}=Hn(U,E.current);C(),p.setState({userSelectionRect:{width:0,height:0,startX:M,startY:z,x:M,y:z}}),r==null||r(U)},T=U=>{const{userSelectionRect:C,nodeInternals:R,edges:M,transform:z,onNodesChange:A,onEdgesChange:j,nodeOrigin:D,getNodes:F}=p.getState();if(!e||!E.current||!C)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const B=Hn(U,E.current),G=C.startX??0,Y=C.startY??0,Z={...C,x:B.x<G?B.x:G,y:B.y<Y?B.y:Y,width:Math.abs(B.x-G),height:Math.abs(B.y-Y)},te=F(),ne=Ig(R,Z,z,t===hs.Partial,!0,D),ue=zg(ne,M).map(de=>de.id),re=ne.map(de=>de.id);if(y.current!==re.length){y.current=re.length;const de=Rr(te,re);de.length&&(A==null||A(de))}if(x.current!==ue.length){x.current=ue.length;const de=Rr(M,ue);de.length&&(j==null||j(de))}p.setState({userSelectionRect:Z})},P=U=>{if(U.button!==0)return;const{userSelectionRect:C}=p.getState();!m&&C&&U.target===h.current&&(k==null||k(U)),p.setState({nodesSelectionActive:y.current>0}),v(),o==null||o(U)},I=U=>{m&&(p.setState({nodesSelectionActive:y.current>0}),o==null||o(U)),v()},H=g&&(e||m);return O.createElement("div",{className:qe(["react-flow__pane",{dragging:w,selection:e}]),onClick:H?void 0:ua(k,h),onContextMenu:ua(N,h),onWheel:ua(b,h),onMouseEnter:H?void 0:c,onMouseDown:H?$:void 0,onMouseMove:H?T:u,onMouseUp:H?P:void 0,onMouseLeave:H?I:d,ref:h,style:Hu},f,O.createElement(X_,null))});oy.displayName="Pane";function sy(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:sy(r,t):!1}function Jf(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Z_(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!sy(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function q_(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function iy(e,t,n,r,o=[0,0],s){const i=q_(e,e.extent||r);let a=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:h,y:p}=ir(f,o).positionAbsolute;a=f&&bt(h)&&bt(p)&&bt(f.width)&&bt(f.height)?[[h+e.width*o[0],p+e.height*o[1]],[h+f.width-e.width+e.width*o[0],p+f.height-e.height+e.height*o[1]]]:a}else s==null||s("005",vn.error005()),a=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:h,y:p}=ir(f,o).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=n.get(c);u=ir(f,o).positionAbsolute}const d=a&&a!=="parent"?Du(t,a):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function da({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Zf=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...Au(c)}})};function Co(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function _c({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",vn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):o([e])}function eN(){const e=Be();return S.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(c.x/o[0]):c.x,ySnapped:s?o[1]*Math.round(c.y/o[1]):c.y,...c}},[])}function fa(e){return(t,n,r)=>e==null?void 0:e(t,r)}function ly({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const a=Be(),[c,u]=S.useState(!1),d=S.useRef([]),f=S.useRef({x:null,y:null}),h=S.useRef(0),p=S.useRef(null),y=S.useRef({x:0,y:0}),x=S.useRef(null),E=S.useRef(!1),m=S.useRef(!1),g=S.useRef(!1),w=eN();return S.useEffect(()=>{if(e!=null&&e.current){const v=Nt(e.current),k=({x:$,y:T})=>{const{nodeInternals:P,onNodeDrag:I,onSelectionDrag:H,updateNodePositions:U,nodeExtent:C,snapGrid:R,snapToGrid:M,nodeOrigin:z,onError:A}=a.getState();f.current={x:$,y:T};let j=!1,D={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&C){const B=Cl(d.current,z);D=fs(B)}if(d.current=d.current.map(B=>{const G={x:$-B.distance.x,y:T-B.distance.y};M&&(G.x=R[0]*Math.round(G.x/R[0]),G.y=R[1]*Math.round(G.y/R[1]));const Y=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];d.current.length>1&&C&&!B.extent&&(Y[0][0]=B.positionAbsolute.x-D.x+C[0][0],Y[1][0]=B.positionAbsolute.x+(B.width??0)-D.x2+C[1][0],Y[0][1]=B.positionAbsolute.y-D.y+C[0][1],Y[1][1]=B.positionAbsolute.y+(B.height??0)-D.y2+C[1][1]);const Z=iy(B,G,P,Y,z,A);return j=j||B.position.x!==Z.position.x||B.position.y!==Z.position.y,B.position=Z.position,B.positionAbsolute=Z.positionAbsolute,B}),!j)return;U(d.current,!0,!0),u(!0);const F=o?I:fa(H);if(F&&x.current){const[B,G]=da({nodeId:o,dragItems:d.current,nodeInternals:P});F(x.current,B,G)}},N=()=>{if(!p.current)return;const[$,T]=Ng(y.current,p.current);if($!==0||T!==0){const{transform:P,panBy:I}=a.getState();f.current.x=(f.current.x??0)-$/P[2],f.current.y=(f.current.y??0)-T/P[2],I({x:$,y:T})&&k(f.current)}h.current=requestAnimationFrame(N)},b=$=>{var z;const{nodeInternals:T,multiSelectionActive:P,nodesDraggable:I,unselectNodesAndEdges:H,onNodeDragStart:U,onSelectionDragStart:C}=a.getState();m.current=!0;const R=o?U:fa(C);(!i||!s)&&!P&&o&&((z=T.get(o))!=null&&z.selected||H()),o&&s&&i&&_c({id:o,store:a,nodeRef:e});const M=w($);if(f.current=M,d.current=Z_(T,I,M,o),R&&d.current){const[A,j]=da({nodeId:o,dragItems:d.current,nodeInternals:T});R($.sourceEvent,A,j)}};if(t)v.on(".drag",null);else{const $=fE().on("start",T=>{const{domNode:P,nodeDragThreshold:I}=a.getState();I===0&&b(T),g.current=!1;const H=w(T);f.current=H,p.current=(P==null?void 0:P.getBoundingClientRect())||null,y.current=Hn(T.sourceEvent,p.current)}).on("drag",T=>{var U,C;const P=w(T),{autoPanOnNodeDrag:I,nodeDragThreshold:H}=a.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(g.current=!0),!g.current){if(!E.current&&m.current&&I&&(E.current=!0,N()),!m.current){const R=P.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),M=P.ySnapped-(((C=f==null?void 0:f.current)==null?void 0:C.y)??0);Math.sqrt(R*R+M*M)>H&&b(T)}(f.current.x!==P.xSnapped||f.current.y!==P.ySnapped)&&d.current&&m.current&&(x.current=T.sourceEvent,y.current=Hn(T.sourceEvent,p.current),k(P))}}).on("end",T=>{if(!(!m.current||g.current)&&(u(!1),E.current=!1,m.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:P,nodeInternals:I,onNodeDragStop:H,onSelectionDragStop:U}=a.getState(),C=o?H:fa(U);if(P(d.current,!1,!1),C){const[R,M]=da({nodeId:o,dragItems:d.current,nodeInternals:I});C(T.sourceEvent,R,M)}}}).filter(T=>{const P=T.target;return!T.button&&(!n||!Jf(P,`.${n}`,e))&&(!r||Jf(P,r,e))});return v.call($),()=>{v.on(".drag",null)}}}},[e,t,n,r,s,a,o,i,w]),c}function ay(){const e=Be();return S.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(g=>g.selected&&(g.draggable||d&&typeof g.draggable>"u")),h=a?c[0]:5,p=a?c[1]:5,y=n.isShiftPressed?4:1,x=n.x*h*y,E=n.y*p*y,m=f.map(g=>{if(g.positionAbsolute){const w={x:g.positionAbsolute.x+x,y:g.positionAbsolute.y+E};a&&(w.x=c[0]*Math.round(w.x/c[0]),w.y=c[1]*Math.round(w.y/c[1]));const{positionAbsolute:v,position:k}=iy(g,w,r,o,void 0,u);g.position=k,g.positionAbsolute=v}return g});s(m,!0,!1)},[])}const Wr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _o=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:y,onDoubleClick:x,style:E,className:m,isDraggable:g,isSelectable:w,isConnectable:v,isFocusable:k,selectNodesOnDrag:N,sourcePosition:b,targetPosition:$,hidden:T,resizeObserver:P,dragHandle:I,zIndex:H,isParent:U,noDragClassName:C,noPanClassName:R,initialized:M,disableKeyboardA11y:z,ariaLabel:A,rfId:j,hasHandleBounds:D})=>{const F=Be(),B=S.useRef(null),G=S.useRef(null),Y=S.useRef(b),Z=S.useRef($),te=S.useRef(r),ne=w||g||d||f||h||p,ue=ay(),re=Co(n,F.getState,f),de=Co(n,F.getState,h),Re=Co(n,F.getState,p),Ce=Co(n,F.getState,y),Oe=Co(n,F.getState,x),Ue=me=>{const{nodeDragThreshold:q}=F.getState();if(w&&(!N||!g||q>0)&&_c({id:n,store:F,nodeRef:B}),d){const He=F.getState().nodeInternals.get(n);He&&d(me,{...He})}},Ne=me=>{if(!wc(me)&&!z)if(Pg.includes(me.key)&&w){const q=me.key==="Escape";_c({id:n,store:F,unselect:q,nodeRef:B})}else g&&u&&Object.prototype.hasOwnProperty.call(Wr,me.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${me.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ue({x:Wr[me.key].x,y:Wr[me.key].y,isShiftPressed:me.shiftKey}))};S.useEffect(()=>()=>{G.current&&(P==null||P.unobserve(G.current),G.current=null)},[]),S.useEffect(()=>{if(B.current&&!T){const me=B.current;(!M||!D||G.current!==me)&&(G.current&&(P==null||P.unobserve(G.current)),P==null||P.observe(me),G.current=me)}},[T,M,D]),S.useEffect(()=>{const me=te.current!==r,q=Y.current!==b,He=Z.current!==$;B.current&&(me||q||He)&&(me&&(te.current=r),q&&(Y.current=b),He&&(Z.current=$),F.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,r,b,$]);const et=ly({nodeRef:B,disabled:T||!g,noDragClassName:C,handleSelector:I,nodeId:n,isSelectable:w,selectNodesOnDrag:N});return T?null:O.createElement("div",{className:qe(["react-flow__node",`react-flow__node-${r}`,{[R]:g},m,{selected:u,selectable:w,parent:U,dragging:et}]),ref:B,style:{zIndex:H,transform:`translate(${a}px,${c}px)`,pointerEvents:ne?"all":"none",visibility:M?"visible":"hidden",...E},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:de,onMouseLeave:Re,onContextMenu:Ce,onClick:Ue,onDoubleClick:Oe,onKeyDown:k?Ne:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":z?void 0:`${Jg}-${j}`,"aria-label":A},O.createElement(m_,{value:n},O.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:u,isConnectable:v,sourcePosition:b,targetPosition:$,dragging:et,dragHandle:I,zIndex:H})))};return t.displayName="NodeWrapper",S.memo(t)};const tN=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Cl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function nN({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Be(),{width:o,height:s,x:i,y:a,transformString:c,userSelectionActive:u}=Ee(tN,ft),d=ay(),f=S.useRef(null);if(S.useEffect(()=>{var y;n||(y=f.current)==null||y.focus({preventScroll:!0})},[n]),ly({nodeRef:f}),u||!o||!s)return null;const h=e?y=>{const x=r.getState().getNodes().filter(E=>E.selected);e(y,x)}:void 0,p=y=>{Object.prototype.hasOwnProperty.call(Wr,y.key)&&d({x:Wr[y.key].x,y:Wr[y.key].y,isShiftPressed:y.shiftKey})};return O.createElement("div",{className:qe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},O.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:o,height:s,top:a,left:i}}))}var rN=S.memo(nN);const oN=e=>e.nodesSelectionActive,cy=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:E,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:w,zoomOnScroll:v,zoomOnPinch:k,panOnScroll:N,panOnScrollSpeed:b,panOnScrollMode:$,zoomOnDoubleClick:T,panOnDrag:P,defaultViewport:I,translateExtent:H,minZoom:U,maxZoom:C,preventScrolling:R,onSelectionContextMenu:M,noWheelClassName:z,noPanClassName:A,disableKeyboardA11y:j})=>{const D=Ee(oN),F=ps(f),B=ps(m),G=B||P,Y=B||N,Z=F||h&&G!==!0;return H_({deleteKeyCode:a,multiSelectionKeyCode:E}),O.createElement(K_,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:v,zoomOnPinch:k,panOnScroll:Y,panOnScrollSpeed:b,panOnScrollMode:$,zoomOnDoubleClick:T,panOnDrag:!F&&G,defaultViewport:I,translateExtent:H,minZoom:U,maxZoom:C,zoomActivationKeyCode:g,preventScrolling:R,noWheelClassName:z,noPanClassName:A},O.createElement(oy,{onSelectionStart:y,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:G,isSelecting:!!Z,selectionMode:p},e,D&&O.createElement(rN,{onSelectionContextMenu:M,noPanClassName:A,disableKeyboardA11y:j})))};cy.displayName="FlowRenderer";var sN=S.memo(cy);function iN(e){return Ee(S.useCallback(n=>e?Ig(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function lN(e){const t={input:_o(e.input||Kg),default:_o(e.default||Cc),output:_o(e.output||Xg),group:_o(e.group||Bu)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=_o(e[s]||Cc),o),n);return{...t,...r}}const aN=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},cN=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),uy=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=Ee(cN,ft),a=iN(e.onlyRenderVisibleElements),c=S.useRef(),u=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),O.createElement("div",{className:"react-flow__nodes",style:Hu},a.map(d=>{var k,N,b;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",vn.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),y=!!(d.selectable||o&&typeof d.selectable>"u"),x=!!(d.connectable||n&&typeof d.connectable>"u"),E=!!(d.focusable||r&&typeof d.focusable>"u"),m=e.nodeExtent?Du(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,g=(m==null?void 0:m.x)??0,w=(m==null?void 0:m.y)??0,v=aN({x:g,y:w,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return O.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||ee.Bottom,targetPosition:d.targetPosition||ee.Top,hidden:d.hidden,xPos:g,yPos:w,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:y,isConnectable:x,isFocusable:E,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[$e])==null?void 0:k.z)??0,isParent:!!((N=d[$e])!=null&&N.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((b=d[$e])!=null&&b.handleBounds)})}))};uy.displayName="NodeRenderer";var uN=S.memo(uy);const dN=(e,t,n)=>n===ee.Left?e-t:n===ee.Right?e+t:e,fN=(e,t,n)=>n===ee.Top?e-t:n===ee.Bottom?e+t:e,qf="react-flow__edgeupdater",eh=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:a})=>O.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:qe([qf,`${qf}-${a}`]),cx:dN(t,r,e),cy:fN(n,r,e),r,stroke:"transparent",fill:"transparent"}),hN=()=>!0;var kr=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:a,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:E,source:m,target:g,sourceX:w,sourceY:v,targetX:k,targetY:N,sourcePosition:b,targetPosition:$,elementsSelectable:T,hidden:P,sourceHandleId:I,targetHandleId:H,onContextMenu:U,onMouseEnter:C,onMouseMove:R,onMouseLeave:M,reconnectRadius:z,onReconnect:A,onReconnectStart:j,onReconnectEnd:D,markerEnd:F,markerStart:B,rfId:G,ariaLabel:Y,isFocusable:Z,isReconnectable:te,pathOptions:ne,interactionWidth:ue,disableKeyboardA11y:re})=>{const de=S.useRef(null),[Re,Ce]=S.useState(!1),[Oe,Ue]=S.useState(!1),Ne=Be(),et=S.useMemo(()=>`url('#${kc(B,G)}')`,[B,G]),me=S.useMemo(()=>`url('#${kc(F,G)}')`,[F,G]);if(P)return null;const q=K=>{var ve;const{edges:J,addSelectedEdges:pe,unselectNodesAndEdges:le,multiSelectionActive:se}=Ne.getState(),ye=J.find(ce=>ce.id===n);ye&&(T&&(Ne.setState({nodesSelectionActive:!1}),ye.selected&&se?(le({nodes:[],edges:[ye]}),(ve=de.current)==null||ve.blur()):pe([n])),i&&i(K,ye))},He=Eo(n,Ne.getState,a),St=Eo(n,Ne.getState,U),Sn=Eo(n,Ne.getState,C),kn=Eo(n,Ne.getState,R),tn=Eo(n,Ne.getState,M),kt=(K,J)=>{if(K.button!==0)return;const{edges:pe,isValidConnection:le}=Ne.getState(),se=J?g:m,ye=(J?H:I)||null,ve=J?"target":"source",ce=le||hN,ht=J,oe=pe.find(we=>we.id===n);Ue(!0),j==null||j(K,oe,ve);const co=we=>{Ue(!1),D==null||D(we,oe,ve)};Hg({event:K,handleId:ye,nodeId:se,onConnect:we=>A==null?void 0:A(oe,we),isTarget:ht,getState:Ne.getState,setState:Ne.setState,isValidConnection:ce,edgeUpdaterType:ve,onReconnectEnd:co})},En=K=>kt(K,!0),Ut=K=>kt(K,!1),Ht=()=>Ce(!0),_=()=>Ce(!1),L=!T&&!i,W=K=>{var J;if(!re&&Pg.includes(K.key)&&T){const{unselectNodesAndEdges:pe,addSelectedEdges:le,edges:se}=Ne.getState();K.key==="Escape"?((J=de.current)==null||J.blur(),pe({edges:[se.find(ve=>ve.id===n)]})):le([n])}};return O.createElement("g",{className:qe(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:u,inactive:L,updating:Re}]),onClick:q,onDoubleClick:He,onContextMenu:St,onMouseEnter:Sn,onMouseMove:kn,onMouseLeave:tn,onKeyDown:Z?W:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${m} to ${g}`,"aria-describedby":Z?`${Zg}-${G}`:void 0,ref:de},!Oe&&O.createElement(e,{id:n,source:m,target:g,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,data:s,style:E,sourceX:w,sourceY:v,targetX:k,targetY:N,sourcePosition:b,targetPosition:$,sourceHandleId:I,targetHandleId:H,markerStart:et,markerEnd:me,pathOptions:ne,interactionWidth:ue}),te&&O.createElement(O.Fragment,null,(te==="source"||te===!0)&&O.createElement(eh,{position:b,centerX:w,centerY:v,radius:z,onMouseDown:En,onMouseEnter:Ht,onMouseOut:_,type:"source"}),(te==="target"||te===!0)&&O.createElement(eh,{position:$,centerX:k,centerY:N,radius:z,onMouseDown:Ut,onMouseEnter:Ht,onMouseOut:_,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function pN(e){const t={default:kr(e.default||Zi),straight:kr(e.bezier||Iu),step:kr(e.step||Ou),smoothstep:kr(e.step||El),simplebezier:kr(e.simplebezier||Ru)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=kr(e[s]||Zi),o),n);return{...t,...r}}function th(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case ee.Top:return{x:r+s/2,y:o};case ee.Right:return{x:r+s,y:o+i/2};case ee.Bottom:return{x:r+s/2,y:o+i};case ee.Left:return{x:r,y:o+i/2}}}function nh(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const mN=(e,t,n,r,o,s)=>{const i=th(n,e,t),a=th(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function gN({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=fs({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:a/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function rh(e){var r,o,s,i,a;const t=((r=e==null?void 0:e[$e])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const yN=[{level:0,isMaxLevel:!0,edges:[]}];function vN(e,t,n=!1){let r=-1;const o=e.reduce((i,a)=>{var d,f;const c=bt(a.zIndex);let u=c?a.zIndex:0;if(n){const h=t.get(a.target),p=t.get(a.source),y=a.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[$e])==null?void 0:d.z)||0,((f=h==null?void 0:h[$e])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(y?x:0)}return i[u]?i[u].push(a):i[u]=[a],r=u>r?u:r,i},{}),s=Object.entries(o).map(([i,a])=>{const c=+i;return{edges:a,level:c,isMaxLevel:c===r}});return s.length===0?yN:s}function xN(e,t,n){const r=Ee(S.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),a=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&gN({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return vN(r,t,n)}const wN=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),SN=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),oh={[Ji.Arrow]:wN,[Ji.ArrowClosed]:SN};function kN(e){const t=Be();return S.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(oh,e)?oh[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",vn.error009(e)),null)},[e])}const EN=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=kN(t);return c?O.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},O.createElement(c,{color:n,strokeWidth:i})):null},CN=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=kc(i,t);r.includes(a)||(o.push({id:a,color:i.color||e,...i}),r.push(a))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},dy=({defaultColor:e,rfId:t})=>{const n=Ee(S.useCallback(CN({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return O.createElement("defs",null,n.map(r=>O.createElement(EN,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};dy.displayName="MarkerDefinitions";var _N=S.memo(dy);const NN=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),fy=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,reconnectRadius:x,children:E,disableKeyboardA11y:m})=>{const{edgesFocusable:g,edgesUpdatable:w,elementsSelectable:v,width:k,height:N,connectionMode:b,nodeInternals:$,onError:T}=Ee(NN,ft),P=xN(t,$,n);return k?O.createElement(O.Fragment,null,P.map(({level:I,edges:H,isMaxLevel:U})=>O.createElement("svg",{key:I,style:{zIndex:I},width:k,height:N,className:"react-flow__edges react-flow__container"},U&&O.createElement(_N,{defaultColor:e,rfId:r}),O.createElement("g",null,H.map(C=>{const[R,M,z]=rh($.get(C.source)),[A,j,D]=rh($.get(C.target));if(!z||!D)return null;let F=C.type||"default";o[F]||(T==null||T("011",vn.error011(F)),F="default");const B=o[F]||o.default,G=b===hr.Strict?j.target:(j.target??[]).concat(j.source??[]),Y=nh(M.source,C.sourceHandle),Z=nh(G,C.targetHandle),te=(Y==null?void 0:Y.position)||ee.Bottom,ne=(Z==null?void 0:Z.position)||ee.Top,ue=!!(C.focusable||g&&typeof C.focusable>"u"),re=C.reconnectable||C.updatable,de=typeof h<"u"&&(re||w&&typeof re>"u");if(!Y||!Z)return T==null||T("008",vn.error008(Y,C)),null;const{sourceX:Re,sourceY:Ce,targetX:Oe,targetY:Ue}=mN(R,Y,te,A,Z,ne);return O.createElement(B,{key:C.id,id:C.id,className:qe([C.className,s]),type:F,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:Re,sourceY:Ce,targetX:Oe,targetY:Ue,sourcePosition:te,targetPosition:ne,elementsSelectable:v,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,reconnectRadius:x,rfId:r,ariaLabel:C.ariaLabel,isFocusable:ue,isReconnectable:de,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth,disableKeyboardA11y:m})})))),E):null};fy.displayName="EdgeRenderer";var jN=S.memo(fy);const bN=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function TN({children:e}){const t=Ee(bN);return O.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function PN(e){const t=Uu(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const LN={[ee.Left]:ee.Right,[ee.Right]:ee.Left,[ee.Top]:ee.Bottom,[ee.Bottom]:ee.Top},hy=({nodeId:e,handleType:t,style:n,type:r=Mn.Bezier,CustomComponent:o,connectionStatus:s})=>{var N,b,$;const{fromNode:i,handleId:a,toX:c,toY:u,connectionMode:d}=Ee(S.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),ft),f=(N=i==null?void 0:i[$e])==null?void 0:N.handleBounds;let h=f==null?void 0:f[t];if(d===hr.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=a?h.find(T=>T.id===a):h[0],y=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,E=(((b=i.positionAbsolute)==null?void 0:b.x)??0)+y,m=((($=i.positionAbsolute)==null?void 0:$.y)??0)+x,g=p==null?void 0:p.position,w=g?LN[g]:null;if(!g||!w)return null;if(o)return O.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:E,fromY:m,toX:c,toY:u,fromPosition:g,toPosition:w,connectionStatus:s});let v="";const k={sourceX:E,sourceY:m,sourcePosition:g,targetX:c,targetY:u,targetPosition:w};return r===Mn.Bezier?[v]=Dg(k):r===Mn.Step?[v]=Sc({...k,borderRadius:0}):r===Mn.SmoothStep?[v]=Sc(k):r===Mn.SimpleBezier?[v]=Ag(k):v=`M${E},${m} ${c},${u}`,O.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};hy.displayName="ConnectionLine";const MN=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function $N({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:a,height:c,connectionStatus:u}=Ee(MN,ft);return!(o&&s&&a&&i)?null:O.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},O.createElement("g",{className:qe(["react-flow__connection",u])},O.createElement(hy,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function sh(e,t){return S.useRef(null),Be(),S.useMemo(()=>t(e),[e])}const py=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:y,onSelectionStart:x,onSelectionEnd:E,connectionLineType:m,connectionLineStyle:g,connectionLineComponent:w,connectionLineContainerStyle:v,selectionKeyCode:k,selectionOnDrag:N,selectionMode:b,multiSelectionKeyCode:$,panActivationKeyCode:T,zoomActivationKeyCode:P,deleteKeyCode:I,onlyRenderVisibleElements:H,elementsSelectable:U,selectNodesOnDrag:C,defaultViewport:R,translateExtent:M,minZoom:z,maxZoom:A,preventScrolling:j,defaultMarkerColor:D,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:G,panOnScrollSpeed:Y,panOnScrollMode:Z,zoomOnDoubleClick:te,panOnDrag:ne,onPaneClick:ue,onPaneMouseEnter:re,onPaneMouseMove:de,onPaneMouseLeave:Re,onPaneScroll:Ce,onPaneContextMenu:Oe,onEdgeContextMenu:Ue,onEdgeMouseEnter:Ne,onEdgeMouseMove:et,onEdgeMouseLeave:me,onReconnect:q,onReconnectStart:He,onReconnectEnd:St,reconnectRadius:Sn,noDragClassName:kn,noWheelClassName:tn,noPanClassName:kt,elevateEdgesOnSelect:En,disableKeyboardA11y:Ut,nodeOrigin:Ht,nodeExtent:_,rfId:L})=>{const W=sh(e,lN),K=sh(t,pN);return PN(s),O.createElement(sN,{onPaneClick:ue,onPaneMouseEnter:re,onPaneMouseMove:de,onPaneMouseLeave:Re,onPaneContextMenu:Oe,onPaneScroll:Ce,deleteKeyCode:I,selectionKeyCode:k,selectionOnDrag:N,selectionMode:b,onSelectionStart:x,onSelectionEnd:E,multiSelectionKeyCode:$,panActivationKeyCode:T,zoomActivationKeyCode:P,elementsSelectable:U,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:F,zoomOnPinch:B,zoomOnDoubleClick:te,panOnScroll:G,panOnScrollSpeed:Y,panOnScrollMode:Z,panOnDrag:ne,defaultViewport:R,translateExtent:M,minZoom:z,maxZoom:A,onSelectionContextMenu:y,preventScrolling:j,noDragClassName:kn,noWheelClassName:tn,noPanClassName:kt,disableKeyboardA11y:Ut},O.createElement(TN,null,O.createElement(jN,{edgeTypes:K,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:H,onEdgeContextMenu:Ue,onEdgeMouseEnter:Ne,onEdgeMouseMove:et,onEdgeMouseLeave:me,onReconnect:q,onReconnectStart:He,onReconnectEnd:St,reconnectRadius:Sn,defaultMarkerColor:D,noPanClassName:kt,elevateEdgesOnSelect:!!En,disableKeyboardA11y:Ut,rfId:L},O.createElement($N,{style:g,type:m,component:w,containerStyle:v})),O.createElement("div",{className:"react-flow__edgelabel-renderer"}),O.createElement(uN,{nodeTypes:W,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:C,onlyRenderVisibleElements:H,noPanClassName:kt,noDragClassName:kn,disableKeyboardA11y:Ut,nodeOrigin:Ht,nodeExtent:_,rfId:L})))};py.displayName="GraphView";var AN=S.memo(py);const Nc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_n={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Nc,nodeExtent:Nc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:hr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:c_,isValidConnection:void 0},DN=()=>CS((e,t)=>({..._n,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:ca(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?ca(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((x,E)=>{const m=o.get(E.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[$e]:{...m[$e],handleBounds:void 0}});else if(m){const g=Au(E.nodeElement);!!(g.width&&g.height&&(m.width!==g.width||m.height!==g.height||E.forceUpdate))&&(o.set(m.id,{...m,[$e]:{...m[$e],handleBounds:{source:Zf(".source",E.nodeElement,h,u),target:Zf(".target",E.nodeElement,h,u)}},...g}),x.push({id:m.id,type:"dimensions",dimensions:g}))}return x},[]);ey(o,u);const y=i||s&&!i&&ty(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:y}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(a=>{const c={id:a.id,type:"position",dragging:o};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=ry(n,a()),d=ca(u,o,i,c);e({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,a=null;r?i=n.map(c=>Tn(c,!0)):(i=Rr(s(),n),a=Rr(o,[])),qs({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,a=null;r?i=n.map(c=>Tn(c,!0)):(i=Rr(o,n),a=Rr(s(),[])),qs({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),a=r||o,c=i.map(d=>(d.selected=!1,Tn(d.id,!1))),u=a.map(d=>Tn(d.id,!1));qs({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>Tn(a.id,!1)),i=n.filter(a=>a.selected).map(a=>Tn(a.id,!1));qs({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Du(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:a,translateExtent:c}=t();if(!i||!a||!n.x&&!n.y)return!1;const u=dn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[o,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:_n.connectionNodeId,connectionHandleId:_n.connectionHandleId,connectionHandleType:_n.connectionHandleType,connectionStatus:_n.connectionStatus,connectionStartHandle:_n.connectionStartHandle,connectionEndHandle:_n.connectionEndHandle}),reset:()=>e({..._n})}),Object.is),my=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=DN()),O.createElement(n_,{value:t.current},e)};my.displayName="ReactFlowProvider";const gy=({children:e})=>S.useContext(kl)?O.createElement(O.Fragment,null,e):O.createElement(my,null,e);gy.displayName="ReactFlowWrapper";const RN={input:Kg,default:Cc,output:Xg,group:Bu},ON={default:Zi,straight:Iu,step:Ou,smoothstep:El,simplebezier:Ru},IN=[0,0],zN=[15,15],FN={x:0,y:0,zoom:1},BN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yy=S.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=RN,edgeTypes:i=ON,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:m,onNodeMouseEnter:g,onNodeMouseMove:w,onNodeMouseLeave:v,onNodeContextMenu:k,onNodeDoubleClick:N,onNodeDragStart:b,onNodeDrag:$,onNodeDragStop:T,onNodesDelete:P,onEdgesDelete:I,onSelectionChange:H,onSelectionDragStart:U,onSelectionDrag:C,onSelectionDragStop:R,onSelectionContextMenu:M,onSelectionStart:z,onSelectionEnd:A,connectionMode:j=hr.Strict,connectionLineType:D=Mn.Bezier,connectionLineStyle:F,connectionLineComponent:B,connectionLineContainerStyle:G,deleteKeyCode:Y="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:te=!1,selectionMode:ne=hs.Full,panActivationKeyCode:ue="Space",multiSelectionKeyCode:re=Qi()?"Meta":"Control",zoomActivationKeyCode:de=Qi()?"Meta":"Control",snapToGrid:Re=!1,snapGrid:Ce=zN,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:Ue=!0,nodesDraggable:Ne,nodesConnectable:et,nodesFocusable:me,nodeOrigin:q=IN,edgesFocusable:He,edgesUpdatable:St,elementsSelectable:Sn,defaultViewport:kn=FN,minZoom:tn=.5,maxZoom:kt=2,translateExtent:En=Nc,preventScrolling:Ut=!0,nodeExtent:Ht,defaultMarkerColor:_="#b1b1b7",zoomOnScroll:L=!0,zoomOnPinch:W=!0,panOnScroll:K=!1,panOnScrollSpeed:J=.5,panOnScrollMode:pe=nr.Free,zoomOnDoubleClick:le=!0,panOnDrag:se=!0,onPaneClick:ye,onPaneMouseEnter:ve,onPaneMouseMove:ce,onPaneMouseLeave:ht,onPaneScroll:oe,onPaneContextMenu:co,children:Ae,onEdgeContextMenu:we,onEdgeDoubleClick:uo,onEdgeMouseEnter:Cy,onEdgeMouseMove:_y,onEdgeMouseLeave:Ny,onEdgeUpdate:jy,onEdgeUpdateStart:by,onEdgeUpdateEnd:Ty,onReconnect:Py,onReconnectStart:Ly,onReconnectEnd:My,reconnectRadius:$y=10,edgeUpdaterRadius:Ay=10,onNodesChange:Dy,onEdgesChange:Ry,noDragClassName:Oy="nodrag",noWheelClassName:Iy="nowheel",noPanClassName:Vu="nopan",fitView:zy=!1,fitViewOptions:Fy,connectOnClick:By=!0,attributionPosition:Uy,proOptions:Hy,defaultEdgeOptions:Vy,elevateNodesOnSelect:Wy=!0,elevateEdgesOnSelect:Yy=!1,disableKeyboardA11y:Wu=!1,autoPanOnConnect:Ky=!0,autoPanOnNodeDrag:Gy=!0,connectionRadius:Xy=20,isValidConnection:Qy,onError:Jy,style:Zy,id:Yu,nodeDragThreshold:qy,...ev},tv)=>{const _l=Yu||"1";return O.createElement("div",{...ev,style:{...Zy,...BN},ref:tv,className:qe(["react-flow",o]),"data-testid":"rf__wrapper",id:Yu},O.createElement(gy,null,O.createElement(AN,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:g,onNodeMouseMove:w,onNodeMouseLeave:v,onNodeContextMenu:k,onNodeDoubleClick:N,nodeTypes:s,edgeTypes:i,connectionLineType:D,connectionLineStyle:F,connectionLineComponent:B,connectionLineContainerStyle:G,selectionKeyCode:Z,selectionOnDrag:te,selectionMode:ne,deleteKeyCode:Y,multiSelectionKeyCode:re,panActivationKeyCode:ue,zoomActivationKeyCode:de,onlyRenderVisibleElements:Oe,selectNodesOnDrag:Ue,defaultViewport:kn,translateExtent:En,minZoom:tn,maxZoom:kt,preventScrolling:Ut,zoomOnScroll:L,zoomOnPinch:W,zoomOnDoubleClick:le,panOnScroll:K,panOnScrollSpeed:J,panOnScrollMode:pe,panOnDrag:se,onPaneClick:ye,onPaneMouseEnter:ve,onPaneMouseMove:ce,onPaneMouseLeave:ht,onPaneScroll:oe,onPaneContextMenu:co,onSelectionContextMenu:M,onSelectionStart:z,onSelectionEnd:A,onEdgeContextMenu:we,onEdgeDoubleClick:uo,onEdgeMouseEnter:Cy,onEdgeMouseMove:_y,onEdgeMouseLeave:Ny,onReconnect:Py??jy,onReconnectStart:Ly??by,onReconnectEnd:My??Ty,reconnectRadius:$y??Ay,defaultMarkerColor:_,noDragClassName:Oy,noWheelClassName:Iy,noPanClassName:Vu,elevateEdgesOnSelect:Yy,rfId:_l,disableKeyboardA11y:Wu,nodeOrigin:q,nodeExtent:Ht}),O.createElement(L_,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:m,nodesDraggable:Ne,nodesConnectable:et,nodesFocusable:me,edgesFocusable:He,edgesUpdatable:St,elementsSelectable:Sn,elevateNodesOnSelect:Wy,minZoom:tn,maxZoom:kt,nodeExtent:Ht,onNodesChange:Dy,onEdgesChange:Ry,snapToGrid:Re,snapGrid:Ce,connectionMode:j,translateExtent:En,connectOnClick:By,defaultEdgeOptions:Vy,fitView:zy,fitViewOptions:Fy,onNodesDelete:P,onEdgesDelete:I,onNodeDragStart:b,onNodeDrag:$,onNodeDragStop:T,onSelectionDrag:C,onSelectionDragStart:U,onSelectionDragStop:R,noPanClassName:Vu,nodeOrigin:q,rfId:_l,autoPanOnConnect:Ky,autoPanOnNodeDrag:Gy,onError:Jy,connectionRadius:Xy,isValidConnection:Qy,nodeDragThreshold:qy}),O.createElement(T_,{onSelectionChange:H}),Ae,O.createElement(o_,{proOptions:Hy,position:Uy}),O.createElement(R_,{rfId:_l,disableKeyboardA11y:Wu})))});yy.displayName="ReactFlow";function vy(e){return t=>{const[n,r]=S.useState(t),o=S.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const UN=vy(ry),HN=vy(Q_);function xy(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const wy=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:h,selected:p})=>{const{background:y,backgroundColor:x}=s||{},E=i||y||x;return O.createElement("rect",{className:qe(["react-flow__minimap-node",{selected:p},u]),x:t,y:n,rx:d,ry:d,width:r,height:o,fill:E,stroke:a,strokeWidth:c,shapeRendering:f,onClick:h?m=>h(m,e):void 0})};wy.displayName="MiniMapNode";var VN=S.memo(wy);const WN=e=>e.nodeOrigin,YN=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),ha=e=>e instanceof Function?e:()=>e;function KN({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:s=VN,onClick:i}){const a=Ee(YN,xy),c=Ee(WN),u=ha(t),d=ha(e),f=ha(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return O.createElement(O.Fragment,null,a.map(p=>{const{x:y,y:x}=ir(p,c).positionAbsolute;return O.createElement(s,{key:p.id,x:y,y:x,width:p.width,height:p.height,style:p.style,selected:p.selected,className:f(p),color:u(p),borderRadius:r,strokeColor:d(p),strokeWidth:o,shapeRendering:h,onClick:i,id:p.id})}))}var GN=S.memo(KN);const XN=200,QN=150,JN=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?l_(Cl(t,e.nodeOrigin),n):n,rfId:e.rfId}},ZN="react-flow__minimap-desc";function Sy({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:y=!1,zoomable:x=!1,ariaLabel:E="React Flow mini map",inversePan:m=!1,zoomStep:g=10,offsetScale:w=5}){const v=Be(),k=S.useRef(null),{boundingRect:N,viewBB:b,rfId:$}=Ee(JN,xy),T=(e==null?void 0:e.width)??XN,P=(e==null?void 0:e.height)??QN,I=N.width/T,H=N.height/P,U=Math.max(I,H),C=U*T,R=U*P,M=w*U,z=N.x-(C-N.width)/2-M,A=N.y-(R-N.height)/2-M,j=C+M*2,D=R+M*2,F=`${ZN}-${$}`,B=S.useRef(0);B.current=U,S.useEffect(()=>{if(k.current){const Z=Nt(k.current),te=re=>{const{transform:de,d3Selection:Re,d3Zoom:Ce}=v.getState();if(re.sourceEvent.type!=="wheel"||!Re||!Ce)return;const Oe=-re.sourceEvent.deltaY*(re.sourceEvent.deltaMode===1?.05:re.sourceEvent.deltaMode?1:.002)*g,Ue=de[2]*Math.pow(2,Oe);Ce.scaleTo(Re,Ue)},ne=re=>{const{transform:de,d3Selection:Re,d3Zoom:Ce,translateExtent:Oe,width:Ue,height:Ne}=v.getState();if(re.sourceEvent.type!=="mousemove"||!Re||!Ce)return;const et=B.current*Math.max(1,de[2])*(m?-1:1),me={x:de[0]-re.sourceEvent.movementX*et,y:de[1]-re.sourceEvent.movementY*et},q=[[0,0],[Ue,Ne]],He=dn.translate(me.x,me.y).scale(de[2]),St=Ce.constrain()(He,q,Oe);Ce.transform(Re,St)},ue=Cg().on("zoom",y?ne:null).on("zoom.wheel",x?te:null);return Z.call(ue),()=>{Z.on("zoom",null)}}},[y,x,m,g]);const G=h?Z=>{const te=Dt(Z);h(Z,{x:te[0],y:te[1]})}:void 0,Y=p?(Z,te)=>{const ne=v.getState().nodeInternals.get(te);p(Z,ne)}:void 0;return O.createElement($u,{position:f,style:e,className:qe(["react-flow__minimap",t]),"data-testid":"rf__minimap"},O.createElement("svg",{width:T,height:P,viewBox:`${z} ${A} ${j} ${D}`,role:"img","aria-labelledby":F,ref:k,onClick:G},E&&O.createElement("title",{id:F},E),O.createElement(GN,{onClick:Y,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:a}),O.createElement("path",{className:"react-flow__minimap-mask",d:`M${z-M},${A-M}h${j+M*2}v${D+M*2}h${-j-M*2}z
        M${b.x},${b.y}h${b.width}v${b.height}h${-b.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}Sy.displayName="MiniMap";var qN=S.memo(Sy);function ej(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}function tj(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},O.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function nj(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},O.createElement("path",{d:"M0 0h32v4.2H0z"}))}function rj(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},O.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function oj(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},O.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function sj(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},O.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Mo=({children:e,className:t,...n})=>O.createElement("button",{type:"button",className:qe(["react-flow__controls-button",t]),...n},e);Mo.displayName="ControlButton";const ij=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),ky=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=Be(),[p,y]=S.useState(!1),{isInteractive:x,minZoomReached:E,maxZoomReached:m}=Ee(ij,ej),{zoomIn:g,zoomOut:w,fitView:v}=Uu();if(S.useEffect(()=>{y(!0)},[]),!p)return null;const k=()=>{g(),s==null||s()},N=()=>{w(),i==null||i()},b=()=>{v(o),a==null||a()},$=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return O.createElement($u,{className:qe(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&O.createElement(O.Fragment,null,O.createElement(Mo,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},O.createElement(tj,null)),O.createElement(Mo,{onClick:N,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},O.createElement(nj,null))),n&&O.createElement(Mo,{className:"react-flow__controls-fitview",onClick:b,title:"fit view","aria-label":"fit view"},O.createElement(rj,null)),r&&O.createElement(Mo,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity"},x?O.createElement(sj,null):O.createElement(oj,null)),d)};ky.displayName="Controls";var lj=S.memo(ky);const Ey={logic:{inputs:["input1"],outputs:["output"],label:"Logic Block"},content:{inputs:["text","source"],outputs:["result"],label:"Content Block"},flow:{inputs:["trigger"],outputs:["next","branched"],label:"Flow Block"},integration:{inputs:["request","params"],outputs:["response","success","error"],label:"Integration Block"},system_main:{inputs:["character_data"],outputs:["main_prompt"],label:"System: Main Template"},system_tool_call:{inputs:["tools_data","character_data"],outputs:["tool_instructions"],label:"System: Tool Call"},system_lore_suggest:{inputs:["lorebook_context"],outputs:["lore_suggest_prompt"],label:"System: Lore Suggest"},system_image_summary:{inputs:["scene_data","character_data"],outputs:["image_summary_prompt"],label:"System: Image Summary"},format_persona:{inputs:["user_persona"],outputs:["persona_formatted"],label:"Format: Persona"},format_tools:{inputs:["tools_config"],outputs:["tools_formatted"],label:"Format: Tool Descriptions"},format_lore_injection:{inputs:["lore_entries"],outputs:["lore_formatted"],label:"Format: Lore Injection"},char_system_prompt:{inputs:["character_settings"],outputs:["system_preprompt"],label:"Character: System Prompt"},char_personality:{inputs:["character_data"],outputs:["personality_text"],label:"Character: Personality"},char_scenario:{inputs:["character_data","scenario_data"],outputs:["scenario_text"],label:"Character: Scenario"},char_first_message:{inputs:["character_data","greetings"],outputs:["first_message_text"],label:"Character: First Message"},tool_image_request:{inputs:["prompt_text","generation_params"],outputs:["tool_call_json"],label:"Tool: Image Request"},tool_phone_url:{inputs:["phone_number","url_params"],outputs:["tool_call_json"],label:"Tool: Phone URL"},tool_lore_suggestions:{inputs:["suggestions_array","validation_params"],outputs:["tool_call_json"],label:"Tool: Lore Suggestions"},lorebook_content:{inputs:["keywords","content_text","trigger_logic"],outputs:["lore_entry"],label:"Lorebook: Content Block"},variables_substitution:{inputs:["template_text","variables_map"],outputs:["processed_text"],label:"Variables: K/V Substitution"},lore_active_display:{inputs:["active_lore_entries"],outputs:["formatted_lore_display"],label:"Lore: Active Display"},lore_title_injection:{inputs:["active_lore_entries","title_template"],outputs:["titled_lore_block"],label:"Lore: Active Title"}},Le=({data:e})=>{const t=Ey[e.type]||{inputs:[],outputs:[],label:"Unknown Block"},n=Math.max(t.inputs.length,t.outputs.length,1),r=80+n*20,o=(s,i)=>{const c=(r-40)/Math.max(i-1,1);return 20+s*c};return l.jsxs("div",{className:`circuit-block circuit-${e.type}`,style:{height:r,minHeight:100},children:[t.inputs.map((s,i)=>l.jsx(ro,{id:`input-${s}`,type:"target",position:ee.Left,style:{background:"#10b981",border:"2px solid #059669",width:12,height:12,borderRadius:"50%",position:"absolute",left:-6,top:o(i,t.inputs.length)-6},title:`Input: ${s}`},`input-${s}`)),t.outputs.map((s,i)=>l.jsx(ro,{id:`output-${s}`,type:"source",position:ee.Right,style:{background:"#f59e0b",border:"2px solid #d97706",width:12,height:12,borderRadius:"50%",position:"absolute",right:-6,top:o(i,t.outputs.length)-6},title:`Output: ${s}`},`output-${s}`)),l.jsxs("div",{className:"block-content",style:{padding:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[l.jsx("span",{className:"block-icon",style:{fontSize:"16px",marginBottom:"4px"},children:e.icon}),l.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:t.label}),l.jsxs("span",{style:{fontSize:"10px",opacity:.7,marginTop:"2px"},children:[n," connections"]})]})]})},aj={logic:Le,content:Le,flow:Le,integration:Le,system_main:Le,system_tool_call:Le,system_lore_suggest:Le,system_image_summary:Le,format_persona:Le,format_tools:Le,format_lore_injection:Le,char_system_prompt:Le,char_personality:Le,char_scenario:Le,char_first_message:Le,tool_image_request:Le,tool_phone_url:Le,tool_lore_suggestions:Le,lorebook_content:Le,variables_substitution:Le,lore_active_display:Le,lore_title_injection:Le},cj=()=>{const{circuits:e,current:t,fetchCircuits:n,saveCircuit:r}=gf(),[o,s]=S.useState(!1),[i,a]=S.useState({name:"",description:""}),[c,u,d]=UN([]),[f,h,p]=HN([]),y=S.useRef(null),[x,E]=S.useState(null);S.useEffect(()=>{n().catch(T=>{console.error("Failed to fetch circuits:",T)})},[n]);const m=S.useCallback(()=>{x&&(u(T=>T.filter(P=>P.id!==x.id)),h(T=>T.filter(P=>P.source!==x.id&&P.target!==x.id)),E(null))},[x,u,h]);S.useEffect(()=>{t&&(u(t.data.nodes||[]),h(t.data.edges||[]),E(null))},[t,u,h]),S.useEffect(()=>{const T=P=>{P.key==="Delete"&&x&&(P.preventDefault(),m())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[x,m]);const g=S.useCallback(T=>h(P=>Rg(T,P)),[h]),w=S.useCallback(T=>{var M;T.preventDefault();const P=T.dataTransfer.getData("nodeType");if(!P)return;const I=(M=y.current)==null?void 0:M.getBoundingClientRect();if(!I)return;const H=100,U={x:T.clientX-I.left-H/2,y:T.clientY-I.top-H/2},C=Ey[P]||{inputs:[],outputs:[],label:"Unknown Block"},R={id:`${P}-${Date.now()}`,type:P,position:U,data:{label:C.label,type:P,icon:N(P),inputs:C.inputs,outputs:C.outputs}};u(z=>z.concat(R))},[u]),v=S.useCallback(T=>T.preventDefault(),[]),k=S.useCallback((T,P)=>E(P),[]),N=T=>({logic:"",content:"",flow:"",integration:""})[T]||"",b=()=>{t&&r({...t,data:{nodes:c,edges:f}}).catch(T=>console.error("Failed to save:",T))},$=async()=>{if(i.name.trim())try{const T={name:i.name.trim(),description:i.description.trim(),data:{nodes:[],edges:[]}};await r(T),a({name:"",description:""}),s(!1)}catch(T){console.error("Failed to create circuit:",T)}};return l.jsxs("div",{className:"circuit-editor",children:[l.jsxs("div",{className:"toolbar panel",children:[l.jsx("span",{className:"title",children:"Circuits2"}),l.jsxs("div",{className:"toolbar-actions",children:[l.jsx("button",{className:"secondary",onClick:()=>s(!0),title:"Create new circuit",children:"+ New Circuit"}),l.jsx("button",{className:"secondary",onClick:b,disabled:!t,title:"Save circuit",children:"Save Circuit"})]})]}),o&&l.jsx("div",{className:"create-form-overlay",children:l.jsxs("div",{className:"create-form-modal panel",children:[l.jsx("h3",{children:"Create New Circuit"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"circuit-name",children:"Name:"}),l.jsx("input",{id:"circuit-name",type:"text",value:i.name,onChange:T=>a(P=>({...P,name:T.target.value})),placeholder:"Enter circuit name..."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"circuit-description",children:"Description (optional):"}),l.jsx("textarea",{id:"circuit-description",value:i.description,onChange:T=>a(P=>({...P,description:T.target.value})),placeholder:"Enter circuit description...",rows:3})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{onClick:$,disabled:!i.name.trim(),children:"Create Circuit"}),l.jsx("button",{className:"secondary",onClick:()=>{s(!1),a({name:"",description:""})},children:"Cancel"})]})]})}),l.jsxs("div",{className:"editor-body",children:[l.jsxs("aside",{className:"block-palette panel",children:[l.jsx("h4",{children:"Block Palette"}),l.jsx("div",{className:"palette-items",children:["logic","content","flow","integration"].map(T=>l.jsxs("div",{className:`palette-item circuit-${T}`,draggable:!0,onDragStart:P=>P.dataTransfer.setData("nodeType",T),children:[l.jsx("span",{className:"block-icon",children:N(T)}),l.jsxs("span",{children:[T.charAt(0).toUpperCase()+T.slice(1)," Block"]})]},T))})]}),l.jsxs("main",{className:"canvas panel",children:[l.jsxs("div",{className:"canvas-header",children:[!t&&e.length>0&&l.jsx("span",{className:"muted",children:"Select a circuit to view/edit"}),e.length===0&&l.jsx("span",{className:"muted",children:"No circuits available. Create your first circuit!"})]}),e.length>0&&!t&&l.jsx("div",{className:"circuits-list",children:e.map(T=>l.jsxs("div",{className:`circuit-item ${(t==null?void 0:t.id)===T.id?"active":""}`,onClick:()=>gf.setState({current:T}),children:[l.jsx("span",{className:"circuit-name",children:T.name}),T.description&&l.jsx("span",{className:"circuit-description",children:T.description})]},T.id))}),t&&l.jsxs("div",{className:"circuit-canvas",children:[l.jsx("h3",{children:t.name}),l.jsx("div",{style:{height:"400px",position:"relative"},children:l.jsx("div",{ref:y,style:{height:"100%"},children:l.jsxs(yy,{nodes:c,edges:f,onNodesChange:d,onEdgesChange:p,onConnect:g,onDrop:w,onDragOver:v,onNodeClick:k,nodeTypes:aj,fitView:!0,children:[l.jsx(lj,{}),l.jsx(qN,{})]})})})]})]}),l.jsxs("aside",{className:"properties panel",children:[l.jsx("h4",{children:"Properties"}),t?l.jsx("div",{className:"properties-content",children:x?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Label:"})," ",x.data.label]}),l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Type:"})," ",x.data.type]}),l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"ID:"})," ",x.id]}),l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Position:"})," (",Math.round(x.position.x),", ",Math.round(x.position.y),")"]}),l.jsx("div",{className:"property-item",children:l.jsx("button",{className:"secondary delete-btn",onClick:m,title:"Delete selected node (or press Delete key)",style:{marginTop:"8px",width:"100%"},children:" Delete Node"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Name:"})," ",t.name]}),t.description&&l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Description:"})," ",t.description]}),l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Nodes:"})," ",c.length]}),l.jsxs("div",{className:"property-item",children:[l.jsx("strong",{children:"Edges:"})," ",f.length]})]})}):l.jsx("div",{className:"muted",children:"No circuit selected"})]})]})]})};function uj({messageId:e,role:t,onSwipe:n,onEdit:r,onDelete:o,isVisible:s}){if(!s)return null;const i=u=>{u.preventDefault(),u.stopPropagation(),console.log("Swipe clicked for message:",e),n(e)},a=u=>{u.preventDefault(),u.stopPropagation(),console.log("Edit clicked for message:",e),r(e)},c=u=>{u.preventDefault(),u.stopPropagation(),console.log("Delete clicked for message:",e),o(e)};return l.jsxs("div",{className:"message-controls",children:[t==="assistant"&&l.jsx("button",{className:"message-btn swipe-btn",title:"Regenerate message",onClick:i,children:""}),l.jsx("button",{className:"message-btn edit-btn",title:"Edit message",onClick:a,children:""}),l.jsx("button",{className:"message-btn delete-btn",title:"Delete message",onClick:c,children:""})]})}function dj(){var Ut,Ht;const e=D1(),t=M1(),n=A1(),r=st(),o=$1();Wm();const{generateImage:s,generateImageFromLastMessage:i}=R1(),{suggestLore:a}=O1(),c=S.useRef(null),[u,d]=S.useState(!1),[f,h]=S.useState(null);S.useState({});const[p,y]=S.useState(!1),[x,E]=S.useState(!1),[m,g]=S.useState([]),[w,v]=S.useState("https://example.org"),[k,N]=S.useState([]),[b,$]=S.useState(!1),[T,P]=S.useState(null),[I,H]=S.useState(!1),U=S.useRef(null),C=S.useRef(null),[R,M]=S.useState(null),[z,A]=S.useState(""),[j,D]=S.useState({}),[F,B]=S.useState({}),[G,Y]=S.useState(null),[Z,te]=S.useState(null),[ne,ue]=S.useState(null);S.useEffect(()=>{n.loadConfig(),o.loadCharacters(),o.loadLorebooks()},[]),S.useEffect(()=>{const _=L=>{try{L&&L.detail&&t.setPhoneStyle(L.detail)}catch{}};return window.addEventListener("coolchat:phoneStyle",_),()=>window.removeEventListener("coolchat:phoneStyle",_)},[]),S.useEffect(()=>{const _=L=>{try{L&&L.detail&&t.updateAppTheme(L.detail)}catch{}};return window.addEventListener("coolchat:themeUpdate",_),()=>window.removeEventListener("coolchat:themeUpdate",_)},[]),S.useEffect(()=>{const _=()=>{try{const L=E1();t.applyPluginAnimations(L)}catch(L){console.error(L)}};try{j1(_)}catch{}return _(),()=>{try{b1(_)}catch{}}},[]);const re=(_,L="info")=>{const W=Date.now();N(K=>[...K,{id:W,message:_,type:L}]),setTimeout(()=>N(K=>K.filter(J=>J.id!==W)),4e3)};S.useEffect(()=>{const _=window.matchMedia("(max-width: 768px)"),L=K=>{K.target.closest(".header")||$(!1)},W=K=>{K.matches||$(!1)};if(b&&_.matches)return document.addEventListener("click",L),document.addEventListener("touchstart",L),_.addEventListener("change",W),()=>{document.removeEventListener("click",L),document.removeEventListener("touchstart",L),_.removeEventListener("change",W)}},[b]),S.useEffect(()=>{c.current&&setTimeout(()=>{try{c.current.scrollTop=c.current.scrollHeight}catch{}},0)},[e.messages]),S.useEffect(()=>{t.showConfig&&(async()=>{try{n.loadModels()}catch(_){console.error("Failed to load models:",_)}})()},[n.activeProvider,t.showConfig]),S.useEffect(()=>{o.selectedLorebook?o.loadLoreEntries(o.selectedLorebook.id):o.setLoreEntries([])},[o.selectedLorebook]);const de=_=>{if(!_||typeof _!="string")return{obj:null,captionText:""};let L="",W=null;const K=_.replace(/\*+/g,"").trim();try{return W=JSON.parse(K),{obj:W,captionText:""}}catch{}const J=Math.max(K.lastIndexOf("}"),K.lastIndexOf("]"));if(J>0){const se=K.charAt(J),ye=se==="}"?"{":"[";let ve=0,ce=-1;for(let ht=J;ht>=0;ht--){const oe=K.charAt(ht);if(oe===se&&ve++,oe===ye&&(ve--,ve===0)){ce=ht;break}}if(ce>=0)try{const ht=K.slice(ce,J+1);return W=JSON.parse(ht),L=K.slice(0,ce).trim(),{obj:W,captionText:L}}catch{}}const pe=K.match(/toolCalls\s*:?\s*(\[[\s\S]*\])$/);if(pe)try{const se=pe[1];return W={toolCalls:JSON.parse(se)},L=K.slice(0,pe.index).trim(),{obj:W,captionText:L}}catch{}const le=K.match(/\{[\s\S]*\}/);if(le)try{return W=JSON.parse(le[0]),L=K.slice(0,le.index).trim(),{obj:W,captionText:L}}catch{}return{obj:null,captionText:""}},Re=async _=>{var W,K,J,pe;_.preventDefault(),e.setError(null);const L=e.input.trim();if(L)try{console.log(`[${new Date().toISOString()}] onSubmit: Starting submit, current messages:`,e.messages.length,"messages"),e.setInput(""),console.log(`[${new Date().toISOString()}] onSubmit: Before appending user message, messages:`,e.messages.map(oe=>({role:oe.role,content:oe.content.slice(0,50)}))),Er.flushSync(()=>r.setMessages(oe=>[...oe,{role:"user",content:L}]));const le=st.getState().messages;console.log(`[${new Date().toISOString()}] onSubmit: After appending user message, messages:`,le.map(oe=>({role:oe.role,content:oe.content.slice(0,50)})));const se=await e.sendMessage(L);await mf("Raw LLM response: "+se);const ye=st.getState().messages;console.log(`[${new Date().toISOString()}] onSubmit: after sendMessage, current messages:`,ye.map(oe=>({role:oe.role,content:oe.content.slice(0,50)})));let ve=!1,ce="";try{const{obj:oe,captionText:co}=de(se);if(ce=co,Wt("Extraction result: "+JSON.stringify({obj:oe,captionText:ce})),oe||Wt("No JSON extracted from response"),oe&&Array.isArray(oe.toolCalls)){for(const Ae of oe.toolCalls)if(!(!Ae||!Ae.type))if(Ae.type==="image_request"&&((W=Ae.payload)!=null&&W.prompt))await s(Ae.payload.prompt),ce&&Er.flushSync(()=>r.setMessages(we=>[...we,{role:"assistant",content:ce}])),ve=!0;else if(Ae.type==="phone_url"&&((K=Ae.payload)!=null&&K.url)){let we=Ae.payload.url;/^https?:/i.test(we)||(we="https://"+we),v(we),t.setPhoneOpen(!0),ce&&Er.flushSync(()=>r.setMessages(uo=>[...uo,{role:"assistant",content:ce}])),ve=!0}else Ae.type==="lore_suggestions"&&Array.isArray((J=Ae.payload)==null?void 0:J.items)?(console.log("[DEBUG] Lore suggestions tool call parsed (items):",Ae.payload.items),g(Ae.payload.items.map(we=>({keyword:we.keyword,content:we.content}))),t.setSuggestOpen(!0),ve=!0):Ae.type==="lore_suggestions"&&Array.isArray((pe=Ae.payload)==null?void 0:pe.suggestions)&&(console.log("[DEBUG] Lore suggestions tool call parsed (suggestions):",Ae.payload.suggestions),g(Ae.payload.suggestions.map(we=>({keyword:we.keyword,content:we.content}))),t.setSuggestOpen(!0),ve=!0)}else{if(Wt("No toolCalls array found, trying flat keys"),oe&&oe.image_request&&(Wt("Found flat key: image_request"),await s(oe.image_request),ve=!0),oe&&oe.phone_url){Wt("Found flat key: phone_url");let we=oe.phone_url;/^https?:/i.test(we)||(we="https://"+we),v(we),t.setPhoneOpen(!0),ce&&(Wt("Adding caption message for phone_url: "+ce),Er.flushSync(()=>r.setMessages(uo=>[...uo,{role:"assistant",content:ce}]))),ve=!0}oe&&Array.isArray(oe.lore_suggestions)&&(Wt("Found flat key: lore_suggestions"),console.log("[DEBUG] Lore suggestions flat key parsed:",oe.lore_suggestions),g(oe.lore_suggestions),t.setSuggestOpen(!0),ve=!0);const Ae=/toolCalls\s*:|image_request|phone_url|lore_suggestions/i.test(se);!n.structuredOutput&&!x&&Ae&&!ve&&y(!0)}}catch(oe){console.warn("Tool parse failed",oe)}Wt("Parsing complete. Handled: "+ve+", Caption text: "+ce);const ht=st.getState().messages;console.log(`[${new Date().toISOString()}] onSubmit: after tool processing, handled:`,ve,"messages:",ht.map(oe=>({role:oe.role,content:oe.content.slice(0,50)}))),ve||(Wt("No tool calls handled, adding response text to chat"),Er.flushSync(()=>r.setMessages(oe=>[...oe,{role:"assistant",content:se}])))}catch(le){console.error("Error sending message:",le),re(le.message,"error")}},Ce=(_,L)=>{L?(U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{P(_),H(!0)},300)):(U.current&&clearTimeout(U.current),H(!1),P(null))},Oe=(_,L)=>{L?(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{B(W=>({...W,[_]:!0}))},300)):(C.current&&clearTimeout(C.current),B(W=>({...W,[_]:!1})))};S.useEffect(()=>{const _=L=>{L.target.closest(".message")||(H(!1),P(null))};return document.addEventListener("touchstart",_),()=>document.removeEventListener("touchstart",_)},[]);const Ue=async _=>{H(!1);try{let L=e.messages;if(_>=L.length||_<0){re("Message not found","error");return}const W=L[_];if(W.role!=="assistant"){re("Only assistant messages can be regenerated","error");return}let K=null;for(let J=_-1;J>=0;J--)if(L[J].role==="user"){K=L[J].content;break}if(!K){re("No user message found to regenerate from","error");return}Y(_),setTimeout(async()=>{e.setSending(!0),e.setError(null),j[_]||(j[_]={currentIndex:0,generations:[W.content]});try{const J=await Im(K,e.sessionId);await mf("Raw LLM response after swipe: "+J);const pe=j[_];pe.generations.push(J),pe.currentIndex=pe.generations.length-1;const le=[...L];le[_]={...W,content:J},e.setMessages(le),D({...j}),Y(null),te(_),setTimeout(()=>{te(null)},800),e.setSending(!1),re("Message regenerated successfully","success")}catch(J){console.error("Error during swipe:",J),e.setSending(!1),Y(null),te(null),re("Failed to regenerate message: "+J.message,"error")}},300)}catch(L){console.error("Error during swipe:",L),re("Failed to regenerate message: "+L.message,"error"),Y(null)}},Ne=_=>{H(!1);const L=e.messages[_];L&&(M(_),A(L.content))},et=async()=>{if(!(!R||!z.trim()))try{const _=R,L=[...e.messages];L[_]={...L[_],content:z.trim()},e.setMessages(L),M(null),A(""),re("Message edited successfully","success")}catch(_){console.error("Error editing message:",_),re("Failed to edit message: "+_.message,"error")}},me=()=>{M(null),A("")},q=_=>{if(H(!1),_>=e.messages.length||_<0)return;const L={...j};delete L[_];const W={};Object.entries(L).forEach(([J,pe])=>{const le=parseInt(J);le>_?W[le-1]=pe:W[le]=pe});const K=e.messages.filter((J,pe)=>pe!==_);e.setMessages(K),D(W),re("Message deleted","success")},He=_=>{const L=j[_];if(!L||L.currentIndex>0){const W=Math.max(0,((L==null?void 0:L.currentIndex)??0)-1),K=[...e.messages];K[_]={...K[_],content:L.generations[W]};const J={...j};J[_]={...L,currentIndex:W},e.setMessages(K),D(J),ue(_),setTimeout(()=>{ue(null)},1e3)}},St=_=>{const L=j[_];if(!L||L.currentIndex<L.generations.length-1){const W=Math.min(((L==null?void 0:L.generations.length)??1)-1,((L==null?void 0:L.currentIndex)??0)+1),K=[...e.messages];K[_]={...K[_],content:L.generations[W]};const J={...j};J[_]={...L,currentIndex:W},e.setMessages(K),D(J),ue(_),setTimeout(()=>{ue(null)},1e3)}},[Sn,kn]=S.useState([]),[tn,kt]=S.useState({});S.useEffect(()=>{(async()=>{try{const _=await fetch(`${X}/plugins`);if(_.ok){const L=await _.json();kn(L.plugins||[]),kt(L.enabled||{});try{uc(L.enabled||{})}catch{}try{await ff()}catch(W){console.error(W)}}}catch(_){console.error("Failed to load plugins",_)}})()},[]);const En=async _=>{try{if(!(await fetch(`${X}/plugins/enabled`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Save failed");kt(_);try{uc(_);const W=await fetch(`${X}/plugins`),K=W.ok?await W.json():null;K&&_1(K.plugins||[]),await ff(K)}catch(W){console.error(W)}try{await _t({extensions:_})}catch(W){console.error("Failed to persist extensions to config",W)}}catch(L){console.error(L),alert(L.message)}};return l.jsxs("div",{className:`app ${t.phoneOpen?"phone-open":""}`,children:[l.jsx("div",{className:"bg-animations",children:(((Ut=t.appTheme)==null?void 0:Ut.background_animations)||[]).map((_,L)=>l.jsx("div",{className:`anim-${_}`},L))}),l.jsxs("header",{className:`header ${b?"menu-open":""}`,role:"banner",children:[l.jsx("h1",{children:"CoolChat"}),l.jsx("div",{className:"spacer"}),l.jsxs("div",{className:"header-buttons",children:[l.jsx("button",{className:"secondary","aria-label":t.showCharacters?"Hide characters panel":"Show characters panel","aria-expanded":t.showCharacters,onClick:()=>t.setShowCharacters(!t.showCharacters),children:t.showCharacters?"Hide Characters":"Characters"}),l.jsx("button",{className:"secondary","aria-label":t.showChats?"Hide chats panel":"Show chats panel","aria-expanded":t.showChats,onClick:()=>t.setShowChats(!t.showChats),children:t.showChats?"Hide Chats":"Chats"}),l.jsx("button",{className:"secondary","aria-label":t.showTools?"Hide tools panel":"Show tools panel","aria-expanded":t.showTools,onClick:()=>t.setShowTools(!t.showTools),children:t.showTools?"Hide Tools":"Tools"}),l.jsx("button",{className:"secondary","aria-label":t.showLorebooks?"Hide lorebooks panel":"Show lorebooks panel","aria-expanded":t.showLorebooks,onClick:()=>t.setShowLorebooks(!t.showLorebooks),children:t.showLorebooks?"Hide Lorebooks":"Lorebooks"}),l.jsx("button",{className:"secondary","aria-label":t.showCircuits?"Hide circuits panel":"Show circuits panel","aria-expanded":t.showCircuits,onClick:()=>t.setShowCircuits(!t.showCircuits),children:t.showCircuits?"Hide Circuits":"Circuits"}),l.jsx("button",{className:"secondary","aria-label":t.phoneOpen?"Close phone simulator":"Open phone simulator","aria-expanded":t.phoneOpen,onClick:()=>t.setPhoneOpen(!t.phoneOpen),children:t.phoneOpen?"Close Phone":"Phone"}),l.jsx("button",{className:"secondary","aria-label":t.showConfig?"Close settings":"Open settings","aria-expanded":t.showConfig,onClick:()=>t.setShowConfig(!t.showConfig),children:t.showConfig?"Close Settings":"Settings"})]}),l.jsx("button",{className:"menu-toggle","aria-label":"Toggle menu","aria-expanded":b,onClick:()=>$(!b),children:""})]}),t.phoneOpen&&l.jsxs("div",{className:`phone-panel ${t.phoneStyle}`,children:[l.jsx("div",{className:"outer-overlay",onClick:_=>{_.target===_.currentTarget&&t.setPhoneOpen(!1)}}),l.jsx("div",{className:"skin"}),l.jsxs("div",{className:"screen",children:[l.jsx("div",{className:"statusbar",children:t.phoneStyle==="iphone"?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"left",children:""}),l.jsx("span",{className:"time",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),l.jsx("span",{className:"right",children:" "})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),l.jsx("span",{children:"  "})]})}),l.jsxs("div",{className:"bar",children:[l.jsx("input",{style:{flex:1},placeholder:"https://",value:w,onChange:_=>v(_.target.value)}),l.jsx("button",{className:"secondary",onClick:()=>{let _=w;/^https?:/i.test(_)||(_="https://"+_),v(_)},children:"Go"}),l.jsx("button",{className:"secondary",title:"Open in new tab",onClick:()=>{try{let _=w;/^https?:/i.test(_)||(_="https://"+_),window.open(_,"_blank")}catch(_){console.error(_)}},children:""})]}),l.jsx("iframe",{src:/^https?:/i.test(w)?w:"https://"+w,title:"Phone",onLoad:()=>{try{fetch(`${X}/phone/debug`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"load",url:w})})}catch(_){console.error(_)}},onError:()=>{try{fetch(`${X}/phone/debug`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"error",url:w})})}catch(_){console.error(_)}}})]})]}),l.jsxs("main",{className:"chat",children:[t.showCharacters&&l.jsxs("section",{className:"characters overlay",children:[l.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[l.jsx("h2",{style:{margin:0},children:"Characters"}),l.jsx("button",{className:"secondary",onClick:()=>t.setShowCharacters(!1),children:"Close"})]}),l.jsxs("div",{className:"row",children:[l.jsxs("label",{className:"secondary",style:{padding:"8px 10px",borderRadius:6,cursor:"pointer"},children:["Import JSON/PNG",l.jsx("input",{type:"file",accept:"application/json,.json,image/png",style:{display:"none"},onChange:async _=>{var W;const L=(W=_.target.files)==null?void 0:W[0];if(L){try{if(L.type==="image/png"){const K=new FormData;if(K.append("file",L),!(await fetch(`${X}/characters/import`,{method:"POST",body:K})).ok)throw new Error("Import failed")}else{const K=await L.text(),J=JSON.parse(K);if(!J.name)throw new Error("JSON must include name");await cf({name:J.name,description:J.description||"",avatar_url:J.avatar_url||null})}o.loadCharacters()}catch(K){alert(K.message)}_.target.value=""}}})]}),l.jsx("button",{className:"secondary",onClick:()=>o.loadCharacters(),children:"Refresh"})]}),l.jsxs("div",{className:"char-grid",children:[l.jsxs("div",{className:"char-card",onClick:()=>{h(null),d(!0)},children:[l.jsx("img",{src:"https://placehold.co/400x600?text=New+Character",alt:"New Character"}),l.jsx("div",{className:"name",children:"+ New"})]}),o.characters.map(_=>l.jsxs("div",{className:"char-card",children:[l.jsx("img",{src:_.avatar_url||"https://placehold.co/400x600?text=Character",alt:_.name}),l.jsx("div",{className:"name",children:_.name}),l.jsx("div",{className:"cog",onClick:L=>{L.stopPropagation(),h(_),d(!0)},children:l.jsx("span",{children:""})}),l.jsx("div",{style:{padding:"8px"},children:l.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[l.jsx("button",{onClick:async()=>{try{await _t({active_character_id:_.id}),t.setShowCharacters(!1)}catch(L){console.error(L),alert(L.message)}},children:"Use"}),l.jsx("button",{className:"secondary",onClick:async()=>{try{await zm(_.id),o.loadCharacters()}catch(L){alert(L.message)}},children:"Delete"})]})})]},_.id))]})]}),t.showChats&&l.jsxs("section",{className:"panel overlay",children:[l.jsx("h2",{children:"Chats"}),l.jsx(xj,{sessionId:e.sessionId,setSessionId:e.switchSession,onClose:()=>t.setShowChats(!1)})]}),t.showTools&&l.jsxs("section",{className:"panel overlay",children:[l.jsx("h2",{children:"Tools"}),l.jsx(pj,{onClose:()=>t.setShowTools(!1)})]}),t.showConfig&&l.jsxs("section",{className:"panel overlay",children:[l.jsx("h2",{children:"Configuration"}),l.jsxs("div",{className:"row",style:{gap:6,marginBottom:8},children:[l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("connection")},children:"Connection"}),l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("persona")},children:"Persona"}),l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("appearance")},children:"Appearance"}),l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("images")},children:"Images"}),l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("prompts")},children:"Prompts"}),l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("advanced")},children:"Advanced"}),l.jsx("button",{className:"secondary",onClick:_=>{_.preventDefault(),t.setSettingsTab("extensions")},children:"Extensions"})]}),t.settingsTab==="connection"&&l.jsxs("form",{className:"config-form",onSubmit:async _=>{var L;_.preventDefault();try{const W=await Zt(),K=((L=n.providers)==null?void 0:L[n.activeProvider])||{},J={};for(const le of["api_key","api_base","model","temperature"]){const se=n.configDraft[le],ye=K[le]??"";le==="temperature"?typeof se=="number"&&se!==ye&&(J[le]=se):se&&se!==ye&&(J[le]=se)}if(Object.keys(J).length){const le=Object.entries(J).map(([se,ye])=>`- ${se}: old=${K[se]??"(none)"} -> new=${ye}`).join(`
`);if(!window.confirm(`Config.json already has this information, would you like to update it or discard?
${le}`)){n.setConfigDraft({api_key:"",api_base:K.api_base||"",model:K.model||"",temperature:K.temperature??.7});return}}const pe=await _t({active_provider:n.activeProvider,providers:{[n.activeProvider]:J},max_context_tokens:n.maxTokens});n.setProviders(pe.providers||{})}catch(W){console.error(W),alert(W.message)}},children:[l.jsxs("label",{children:[l.jsx("span",{children:"Provider"}),l.jsxs("select",{value:n.activeProvider,onChange:async _=>{const L=_.target.value;n.setActiveProvider(L);const W=n.providers[L]||{};n.setConfigDraft({api_key:"",api_base:W.api_base||"",model:W.model||"",temperature:W.temperature??.7});try{await n.updateProvider(L)}catch{}},children:[l.jsx("option",{value:"echo",children:"Echo (no API key)"}),l.jsx("option",{value:"openai",children:"OpenAI-compatible"}),l.jsx("option",{value:"openrouter",children:"OpenRouter"}),l.jsx("option",{value:"gemini",children:"Google Gemini"})]})]}),l.jsxs("label",{children:[l.jsx("span",{children:"API Key"}),l.jsx("input",{type:"password",placeholder:(Ht=n.providers[n.activeProvider])!=null&&Ht.api_key_masked?`Saved: ${n.providers[n.activeProvider].api_key_masked}`:"sk-...",value:n.configDraft.api_key,onChange:_=>n.setConfigDraft({...n.configDraft,api_key:_.target.value})})]}),l.jsxs("label",{children:[l.jsx("span",{children:"API Base"}),l.jsx("input",{type:"text",placeholder:n.activeProvider==="openrouter"?"https://openrouter.ai/api/v1":n.activeProvider==="openai"?"https://api.openai.com/v1":"https://generativelanguage.googleapis.com/v1beta/openai",value:n.configDraft.api_base,onChange:_=>n.setConfigDraft({...n.configDraft,api_base:_.target.value})})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Model"}),n.modelList.length>0?l.jsxs("select",{value:n.configDraft.model||"",onChange:_=>n.setConfigDraft({...n.configDraft,model:_.target.value}),children:[l.jsx("option",{value:"",children:n.loadingModels?"Loading":"Select a model"}),n.modelList.map(_=>l.jsx("option",{value:_,children:_},_))]}):l.jsx("input",{type:"text",placeholder:n.activeProvider==="gemini"?"gemini-1.5-flash":"gpt-4o-mini",value:n.configDraft.model,onChange:_=>n.setConfigDraft({...n.configDraft,model:_.target.value})})]}),l.jsx("div",{className:"row",children:l.jsx("button",{type:"button",className:"secondary",onClick:async()=>{try{await n.updateProviderConfig(n.activeProvider,n.configDraft)}catch{console.warn("Failed to update provider config")}try{await n.loadModelsForProvider(n.activeProvider)}catch{n.setModelList([])}},disabled:n.loadingModels,children:n.loadingModels?"Refreshing":"Refresh models"})}),l.jsxs("label",{children:[l.jsx("span",{children:"Temperature"}),l.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:n.configDraft.temperature,onChange:_=>n.setConfigDraft({...n.configDraft,temperature:parseFloat(_.target.value)})})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Structured Output (Gemini)"}),l.jsx("input",{type:"checkbox",checked:n.structuredOutput,onChange:async _=>{try{await n.updateStructuredOutput(_.target.checked)}catch(L){alert(L.message)}}})]}),l.jsxs("div",{className:"row",children:[l.jsx("button",{type:"submit",children:"Save"}),l.jsx("button",{type:"button",className:"secondary",onClick:()=>{var _,L,W;return n.setConfigDraft({api_key:"",api_base:((_=n.providers[n.activeProvider])==null?void 0:_.api_base)||"",model:((L=n.providers[n.activeProvider])==null?void 0:L.model)||"",temperature:((W=n.providers[n.activeProvider])==null?void 0:W.temperature)??.7})},children:"Reset"})]}),l.jsxs("label",{children:[l.jsxs("span",{children:["Max Context Tokens (",n.maxTokens,")"]}),l.jsx("input",{type:"range",min:"512",max:"8192",step:"128",value:n.maxTokens,onChange:_=>n.updateMaxTokens(parseInt(_.target.value,10))})]})]}),t.settingsTab==="persona"&&l.jsxs("div",{className:"config-form",children:[l.jsxs("label",{children:[l.jsx("span",{children:"User Name"}),l.jsx("input",{value:n.userPersona.name,onChange:_=>n.setUserPersona({...n.userPersona,name:_.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch(_){console.error(_),alert(_.message)}}})]}),l.jsxs("label",{children:[l.jsx("span",{children:"User Description"}),l.jsx("textarea",{rows:3,value:n.userPersona.description,onChange:_=>n.setUserPersona({...n.userPersona,description:_.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch(_){console.error(_),alert(_.message)}}})]})]}),t.settingsTab==="debug"&&l.jsxs("div",{className:"config-form",children:[l.jsxs("label",{children:[l.jsx("span",{children:"Log Prompts"}),l.jsx("input",{type:"checkbox",checked:n.debugFlags.log_prompts,onChange:async _=>{const L=_.target.checked,W={...n.debugFlags,log_prompts:L};n.setDebugFlags(W);try{await n.updateDebugFlags(W)}catch{}}})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Log Responses"}),l.jsx("input",{type:"checkbox",checked:n.debugFlags.log_responses,onChange:async _=>{const L=_.target.checked,W={...n.debugFlags,log_responses:L};n.setDebugFlags(W);try{await n.updateDebugFlags(W)}catch{}}})]}),l.jsxs("label",{children:[l.jsxs("span",{children:["Max Context Tokens (",n.maxTokens,")"]}),l.jsx("input",{type:"range",min:"512",max:"8192",step:"128",value:n.maxTokens,onChange:async _=>{const L=parseInt(_.target.value,10);n.updateMaxTokens(L);try{await _t({max_context_tokens:L})}catch{}}})]}),l.jsxs("label",{children:[l.jsx("span",{children:"User Name"}),l.jsx("input",{value:n.userPersona.name,onChange:_=>n.setUserPersona({...n.userPersona,name:_.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch{}}})]}),l.jsxs("label",{children:[l.jsx("span",{children:"User Description"}),l.jsx("textarea",{rows:3,value:n.userPersona.description,onChange:_=>n.setUserPersona({...n.userPersona,description:_.target.value}),onBlur:async()=>{try{await n.updateUserPersona(n.userPersona)}catch{}}})]})]}),t.settingsTab==="appearance"&&l.jsx(yj,{}),t.settingsTab==="images"&&l.jsx(fj,{providers:n.providers}),t.settingsTab==="prompts"&&l.jsx(hj,{}),t.settingsTab==="advanced"&&l.jsx(mj,{}),t.settingsTab==="extensions"&&l.jsxs("div",{className:"config-form",children:[l.jsx("h3",{children:"Extensions"}),l.jsx("p",{className:"muted",children:"Detected extensions found under /extensions. Enable ones you trust."}),l.jsxs("div",{style:{marginTop:8},children:[Sn.length===0?l.jsxs("div",{className:"muted",children:["No extensions detected. If you expect extensions, verify the backend is running and that ",l.jsx("code",{children:"/plugins"})," returns manifests."]}):null,Sn.map(_=>l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("strong",{children:_.name||_.id}),l.jsx("div",{className:"muted",children:_.description||""})]}),l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:!!tn[_.id],onChange:L=>{const W={...tn,[_.id]:L.target.checked};En(W)}})," Enabled"]})]},_.id))]})]}),t.settingsTab==="connection"&&l.jsx("div",{className:"hint",children:l.jsx("p",{className:"muted",children:"OpenRouter uses OpenAI-compatible endpoints. You can set API Base to https://openrouter.ai/api/v1. Gemini uses the OpenAI-compatible base at https://generativelanguage.googleapis.com/v1beta/openai."})})]}),t.showLorebooks&&l.jsx("section",{className:"panel overlay",children:l.jsx(Z1,{onClose:()=>t.setShowLorebooks(!1)})}),t.showCircuits&&l.jsxs("section",{className:"panel overlay",children:[l.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[l.jsx("h2",{children:"Circuits"}),l.jsx("button",{className:"secondary",onClick:()=>t.setShowCircuits(!1),children:"Close"})]}),l.jsx(cj,{})]}),l.jsxs("div",{className:"messages","aria-live":"polite",ref:c,children:[(()=>{const _=st.getState().messages;return console.log(`[${new Date().toISOString()}] Messages render: ${_.length} messages`,_.map(L=>({role:L.role,content:L.content.slice(0,50)}))),null})(),r.messages.map((_,L)=>{const W=_.id||`msg-${L}`,K=T===L&&I,J=R===L,pe=G===L,le=Z===L,se=ne===L,ye=j[L]&&j[L].generations.length>1,ve=F[L]||!1;return l.jsx("div",{className:`message ${_.role}${K?" message-hovered":""}${J?" message-editing":""}${pe?" message-animating-swipe":""}${le?" message-swipe-new":""}${se?" message-flip":""}`,onMouseEnter:()=>{Ce(L,!0),ye&&Oe(L,!0)},onMouseLeave:()=>{Ce(L,!1),ye&&Oe(L,!1)},onTouchStart:()=>{Ce(L,!0),ye&&Oe(L,!0)},onTouchEnd:()=>{Ce(L,!1),ye&&Oe(L,!1)},children:l.jsxs("div",{className:`bubble ${ye?"has-swipes":""}`,children:[l.jsx("div",{className:"bubble-content",children:_.image_url?l.jsxs("div",{children:[l.jsx("img",{src:_.image_url,alt:"generated",style:{maxWidth:"100%",borderRadius:8}}),_.content?l.jsx("div",{className:"img-caption",children:_.content}):null]}):l.jsx(l.Fragment,{children:J?l.jsxs("div",{className:"message-edit-container",children:[l.jsx("textarea",{value:z,onChange:ce=>A(ce.target.value),className:"message-edit-input",autoFocus:!0,rows:Math.ceil(z.length/60)}),l.jsxs("div",{className:"message-edit-buttons",children:[l.jsx("button",{className:"message-edit-save",onClick:et,children:" Save"}),l.jsx("button",{className:"message-edit-cancel",onClick:me,children:" Cancel"})]})]}):_.content})}),_.role==="assistant"&&ye&&ve&&l.jsxs("div",{className:"swipe-navigation",children:[l.jsx("button",{className:"swipe-nav-btn swipe-nav-prev",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),He(L)},disabled:j[L].currentIndex===0,title:"Previous generation",children:""}),l.jsx("span",{className:"swipe-count",children:`${j[L].currentIndex+1}/${j[L].generations.length}`}),l.jsx("button",{className:"swipe-nav-btn swipe-nav-next",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),St(L)},disabled:j[L].currentIndex===j[L].generations.length-1,title:"Next generation",children:""})]}),_.role==="assistant"&&l.jsx("div",{className:"swipe-navigation",children:j[L]&&j[L].generations.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"swipe-nav-btn swipe-nav-prev",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),He(L)},disabled:j[L].currentIndex===0,title:"Previous generation",children:""}),l.jsx("span",{className:"swipe-count",children:j[L].generations.length>1&&`${j[L].currentIndex+1}/${j[L].generations.length}`}),l.jsx("button",{className:"swipe-nav-btn swipe-nav-next",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),St(L)},disabled:j[L].currentIndex===j[L].generations.length-1,title:"Next generation",children:""})]})}),l.jsx(uj,{messageId:L,role:_.role,onSwipe:Ue,onEdit:Ne,onDelete:q,isVisible:K})]})},W)}),e.error&&l.jsx("div",{className:"message error",children:l.jsx("div",{className:"bubble",children:e.error})})]}),l.jsxs("div",{className:"input-tools",children:[l.jsx("button",{className:"secondary","aria-label":"Suggest lore entries from chat",title:"Suggest lore entries from chat",onClick:async()=>{try{const _=await a(e.sessionId);if(!_.suggestions||_.suggestions.length===0){alert("No suggestions");return}g(_.suggestions),t.setSuggestOpen(!0)}catch(_){console.error(_),alert(_.message)}},children:""}),l.jsx("button",{className:"secondary","aria-label":"Generate image from chat",title:"Generate image from chat",onClick:i,children:""}),l.jsx("button",{className:"secondary","aria-label":"Send URL to phone simulator",title:"Send URL to phone",onClick:()=>{let _=prompt("Open URL on phone:");_&&(/^https?:/i.test(_)||(_="https://"+_),v(_),t.setPhoneOpen(!0))},children:""}),l.jsx("button",{className:"secondary","aria-label":"Scroll to bottom of messages",title:"Scroll to bottom",style:{marginLeft:"auto"},onClick:()=>{try{const _=document.querySelectorAll(".message.assistant");_.length>0?_[_.length-1].scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}):c.current&&c.current.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}catch(_){console.error("Error scrolling to last message:",_)}},children:""})]}),l.jsxs("form",{className:"input-row",onSubmit:Re,children:[l.jsx("input",{type:"text",placeholder:"Type your message",value:e.input,onChange:_=>e.setInput(_.target.value),onKeyDown:_=>{_.ctrlKey&&_.key==="Enter"&&Re(_)},disabled:e.sending,"aria-label":"Message input (Ctrl+Enter to send)","aria-describedby":"send-button"}),l.jsx("button",{type:"submit",id:"send-button",disabled:e.sending||!e.input.trim(),children:e.sending?l.jsxs("span",{className:"loading-text",children:[l.jsx("div",{className:"spinner"}),"Sending"]}):"Send"})]}),u&&l.jsx(wj,{character:f,lorebooks:o.lorebooks,onClose:()=>d(!1),onSave:async _=>{try{f?await r1(f.id,_):(Wt("No toolCalls array found, trying flat keys"),await cf(_)),o.loadCharacters(),d(!1)}catch(L){alert(L.message)}},onThink:async(_,L)=>{try{const W={...L};return typeof W.alternate_greetings=="string"&&(W.alternate_greetings=W.alternate_greetings.split(",").map(J=>J.trim()).filter(Boolean)),typeof W.tags=="string"&&(W.tags=W.tags.split(",").map(J=>J.trim()).filter(Boolean)),(await suggestCharacterField(_,W)).value}catch(W){return alert(W.message),""}}}),t.suggestOpen&&l.jsx(vj,{suggestions:m,onClose:()=>t.setSuggestOpen(!1),onApply:async(_,L)=>{try{const K=(await Zt()).active_lorebook_ids||[],J=L||K[0];if(!J){alert("No active lorebooks set");return}const pe=[];for(const le of _.filter(se=>se.include)){const se=await fetch(`${X}/lore`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:le.keyword,content:le.content})});if(se.ok){const ye=await se.json();pe.push(ye.id)}}if(pe.length){const se=[...(await(await fetch(`${X}/lorebooks/${J}`)).json()).entry_ids||[],...pe];await Bm(J,{entry_ids:se})}t.setSuggestOpen(!1)}catch(W){console.error(W),alert(W.message)}}}),p&&l.jsx("section",{className:"panel overlay",onClick:()=>y(!1),children:l.jsxs("div",{className:"dialog",onClick:_=>_.stopPropagation(),children:[l.jsx("h3",{children:"Enable Structured Output?"}),l.jsx("p",{className:"muted",children:"The assistant attempted to call a tool. Structured Output improves tool reliability on Gemini models."}),l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",onChange:_=>E(_.target.checked)})," Don't show again (this session)"]}),l.jsx("span",{style:{flex:1}}),l.jsx("button",{className:"secondary",onClick:()=>y(!1),children:"Cancel"}),l.jsx("button",{onClick:async()=>{try{await _t({structured_output:!0}),y(!1)}catch(_){alert(String(_))}},children:"Enable"})]})]})})]}),l.jsx("div",{className:"toast-container","aria-live":"assertive","aria-atomic":"true",children:k.map(_=>l.jsxs("div",{className:`toast toast-${_.type}`,children:[_.message,l.jsx("button",{className:"toast-close",onClick:()=>N(L=>L.filter(W=>W.id!==_.id)),"aria-label":"Dismiss notification",children:""})]},_.id))})]})}function fj(){var h;const[e,t]=S.useState({active:"pollinations",pollinations:{api_key:"",model:""},dezgo:{api_key:"",model:"",lora_flux_1:"",lora_flux_2:"",lora_sd1_1:"",lora_sd1_2:"",transparent:!1,width:"",height:"",steps:"",upscale:!1}}),[n,r]=S.useState([]),[o,s]=S.useState("");S.useEffect(()=>{(async()=>{var p,y;try{const x=await Zt();t(x.images);const E=await o1(x.images.active);r(E.models||[]);const m=a((y=(p=x.images)==null?void 0:p.dezgo)==null?void 0:y.model);s(m)}catch(x){console.error(x)}})()},[]);const i=async p=>{try{await _t({images:p})}catch(y){console.error(y),alert(y.message)}},a=p=>{const y=(p||"").toLowerCase();return y.includes("flux")?"flux":y.includes("lightning")?"sdxl_lightning":y.includes("sdxl")?"sdxl":"sd1"},c=a((h=e.dezgo)==null?void 0:h.model),u=o||c,d=[{id:"flux",label:"Flux"},{id:"sdxl",label:"SDXL"},{id:"sdxl_lightning",label:"SDXL Lightning"},{id:"sd1",label:"SD1"}],f=(n||[]).filter(p=>a(p)===u);return l.jsxs("div",{className:"config-form",children:[l.jsxs("label",{children:[l.jsx("span",{children:"Active Provider"}),l.jsxs("select",{value:e.active,onChange:async p=>{const y=p.target.value,x={...e,active:y};t(x),await i(x)},children:[l.jsx("option",{value:"pollinations",children:"Pollinations"}),l.jsx("option",{value:"dezgo",children:"Dezgo"})]})]}),e.active==="pollinations"&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{children:[l.jsx("span",{children:"Model"}),l.jsxs("select",{value:e.pollinations.model||"",onChange:async p=>{const y=p.target.value,x={...e,pollinations:{...e.pollinations,model:y}};t(x),await i(x)},children:[l.jsx("option",{value:"",children:"(default)"}),n.map(p=>l.jsx("option",{value:p,children:p},p))]})]}),l.jsxs("label",{children:[l.jsx("span",{children:"API Key"}),l.jsx("input",{placeholder:e.pollinations.api_key_masked?`Saved: ${e.pollinations.api_key_masked}`:"",value:e.pollinations.api_key||"",onChange:p=>t(y=>({...y,pollinations:{...y.pollinations,api_key:p.target.value}}))})]})]}),e.active==="dezgo"&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{children:[l.jsx("span",{children:"API Key"}),l.jsx("input",{placeholder:e.dezgo.api_key_masked?`Saved: ${e.dezgo.api_key_masked}`:"",value:e.dezgo.api_key||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,api_key:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Family"}),l.jsx("select",{value:u,onChange:p=>s(p.target.value),children:d.map(p=>l.jsx("option",{value:p.id,children:p.label},p.id))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Model"}),l.jsxs("select",{value:e.dezgo.model||"",onChange:p=>{const y=p.target.value,x=a(y),E={...e,dezgo:{...e.dezgo,model:y,steps:x==="flux"?4:x==="sdxl_lightning"?"":e.dezgo.steps||30}};t(E),i(E)},children:[l.jsx("option",{value:"",children:"(default)"}),f.map(p=>l.jsx("option",{value:p,children:p},p))]})]}),l.jsxs("div",{className:"muted",children:["Family: ",u.toUpperCase()]}),l.jsx("div",{className:"muted",children:u==="sd1"?"Transparent background disabled; Upscale available.":u==="sdxl_lightning"?"Steps disabled (Lightning is fixed).":"Transparent background available; consider steps ~30."}),u==="flux"&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{children:[l.jsx("span",{children:"Flux LORA #1 (SHA256)"}),l.jsx("input",{value:e.dezgo.lora_flux_1||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora_flux_1:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Flux LORA #2 (SHA256)"}),l.jsx("input",{value:e.dezgo.lora_flux_2||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora_flux_2:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"LoRA 1 Strength"}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_flux_1,value:e.dezgo.lora1_strength??.7,onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora1_strength:parseFloat(p.target.value)}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"LoRA 2 Strength"}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_flux_2,value:e.dezgo.lora2_strength??.7,onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora2_strength:parseFloat(p.target.value)}}))})]})]}),u==="sd1"&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{children:[l.jsx("span",{children:"SD1 LORA #1 (SHA256)"}),l.jsx("input",{value:e.dezgo.lora_sd1_1||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora_sd1_1:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"SD1 LORA #2 (SHA256)"}),l.jsx("input",{value:e.dezgo.lora_sd1_2||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora_sd1_2:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"LoRA 1 Strength"}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_sd1_1,value:e.dezgo.lora1_strength??.7,onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora1_strength:parseFloat(p.target.value)}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"LoRA 2 Strength"}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",disabled:!e.dezgo.lora_sd1_2,value:e.dezgo.lora2_strength??.7,onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,lora2_strength:parseFloat(p.target.value)}}))})]})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Width"}),l.jsx("input",{type:"number",value:e.dezgo.width||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,width:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Height"}),l.jsx("input",{type:"number",value:e.dezgo.height||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,height:p.target.value}}))})]}),u!=="sdxl_lightning"&&l.jsxs("label",{children:[l.jsx("span",{children:"Steps"}),l.jsx("input",{type:"number",value:e.dezgo.steps||"",onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,steps:p.target.value}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Transparent Background"}),l.jsx("input",{type:"checkbox",disabled:u==="sd1",checked:!!e.dezgo.transparent,onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,transparent:p.target.checked}}))})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Upscale"}),l.jsx("input",{type:"checkbox",disabled:u!=="sd1",checked:!!e.dezgo.upscale,onChange:p=>t(y=>({...y,dezgo:{...y.dezgo,upscale:p.target.checked}}))})]})]}),l.jsx("div",{className:"row",style:{gridColumn:"1 / -1"},children:l.jsx("button",{onClick:async()=>{try{const p=(await Zt()).images;if(JSON.stringify(e)!==JSON.stringify(p)&&!window.confirm("Images config.json will be updated. Proceed?"))return;await i(e),alert("Saved")}catch(p){console.error(p),alert(p.message)}},children:"Save Image Settings"})})]})}function hj(){const[e,t]=S.useState([]),[n,r]=S.useState([]),[o,s]=S.useState(""),[i,a]=S.useState({lore_suggest:"",image_summary:"",main:"",tool_call:""}),[c,u]=S.useState({}),[d,f]=S.useState(""),[h,p]=S.useState(""),[y,x]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const v=await g1();t(v.all||[]),r(v.active||[]),a(v.system||{lore_suggest:"",image_summary:""}),u(v.variables||{})}catch(v){console.error(v)}})()},[]);const E=async(v=e,k=n,N=i,b=c)=>{try{await y1({all:v,active:k,system:N,variables:b}),t(v),r(k),a(N),u(b)}catch($){console.error($),alert($.message)}},m=v=>{const k=n.includes(v)?n.filter(N=>N!==v):[...n,v];E(e,k)},g=()=>{const v=o.trim();if(!v)return;const k=[...e,v];s(""),E(k,n)},w=v=>{const k=e.filter(b=>b!==v),N=n.filter(b=>b!==v);E(k,N)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"config-form",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[l.jsxs("div",{style:{gridColumn:"1 / -1"},children:[l.jsx("h3",{children:"System Prompts"}),l.jsxs("div",{className:"muted",children:["These prompts guide built-in tools. ",l.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),x(!0)},children:"Use placeholders"}),"."]})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Main System Prompt"}),l.jsx("textarea",{rows:4,value:i.main||"",onChange:v=>a(k=>({...k,main:v.target.value})),onBlur:()=>E(e,n,{...i},c),placeholder:"{{tool_call_prompt}}, {{user_persona}}, {{character_description}}, {{tool_list}}, {{conversation}}"})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Tool Call Prompt"}),l.jsx("textarea",{rows:4,value:i.tool_call||"",onChange:v=>a(k=>({...k,tool_call:v.target.value})),onBlur:()=>E(e,n,{...i},c),placeholder:"Describe structured output JSON with toolCalls array."})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Lorebook suggestion prompt"}),l.jsx("textarea",{rows:4,value:i.lore_suggest,onChange:v=>a(k=>({...k,lore_suggest:v.target.value})),onBlur:()=>E(e,n,{...i},c),placeholder:"Use {{conversation}} and {{existing_keywords}}"})]}),l.jsxs("label",{children:[l.jsx("span",{children:"Image generation prompt"}),l.jsx("textarea",{rows:4,value:i.image_summary,onChange:v=>a(k=>({...k,image_summary:v.target.value})),onBlur:()=>E(e,n,{...i},c),placeholder:"Use {{conversation}}"})]}),l.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:8},children:[l.jsx("h3",{children:"Variables"}),l.jsxs("div",{className:"muted",children:["Define reusable snippets that replace tags like ",l.jsxs("code",{children:["{","{","company","}","}"]})," anywhere the LLM sees them."]})]}),l.jsxs("div",{className:"row",style:{gap:8},children:[l.jsx("input",{placeholder:"name (e.g., site)",value:d,onChange:v=>f(v.target.value)}),l.jsx("input",{placeholder:"value",value:h,onChange:v=>p(v.target.value)}),l.jsx("button",{className:"secondary",onClick:()=>{const v=d.trim();if(!v)return;const k={...c,[v]:h};f(""),p(""),E(e,n,i,k)},children:"Add"})]}),l.jsx("div",{className:"row",style:{display:"block",marginTop:8},children:Object.entries(c).map(([v,k])=>l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[l.jsx("code",{style:{width:160},children:`{{${v}}}`}),l.jsx("input",{style:{flex:1},value:k,onChange:N=>{const b={...c,[v]:N.target.value};u(b)},onBlur:()=>E(e,n,i,c)}),l.jsx("button",{className:"secondary",onClick:()=>{const N={...c};delete N[v],E(e,n,i,N)},children:"Delete"})]},v))}),l.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:8},children:[l.jsx("h3",{children:"General Prompts"}),l.jsx("div",{className:"muted",children:"Short, reusable prompts that can be toggled on to influence replies globally."})]}),l.jsxs("label",{children:[l.jsx("span",{children:"New Prompt"}),l.jsxs("div",{className:"row",style:{gap:8},children:[l.jsx("input",{value:o,onChange:v=>s(v.target.value),placeholder:"Short prompt text to include in system context"}),l.jsx("button",{className:"secondary",onClick:g,children:"Add"})]})]}),l.jsx("div",{className:"row",style:{display:"block"},children:(e||[]).map((v,k)=>l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[l.jsx("input",{type:"checkbox",checked:n.includes(v),onChange:()=>m(v)}),l.jsx("span",{style:{flex:1},children:v}),l.jsx("button",{className:"secondary",onClick:()=>w(v),children:"Delete"})]},k))})]}),y&&l.jsx("section",{className:"panel overlay",onClick:()=>x(!1),children:l.jsxs("div",{className:"dialog",onClick:v=>v.stopPropagation(),children:[l.jsx("h3",{children:"Available placeholders"}),l.jsxs("ul",{className:"muted",children:[l.jsxs("li",{children:[l.jsx("code",{children:"{{conversation}}"}),": recent conversation window"]}),l.jsxs("li",{children:[l.jsx("code",{children:"{{existing_keywords}}"}),": active lore keywords"]}),l.jsxs("li",{children:[l.jsx("code",{children:"{{tool_call_prompt}}"}),": tool call guidance"]}),l.jsxs("li",{children:[l.jsx("code",{children:"{{user_persona}}"}),": user persona summary"]}),l.jsxs("li",{children:[l.jsx("code",{children:"{{character_description}}"}),": character description/personality"]}),l.jsxs("li",{children:[l.jsx("code",{children:"{{tool_list}}"}),": enabled tools list"]}),Object.keys(c).map(v=>l.jsxs("li",{children:[l.jsx("code",{children:`{{${v}}}`}),": variable"]},v))]}),l.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:l.jsx("button",{className:"secondary",onClick:()=>x(!1),children:"Close"})})]})})]})}function pj({onClose:e}){var w,v;const[t,n]=S.useState({phone:!1,image_gen:!1,lore_suggest:!1}),[r,o]=S.useState(!1),[s,i]=S.useState(!1),[a,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState(""),[p,y]=S.useState(""),[x,E]=S.useState("");S.useEffect(()=>{(async()=>{try{const k=await Zt();o(!!k.structured_output);const N=k.active_character_id,b=await(await fetch(`${X}/tools/settings${N?`?character_id=${N}`:""}`)).json();n(b.enabled||{})}catch(k){console.error(k)}})()},[]);const m=async k=>{try{const b=(await Zt()).active_character_id;await fetch(`${X}/tools/settings${b?`?character_id=${b}`:""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:k})}),n(k),!s&&(k.phone||k.image_gen||k.lore_suggest)&&!r&&(alert("Enabling tools benefits from Structured Output. You can toggle it in Connection settings."),i(!0))}catch(N){console.error(N),alert("Save failed")}};S.useEffect(()=>{(async()=>{try{const k=await x1();c(k.servers||[]);const N=await S1();d(N.items||[])}catch(k){console.error(k)}})()},[]);const g=async k=>{try{await w1({servers:k}),c(k)}catch(N){console.error(N),alert("Save failed")}};return l.jsxs("div",{className:"config-form",children:[l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:!!t.phone,onChange:k=>m({...t,phone:k.target.checked})}),"Phone Panel ",l.jsx("em",{children:"(phone_url)"})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:!!t.image_gen,onChange:k=>m({...t,image_gen:k.target.checked})}),"Image Generation ",l.jsx("em",{children:"(image_request)"})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:!!t.lore_suggest,onChange:k=>m({...t,lore_suggest:k.target.checked})}),"Lore Suggest ",l.jsx("em",{children:"(lore_suggestions)"})]})]}),l.jsx("p",{className:"muted",style:{marginTop:12},children:'When tools are enabled, the assistant receives concise instructions about each tool. For Gemini models, enable "Structured Output" in Connection to get reliable tool-usage responses.'}),l.jsx("hr",{}),l.jsx("h3",{children:"MCP Servers"}),l.jsxs("label",{children:[l.jsx("span",{children:"Catalog"}),l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[l.jsxs("select",{value:f,onChange:k=>h(k.target.value),children:[l.jsx("option",{value:"",children:"(select server)"}),u.map((k,N)=>l.jsx("option",{value:N,children:k.name},N))]}),f!==""&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"secondary",onClick:()=>{const k=u[parseInt(f,10)];if(!k)return;const N=[...a,{name:k.name,url:k.url}];g(N)},children:"Add Server"}),l.jsx("a",{className:"secondary",href:(w=u[parseInt(f,10)])==null?void 0:w.url,target:"_blank",rel:"noreferrer",children:"Open"})]})]}),f!==""&&l.jsx("div",{className:"muted",style:{marginTop:6},children:(v=u[parseInt(f,10)])==null?void 0:v.description})]}),l.jsxs("div",{className:"row",style:{gap:8},children:[l.jsx("input",{placeholder:"Name",value:p,onChange:k=>y(k.target.value)}),l.jsx("input",{placeholder:"URL or command",value:x,onChange:k=>E(k.target.value)}),l.jsx("button",{onClick:()=>{const k=p.trim(),N=x.trim();if(!k||!N)return;const b=[...a,{name:k,url:N}];g(b),y(""),E("")},children:"Add"})]}),l.jsx("div",{style:{marginTop:8},children:a.map((k,N)=>l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginBottom:6,padding:8,background:"var(--panel)",borderRadius:8},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{style:{fontSize:14},children:k.name}),l.jsx("button",{className:"secondary",onClick:()=>{const b=a.filter(($,T)=>T!==N);g(b)},children:"Remove"})]}),l.jsx("div",{className:"muted",style:{fontSize:12,wordBreak:"break-all"},children:k.url})]},N))}),l.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:l.jsx("button",{className:"secondary",onClick:e,children:"Close"})})]})}function mj(){const[e,t]=S.useState(""),[n,r]=S.useState(!0),[o,s]=S.useState(null);return S.useEffect(()=>{(async()=>{try{r(!0);const i=await fetch(`${X}/config/raw`);if(!i.ok)throw new Error(`HTTP ${i.status}`);const a=await i.json();t(JSON.stringify(a,null,2))}catch(i){console.error(i),s(String(i)),t("")}finally{r(!1)}})()},[]),l.jsxs("div",{children:[l.jsx("p",{className:"muted",children:"Full settings.json (copy/share):"}),n?l.jsx("div",{className:"muted",children:"Loading settings"}):o?l.jsxs("div",{className:"muted",children:["Unable to load settings: ",o]}):l.jsx("textarea",{rows:16,style:{width:"100%"},value:e,onChange:i=>t(i.target.value)}),l.jsxs("div",{className:"row",style:{marginTop:8},children:[l.jsx("button",{className:"secondary",onClick:()=>{const i=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(i),c=document.createElement("a");c.href=a,c.download="settings.json",c.click(),URL.revokeObjectURL(a)},children:"Export settings.json"}),l.jsxs("label",{className:"secondary",style:{padding:"8px 10px",borderRadius:6,cursor:"pointer"},children:["Import settings.json",l.jsx("input",{type:"file",accept:"application/json,.json",style:{display:"none"},onChange:async i=>{var c;const a=(c=i.target.files)==null?void 0:c[0];if(a)try{const u=await a.text(),d=JSON.parse(u);if(!(await fetch(`${X}/config/raw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok)throw new Error("Import failed");alert("Imported. Reloading..."),location.reload()}catch(u){console.error(u),alert(u.message)}finally{i.target.value=""}}})]}),l.jsx("button",{onClick:async()=>{try{const i=JSON.parse(e);if(!(await fetch(`${X}/config/raw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw new Error("Save failed");alert("Saved. Reloading..."),location.reload()}catch(i){console.error(i),alert(i.message)}},children:"Save settings.json"})]}),l.jsx("hr",{}),l.jsx("p",{className:"muted",children:"Advanced settings"})]})}function gj(){const[e,t]=S.useState([]),[n,r]=S.useState("");S.useState(null);const o=async()=>{try{const s=await fetch(`${X}/themes`);if(s.ok){const i=await s.json();t(i.names||[])}}catch(s){console.error(s)}};return S.useEffect(()=>{o()},[]),l.jsxs("div",{className:"row",style:{gap:8},children:[l.jsxs("select",{value:n,onChange:s=>r(s.target.value),children:[l.jsx("option",{value:"",children:"(select)"}),e.map(s=>l.jsx("option",{value:s,children:s},s))]}),l.jsx("button",{className:"secondary",onClick:async()=>{if(n)try{const s=await fetch(`${X}/themes/${n}`);if(!s.ok)throw new Error("Load failed");const i=await s.json();await fetch(`${X}/config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:i})});try{const a=document.documentElement;a.style.setProperty("--primary",i.primary),a.style.setProperty("--panel",i.secondary),a.style.setProperty("--text",i.text1),a.style.setProperty("--muted",i.text2),a.style.setProperty("--assistant",i.highlight),a.style.setProperty("--bg",i.lowlight)}catch(a){console.error(a)}alert("Theme loaded")}catch(s){console.error(s),alert(s.message)}},children:"Load Theme"}),l.jsx("button",{onClick:async()=>{const s=prompt("Save theme as:");if(s)try{const a=(await Zt()).theme||{};if(!(await fetch(`${X}/themes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,theme:a})})).ok)throw new Error("Save theme failed");alert("Theme saved"),o()}catch(i){console.error(i),alert(i.message)}},children:"Save Current Theme"})]})}function yj(){const[e,t]=S.useState({primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827",phone_style:"classic",background_animations:[]}),[n,r]=S.useState([{name:"Default",theme:{primary:"#2563eb",secondary:"#374151",text1:"#e5e7eb",text2:"#cbd5e1",highlight:"#10b981",lowlight:"#111827"}},{name:"Dark",theme:{primary:"#8b5cf6",secondary:"#1f2937",text1:"#f9fafb",text2:"#d1d5db",highlight:"#f59e0b",lowlight:"#111827"}},{name:"Light",theme:{primary:"#3b82f6",secondary:"#f3f4f6",text1:"#111827",text2:"#6b7280",highlight:"#059669",lowlight:"#f9fafb"}},{name:"Forest",theme:{primary:"#059669",secondary:"#064e3b",text1:"#ecfdf5",text2:"#a7f3d0",highlight:"#f59e0b",lowlight:"#022c22"}},{name:"Ocean",theme:{primary:"#0891b2",secondary:"#164e63",text1:"#ecfeff",text2:"#a5f3fc",highlight:"#f97316",lowlight:"#0c4a6e"}},{name:"Rose",theme:{primary:"#db2777",secondary:"#5b21b6",text1:"#fef2f2",text2:"#fecaca",highlight:"#eab308",lowlight:"#581c87"}}]);S.useEffect(()=>{(async()=>{try{const u=await Zt();u.theme&&t(u.theme)}catch(u){console.error(u)}})()},[]),S.useEffect(()=>{const u=document.documentElement;u.style.setProperty("--primary",e.primary),u.style.setProperty("--panel",e.secondary),u.style.setProperty("--text",e.text1),u.style.setProperty("--muted",e.text2),u.style.setProperty("--assistant",e.highlight),u.style.setProperty("--bg",e.lowlight)},[e]);const o=async u=>{t(u);try{await _t({theme:u});try{window.dispatchEvent(new CustomEvent("coolchat:themeUpdate",{detail:u}))}catch{}}catch(d){console.error(d),alert(d.message)}},s=async()=>{try{const u=await fetch(`${X}/theme/suggest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({primary:e.primary})});if(!u.ok)throw new Error("Suggest failed");const{colors:d}=await u.json();if(d.length>=5){const f={...e,secondary:d[0],text1:d[1],text2:d[2],highlight:d[3],lowlight:d[4]};await o(f)}}catch(u){console.error(u),alert(u.message)}},i=async u=>{await o({...e,...u.theme})},a=async()=>{const u={...e,secondary:e.lowlight,lowlight:e.secondary,text1:e.text1,text2:e.text2};await o(u)},c=({label:u,keyName:d,withThink:f})=>l.jsxs("label",{children:[l.jsx("span",{children:u}),l.jsxs("div",{className:"row color-row",style:{gap:8,alignItems:"center"},children:[l.jsx("input",{className:"color-swatch",type:"color",value:e[d],onChange:async h=>{await o({...e,[d]:h.target.value})}}),l.jsx("input",{style:{flex:1},value:e[d],onChange:async h=>{await o({...e,[d]:h.target.value})}}),f&&l.jsx("button",{className:"think",title:"AI suggests complementary colors for this primary",onClick:s,children:""})]})]});return l.jsxs("div",{className:"config-form",children:[l.jsxs("div",{className:"theme-preview",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16,padding:12,background:"var(--panel)",borderRadius:8,border:"1px solid var(--muted)"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{background:"var(--primary)",width:40,height:20,borderRadius:4,margin:"0 auto 8px"}}),l.jsx("small",{style:{color:"var(--text)"},children:"Primary"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{background:"var(--bg)",width:40,height:20,borderRadius:4,border:"1px solid var(--secondary)",margin:"0 auto 8px"}}),l.jsx("small",{style:{color:"var(--text)"},children:"Background"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{background:"var(--panel)",width:40,height:20,borderRadius:4,border:"1px solid var(--muted)",margin:"0 auto 8px"}}),l.jsx("small",{style:{color:"var(--text)"},children:"Panel"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{background:"var(--assistant)",width:40,height:20,borderRadius:4,margin:"0 auto 8px"}}),l.jsx("small",{style:{color:"var(--text)"},children:"Assistant"})]})]}),l.jsxs("label",{style:{gridColumn:"1 / -1"},children:[l.jsx("span",{children:"Preset Themes"}),l.jsxs("div",{className:"row",style:{gap:6,flexWrap:"wrap",marginTop:6},children:[n.map((u,d)=>l.jsx("button",{className:"secondary theme-btn",style:{background:`linear-gradient(45deg, ${u.theme.primary}, ${u.theme.secondary})`,color:u.theme.text1,border:"none",borderRadius:6,padding:"6px 12px",fontSize:12,cursor:"pointer"},onClick:()=>i(u),title:`Apply ${u.name} theme`,children:u.name},d)),l.jsx("button",{className:"secondary",onClick:a,title:"Swap background colors for high contrast",children:" Invert BG"})]})]}),l.jsx(c,{label:"Primary",keyName:"primary",withThink:!0}),l.jsx(c,{label:"Secondary",keyName:"secondary"}),l.jsx(c,{label:"Text 1",keyName:"text1"}),l.jsx(c,{label:"Text 2",keyName:"text2"}),l.jsx(c,{label:"Highlight",keyName:"highlight"}),l.jsx(c,{label:"Lowlight",keyName:"lowlight"}),l.jsxs("label",{children:[l.jsx("span",{children:"Phone Style"}),l.jsxs("select",{value:e.phone_style||"classic",onChange:async u=>{const d={...e,phone_style:u.target.value};await o(d);try{window.dispatchEvent(new CustomEvent("coolchat:phoneStyle",{detail:d.phone_style}))}catch{}},children:[l.jsx("option",{value:"classic",children:"Classic"}),l.jsx("option",{value:"modern",children:"Modern"}),l.jsx("option",{value:"iphone",children:"iPhone"}),l.jsx("option",{value:"cyberpunk",children:"Cyberpunk"})]})]}),l.jsxs("label",{style:{gridColumn:"1 / -1"},children:[l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:["Background Animations",l.jsx("small",{style:{color:"var(--muted)",fontWeight:"normal"},children:"(Multiple allowed)"})]}),l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center",marginBottom:6},children:[l.jsxs("select",{id:"anim-select",style:{flex:1},children:[l.jsx("option",{value:"gradient_flow",children:"Gradient Flow"}),l.jsx("option",{value:"floating_squares",children:"Floating Squares"}),l.jsx("option",{value:"waves",children:"Ocean Waves"}),l.jsx("option",{value:"neon_rain",children:"Neon Rain"}),l.jsx("option",{value:"matrix",children:"Matrix Code"}),l.jsx("option",{value:"particles",children:"Floating Particles"}),l.jsx("option",{value:"geometric",children:"Geometric Shapes"})]}),l.jsx("button",{className:"secondary",onClick:()=>{try{const u=document.querySelector("#anim-select"),d=u==null?void 0:u.value;if(!d||d==="")return;const f=Array.isArray(e.background_animations)?[...e.background_animations]:[];!f.includes(d)&&f.length<3?o({...e,background_animations:[...f,d]}):f.length>=3&&alert("Maximum 3 background animations allowed")}catch(u){console.error(u)}},children:"+ Add"})]}),l.jsx("div",{className:"row",style:{gap:6,flexWrap:"wrap"},children:(e.background_animations||[]).map((u,d)=>l.jsxs("span",{className:"tag",style:{padding:"4px 8px",borderRadius:12,background:"var(--panel)",border:"1px solid var(--muted)",fontSize:12,display:"flex",alignItems:"center",gap:4},children:[u,l.jsx("button",{className:"remove-tag",onClick:()=>{const f=(e.background_animations||[]).filter(h=>h!==u);o({...e,background_animations:f})},style:{border:"none",background:"transparent",color:"var(--muted)",cursor:"pointer",fontSize:14,lineHeight:1},children:""})]},d))})]}),l.jsx("hr",{}),l.jsxs("div",{style:{gridColumn:"1 / -1"},children:[l.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{children:l.jsx("strong",{children:"Saved Themes"})}),l.jsx("button",{className:"secondary",onClick:async()=>{const u=prompt("Export current theme as:");u&&u.trim()&&(await fetch(`${X}/themes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.trim(),theme:{...e}})}),alert("Theme exported: "+u.trim()))},title:"Export current theme to saved themes",children:" Export"})]}),l.jsx("div",{style:{marginTop:8},children:l.jsx(gj,{})})]})]})}function vj({suggestions:e,onClose:t,onApply:n}){console.log("[DEBUG] SuggestLoreModal received suggestions:",e);const[r,o]=S.useState(()=>(e||[]).map(u=>({include:!0,keyword:u.keyword||"",content:u.content||""})));console.log("[DEBUG] SuggestLoreModal rows initialized:",r);const[s,i]=S.useState([]),[a,c]=S.useState("");return S.useEffect(()=>{(async()=>{var u;try{const f=(await Zt()).active_lorebook_ids||[];if(f.length){const p=(await Nu()).filter(y=>f.includes(y.id)).map(y=>({id:y.id,name:y.name}));i(p),c(String(((u=p[0])==null?void 0:u.id)||""))}}catch(d){console.error(d)}})()},[]),l.jsxs("section",{className:"panel overlay",children:[l.jsx("h2",{children:"Lore Suggestions"}),s.length>1&&l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[l.jsx("span",{className:"muted",children:"Target Lorebook"}),l.jsx("select",{value:a,onChange:u=>c(u.target.value),children:s.map(u=>l.jsx("option",{value:u.id,children:u.name},u.id))})]}),l.jsx("div",{className:"char-list",style:{maxHeight:360,overflow:"auto"},children:r.map((u,d)=>l.jsxs("div",{className:"char-item",style:{flexDirection:"column",alignItems:"stretch"},children:[l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[l.jsx("input",{type:"checkbox",checked:u.include,onChange:f=>o(h=>h.map((p,y)=>y===d?{...p,include:f.target.checked}:p))}),l.jsx("input",{placeholder:"Keyword",value:u.keyword,onChange:f=>o(h=>h.map((p,y)=>y===d?{...p,keyword:f.target.value}:p))})]}),l.jsx("textarea",{rows:3,placeholder:"Content",value:u.content,onChange:f=>o(h=>h.map((p,y)=>y===d?{...p,content:f.target.value}:p))})]},d))}),l.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:8},children:[l.jsx("button",{className:"secondary",onClick:t,children:"Cancel"}),l.jsx("button",{onClick:()=>n(r,a?parseInt(a,10):null),children:"Add Selected"})]})]})}function xj({sessionId:e,setSessionId:t,onClose:n}){const[r,o]=S.useState([]),[s,i]=S.useState(""),a=async()=>{try{const c=await Um();o(c.sessions||[])}catch(c){console.error(c)}};return S.useEffect(()=>{a()},[]),l.jsxs("div",{className:"config-form",children:[l.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[l.jsx("select",{value:e,onChange:async c=>{const u=c.target.value;t(u)},children:[...r].map(c=>l.jsx("option",{value:c,children:c},c))}),l.jsx("button",{className:"secondary",onClick:a,children:"Refresh"}),l.jsx("button",{className:"secondary",onClick:async()=>{try{await Hm(e),await a(),t("default")}catch(c){alert(c.message)}},children:"Reset"}),l.jsx("button",{className:"secondary",onClick:n,children:"Close"})]}),l.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[l.jsx("input",{placeholder:"New session id (e.g., 2025-01-01T12:00)",value:s,onChange:c=>i(c.target.value),style:{flex:1}}),l.jsx("button",{onClick:async()=>{const c=(s||"").trim()||String(Date.now());r.includes(c)||o(u=>[...u,c]),t(c),i("")},children:"New"})]})]})}function wj({character:e,onClose:t,onSave:n,onThink:r,lorebooks:o}){const[s,i]=S.useState(()=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",avatar_url:(e==null?void 0:e.avatar_url)||"",first_message:(e==null?void 0:e.first_message)||"",alternate_greetings:((e==null?void 0:e.alternate_greetings)||[]).join(", "),scenario:(e==null?void 0:e.scenario)||"",system_prompt:(e==null?void 0:e.system_prompt)||"",personality:(e==null?void 0:e.personality)||"",mes_example:(e==null?void 0:e.mes_example)||"",creator_notes:(e==null?void 0:e.creator_notes)||"",tags:((e==null?void 0:e.tags)||[]).join(", "),post_history_instructions:(e==null?void 0:e.post_history_instructions)||"",lorebook_ids:(e==null?void 0:e.lorebook_ids)||[],image_prompt_prefix:(e==null?void 0:e.image_prompt_prefix)||"",image_prompt_suffix:(e==null?void 0:e.image_prompt_suffix)||""})),[a,c]=S.useState(null),[u,d]=S.useState(!1),[f,h]=S.useState(!1),p=async y=>{try{c(y);const x=await r(y,s);i(E=>({...E,[y]:x}))}finally{c(null)}};return l.jsx("div",{className:"modal",onClick:t,children:l.jsxs("div",{className:"dialog",onClick:y=>y.stopPropagation(),children:[l.jsx("h2",{children:e?"Edit Character":"New Character"}),l.jsxs("div",{className:"editor-grid",children:[l.jsx("span",{className:"label",children:"Name"}),l.jsxs("div",{children:[l.jsx("input",{value:s.name,onChange:y=>i(x=>({...x,name:y.target.value}))})," ",l.jsx("button",{className:"think",onClick:()=>p("name"),children:""})]}),l.jsx("span",{className:"label",children:"Avatar"}),l.jsxs("div",{children:[s.avatar_url&&l.jsx("img",{src:s.avatar_url,alt:"Avatar preview",style:{width:80,height:80,objectFit:"cover",borderRadius:8,marginRight:8,border:"1px solid #1f2937"}}),l.jsx("input",{type:"file",accept:"image/*",onChange:async y=>{var E;const x=(E=y.target.files)==null?void 0:E[0];if(x)try{h(!0);const m=new FormData;m.append("file",x);const g=await fetch(`${X}/characters/upload_avatar`,{method:"POST",body:m});if(!g.ok)throw new Error("Upload failed");const w=await g.json();i(v=>({...v,avatar_url:w.avatar_url}))}catch(m){alert(m.message)}finally{h(!1),y.target.value=""}}}),l.jsx("button",{className:`paint ${u?"thinking":""}`,onClick:async()=>{try{d(!0);const y=await fetch(`${X}/characters/generate_avatar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({character:s})});if(!y.ok)throw new Error("Generate failed");const x=await y.json();i(E=>({...E,avatar_url:x.avatar_url}))}catch(y){alert(y.message)}finally{d(!1)}},children:""})]}),l.jsx("span",{className:"label",children:"Description"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.description,onChange:y=>i(x=>({...x,description:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="description"?"thinking":""}`,onClick:()=>p("description"),children:""})]}),l.jsx("span",{className:"label",children:"First Message"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.first_message,onChange:y=>i(x=>({...x,first_message:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="first_message"?"thinking":""}`,onClick:()=>p("first_message"),children:""})]}),l.jsx("span",{className:"label",children:"Alternate Greetings (comma)"}),l.jsxs("div",{children:[l.jsx("input",{value:s.alternate_greetings,onChange:y=>i(x=>({...x,alternate_greetings:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="alternate_greetings"?"thinking":""}`,onClick:()=>p("alternate_greetings"),children:""})]}),l.jsx("span",{className:"label",children:"Scenario"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.scenario,onChange:y=>i(x=>({...x,scenario:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="scenario"?"thinking":""}`,onClick:()=>p("scenario"),children:""})]}),l.jsx("span",{className:"label",children:"System Prompt"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.system_prompt,onChange:y=>i(x=>({...x,system_prompt:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="system_prompt"?"thinking":""}`,onClick:()=>p("system_prompt"),children:""})]}),l.jsx("span",{className:"label",children:"Personality"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.personality,onChange:y=>i(x=>({...x,personality:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="personality"?"thinking":""}`,onClick:()=>p("personality"),children:""})]}),l.jsx("span",{className:"label",children:"Message Example"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.mes_example,onChange:y=>i(x=>({...x,mes_example:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="mes_example"?"thinking":""}`,onClick:()=>p("mes_example"),children:""})]}),l.jsx("span",{className:"label",children:"Creator Notes"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.creator_notes,onChange:y=>i(x=>({...x,creator_notes:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="creator_notes"?"thinking":""}`,onClick:()=>p("creator_notes"),children:""})]}),l.jsx("span",{className:"label",children:"Prepend to image prompts"}),l.jsxs("div",{children:[l.jsx("input",{value:s.image_prompt_prefix,onChange:y=>i(x=>({...x,image_prompt_prefix:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="image_prompt_prefix"?"thinking":""}`,onClick:()=>p("image_prompt_prefix"),children:""})]}),l.jsx("span",{className:"label",children:"Append to image prompts"}),l.jsxs("div",{children:[l.jsx("input",{value:s.image_prompt_suffix,onChange:y=>i(x=>({...x,image_prompt_suffix:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="image_prompt_suffix"?"thinking":""}`,onClick:()=>p("image_prompt_suffix"),children:""})]}),l.jsx("span",{className:"label",children:"Tags (comma)"}),l.jsx("div",{children:l.jsx("input",{value:s.tags,onChange:y=>i(x=>({...x,tags:y.target.value}))})}),l.jsx("span",{className:"label",children:"Post-History Instructions"}),l.jsxs("div",{children:[l.jsx("textarea",{rows:3,value:s.post_history_instructions,onChange:y=>i(x=>({...x,post_history_instructions:y.target.value}))})," ",l.jsx("button",{className:`think ${a==="post_history_instructions"?"thinking":""}`,onClick:()=>p("post_history_instructions"),children:""})]}),l.jsx("span",{className:"label",children:"Lorebook"}),l.jsx("div",{children:l.jsxs("select",{value:s.lorebook_ids[0]||"",onChange:y=>{const x=y.target.value?[parseInt(y.target.value,10)]:[];i(E=>({...E,lorebook_ids:x}))},children:[l.jsx("option",{value:"",children:"-- None --"}),o.map(y=>l.jsx("option",{value:y.id,children:y.name},y.id))]})})]}),l.jsxs("div",{className:"row",style:{justifyContent:"flex-end",marginTop:12},children:[l.jsx("button",{className:"secondary",onClick:t,children:"Cancel"}),l.jsx("button",{onClick:()=>{const y={...s,alternate_greetings:s.alternate_greetings.split(",").map(x=>x.trim()).filter(Boolean),tags:s.tags.split(",").map(x=>x.trim()).filter(Boolean)};n(y)},children:"Save"})]})]})})}function Sj(){return l.jsx(xw,{children:l.jsx(Lm,{path:"/",element:l.jsx(dj,{})})})}pa.createRoot(document.getElementById("root")).render(l.jsx(O.StrictMode,{children:l.jsx(Hw,{children:l.jsx(Sj,{})})}));
